/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"app/main": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/app/main.ts","app/vendor"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./jslib/src/abstractions/api.service.ts":
/*!***********************************************!*\
  !*** ./jslib/src/abstractions/api.service.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ApiService = /** @class */ (function () {
    function ApiService() {
    }
    return ApiService;
}());
exports.ApiService = ApiService;


/***/ }),

/***/ "./jslib/src/abstractions/audit.service.ts":
/*!*************************************************!*\
  !*** ./jslib/src/abstractions/audit.service.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AuditService = /** @class */ (function () {
    function AuditService() {
    }
    return AuditService;
}());
exports.AuditService = AuditService;


/***/ }),

/***/ "./jslib/src/abstractions/auth.service.ts":
/*!************************************************!*\
  !*** ./jslib/src/abstractions/auth.service.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AuthService = /** @class */ (function () {
    function AuthService() {
    }
    return AuthService;
}());
exports.AuthService = AuthService;


/***/ }),

/***/ "./jslib/src/abstractions/cipher.service.ts":
/*!**************************************************!*\
  !*** ./jslib/src/abstractions/cipher.service.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CipherService = /** @class */ (function () {
    function CipherService() {
    }
    return CipherService;
}());
exports.CipherService = CipherService;


/***/ }),

/***/ "./jslib/src/abstractions/collection.service.ts":
/*!******************************************************!*\
  !*** ./jslib/src/abstractions/collection.service.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CollectionService = /** @class */ (function () {
    function CollectionService() {
    }
    return CollectionService;
}());
exports.CollectionService = CollectionService;


/***/ }),

/***/ "./jslib/src/abstractions/crypto.service.ts":
/*!**************************************************!*\
  !*** ./jslib/src/abstractions/crypto.service.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CryptoService = /** @class */ (function () {
    function CryptoService() {
    }
    return CryptoService;
}());
exports.CryptoService = CryptoService;


/***/ }),

/***/ "./jslib/src/abstractions/environment.service.ts":
/*!*******************************************************!*\
  !*** ./jslib/src/abstractions/environment.service.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EnvironmentService = /** @class */ (function () {
    function EnvironmentService() {
    }
    return EnvironmentService;
}());
exports.EnvironmentService = EnvironmentService;


/***/ }),

/***/ "./jslib/src/abstractions/export.service.ts":
/*!**************************************************!*\
  !*** ./jslib/src/abstractions/export.service.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ExportService = /** @class */ (function () {
    function ExportService() {
    }
    return ExportService;
}());
exports.ExportService = ExportService;


/***/ }),

/***/ "./jslib/src/abstractions/folder.service.ts":
/*!**************************************************!*\
  !*** ./jslib/src/abstractions/folder.service.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FolderService = /** @class */ (function () {
    function FolderService() {
    }
    return FolderService;
}());
exports.FolderService = FolderService;


/***/ }),

/***/ "./jslib/src/abstractions/i18n.service.ts":
/*!************************************************!*\
  !*** ./jslib/src/abstractions/i18n.service.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var I18nService = /** @class */ (function () {
    function I18nService() {
    }
    return I18nService;
}());
exports.I18nService = I18nService;


/***/ }),

/***/ "./jslib/src/abstractions/lock.service.ts":
/*!************************************************!*\
  !*** ./jslib/src/abstractions/lock.service.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var LockService = /** @class */ (function () {
    function LockService() {
    }
    return LockService;
}());
exports.LockService = LockService;


/***/ }),

/***/ "./jslib/src/abstractions/messaging.service.ts":
/*!*****************************************************!*\
  !*** ./jslib/src/abstractions/messaging.service.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var MessagingService = /** @class */ (function () {
    function MessagingService() {
    }
    return MessagingService;
}());
exports.MessagingService = MessagingService;


/***/ }),

/***/ "./jslib/src/abstractions/passwordGeneration.service.ts":
/*!**************************************************************!*\
  !*** ./jslib/src/abstractions/passwordGeneration.service.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var PasswordGenerationService = /** @class */ (function () {
    function PasswordGenerationService() {
    }
    return PasswordGenerationService;
}());
exports.PasswordGenerationService = PasswordGenerationService;


/***/ }),

/***/ "./jslib/src/abstractions/platformUtils.service.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/abstractions/platformUtils.service.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var PlatformUtilsService = /** @class */ (function () {
    function PlatformUtilsService() {
    }
    return PlatformUtilsService;
}());
exports.PlatformUtilsService = PlatformUtilsService;


/***/ }),

/***/ "./jslib/src/abstractions/settings.service.ts":
/*!****************************************************!*\
  !*** ./jslib/src/abstractions/settings.service.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SettingsService = /** @class */ (function () {
    function SettingsService() {
    }
    return SettingsService;
}());
exports.SettingsService = SettingsService;


/***/ }),

/***/ "./jslib/src/abstractions/state.service.ts":
/*!*************************************************!*\
  !*** ./jslib/src/abstractions/state.service.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var StateService = /** @class */ (function () {
    function StateService() {
    }
    return StateService;
}());
exports.StateService = StateService;


/***/ }),

/***/ "./jslib/src/abstractions/storage.service.ts":
/*!***************************************************!*\
  !*** ./jslib/src/abstractions/storage.service.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var StorageService = /** @class */ (function () {
    function StorageService() {
    }
    return StorageService;
}());
exports.StorageService = StorageService;


/***/ }),

/***/ "./jslib/src/abstractions/sync.service.ts":
/*!************************************************!*\
  !*** ./jslib/src/abstractions/sync.service.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SyncService = /** @class */ (function () {
    function SyncService() {
    }
    return SyncService;
}());
exports.SyncService = SyncService;


/***/ }),

/***/ "./jslib/src/abstractions/token.service.ts":
/*!*************************************************!*\
  !*** ./jslib/src/abstractions/token.service.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TokenService = /** @class */ (function () {
    function TokenService() {
    }
    return TokenService;
}());
exports.TokenService = TokenService;


/***/ }),

/***/ "./jslib/src/abstractions/totp.service.ts":
/*!************************************************!*\
  !*** ./jslib/src/abstractions/totp.service.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TotpService = /** @class */ (function () {
    function TotpService() {
    }
    return TotpService;
}());
exports.TotpService = TotpService;


/***/ }),

/***/ "./jslib/src/abstractions/user.service.ts":
/*!************************************************!*\
  !*** ./jslib/src/abstractions/user.service.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var UserService = /** @class */ (function () {
    function UserService() {
    }
    return UserService;
}());
exports.UserService = UserService;


/***/ }),

/***/ "./jslib/src/angular/components/add-edit.component.ts":
/*!************************************************************!*\
  !*** ./jslib/src/angular/components/add-edit.component.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var cipherType_1 = __webpack_require__(/*! ../../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var fieldType_1 = __webpack_require__(/*! ../../enums/fieldType */ "./jslib/src/enums/fieldType.ts");
var secureNoteType_1 = __webpack_require__(/*! ../../enums/secureNoteType */ "./jslib/src/enums/secureNoteType.ts");
var uriMatchType_1 = __webpack_require__(/*! ../../enums/uriMatchType */ "./jslib/src/enums/uriMatchType.ts");
var cardView_1 = __webpack_require__(/*! ../../models/view/cardView */ "./jslib/src/models/view/cardView.ts");
var cipherView_1 = __webpack_require__(/*! ../../models/view/cipherView */ "./jslib/src/models/view/cipherView.ts");
var fieldView_1 = __webpack_require__(/*! ../../models/view/fieldView */ "./jslib/src/models/view/fieldView.ts");
var identityView_1 = __webpack_require__(/*! ../../models/view/identityView */ "./jslib/src/models/view/identityView.ts");
var loginUriView_1 = __webpack_require__(/*! ../../models/view/loginUriView */ "./jslib/src/models/view/loginUriView.ts");
var loginView_1 = __webpack_require__(/*! ../../models/view/loginView */ "./jslib/src/models/view/loginView.ts");
var secureNoteView_1 = __webpack_require__(/*! ../../models/view/secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
var AddEditComponent = /** @class */ (function () {
    function AddEditComponent(cipherService, folderService, i18nService, platformUtilsService, analytics, toasterService, auditService, stateService) {
        this.cipherService = cipherService;
        this.folderService = folderService;
        this.i18nService = i18nService;
        this.platformUtilsService = platformUtilsService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.auditService = auditService;
        this.stateService = stateService;
        this.folderId = null;
        this.onSavedCipher = new core_1.EventEmitter();
        this.onDeletedCipher = new core_1.EventEmitter();
        this.onCancelled = new core_1.EventEmitter();
        this.onEditAttachments = new core_1.EventEmitter();
        this.onGeneratePassword = new core_1.EventEmitter();
        this.editMode = false;
        this.showPassword = false;
        this.showCardCode = false;
        this.cipherType = cipherType_1.CipherType;
        this.fieldType = fieldType_1.FieldType;
        this.addFieldType = fieldType_1.FieldType.Text;
        this.typeOptions = [
            { name: i18nService.t('typeLogin'), value: cipherType_1.CipherType.Login },
            { name: i18nService.t('typeCard'), value: cipherType_1.CipherType.Card },
            { name: i18nService.t('typeIdentity'), value: cipherType_1.CipherType.Identity },
            { name: i18nService.t('typeSecureNote'), value: cipherType_1.CipherType.SecureNote },
        ];
        this.cardBrandOptions = [
            { name: '-- ' + i18nService.t('select') + ' --', value: null },
            { name: 'Visa', value: 'Visa' },
            { name: 'Mastercard', value: 'Mastercard' },
            { name: 'American Express', value: 'Amex' },
            { name: 'Discover', value: 'Discover' },
            { name: 'Diners Club', value: 'Diners Club' },
            { name: 'JCB', value: 'JCB' },
            { name: 'Maestro', value: 'Maestro' },
            { name: 'UnionPay', value: 'UnionPay' },
            { name: i18nService.t('other'), value: 'Other' },
        ];
        this.cardExpMonthOptions = [
            { name: '-- ' + i18nService.t('select') + ' --', value: null },
            { name: '01 - ' + i18nService.t('january'), value: '1' },
            { name: '02 - ' + i18nService.t('february'), value: '2' },
            { name: '03 - ' + i18nService.t('march'), value: '3' },
            { name: '04 - ' + i18nService.t('april'), value: '4' },
            { name: '05 - ' + i18nService.t('may'), value: '5' },
            { name: '06 - ' + i18nService.t('june'), value: '6' },
            { name: '07 - ' + i18nService.t('july'), value: '7' },
            { name: '08 - ' + i18nService.t('august'), value: '8' },
            { name: '09 - ' + i18nService.t('september'), value: '9' },
            { name: '10 - ' + i18nService.t('october'), value: '10' },
            { name: '11 - ' + i18nService.t('november'), value: '11' },
            { name: '12 - ' + i18nService.t('december'), value: '12' },
        ];
        this.identityTitleOptions = [
            { name: '-- ' + i18nService.t('select') + ' --', value: null },
            { name: i18nService.t('mr'), value: i18nService.t('mr') },
            { name: i18nService.t('mrs'), value: i18nService.t('mrs') },
            { name: i18nService.t('ms'), value: i18nService.t('ms') },
            { name: i18nService.t('dr'), value: i18nService.t('dr') },
        ];
        this.addFieldTypeOptions = [
            { name: i18nService.t('cfTypeText'), value: fieldType_1.FieldType.Text },
            { name: i18nService.t('cfTypeHidden'), value: fieldType_1.FieldType.Hidden },
            { name: i18nService.t('cfTypeBoolean'), value: fieldType_1.FieldType.Boolean },
        ];
        this.uriMatchOptions = [
            { name: i18nService.t('defaultMatchDetection'), value: null },
            { name: i18nService.t('baseDomain'), value: uriMatchType_1.UriMatchType.Domain },
            { name: i18nService.t('host'), value: uriMatchType_1.UriMatchType.Host },
            { name: i18nService.t('startsWith'), value: uriMatchType_1.UriMatchType.StartsWith },
            { name: i18nService.t('regEx'), value: uriMatchType_1.UriMatchType.RegularExpression },
            { name: i18nService.t('exact'), value: uriMatchType_1.UriMatchType.Exact },
            { name: i18nService.t('never'), value: uriMatchType_1.UriMatchType.Never },
        ];
    }
    AddEditComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, cipher, _b, _c;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        this.editMode = this.cipherId != null;
                        if (this.editMode) {
                            this.editMode = true;
                            this.title = this.i18nService.t('editItem');
                        }
                        else {
                            this.title = this.i18nService.t('addItem');
                        }
                        _a = this;
                        return [4 /*yield*/, this.stateService.get('addEditCipher')];
                    case 1:
                        _a.cipher = _d.sent();
                        return [4 /*yield*/, this.stateService.remove('addEditCipher')];
                    case 2:
                        _d.sent();
                        if (!(this.cipher == null)) return [3 /*break*/, 6];
                        if (!this.editMode) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.loadCipher()];
                    case 3:
                        cipher = _d.sent();
                        _b = this;
                        return [4 /*yield*/, cipher.decrypt()];
                    case 4:
                        _b.cipher = _d.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.cipher = new cipherView_1.CipherView();
                        this.cipher.folderId = this.folderId;
                        this.cipher.type = this.type == null ? cipherType_1.CipherType.Login : this.type;
                        this.cipher.login = new loginView_1.LoginView();
                        this.cipher.login.uris = [new loginUriView_1.LoginUriView()];
                        this.cipher.card = new cardView_1.CardView();
                        this.cipher.identity = new identityView_1.IdentityView();
                        this.cipher.secureNote = new secureNoteView_1.SecureNoteView();
                        this.cipher.secureNote.type = secureNoteType_1.SecureNoteType.Generic;
                        _d.label = 6;
                    case 6:
                        _c = this;
                        return [4 /*yield*/, this.folderService.getAllDecrypted()];
                    case 7:
                        _c.folders = _d.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AddEditComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var cipher, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.cipher.name == null || this.cipher.name === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('nameRequired'));
                            return [2 /*return*/, false];
                        }
                        if (!this.editMode && this.cipher.type === cipherType_1.CipherType.Login &&
                            this.cipher.login.uris != null && this.cipher.login.uris.length === 1 &&
                            (this.cipher.login.uris[0].uri == null || this.cipher.login.uris[0].uri === '')) {
                            this.cipher.login.uris = null;
                        }
                        return [4 /*yield*/, this.encryptCipher()];
                    case 1:
                        cipher = _b.sent();
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.formPromise = this.saveCipher(cipher);
                        return [4 /*yield*/, this.formPromise];
                    case 3:
                        _b.sent();
                        this.cipher.id = cipher.id;
                        this.analytics.eventTrack.next({ action: this.editMode ? 'Edited Cipher' : 'Added Cipher' });
                        this.toasterService.popAsync('success', null, this.i18nService.t(this.editMode ? 'editedItem' : 'addedItem'));
                        this.onSavedCipher.emit(this.cipher);
                        return [2 /*return*/, true];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/, false];
                }
            });
        });
    };
    AddEditComponent.prototype.addUri = function () {
        if (this.cipher.type !== cipherType_1.CipherType.Login) {
            return;
        }
        if (this.cipher.login.uris == null) {
            this.cipher.login.uris = [];
        }
        this.cipher.login.uris.push(new loginUriView_1.LoginUriView());
    };
    AddEditComponent.prototype.removeUri = function (uri) {
        if (this.cipher.type !== cipherType_1.CipherType.Login || this.cipher.login.uris == null) {
            return;
        }
        var i = this.cipher.login.uris.indexOf(uri);
        if (i > -1) {
            this.cipher.login.uris.splice(i, 1);
        }
    };
    AddEditComponent.prototype.addField = function () {
        if (this.cipher.fields == null) {
            this.cipher.fields = [];
        }
        var f = new fieldView_1.FieldView();
        f.type = this.addFieldType;
        this.cipher.fields.push(f);
    };
    AddEditComponent.prototype.removeField = function (field) {
        var i = this.cipher.fields.indexOf(field);
        if (i > -1) {
            this.cipher.fields.splice(i, 1);
        }
    };
    AddEditComponent.prototype.cancel = function () {
        this.onCancelled.emit(this.cipher);
    };
    AddEditComponent.prototype.attachments = function () {
        this.onEditAttachments.emit(this.cipher);
    };
    AddEditComponent.prototype.delete = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('deleteItemConfirmation'), this.i18nService.t('deleteItem'), this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.deletePromise = this.deleteCipher();
                        return [4 /*yield*/, this.deletePromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted Cipher' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('deletedItem'));
                        this.onDeletedCipher.emit(this.cipher);
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/, true];
                }
            });
        });
    };
    AddEditComponent.prototype.generatePassword = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(this.cipher.login != null && this.cipher.login.password != null && this.cipher.login.password.length)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('overwritePasswordConfirmation'), this.i18nService.t('overwritePassword'), this.i18nService.t('yes'), this.i18nService.t('no'))];
                    case 1:
                        confirmed = _a.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _a.label = 2;
                    case 2:
                        this.onGeneratePassword.emit();
                        return [2 /*return*/, true];
                }
            });
        });
    };
    AddEditComponent.prototype.togglePassword = function () {
        this.analytics.eventTrack.next({ action: 'Toggled Password on Edit' });
        this.showPassword = !this.showPassword;
        document.getElementById('loginPassword').focus();
    };
    AddEditComponent.prototype.toggleCardCode = function () {
        this.analytics.eventTrack.next({ action: 'Toggled CardCode on Edit' });
        this.showCardCode = !this.showCardCode;
        document.getElementById('cardCode').focus();
    };
    AddEditComponent.prototype.toggleFieldValue = function (field) {
        var f = field;
        f.showValue = !f.showValue;
    };
    AddEditComponent.prototype.toggleUriOptions = function (uri) {
        var u = uri;
        u.showOptions = u.showOptions == null && uri.match != null ? false : !u.showOptions;
    };
    AddEditComponent.prototype.loginUriMatchChanged = function (uri) {
        var u = uri;
        u.showOptions = u.showOptions == null ? true : u.showOptions;
    };
    AddEditComponent.prototype.checkPassword = function () {
        return __awaiter(this, void 0, void 0, function () {
            var matches;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.checkPasswordPromise != null) {
                            return [2 /*return*/];
                        }
                        if (this.cipher.login == null || this.cipher.login.password == null || this.cipher.login.password === '') {
                            return [2 /*return*/];
                        }
                        this.analytics.eventTrack.next({ action: 'Check Password' });
                        this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);
                        return [4 /*yield*/, this.checkPasswordPromise];
                    case 1:
                        matches = _a.sent();
                        this.checkPasswordPromise = null;
                        if (matches > 0) {
                            this.toasterService.popAsync('warning', null, this.i18nService.t('passwordExposed', matches.toString()));
                        }
                        else {
                            this.toasterService.popAsync('success', null, this.i18nService.t('passwordSafe'));
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    AddEditComponent.prototype.loadCipher = function () {
        return this.cipherService.get(this.cipherId);
    };
    AddEditComponent.prototype.encryptCipher = function () {
        return this.cipherService.encrypt(this.cipher);
    };
    AddEditComponent.prototype.saveCipher = function (cipher) {
        return this.cipherService.saveWithServer(cipher);
    };
    AddEditComponent.prototype.deleteCipher = function () {
        return this.cipherService.deleteWithServer(this.cipher.id);
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], AddEditComponent.prototype, "folderId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], AddEditComponent.prototype, "cipherId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Number)
    ], AddEditComponent.prototype, "type", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AddEditComponent.prototype, "onSavedCipher", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AddEditComponent.prototype, "onDeletedCipher", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AddEditComponent.prototype, "onCancelled", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AddEditComponent.prototype, "onEditAttachments", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AddEditComponent.prototype, "onGeneratePassword", void 0);
    return AddEditComponent;
}());
exports.AddEditComponent = AddEditComponent;


/***/ }),

/***/ "./jslib/src/angular/components/attachments.component.ts":
/*!***************************************************************!*\
  !*** ./jslib/src/angular/components/attachments.component.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var AttachmentsComponent = /** @class */ (function () {
    function AttachmentsComponent(cipherService, analytics, toasterService, i18nService, cryptoService, tokenService, platformUtilsService, win) {
        this.cipherService = cipherService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.cryptoService = cryptoService;
        this.tokenService = tokenService;
        this.platformUtilsService = platformUtilsService;
        this.win = win;
        this.onUploadedAttachment = new core_1.EventEmitter();
        this.onDeletedAttachment = new core_1.EventEmitter();
        this.deletePromises = {};
    }
    AttachmentsComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b, _c, isPremium, confirmed, confirmed;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.loadCipher()];
                    case 1:
                        _a.cipherDomain = _d.sent();
                        _b = this;
                        return [4 /*yield*/, this.cipherDomain.decrypt()];
                    case 2:
                        _b.cipher = _d.sent();
                        _c = this;
                        return [4 /*yield*/, this.cryptoService.hasEncKey()];
                    case 3:
                        _c.hasUpdatedKey = _d.sent();
                        isPremium = this.tokenService.getPremium();
                        this.canAccessAttachments = isPremium || this.cipher.organizationId != null;
                        if (!!this.canAccessAttachments) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('premiumRequiredDesc'), this.i18nService.t('premiumRequired'), this.i18nService.t('learnMore'), this.i18nService.t('cancel'))];
                    case 4:
                        confirmed = _d.sent();
                        if (confirmed) {
                            this.platformUtilsService.launchUri('https://vault.bitwarden.com/#/?premium=purchase');
                        }
                        return [3 /*break*/, 7];
                    case 5:
                        if (!!this.hasUpdatedKey) return [3 /*break*/, 7];
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('updateKey'), this.i18nService.t('featureUnavailable'), this.i18nService.t('learnMore'), this.i18nService.t('cancel'), 'warning')];
                    case 6:
                        confirmed = _d.sent();
                        if (confirmed) {
                            this.platformUtilsService.launchUri('https://help.bitwarden.com/article/update-encryption-key/');
                        }
                        _d.label = 7;
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    AttachmentsComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var fileEl, files, _a, _b, _c;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (!this.hasUpdatedKey) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('updateKey'));
                            return [2 /*return*/];
                        }
                        fileEl = document.getElementById('file');
                        files = fileEl.files;
                        if (files == null || files.length === 0) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('selectFile'));
                            return [2 /*return*/];
                        }
                        if (files[0].size > 104857600) { // 100 MB
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('maxFileSize'));
                            return [2 /*return*/];
                        }
                        _d.label = 1;
                    case 1:
                        _d.trys.push([1, 4, , 5]);
                        this.formPromise = this.saveCipherAttachment(files[0]);
                        _a = this;
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _a.cipherDomain = _d.sent();
                        _b = this;
                        return [4 /*yield*/, this.cipherDomain.decrypt()];
                    case 3:
                        _b.cipher = _d.sent();
                        this.analytics.eventTrack.next({ action: 'Added Attachment' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('attachmentSaved'));
                        this.onUploadedAttachment.emit();
                        return [3 /*break*/, 5];
                    case 4:
                        _c = _d.sent();
                        return [3 /*break*/, 5];
                    case 5:
                        // reset file input
                        // ref: https://stackoverflow.com/a/20552042
                        fileEl.type = '';
                        fileEl.type = 'file';
                        fileEl.value = '';
                        return [2 /*return*/];
                }
            });
        });
    };
    AttachmentsComponent.prototype.delete = function (attachment) {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, i, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.deletePromises[attachment.id] != null) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('deleteAttachmentConfirmation'), this.i18nService.t('deleteAttachment'), this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);
                        return [4 /*yield*/, this.deletePromises[attachment.id]];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted Attachment' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('deletedAttachment'));
                        i = this.cipher.attachments.indexOf(attachment);
                        if (i > -1) {
                            this.cipher.attachments.splice(i, 1);
                        }
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5:
                        this.deletePromises[attachment.id] = null;
                        this.onDeletedAttachment.emit();
                        return [2 /*return*/];
                }
            });
        });
    };
    AttachmentsComponent.prototype.download = function (attachment) {
        return __awaiter(this, void 0, void 0, function () {
            var a, response, buf, key, decBuf, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        a = attachment;
                        if (a.downloading) {
                            return [2 /*return*/];
                        }
                        if (!this.canAccessAttachments) {
                            this.toasterService.popAsync('error', this.i18nService.t('premiumRequired'), this.i18nService.t('premiumRequiredDesc'));
                            return [2 /*return*/];
                        }
                        a.downloading = true;
                        return [4 /*yield*/, fetch(new Request(attachment.url, { cache: 'no-cache' }))];
                    case 1:
                        response = _a.sent();
                        if (response.status !== 200) {
                            this.toasterService.popAsync('error', null, this.i18nService.t('errorOccurred'));
                            a.downloading = false;
                            return [2 /*return*/];
                        }
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 6, , 7]);
                        return [4 /*yield*/, response.arrayBuffer()];
                    case 3:
                        buf = _a.sent();
                        return [4 /*yield*/, this.cryptoService.getOrgKey(this.cipher.organizationId)];
                    case 4:
                        key = _a.sent();
                        return [4 /*yield*/, this.cryptoService.decryptFromBytes(buf, key)];
                    case 5:
                        decBuf = _a.sent();
                        this.platformUtilsService.saveFile(this.win, decBuf, null, attachment.fileName);
                        return [3 /*break*/, 7];
                    case 6:
                        e_1 = _a.sent();
                        this.toasterService.popAsync('error', null, this.i18nService.t('errorOccurred'));
                        return [3 /*break*/, 7];
                    case 7:
                        a.downloading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    AttachmentsComponent.prototype.loadCipher = function () {
        return this.cipherService.get(this.cipherId);
    };
    AttachmentsComponent.prototype.saveCipherAttachment = function (file) {
        return this.cipherService.saveAttachmentWithServer(this.cipherDomain, file);
    };
    AttachmentsComponent.prototype.deleteCipherAttachment = function (attachmentId) {
        return this.cipherService.deleteAttachmentWithServer(this.cipher.id, attachmentId);
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], AttachmentsComponent.prototype, "cipherId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AttachmentsComponent.prototype, "onUploadedAttachment", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AttachmentsComponent.prototype, "onDeletedAttachment", void 0);
    return AttachmentsComponent;
}());
exports.AttachmentsComponent = AttachmentsComponent;


/***/ }),

/***/ "./jslib/src/angular/components/ciphers.component.ts":
/*!***********************************************************!*\
  !*** ./jslib/src/angular/components/ciphers.component.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var CiphersComponent = /** @class */ (function () {
    function CiphersComponent(cipherService) {
        this.cipherService = cipherService;
        this.activeCipherId = null;
        this.onCipherClicked = new core_1.EventEmitter();
        this.onCipherRightClicked = new core_1.EventEmitter();
        this.onAddCipher = new core_1.EventEmitter();
        this.onAddCipherOptions = new core_1.EventEmitter();
        this.loaded = false;
        this.ciphers = [];
        this.searchPlaceholder = null;
        this.allCiphers = [];
        this.filter = null;
    }
    CiphersComponent.prototype.load = function (filter) {
        if (filter === void 0) { filter = null; }
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.cipherService.getAllDecrypted()];
                    case 1:
                        _a.allCiphers = _b.sent();
                        this.applyFilter(filter);
                        this.loaded = true;
                        return [2 /*return*/];
                }
            });
        });
    };
    CiphersComponent.prototype.refresh = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.loaded = false;
                        this.ciphers = [];
                        return [4 /*yield*/, this.load(this.filter)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CiphersComponent.prototype.applyFilter = function (filter) {
        if (filter === void 0) { filter = null; }
        this.filter = filter;
        if (this.filter == null) {
            this.ciphers = this.allCiphers;
        }
        else {
            this.ciphers = this.allCiphers.filter(this.filter);
        }
    };
    CiphersComponent.prototype.selectCipher = function (cipher) {
        this.onCipherClicked.emit(cipher);
    };
    CiphersComponent.prototype.rightClickCipher = function (cipher) {
        this.onCipherRightClicked.emit(cipher);
    };
    CiphersComponent.prototype.addCipher = function () {
        this.onAddCipher.emit();
    };
    CiphersComponent.prototype.addCipherOptions = function () {
        this.onAddCipherOptions.emit();
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], CiphersComponent.prototype, "activeCipherId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CiphersComponent.prototype, "onCipherClicked", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CiphersComponent.prototype, "onCipherRightClicked", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CiphersComponent.prototype, "onAddCipher", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CiphersComponent.prototype, "onAddCipherOptions", void 0);
    return CiphersComponent;
}());
exports.CiphersComponent = CiphersComponent;


/***/ }),

/***/ "./jslib/src/angular/components/export.component.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/angular/components/export.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var ExportComponent = /** @class */ (function () {
    function ExportComponent(analytics, toasterService, cryptoService, userService, i18nService, platformUtilsService, exportService, win) {
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.userService = userService;
        this.i18nService = i18nService;
        this.platformUtilsService = platformUtilsService;
        this.exportService = exportService;
        this.win = win;
        this.onSaved = new core_1.EventEmitter();
        this.showPassword = false;
    }
    ExportComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var email, key, keyHash, storedKeyHash, data, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.masterPassword == null || this.masterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('invalidMasterPassword'));
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.userService.getEmail()];
                    case 1:
                        email = _b.sent();
                        return [4 /*yield*/, this.cryptoService.makeKey(this.masterPassword, email)];
                    case 2:
                        key = _b.sent();
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, key)];
                    case 3:
                        keyHash = _b.sent();
                        return [4 /*yield*/, this.cryptoService.getKeyHash()];
                    case 4:
                        storedKeyHash = _b.sent();
                        if (!(storedKeyHash != null && keyHash != null && storedKeyHash === keyHash)) return [3 /*break*/, 9];
                        _b.label = 5;
                    case 5:
                        _b.trys.push([5, 7, , 8]);
                        this.formPromise = this.getExportData();
                        return [4 /*yield*/, this.formPromise];
                    case 6:
                        data = _b.sent();
                        this.analytics.eventTrack.next({ action: 'Exported Data' });
                        this.downloadFile(data);
                        this.saved();
                        return [3 /*break*/, 8];
                    case 7:
                        _a = _b.sent();
                        return [3 /*break*/, 8];
                    case 8: return [3 /*break*/, 10];
                    case 9:
                        this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('invalidMasterPassword'));
                        _b.label = 10;
                    case 10: return [2 /*return*/];
                }
            });
        });
    };
    ExportComponent.prototype.togglePassword = function () {
        this.analytics.eventTrack.next({ action: 'Toggled Master Password on Export' });
        this.showPassword = !this.showPassword;
        document.getElementById('masterPassword').focus();
    };
    ExportComponent.prototype.saved = function () {
        this.onSaved.emit();
    };
    ExportComponent.prototype.getExportData = function () {
        return this.exportService.getExport('csv');
    };
    ExportComponent.prototype.getFileName = function (prefix) {
        return this.exportService.getFileName(prefix);
    };
    ExportComponent.prototype.downloadFile = function (csv) {
        var fileName = this.getFileName();
        this.platformUtilsService.saveFile(this.win, csv, { type: 'text/plain' }, fileName);
    };
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], ExportComponent.prototype, "onSaved", void 0);
    return ExportComponent;
}());
exports.ExportComponent = ExportComponent;


/***/ }),

/***/ "./jslib/src/angular/components/folder-add-edit.component.ts":
/*!*******************************************************************!*\
  !*** ./jslib/src/angular/components/folder-add-edit.component.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var folderView_1 = __webpack_require__(/*! ../../models/view/folderView */ "./jslib/src/models/view/folderView.ts");
var FolderAddEditComponent = /** @class */ (function () {
    function FolderAddEditComponent(folderService, i18nService, analytics, toasterService, platformUtilsService) {
        this.folderService = folderService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.platformUtilsService = platformUtilsService;
        this.onSavedFolder = new core_1.EventEmitter();
        this.onDeletedFolder = new core_1.EventEmitter();
        this.editMode = false;
        this.folder = new folderView_1.FolderView();
    }
    FolderAddEditComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var folder, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.editMode = this.folderId != null;
                        if (!this.editMode) return [3 /*break*/, 3];
                        this.editMode = true;
                        this.title = this.i18nService.t('editFolder');
                        return [4 /*yield*/, this.folderService.get(this.folderId)];
                    case 1:
                        folder = _b.sent();
                        _a = this;
                        return [4 /*yield*/, folder.decrypt()];
                    case 2:
                        _a.folder = _b.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        this.title = this.i18nService.t('addFolder');
                        _b.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    FolderAddEditComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var folder, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.folder.name == null || this.folder.name === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('nameRequired'));
                            return [2 /*return*/, false];
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 4, , 5]);
                        return [4 /*yield*/, this.folderService.encrypt(this.folder)];
                    case 2:
                        folder = _b.sent();
                        this.formPromise = this.folderService.saveWithServer(folder);
                        return [4 /*yield*/, this.formPromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: this.editMode ? 'Edited Folder' : 'Added Folder' });
                        this.toasterService.popAsync('success', null, this.i18nService.t(this.editMode ? 'editedFolder' : 'addedFolder'));
                        this.onSavedFolder.emit(this.folder);
                        return [2 /*return*/, true];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/, false];
                }
            });
        });
    };
    FolderAddEditComponent.prototype.delete = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('deleteFolderConfirmation'), this.i18nService.t('deleteFolder'), this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.deletePromise = this.folderService.deleteWithServer(this.folder.id);
                        return [4 /*yield*/, this.deletePromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted Folder' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('deletedFolder'));
                        this.onDeletedFolder.emit(this.folder);
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/, true];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], FolderAddEditComponent.prototype, "folderId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], FolderAddEditComponent.prototype, "onSavedFolder", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], FolderAddEditComponent.prototype, "onDeletedFolder", void 0);
    return FolderAddEditComponent;
}());
exports.FolderAddEditComponent = FolderAddEditComponent;


/***/ }),

/***/ "./jslib/src/angular/components/groupings.component.ts":
/*!*************************************************************!*\
  !*** ./jslib/src/angular/components/groupings.component.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var cipherType_1 = __webpack_require__(/*! ../../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var GroupingsComponent = /** @class */ (function () {
    function GroupingsComponent(collectionService, folderService) {
        this.collectionService = collectionService;
        this.folderService = folderService;
        this.showFolders = true;
        this.showCollections = true;
        this.showFavorites = true;
        this.onAllClicked = new core_1.EventEmitter();
        this.onFavoritesClicked = new core_1.EventEmitter();
        this.onCipherTypeClicked = new core_1.EventEmitter();
        this.onFolderClicked = new core_1.EventEmitter();
        this.onAddFolder = new core_1.EventEmitter();
        this.onEditFolder = new core_1.EventEmitter();
        this.onCollectionClicked = new core_1.EventEmitter();
        this.loaded = false;
        this.cipherType = cipherType_1.CipherType;
        this.selectedAll = false;
        this.selectedFavorites = false;
        this.selectedType = null;
        this.selectedFolder = false;
        this.selectedFolderId = null;
        this.selectedCollectionId = null;
    }
    GroupingsComponent.prototype.load = function (setLoaded) {
        if (setLoaded === void 0) { setLoaded = true; }
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.loadFolders()];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.loadCollections()];
                    case 2:
                        _a.sent();
                        if (setLoaded) {
                            this.loaded = true;
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    GroupingsComponent.prototype.loadCollections = function (organizationId) {
        return __awaiter(this, void 0, void 0, function () {
            var collections;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.showCollections) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.collectionService.getAllDecrypted()];
                    case 1:
                        collections = _a.sent();
                        if (organizationId != null) {
                            this.collections = collections.filter(function (c) { return c.organizationId === organizationId; });
                        }
                        else {
                            this.collections = collections;
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    GroupingsComponent.prototype.loadFolders = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!this.showFolders) {
                            return [2 /*return*/];
                        }
                        _a = this;
                        return [4 /*yield*/, this.folderService.getAllDecrypted()];
                    case 1:
                        _a.folders = _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    GroupingsComponent.prototype.selectAll = function () {
        this.clearSelections();
        this.selectedAll = true;
        this.onAllClicked.emit();
    };
    GroupingsComponent.prototype.selectFavorites = function () {
        this.clearSelections();
        this.selectedFavorites = true;
        this.onFavoritesClicked.emit();
    };
    GroupingsComponent.prototype.selectType = function (type) {
        this.clearSelections();
        this.selectedType = type;
        this.onCipherTypeClicked.emit(type);
    };
    GroupingsComponent.prototype.selectFolder = function (folder) {
        this.clearSelections();
        this.selectedFolder = true;
        this.selectedFolderId = folder.id;
        this.onFolderClicked.emit(folder);
    };
    GroupingsComponent.prototype.addFolder = function () {
        this.onAddFolder.emit();
    };
    GroupingsComponent.prototype.editFolder = function (folder) {
        this.onEditFolder.emit(folder);
    };
    GroupingsComponent.prototype.selectCollection = function (collection) {
        this.clearSelections();
        this.selectedCollectionId = collection.id;
        this.onCollectionClicked.emit(collection);
    };
    GroupingsComponent.prototype.clearSelections = function () {
        this.selectedAll = false;
        this.selectedFavorites = false;
        this.selectedType = null;
        this.selectedFolder = false;
        this.selectedFolderId = null;
        this.selectedCollectionId = null;
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "showFolders", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "showCollections", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "showFavorites", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "onAllClicked", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "onFavoritesClicked", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "onCipherTypeClicked", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "onFolderClicked", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "onAddFolder", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "onEditFolder", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "onCollectionClicked", void 0);
    return GroupingsComponent;
}());
exports.GroupingsComponent = GroupingsComponent;


/***/ }),

/***/ "./jslib/src/angular/components/hint.component.ts":
/*!********************************************************!*\
  !*** ./jslib/src/angular/components/hint.component.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var passwordHintRequest_1 = __webpack_require__(/*! ../../models/request/passwordHintRequest */ "./jslib/src/models/request/passwordHintRequest.ts");
var HintComponent = /** @class */ (function () {
    function HintComponent(router, analytics, toasterService, i18nService, apiService) {
        this.router = router;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.apiService = apiService;
        this.email = '';
        this.successRoute = 'login';
    }
    HintComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.email == null || this.email === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('emailRequired'));
                            return [2 /*return*/];
                        }
                        if (this.email.indexOf('@') === -1) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('invalidEmail'));
                            return [2 /*return*/];
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        this.formPromise = this.apiService.postPasswordHint(new passwordHintRequest_1.PasswordHintRequest(this.email));
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Requested Hint' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('masterPassSent'));
                        this.router.navigate([this.successRoute]);
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    return HintComponent;
}());
exports.HintComponent = HintComponent;


/***/ }),

/***/ "./jslib/src/angular/components/icon.component.html":
/*!**********************************************************!*\
  !*** ./jslib/src/angular/components/icon.component.html ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"icon\">\n    <img [src]=\"image\" appFallbackSrc=\"{{fallbackImage}}\" *ngIf=\"imageEnabled && image\" alt=\"\" />\n    <i class=\"fa fa-fw fa-lg {{icon}}\" *ngIf=\"!imageEnabled || !image\"></i>\n</div>\n";

/***/ }),

/***/ "./jslib/src/angular/components/icon.component.ts":
/*!********************************************************!*\
  !*** ./jslib/src/angular/components/icon.component.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var cipherType_1 = __webpack_require__(/*! ../../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var environment_service_1 = __webpack_require__(/*! ../../abstractions/environment.service */ "./jslib/src/abstractions/environment.service.ts");
var state_service_1 = __webpack_require__(/*! ../../abstractions/state.service */ "./jslib/src/abstractions/state.service.ts");
var constants_service_1 = __webpack_require__(/*! ../../services/constants.service */ "./jslib/src/services/constants.service.ts");
var utils_1 = __webpack_require__(/*! ../../misc/utils */ "./jslib/src/misc/utils.ts");
var IconComponent = /** @class */ (function () {
    function IconComponent(environmentService, stateService) {
        this.environmentService = environmentService;
        this.stateService = stateService;
        this.iconsUrl = environmentService.iconsUrl;
        if (!this.iconsUrl) {
            if (environmentService.baseUrl) {
                this.iconsUrl = environmentService.baseUrl + '/icons';
            }
            else {
                this.iconsUrl = 'https://icons.bitwarden.net';
            }
        }
    }
    IconComponent.prototype.ngOnChanges = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.stateService.get(constants_service_1.ConstantsService.disableFaviconKey)];
                    case 1:
                        _a.imageEnabled = !(_b.sent());
                        switch (this.cipher.type) {
                            case cipherType_1.CipherType.Login:
                                this.icon = 'fa-globe';
                                this.setLoginIcon();
                                break;
                            case cipherType_1.CipherType.SecureNote:
                                this.icon = 'fa-sticky-note-o';
                                break;
                            case cipherType_1.CipherType.Card:
                                this.icon = 'fa-credit-card';
                                break;
                            case cipherType_1.CipherType.Identity:
                                this.icon = 'fa-id-card-o';
                                break;
                            default:
                                break;
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    IconComponent.prototype.setLoginIcon = function () {
        if (this.cipher.login.uri) {
            var hostnameUri = this.cipher.login.uri;
            var isWebsite = false;
            if (hostnameUri.indexOf('androidapp://') === 0) {
                this.icon = 'fa-android';
                this.image = null;
            }
            else if (hostnameUri.indexOf('iosapp://') === 0) {
                this.icon = 'fa-apple';
                this.image = null;
            }
            else if (this.imageEnabled && hostnameUri.indexOf('://') === -1 && hostnameUri.indexOf('.') > -1) {
                hostnameUri = 'http://' + hostnameUri;
                isWebsite = true;
            }
            else if (this.imageEnabled) {
                isWebsite = hostnameUri.indexOf('http') === 0 && hostnameUri.indexOf('.') > -1;
            }
            if (this.imageEnabled && isWebsite) {
                try {
                    this.image = this.iconsUrl + '/' + utils_1.Utils.getHostname(hostnameUri) + '/icon.png';
                    this.fallbackImage = 'images/fa-globe.png';
                }
                catch (e) { }
            }
        }
        else {
            this.image = null;
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], IconComponent.prototype, "cipher", void 0);
    IconComponent = __decorate([
        core_1.Component({
            selector: 'app-vault-icon',
            template: __webpack_require__(/*! ./icon.component.html */ "./jslib/src/angular/components/icon.component.html"),
        }),
        __metadata("design:paramtypes", [environment_service_1.EnvironmentService, state_service_1.StateService])
    ], IconComponent);
    return IconComponent;
}());
exports.IconComponent = IconComponent;


/***/ }),

/***/ "./jslib/src/angular/components/lock.component.ts":
/*!********************************************************!*\
  !*** ./jslib/src/angular/components/lock.component.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var LockComponent = /** @class */ (function () {
    function LockComponent(router, analytics, toasterService, i18nService, platformUtilsService, messagingService, userService, cryptoService) {
        this.router = router;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.platformUtilsService = platformUtilsService;
        this.messagingService = messagingService;
        this.userService = userService;
        this.cryptoService = cryptoService;
        this.masterPassword = '';
        this.showPassword = false;
        this.successRoute = 'vault';
    }
    LockComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var email, key, keyHash, storedKeyHash;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.masterPassword == null || this.masterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassRequired'));
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.userService.getEmail()];
                    case 1:
                        email = _a.sent();
                        return [4 /*yield*/, this.cryptoService.makeKey(this.masterPassword, email)];
                    case 2:
                        key = _a.sent();
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, key)];
                    case 3:
                        keyHash = _a.sent();
                        return [4 /*yield*/, this.cryptoService.getKeyHash()];
                    case 4:
                        storedKeyHash = _a.sent();
                        if (!(storedKeyHash != null && keyHash != null && storedKeyHash === keyHash)) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.cryptoService.setKey(key)];
                    case 5:
                        _a.sent();
                        this.messagingService.send('unlocked');
                        this.router.navigate([this.successRoute]);
                        return [3 /*break*/, 7];
                    case 6:
                        this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('invalidMasterPassword'));
                        _a.label = 7;
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    LockComponent.prototype.logOut = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('logOutConfirmation'), this.i18nService.t('logOut'), this.i18nService.t('logOut'), this.i18nService.t('cancel'))];
                    case 1:
                        confirmed = _a.sent();
                        if (confirmed) {
                            this.messagingService.send('logout');
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    LockComponent.prototype.togglePassword = function () {
        this.analytics.eventTrack.next({ action: 'Toggled Master Password on Unlock' });
        this.showPassword = !this.showPassword;
        document.getElementById('masterPassword').focus();
    };
    return LockComponent;
}());
exports.LockComponent = LockComponent;


/***/ }),

/***/ "./jslib/src/angular/components/login.component.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/angular/components/login.component.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var utils_1 = __webpack_require__(/*! ../../misc/utils */ "./jslib/src/misc/utils.ts");
var Keys = {
    rememberedEmail: 'rememberedEmail',
    rememberEmail: 'rememberEmail',
};
var LoginComponent = /** @class */ (function () {
    function LoginComponent(authService, router, analytics, toasterService, i18nService, storageService) {
        this.authService = authService;
        this.router = router;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.storageService = storageService;
        this.email = '';
        this.rememberEmail = true;
        this.masterPassword = '';
        this.showPassword = false;
        this.twoFactorRoute = '2fa';
        this.successRoute = 'vault';
    }
    LoginComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!(this.email == null || this.email === '')) return [3 /*break*/, 2];
                        _a = this;
                        return [4 /*yield*/, this.storageService.get(Keys.rememberedEmail)];
                    case 1:
                        _a.email = _c.sent();
                        if (this.email == null) {
                            this.email = '';
                        }
                        _c.label = 2;
                    case 2:
                        _b = this;
                        return [4 /*yield*/, this.storageService.get(Keys.rememberEmail)];
                    case 3:
                        _b.rememberEmail = _c.sent();
                        if (this.rememberEmail == null) {
                            this.rememberEmail = true;
                        }
                        if (utils_1.Utils.isBrowser) {
                            document.getElementById(this.email == null || this.email === '' ? 'email' : 'masterPassword').focus();
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    LoginComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.email == null || this.email === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('emailRequired'));
                            return [2 /*return*/];
                        }
                        if (this.email.indexOf('@') === -1) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('invalidEmail'));
                            return [2 /*return*/];
                        }
                        if (this.masterPassword == null || this.masterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassRequired'));
                            return [2 /*return*/];
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 8, , 9]);
                        this.formPromise = this.authService.logIn(this.email, this.masterPassword);
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        response = _b.sent();
                        return [4 /*yield*/, this.storageService.save(Keys.rememberEmail, this.rememberEmail)];
                    case 3:
                        _b.sent();
                        if (!this.rememberEmail) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.storageService.save(Keys.rememberedEmail, this.email)];
                    case 4:
                        _b.sent();
                        return [3 /*break*/, 7];
                    case 5: return [4 /*yield*/, this.storageService.remove(Keys.rememberedEmail)];
                    case 6:
                        _b.sent();
                        _b.label = 7;
                    case 7:
                        if (response.twoFactor) {
                            this.analytics.eventTrack.next({ action: 'Logged In To Two-step' });
                            this.router.navigate([this.twoFactorRoute]);
                        }
                        else {
                            if (this.onSuccessfulLogin != null) {
                                this.onSuccessfulLogin();
                            }
                            this.analytics.eventTrack.next({ action: 'Logged In' });
                            if (this.onSuccessfulLoginNavigate != null) {
                                this.onSuccessfulLoginNavigate();
                            }
                            else {
                                this.router.navigate([this.successRoute]);
                            }
                        }
                        return [3 /*break*/, 9];
                    case 8:
                        _a = _b.sent();
                        return [3 /*break*/, 9];
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    LoginComponent.prototype.togglePassword = function () {
        this.analytics.eventTrack.next({ action: 'Toggled Master Password on Login' });
        this.showPassword = !this.showPassword;
        document.getElementById('masterPassword').focus();
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], LoginComponent.prototype, "email", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], LoginComponent.prototype, "rememberEmail", void 0);
    return LoginComponent;
}());
exports.LoginComponent = LoginComponent;


/***/ }),

/***/ "./jslib/src/angular/components/modal.component.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/angular/components/modal.component.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var ModalComponent = /** @class */ (function () {
    function ModalComponent(componentFactoryResolver) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.onClose = new core_1.EventEmitter();
        this.onClosed = new core_1.EventEmitter();
        this.onShow = new core_1.EventEmitter();
        this.onShown = new core_1.EventEmitter();
        this.parentContainer = null;
        this.fade = true;
    }
    ModalComponent.prototype.ngOnDestroy = function () {
        document.body.classList.remove('modal-open');
        document.body.removeChild(document.querySelector('.modal-backdrop'));
    };
    ModalComponent.prototype.show = function (type, parentContainer, fade) {
        var _this = this;
        if (fade === void 0) { fade = true; }
        this.onShow.emit();
        this.parentContainer = parentContainer;
        this.fade = fade;
        document.body.classList.add('modal-open');
        var backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop' + (this.fade ? ' fade' : '');
        document.body.appendChild(backdrop);
        var factory = this.componentFactoryResolver.resolveComponentFactory(type);
        var componentRef = this.container.createComponent(factory);
        document.querySelector('.modal-dialog').addEventListener('click', function (e) {
            e.stopPropagation();
        });
        var modals = Array.from(document.querySelectorAll('.modal, .modal *[data-dismiss="modal"]'));
        for (var _i = 0, modals_1 = modals; _i < modals_1.length; _i++) {
            var closeElement = modals_1[_i];
            closeElement.addEventListener('click', function (event) {
                _this.close();
            });
        }
        this.onShown.emit();
        return componentRef.instance;
    };
    ModalComponent.prototype.close = function () {
        this.onClose.emit();
        this.onClosed.emit();
        if (this.parentContainer != null) {
            this.parentContainer.clear();
        }
    };
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], ModalComponent.prototype, "onClose", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], ModalComponent.prototype, "onClosed", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], ModalComponent.prototype, "onShow", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], ModalComponent.prototype, "onShown", void 0);
    __decorate([
        core_1.ViewChild('container', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], ModalComponent.prototype, "container", void 0);
    ModalComponent = __decorate([
        core_1.Component({
            selector: 'app-modal',
            template: "<ng-template #container></ng-template>",
        }),
        __metadata("design:paramtypes", [core_1.ComponentFactoryResolver])
    ], ModalComponent);
    return ModalComponent;
}());
exports.ModalComponent = ModalComponent;


/***/ }),

/***/ "./jslib/src/angular/components/password-generator-history.component.ts":
/*!******************************************************************************!*\
  !*** ./jslib/src/angular/components/password-generator-history.component.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var PasswordGeneratorHistoryComponent = /** @class */ (function () {
    function PasswordGeneratorHistoryComponent(passwordGenerationService, analytics, platformUtilsService, i18nService, toasterService, win) {
        this.passwordGenerationService = passwordGenerationService;
        this.analytics = analytics;
        this.platformUtilsService = platformUtilsService;
        this.i18nService = i18nService;
        this.toasterService = toasterService;
        this.win = win;
        this.history = [];
    }
    PasswordGeneratorHistoryComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.passwordGenerationService.getHistory()];
                    case 1:
                        _a.history = _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    PasswordGeneratorHistoryComponent.prototype.clear = function () {
        this.history = [];
        this.passwordGenerationService.clear();
    };
    PasswordGeneratorHistoryComponent.prototype.copy = function (password) {
        this.analytics.eventTrack.next({ action: 'Copied Historical Password' });
        var copyOptions = this.win != null ? { doc: this.win.document } : null;
        this.platformUtilsService.copyToClipboard(password, copyOptions);
        this.toasterService.popAsync('info', null, this.i18nService.t('valueCopied', this.i18nService.t('password')));
    };
    return PasswordGeneratorHistoryComponent;
}());
exports.PasswordGeneratorHistoryComponent = PasswordGeneratorHistoryComponent;


/***/ }),

/***/ "./jslib/src/angular/components/password-generator.component.ts":
/*!**********************************************************************!*\
  !*** ./jslib/src/angular/components/password-generator.component.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var PasswordGeneratorComponent = /** @class */ (function () {
    function PasswordGeneratorComponent(passwordGenerationService, analytics, platformUtilsService, i18nService, toasterService, win) {
        this.passwordGenerationService = passwordGenerationService;
        this.analytics = analytics;
        this.platformUtilsService = platformUtilsService;
        this.i18nService = i18nService;
        this.toasterService = toasterService;
        this.win = win;
        this.showSelect = false;
        this.onSelected = new core_1.EventEmitter();
        this.options = {};
        this.password = '-';
        this.showOptions = false;
        this.avoidAmbiguous = false;
    }
    PasswordGeneratorComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.passwordGenerationService.getOptions()];
                    case 1:
                        _a.options = _c.sent();
                        this.avoidAmbiguous = !this.options.ambiguous;
                        _b = this;
                        return [4 /*yield*/, this.passwordGenerationService.generatePassword(this.options)];
                    case 2:
                        _b.password = _c.sent();
                        this.analytics.eventTrack.next({ action: 'Generated Password' });
                        return [4 /*yield*/, this.passwordGenerationService.addHistory(this.password)];
                    case 3:
                        _c.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    PasswordGeneratorComponent.prototype.sliderChanged = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.saveOptions(false);
                        return [4 /*yield*/, this.passwordGenerationService.addHistory(this.password)];
                    case 1:
                        _a.sent();
                        this.analytics.eventTrack.next({ action: 'Regenerated Password' });
                        return [2 /*return*/];
                }
            });
        });
    };
    PasswordGeneratorComponent.prototype.sliderInput = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.normalizeOptions();
                        _a = this;
                        return [4 /*yield*/, this.passwordGenerationService.generatePassword(this.options)];
                    case 1:
                        _a.password = _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    PasswordGeneratorComponent.prototype.saveOptions = function (regenerate) {
        if (regenerate === void 0) { regenerate = true; }
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.normalizeOptions();
                        return [4 /*yield*/, this.passwordGenerationService.saveOptions(this.options)];
                    case 1:
                        _a.sent();
                        if (!regenerate) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.regenerate()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    PasswordGeneratorComponent.prototype.regenerate = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.passwordGenerationService.generatePassword(this.options)];
                    case 1:
                        _a.password = _b.sent();
                        return [4 /*yield*/, this.passwordGenerationService.addHistory(this.password)];
                    case 2:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Regenerated Password' });
                        return [2 /*return*/];
                }
            });
        });
    };
    PasswordGeneratorComponent.prototype.copy = function () {
        this.analytics.eventTrack.next({ action: 'Copied Generated Password' });
        var copyOptions = this.win != null ? { doc: this.win.document } : null;
        this.platformUtilsService.copyToClipboard(this.password, copyOptions);
        this.toasterService.popAsync('info', null, this.i18nService.t('valueCopied', this.i18nService.t('password')));
    };
    PasswordGeneratorComponent.prototype.select = function () {
        this.analytics.eventTrack.next({ action: 'Selected Generated Password' });
        this.onSelected.emit(this.password);
    };
    PasswordGeneratorComponent.prototype.toggleOptions = function () {
        this.showOptions = !this.showOptions;
    };
    PasswordGeneratorComponent.prototype.normalizeOptions = function () {
        this.options.minLowercase = 0;
        this.options.minUppercase = 0;
        this.options.ambiguous = !this.avoidAmbiguous;
        if (!this.options.uppercase && !this.options.lowercase && !this.options.number && !this.options.special) {
            this.options.lowercase = true;
            var lowercase = document.querySelector('#lowercase');
            if (lowercase) {
                lowercase.checked = true;
            }
        }
        if (!this.options.length || this.options.length < 5) {
            this.options.length = 5;
        }
        else if (this.options.length > 128) {
            this.options.length = 128;
        }
        if (!this.options.minNumber) {
            this.options.minNumber = 0;
        }
        else if (this.options.minNumber > this.options.length) {
            this.options.minNumber = this.options.length;
        }
        else if (this.options.minNumber > 9) {
            this.options.minNumber = 9;
        }
        if (!this.options.minSpecial) {
            this.options.minSpecial = 0;
        }
        else if (this.options.minSpecial > this.options.length) {
            this.options.minSpecial = this.options.length;
        }
        else if (this.options.minSpecial > 9) {
            this.options.minSpecial = 9;
        }
        if (this.options.minSpecial + this.options.minNumber > this.options.length) {
            this.options.minSpecial = this.options.length - this.options.minNumber;
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Boolean)
    ], PasswordGeneratorComponent.prototype, "showSelect", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], PasswordGeneratorComponent.prototype, "onSelected", void 0);
    return PasswordGeneratorComponent;
}());
exports.PasswordGeneratorComponent = PasswordGeneratorComponent;


/***/ }),

/***/ "./jslib/src/angular/components/register.component.ts":
/*!************************************************************!*\
  !*** ./jslib/src/angular/components/register.component.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var keysRequest_1 = __webpack_require__(/*! ../../models/request/keysRequest */ "./jslib/src/models/request/keysRequest.ts");
var registerRequest_1 = __webpack_require__(/*! ../../models/request/registerRequest */ "./jslib/src/models/request/registerRequest.ts");
var RegisterComponent = /** @class */ (function () {
    function RegisterComponent(authService, router, analytics, toasterService, i18nService, cryptoService, apiService, stateService) {
        this.authService = authService;
        this.router = router;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.cryptoService = cryptoService;
        this.apiService = apiService;
        this.stateService = stateService;
        this.name = '';
        this.email = '';
        this.masterPassword = '';
        this.confirmMasterPassword = '';
        this.hint = '';
        this.showPassword = false;
        this.successRoute = 'login';
    }
    RegisterComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var key, encKey, hashedPassword, keys, request, orgInvite, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.email == null || this.email === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('emailRequired'));
                            return [2 /*return*/];
                        }
                        if (this.email.indexOf('@') === -1) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('invalidEmail'));
                            return [2 /*return*/];
                        }
                        if (this.masterPassword == null || this.masterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassRequired'));
                            return [2 /*return*/];
                        }
                        if (this.masterPassword.length < 8) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassLength'));
                            return [2 /*return*/];
                        }
                        if (this.masterPassword !== this.confirmMasterPassword) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassDoesntMatch'));
                            return [2 /*return*/];
                        }
                        this.name = this.name === '' ? null : this.name;
                        this.email = this.email.toLowerCase();
                        return [4 /*yield*/, this.cryptoService.makeKey(this.masterPassword, this.email)];
                    case 1:
                        key = _b.sent();
                        return [4 /*yield*/, this.cryptoService.makeEncKey(key)];
                    case 2:
                        encKey = _b.sent();
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, key)];
                    case 3:
                        hashedPassword = _b.sent();
                        return [4 /*yield*/, this.cryptoService.makeKeyPair(encKey[0])];
                    case 4:
                        keys = _b.sent();
                        request = new registerRequest_1.RegisterRequest(this.email, this.name, hashedPassword, this.hint, encKey[1].encryptedString);
                        request.keys = new keysRequest_1.KeysRequest(keys[0], keys[1].encryptedString);
                        return [4 /*yield*/, this.stateService.get('orgInvitation')];
                    case 5:
                        orgInvite = _b.sent();
                        if (orgInvite != null && orgInvite.token != null && orgInvite.organizationUserId != null) {
                            request.token = orgInvite.token;
                            request.organizationUserId = orgInvite.organizationUserId;
                        }
                        _b.label = 6;
                    case 6:
                        _b.trys.push([6, 8, , 9]);
                        this.formPromise = this.apiService.postRegister(request);
                        return [4 /*yield*/, this.formPromise];
                    case 7:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Registered' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('newAccountCreated'));
                        this.router.navigate([this.successRoute], { queryParams: { email: this.email } });
                        return [3 /*break*/, 9];
                    case 8:
                        _a = _b.sent();
                        return [3 /*break*/, 9];
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    RegisterComponent.prototype.togglePassword = function (confirmField) {
        this.analytics.eventTrack.next({ action: 'Toggled Master Password on Register' });
        this.showPassword = !this.showPassword;
        document.getElementById(confirmField ? 'masterPasswordRetype' : 'masterPassword').focus();
    };
    return RegisterComponent;
}());
exports.RegisterComponent = RegisterComponent;


/***/ }),

/***/ "./jslib/src/angular/components/two-factor-options.component.ts":
/*!**********************************************************************!*\
  !*** ./jslib/src/angular/components/two-factor-options.component.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var TwoFactorOptionsComponent = /** @class */ (function () {
    function TwoFactorOptionsComponent(authService, router, analytics, toasterService, i18nService, platformUtilsService, win) {
        this.authService = authService;
        this.router = router;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.platformUtilsService = platformUtilsService;
        this.win = win;
        this.onProviderSelected = new core_1.EventEmitter();
        this.onRecoverSelected = new core_1.EventEmitter();
        this.providers = [];
    }
    TwoFactorOptionsComponent.prototype.ngOnInit = function () {
        this.providers = this.authService.getSupportedTwoFactorProviders(this.win);
    };
    TwoFactorOptionsComponent.prototype.choose = function (p) {
        this.onProviderSelected.emit(p.type);
    };
    TwoFactorOptionsComponent.prototype.recover = function () {
        this.analytics.eventTrack.next({ action: 'Selected Recover' });
        this.platformUtilsService.launchUri('https://help.bitwarden.com/article/lost-two-step-device/');
        this.onRecoverSelected.emit();
    };
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], TwoFactorOptionsComponent.prototype, "onProviderSelected", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], TwoFactorOptionsComponent.prototype, "onRecoverSelected", void 0);
    return TwoFactorOptionsComponent;
}());
exports.TwoFactorOptionsComponent = TwoFactorOptionsComponent;


/***/ }),

/***/ "./jslib/src/angular/components/two-factor.component.ts":
/*!**************************************************************!*\
  !*** ./jslib/src/angular/components/two-factor.component.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var deviceType_1 = __webpack_require__(/*! ../../enums/deviceType */ "./jslib/src/enums/deviceType.ts");
var twoFactorProviderType_1 = __webpack_require__(/*! ../../enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var twoFactorEmailRequest_1 = __webpack_require__(/*! ../../models/request/twoFactorEmailRequest */ "./jslib/src/models/request/twoFactorEmailRequest.ts");
var auth_service_1 = __webpack_require__(/*! ../../services/auth.service */ "./jslib/src/services/auth.service.ts");
var DuoWebSDK = __webpack_require__(/*! ../../misc/duo */ "./jslib/src/misc/duo.js");
var u2f_1 = __webpack_require__(/*! ../../misc/u2f */ "./jslib/src/misc/u2f.ts");
var TwoFactorComponent = /** @class */ (function () {
    function TwoFactorComponent(authService, router, analytics, toasterService, i18nService, apiService, platformUtilsService, win, environmentService) {
        this.authService = authService;
        this.router = router;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.apiService = apiService;
        this.platformUtilsService = platformUtilsService;
        this.win = win;
        this.environmentService = environmentService;
        this.token = '';
        this.remember = false;
        this.u2fReady = false;
        this.providers = auth_service_1.TwoFactorProviders;
        this.providerType = twoFactorProviderType_1.TwoFactorProviderType;
        this.selectedProviderType = twoFactorProviderType_1.TwoFactorProviderType.Authenticator;
        this.u2fSupported = false;
        this.u2f = null;
        this.title = '';
        this.twoFactorEmail = null;
        this.loginRoute = 'login';
        this.successRoute = 'vault';
        this.u2fSupported = this.platformUtilsService.supportsU2f(win);
    }
    TwoFactorComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var customWebVaultUrl;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.authService.email == null || this.authService.masterPasswordHash == null ||
                            this.authService.twoFactorProviders == null) {
                            this.router.navigate([this.loginRoute]);
                            return [2 /*return*/];
                        }
                        if (this.win != null && this.u2fSupported) {
                            customWebVaultUrl = null;
                            if (this.environmentService.baseUrl != null) {
                                customWebVaultUrl = this.environmentService.baseUrl;
                            }
                            else if (this.environmentService.webVaultUrl != null) {
                                customWebVaultUrl = this.environmentService.webVaultUrl;
                            }
                            this.u2f = new u2f_1.U2f(this.win, customWebVaultUrl, function (token) {
                                _this.token = token;
                                _this.submit();
                            }, function (error) {
                                _this.toasterService.popAsync('error', _this.i18nService.t('errorOccurred'), error);
                            }, function (info) {
                                if (info === 'ready') {
                                    _this.u2fReady = true;
                                }
                            });
                        }
                        this.selectedProviderType = this.authService.getDefaultTwoFactorProvider(this.u2fSupported);
                        return [4 /*yield*/, this.init()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorComponent.prototype.ngOnDestroy = function () {
        this.cleanupU2f();
        this.u2f = null;
    };
    TwoFactorComponent.prototype.init = function () {
        return __awaiter(this, void 0, void 0, function () {
            var params, _a, challenges;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.selectedProviderType == null) {
                            this.title = this.i18nService.t('loginUnavailable');
                            return [2 /*return*/];
                        }
                        this.cleanupU2f();
                        this.title = auth_service_1.TwoFactorProviders[this.selectedProviderType].name;
                        params = this.authService.twoFactorProviders.get(this.selectedProviderType);
                        _a = this.selectedProviderType;
                        switch (_a) {
                            case twoFactorProviderType_1.TwoFactorProviderType.U2f: return [3 /*break*/, 1];
                            case twoFactorProviderType_1.TwoFactorProviderType.Duo: return [3 /*break*/, 2];
                            case twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo: return [3 /*break*/, 2];
                            case twoFactorProviderType_1.TwoFactorProviderType.Email: return [3 /*break*/, 3];
                        }
                        return [3 /*break*/, 6];
                    case 1:
                        if (!this.u2fSupported || this.u2f == null) {
                            return [3 /*break*/, 7];
                        }
                        challenges = JSON.parse(params.Challenges);
                        if (challenges.length > 0) {
                            this.u2f.init({
                                appId: challenges[0].appId,
                                challenge: challenges[0].challenge,
                                keys: [{
                                        version: challenges[0].version,
                                        keyHandle: challenges[0].keyHandle,
                                    }],
                            });
                        }
                        return [3 /*break*/, 7];
                    case 2:
                        if (this.platformUtilsService.getDevice() === deviceType_1.DeviceType.SafariExtension) {
                            return [3 /*break*/, 7];
                        }
                        setTimeout(function () {
                            DuoWebSDK.init({
                                iframe: undefined,
                                host: params.Host,
                                sig_request: params.Signature,
                                submit_callback: function (f) { return __awaiter(_this, void 0, void 0, function () {
                                    var sig;
                                    return __generator(this, function (_a) {
                                        switch (_a.label) {
                                            case 0:
                                                sig = f.querySelector('input[name="sig_response"]');
                                                if (!(sig != null)) return [3 /*break*/, 2];
                                                this.token = sig.value;
                                                return [4 /*yield*/, this.submit()];
                                            case 1:
                                                _a.sent();
                                                _a.label = 2;
                                            case 2: return [2 /*return*/];
                                        }
                                    });
                                }); },
                            });
                        }, 0);
                        return [3 /*break*/, 7];
                    case 3:
                        this.twoFactorEmail = params.Email;
                        if (!(this.authService.twoFactorProviders.size > 1)) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.sendEmail(false)];
                    case 4:
                        _b.sent();
                        _b.label = 5;
                    case 5: return [3 /*break*/, 7];
                    case 6: return [3 /*break*/, 7];
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.token == null || this.token === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('verificationCodeRequired'));
                            return [2 /*return*/];
                        }
                        if (this.selectedProviderType === twoFactorProviderType_1.TwoFactorProviderType.U2f) {
                            if (this.u2f != null) {
                                this.u2f.stop();
                            }
                            else {
                                return [2 /*return*/];
                            }
                        }
                        else if (this.selectedProviderType === twoFactorProviderType_1.TwoFactorProviderType.Email ||
                            this.selectedProviderType === twoFactorProviderType_1.TwoFactorProviderType.Authenticator) {
                            this.token = this.token.replace(' ', '').trim();
                        }
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        this.formPromise = this.authService.logInTwoFactor(this.selectedProviderType, this.token, this.remember);
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _a.sent();
                        if (this.onSuccessfulLogin != null) {
                            this.onSuccessfulLogin();
                        }
                        this.analytics.eventTrack.next({ action: 'Logged In From Two-step' });
                        if (this.onSuccessfulLoginNavigate != null) {
                            this.onSuccessfulLoginNavigate();
                        }
                        else {
                            this.router.navigate([this.successRoute]);
                        }
                        return [3 /*break*/, 4];
                    case 3:
                        e_1 = _a.sent();
                        if (this.selectedProviderType === twoFactorProviderType_1.TwoFactorProviderType.U2f && this.u2f != null) {
                            this.u2f.start();
                        }
                        else {
                            throw e_1;
                        }
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorComponent.prototype.sendEmail = function (doToast) {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.selectedProviderType !== twoFactorProviderType_1.TwoFactorProviderType.Email) {
                            return [2 /*return*/];
                        }
                        if (this.emailPromise != null) {
                            return [2 /*return*/];
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        request = new twoFactorEmailRequest_1.TwoFactorEmailRequest(this.authService.email, this.authService.masterPasswordHash);
                        this.emailPromise = this.apiService.postTwoFactorEmail(request);
                        return [4 /*yield*/, this.emailPromise];
                    case 2:
                        _b.sent();
                        if (doToast) {
                            this.toasterService.popAsync('success', null, this.i18nService.t('verificationCodeEmailSent', this.twoFactorEmail));
                        }
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4:
                        this.emailPromise = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorComponent.prototype.cleanupU2f = function () {
        if (this.u2f != null) {
            this.u2f.stop();
            this.u2f.cleanup();
        }
    };
    return TwoFactorComponent;
}());
exports.TwoFactorComponent = TwoFactorComponent;


/***/ }),

/***/ "./jslib/src/angular/directives/api-action.directive.ts":
/*!**************************************************************!*\
  !*** ./jslib/src/angular/directives/api-action.directive.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var validation_service_1 = __webpack_require__(/*! ../services/validation.service */ "./jslib/src/angular/services/validation.service.ts");
var ApiActionDirective = /** @class */ (function () {
    function ApiActionDirective(el, validationService) {
        this.el = el;
        this.validationService = validationService;
    }
    ApiActionDirective.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (this.appApiAction == null || this.appApiAction.then == null) {
            return;
        }
        this.el.nativeElement.loading = true;
        this.appApiAction.then(function (response) {
            _this.el.nativeElement.loading = false;
        }, function (e) {
            _this.el.nativeElement.loading = false;
            _this.validationService.showError(e);
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Promise)
    ], ApiActionDirective.prototype, "appApiAction", void 0);
    ApiActionDirective = __decorate([
        core_1.Directive({
            selector: '[appApiAction]',
        }),
        __metadata("design:paramtypes", [core_1.ElementRef, validation_service_1.ValidationService])
    ], ApiActionDirective);
    return ApiActionDirective;
}());
exports.ApiActionDirective = ApiActionDirective;


/***/ }),

/***/ "./jslib/src/angular/directives/autofocus.directive.ts":
/*!*************************************************************!*\
  !*** ./jslib/src/angular/directives/autofocus.directive.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var AutofocusDirective = /** @class */ (function () {
    function AutofocusDirective(el) {
        this.el = el;
    }
    Object.defineProperty(AutofocusDirective.prototype, "appAutofocus", {
        set: function (condition) {
            this.autofocus = condition === '' || condition === true;
        },
        enumerable: true,
        configurable: true
    });
    AutofocusDirective.prototype.ngOnInit = function () {
        if (this.autofocus) {
            this.el.nativeElement.focus();
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], AutofocusDirective.prototype, "appAutofocus", null);
    AutofocusDirective = __decorate([
        core_1.Directive({
            selector: '[appAutofocus]',
        }),
        __metadata("design:paramtypes", [core_1.ElementRef])
    ], AutofocusDirective);
    return AutofocusDirective;
}());
exports.AutofocusDirective = AutofocusDirective;


/***/ }),

/***/ "./jslib/src/angular/directives/blur-click.directive.ts":
/*!**************************************************************!*\
  !*** ./jslib/src/angular/directives/blur-click.directive.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var BlurClickDirective = /** @class */ (function () {
    function BlurClickDirective(el) {
        this.el = el;
    }
    BlurClickDirective.prototype.onClick = function () {
        this.el.nativeElement.blur();
    };
    __decorate([
        core_1.HostListener('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], BlurClickDirective.prototype, "onClick", null);
    BlurClickDirective = __decorate([
        core_1.Directive({
            selector: '[appBlurClick]',
        }),
        __metadata("design:paramtypes", [core_1.ElementRef])
    ], BlurClickDirective);
    return BlurClickDirective;
}());
exports.BlurClickDirective = BlurClickDirective;


/***/ }),

/***/ "./jslib/src/angular/directives/box-row.directive.ts":
/*!***********************************************************!*\
  !*** ./jslib/src/angular/directives/box-row.directive.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var BoxRowDirective = /** @class */ (function () {
    function BoxRowDirective(elRef) {
        this.elRef = elRef;
        this.el = null;
        this.el = elRef.nativeElement;
    }
    BoxRowDirective.prototype.ngOnInit = function () {
        var _this = this;
        this.formEls = Array.from(this.el.querySelectorAll('input:not([type="hidden"]), select, textarea'));
        this.formEls.forEach(function (formEl) {
            formEl.addEventListener('focus', function (event) {
                _this.el.classList.add('active');
            }, false);
            formEl.addEventListener('blur', function (event) {
                _this.el.classList.remove('active');
            }, false);
        });
    };
    BoxRowDirective.prototype.onClick = function (event) {
        if (event.target !== this.el) {
            return;
        }
        if (this.formEls.length > 0) {
            var formEl = this.formEls[0];
            if (formEl.tagName.toLowerCase() === 'input') {
                var inputEl = formEl;
                if (inputEl.type != null && inputEl.type.toLowerCase() === 'checkbox') {
                    inputEl.click();
                    return;
                }
            }
            formEl.focus();
        }
    };
    __decorate([
        core_1.HostListener('click', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Event]),
        __metadata("design:returntype", void 0)
    ], BoxRowDirective.prototype, "onClick", null);
    BoxRowDirective = __decorate([
        core_1.Directive({
            selector: '[appBoxRow]',
        }),
        __metadata("design:paramtypes", [core_1.ElementRef])
    ], BoxRowDirective);
    return BoxRowDirective;
}());
exports.BoxRowDirective = BoxRowDirective;


/***/ }),

/***/ "./jslib/src/angular/directives/fallback-src.directive.ts":
/*!****************************************************************!*\
  !*** ./jslib/src/angular/directives/fallback-src.directive.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var FallbackSrcDirective = /** @class */ (function () {
    function FallbackSrcDirective(el) {
        this.el = el;
    }
    FallbackSrcDirective.prototype.onError = function () {
        this.el.nativeElement.src = this.appFallbackSrc;
    };
    __decorate([
        core_1.Input('appFallbackSrc'),
        __metadata("design:type", String)
    ], FallbackSrcDirective.prototype, "appFallbackSrc", void 0);
    __decorate([
        core_1.HostListener('error'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], FallbackSrcDirective.prototype, "onError", null);
    FallbackSrcDirective = __decorate([
        core_1.Directive({
            selector: '[appFallbackSrc]',
        }),
        __metadata("design:paramtypes", [core_1.ElementRef])
    ], FallbackSrcDirective);
    return FallbackSrcDirective;
}());
exports.FallbackSrcDirective = FallbackSrcDirective;


/***/ }),

/***/ "./jslib/src/angular/directives/input-verbatim.directive.ts":
/*!******************************************************************!*\
  !*** ./jslib/src/angular/directives/input-verbatim.directive.ts ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var InputVerbatimDirective = /** @class */ (function () {
    function InputVerbatimDirective(el, renderer) {
        this.el = el;
        this.renderer = renderer;
    }
    Object.defineProperty(InputVerbatimDirective.prototype, "appInputVerbatim", {
        set: function (condition) {
            this.disableComplete = condition === '' || condition === true;
        },
        enumerable: true,
        configurable: true
    });
    InputVerbatimDirective.prototype.ngOnInit = function () {
        if (this.disableComplete && !this.el.nativeElement.hasAttribute('autocomplete')) {
            this.renderer.setAttribute(this.el.nativeElement, 'autocomplete', 'off');
        }
        if (!this.el.nativeElement.hasAttribute('autocapitalize')) {
            this.renderer.setAttribute(this.el.nativeElement, 'autocapitalize', 'none');
        }
        if (!this.el.nativeElement.hasAttribute('autocorrect')) {
            this.renderer.setAttribute(this.el.nativeElement, 'autocorrect', 'none');
        }
        if (!this.el.nativeElement.hasAttribute('spellcheck')) {
            this.renderer.setAttribute(this.el.nativeElement, 'spellcheck', 'false');
        }
        if (!this.el.nativeElement.hasAttribute('inputmode')) {
            this.renderer.setAttribute(this.el.nativeElement, 'inputmode', 'verbatim');
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], InputVerbatimDirective.prototype, "appInputVerbatim", null);
    InputVerbatimDirective = __decorate([
        core_1.Directive({
            selector: '[appInputVerbatim]',
        }),
        __metadata("design:paramtypes", [core_1.ElementRef, core_1.Renderer2])
    ], InputVerbatimDirective);
    return InputVerbatimDirective;
}());
exports.InputVerbatimDirective = InputVerbatimDirective;


/***/ }),

/***/ "./jslib/src/angular/directives/stop-click.directive.ts":
/*!**************************************************************!*\
  !*** ./jslib/src/angular/directives/stop-click.directive.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var StopClickDirective = /** @class */ (function () {
    function StopClickDirective() {
    }
    StopClickDirective.prototype.onClick = function ($event) {
        $event.preventDefault();
    };
    __decorate([
        core_1.HostListener('click', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [MouseEvent]),
        __metadata("design:returntype", void 0)
    ], StopClickDirective.prototype, "onClick", null);
    StopClickDirective = __decorate([
        core_1.Directive({
            selector: '[appStopClick]',
        })
    ], StopClickDirective);
    return StopClickDirective;
}());
exports.StopClickDirective = StopClickDirective;


/***/ }),

/***/ "./jslib/src/angular/directives/stop-prop.directive.ts":
/*!*************************************************************!*\
  !*** ./jslib/src/angular/directives/stop-prop.directive.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var StopPropDirective = /** @class */ (function () {
    function StopPropDirective() {
    }
    StopPropDirective.prototype.onClick = function ($event) {
        $event.stopPropagation();
    };
    __decorate([
        core_1.HostListener('click', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [MouseEvent]),
        __metadata("design:returntype", void 0)
    ], StopPropDirective.prototype, "onClick", null);
    StopPropDirective = __decorate([
        core_1.Directive({
            selector: '[appStopProp]',
        })
    ], StopPropDirective);
    return StopPropDirective;
}());
exports.StopPropDirective = StopPropDirective;


/***/ }),

/***/ "./jslib/src/angular/directives/true-false-value.directive.ts":
/*!********************************************************************!*\
  !*** ./jslib/src/angular/directives/true-false-value.directive.ts ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var forms_1 = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/esm5/forms.js");
// ref: https://juristr.com/blog/2018/02/ng-true-value-directive/
var TrueFalseValueDirective = /** @class */ (function () {
    function TrueFalseValueDirective(elementRef, renderer) {
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.trueValue = true;
        this.falseValue = false;
        this.propagateChange = function (_) { };
    }
    TrueFalseValueDirective_1 = TrueFalseValueDirective;
    TrueFalseValueDirective.prototype.onHostChange = function (ev) {
        this.propagateChange(ev.target.checked ? this.trueValue : this.falseValue);
    };
    TrueFalseValueDirective.prototype.writeValue = function (obj) {
        if (obj === this.trueValue) {
            this.renderer.setProperty(this.elementRef.nativeElement, 'checked', true);
        }
        else {
            this.renderer.setProperty(this.elementRef.nativeElement, 'checked', false);
        }
    };
    TrueFalseValueDirective.prototype.registerOnChange = function (fn) {
        this.propagateChange = fn;
    };
    TrueFalseValueDirective.prototype.registerOnTouched = function (fn) { };
    TrueFalseValueDirective.prototype.setDisabledState = function (isDisabled) { };
    var TrueFalseValueDirective_1;
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], TrueFalseValueDirective.prototype, "trueValue", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], TrueFalseValueDirective.prototype, "falseValue", void 0);
    __decorate([
        core_1.HostListener('change', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], TrueFalseValueDirective.prototype, "onHostChange", null);
    TrueFalseValueDirective = TrueFalseValueDirective_1 = __decorate([
        core_1.Directive({
            selector: 'input[type=checkbox][appTrueFalseValue]',
            providers: [
                {
                    provide: forms_1.NG_VALUE_ACCESSOR,
                    useExisting: core_1.forwardRef(function () { return TrueFalseValueDirective_1; }),
                    multi: true,
                },
            ],
        }),
        __metadata("design:paramtypes", [core_1.ElementRef, core_1.Renderer2])
    ], TrueFalseValueDirective);
    return TrueFalseValueDirective;
}());
exports.TrueFalseValueDirective = TrueFalseValueDirective;


/***/ }),

/***/ "./jslib/src/angular/pipes/i18n.pipe.ts":
/*!**********************************************!*\
  !*** ./jslib/src/angular/pipes/i18n.pipe.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var i18n_service_1 = __webpack_require__(/*! ../../abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var I18nPipe = /** @class */ (function () {
    function I18nPipe(i18nService) {
        this.i18nService = i18nService;
    }
    I18nPipe.prototype.transform = function (id, p1, p2, p3) {
        return this.i18nService.t(id, p1, p2, p3);
    };
    I18nPipe = __decorate([
        core_1.Pipe({
            name: 'i18n',
        }),
        __metadata("design:paramtypes", [i18n_service_1.I18nService])
    ], I18nPipe);
    return I18nPipe;
}());
exports.I18nPipe = I18nPipe;


/***/ }),

/***/ "./jslib/src/angular/pipes/search-ciphers.pipe.ts":
/*!********************************************************!*\
  !*** ./jslib/src/angular/pipes/search-ciphers.pipe.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var platformUtils_service_1 = __webpack_require__(/*! ../../abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var enums_1 = __webpack_require__(/*! ../../enums */ "./jslib/src/enums/index.ts");
var SearchCiphersPipe = /** @class */ (function () {
    function SearchCiphersPipe(platformUtilsService) {
        this.onlySearchName = false;
        this.onlySearchName = platformUtilsService.getDevice() === enums_1.DeviceType.EdgeExtension;
    }
    SearchCiphersPipe.prototype.transform = function (ciphers, searchText) {
        var _this = this;
        if (ciphers == null || ciphers.length === 0) {
            return [];
        }
        if (searchText == null || searchText.length < 2) {
            return ciphers;
        }
        searchText = searchText.trim().toLowerCase();
        return ciphers.filter(function (c) {
            if (c.name != null && c.name.toLowerCase().indexOf(searchText) > -1) {
                return true;
            }
            if (_this.onlySearchName) {
                return false;
            }
            if (searchText.length >= 8 && c.id.startsWith(searchText)) {
                return true;
            }
            if (c.subTitle != null && c.subTitle.toLowerCase().indexOf(searchText) > -1) {
                return true;
            }
            if (c.login && c.login.uri != null && c.login.uri.toLowerCase().indexOf(searchText) > -1) {
                return true;
            }
            return false;
        });
    };
    SearchCiphersPipe = __decorate([
        core_1.Pipe({
            name: 'searchCiphers',
        }),
        __metadata("design:paramtypes", [platformUtils_service_1.PlatformUtilsService])
    ], SearchCiphersPipe);
    return SearchCiphersPipe;
}());
exports.SearchCiphersPipe = SearchCiphersPipe;


/***/ }),

/***/ "./jslib/src/angular/pipes/search.pipe.ts":
/*!************************************************!*\
  !*** ./jslib/src/angular/pipes/search.pipe.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var SearchPipe = /** @class */ (function () {
    function SearchPipe() {
    }
    SearchPipe.prototype.transform = function (items, searchText, prop1, prop2, prop3) {
        if (items == null || items.length === 0) {
            return [];
        }
        if (searchText == null || searchText.length < 2) {
            return items;
        }
        searchText = searchText.trim().toLowerCase();
        return items.filter(function (i) {
            if (prop1 != null && i[prop1] != null && i[prop1].toString().toLowerCase().indexOf(searchText) > -1) {
                return true;
            }
            if (prop2 != null && i[prop2] != null && i[prop2].toString().toLowerCase().indexOf(searchText) > -1) {
                return true;
            }
            if (prop3 != null && i[prop3] != null && i[prop3].toString().toLowerCase().indexOf(searchText) > -1) {
                return true;
            }
            return false;
        });
    };
    SearchPipe = __decorate([
        core_1.Pipe({
            name: 'search',
        })
    ], SearchPipe);
    return SearchPipe;
}());
exports.SearchPipe = SearchPipe;


/***/ }),

/***/ "./jslib/src/angular/services/auth-guard.service.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/angular/services/auth-guard.service.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var crypto_service_1 = __webpack_require__(/*! ../../abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var messaging_service_1 = __webpack_require__(/*! ../../abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var user_service_1 = __webpack_require__(/*! ../../abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var AuthGuardService = /** @class */ (function () {
    function AuthGuardService(cryptoService, userService, router, messagingService) {
        this.cryptoService = cryptoService;
        this.userService = userService;
        this.router = router;
        this.messagingService = messagingService;
    }
    AuthGuardService.prototype.canActivate = function () {
        return __awaiter(this, void 0, void 0, function () {
            var isAuthed, hasKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.isAuthenticated()];
                    case 1:
                        isAuthed = _a.sent();
                        if (!isAuthed) {
                            this.messagingService.send('logout');
                            return [2 /*return*/, false];
                        }
                        return [4 /*yield*/, this.cryptoService.hasKey()];
                    case 2:
                        hasKey = _a.sent();
                        if (!hasKey) {
                            this.router.navigate(['lock']);
                            return [2 /*return*/, false];
                        }
                        return [2 /*return*/, true];
                }
            });
        });
    };
    AuthGuardService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [crypto_service_1.CryptoService, user_service_1.UserService, router_1.Router,
            messaging_service_1.MessagingService])
    ], AuthGuardService);
    return AuthGuardService;
}());
exports.AuthGuardService = AuthGuardService;


/***/ }),

/***/ "./jslib/src/angular/services/broadcaster.service.ts":
/*!***********************************************************!*\
  !*** ./jslib/src/angular/services/broadcaster.service.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var BroadcasterService = /** @class */ (function () {
    function BroadcasterService() {
        this.subscribers = new Map();
    }
    BroadcasterService.prototype.send = function (message, id) {
        if (id != null) {
            if (this.subscribers.has(id)) {
                this.subscribers.get(id)(message);
            }
            return;
        }
        this.subscribers.forEach(function (value) {
            value(message);
        });
    };
    BroadcasterService.prototype.subscribe = function (id, messageCallback) {
        if (this.subscribers.has(id)) {
            return;
        }
        this.subscribers.set(id, messageCallback);
    };
    BroadcasterService.prototype.unsubscribe = function (id) {
        if (this.subscribers.has(id)) {
            this.subscribers.delete(id);
        }
    };
    BroadcasterService = __decorate([
        core_1.Injectable()
    ], BroadcasterService);
    return BroadcasterService;
}());
exports.BroadcasterService = BroadcasterService;


/***/ }),

/***/ "./jslib/src/angular/services/validation.service.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/angular/services/validation.service.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var i18n_service_1 = __webpack_require__(/*! ../../abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var ValidationService = /** @class */ (function () {
    function ValidationService(toasterService, i18nService) {
        this.toasterService = toasterService;
        this.i18nService = i18nService;
    }
    ValidationService.prototype.showError = function (data) {
        var defaultErrorMessage = this.i18nService.t('unexpectedError');
        var errors = [];
        if (data != null && typeof data === 'string') {
            errors.push(data);
        }
        else if (data == null || typeof data !== 'object') {
            errors.push(defaultErrorMessage);
        }
        else if (data.validationErrors == null) {
            errors.push(data.message ? data.message : defaultErrorMessage);
        }
        else {
            for (var key in data.validationErrors) {
                if (!data.validationErrors.hasOwnProperty(key)) {
                    continue;
                }
                data.validationErrors[key].forEach(function (item) {
                    errors.push(item);
                });
            }
        }
        if (errors.length > 0) {
            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), errors[0]);
        }
        return errors;
    };
    ValidationService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [angular2_toaster_1.ToasterService, i18n_service_1.I18nService])
    ], ValidationService);
    return ValidationService;
}());
exports.ValidationService = ValidationService;


/***/ }),

/***/ "./jslib/src/enums/cipherType.ts":
/*!***************************************!*\
  !*** ./jslib/src/enums/cipherType.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CipherType;
(function (CipherType) {
    CipherType[CipherType["Login"] = 1] = "Login";
    CipherType[CipherType["SecureNote"] = 2] = "SecureNote";
    CipherType[CipherType["Card"] = 3] = "Card";
    CipherType[CipherType["Identity"] = 4] = "Identity";
})(CipherType = exports.CipherType || (exports.CipherType = {}));


/***/ }),

/***/ "./jslib/src/enums/deviceType.ts":
/*!***************************************!*\
  !*** ./jslib/src/enums/deviceType.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var DeviceType;
(function (DeviceType) {
    DeviceType[DeviceType["Android"] = 0] = "Android";
    DeviceType[DeviceType["iOS"] = 1] = "iOS";
    DeviceType[DeviceType["ChromeExtension"] = 2] = "ChromeExtension";
    DeviceType[DeviceType["FirefoxExtension"] = 3] = "FirefoxExtension";
    DeviceType[DeviceType["OperaExtension"] = 4] = "OperaExtension";
    DeviceType[DeviceType["EdgeExtension"] = 5] = "EdgeExtension";
    DeviceType[DeviceType["WindowsDesktop"] = 6] = "WindowsDesktop";
    DeviceType[DeviceType["MacOsDesktop"] = 7] = "MacOsDesktop";
    DeviceType[DeviceType["LinuxDesktop"] = 8] = "LinuxDesktop";
    DeviceType[DeviceType["ChromeBrowser"] = 9] = "ChromeBrowser";
    DeviceType[DeviceType["FirefoxBrowser"] = 10] = "FirefoxBrowser";
    DeviceType[DeviceType["OperaBrowser"] = 11] = "OperaBrowser";
    DeviceType[DeviceType["EdgeBrowser"] = 12] = "EdgeBrowser";
    DeviceType[DeviceType["IEBrowser"] = 13] = "IEBrowser";
    DeviceType[DeviceType["UnknownBrowser"] = 14] = "UnknownBrowser";
    DeviceType[DeviceType["AndroidAmazon"] = 15] = "AndroidAmazon";
    DeviceType[DeviceType["UWP"] = 16] = "UWP";
    DeviceType[DeviceType["SafariBrowser"] = 17] = "SafariBrowser";
    DeviceType[DeviceType["VivaldiBrowser"] = 18] = "VivaldiBrowser";
    DeviceType[DeviceType["VivaldiExtension"] = 19] = "VivaldiExtension";
    DeviceType[DeviceType["SafariExtension"] = 20] = "SafariExtension";
})(DeviceType = exports.DeviceType || (exports.DeviceType = {}));


/***/ }),

/***/ "./jslib/src/enums/encryptionType.ts":
/*!*******************************************!*\
  !*** ./jslib/src/enums/encryptionType.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EncryptionType;
(function (EncryptionType) {
    EncryptionType[EncryptionType["AesCbc256_B64"] = 0] = "AesCbc256_B64";
    EncryptionType[EncryptionType["AesCbc128_HmacSha256_B64"] = 1] = "AesCbc128_HmacSha256_B64";
    EncryptionType[EncryptionType["AesCbc256_HmacSha256_B64"] = 2] = "AesCbc256_HmacSha256_B64";
    EncryptionType[EncryptionType["Rsa2048_OaepSha256_B64"] = 3] = "Rsa2048_OaepSha256_B64";
    EncryptionType[EncryptionType["Rsa2048_OaepSha1_B64"] = 4] = "Rsa2048_OaepSha1_B64";
    EncryptionType[EncryptionType["Rsa2048_OaepSha256_HmacSha256_B64"] = 5] = "Rsa2048_OaepSha256_HmacSha256_B64";
    EncryptionType[EncryptionType["Rsa2048_OaepSha1_HmacSha256_B64"] = 6] = "Rsa2048_OaepSha1_HmacSha256_B64";
})(EncryptionType = exports.EncryptionType || (exports.EncryptionType = {}));


/***/ }),

/***/ "./jslib/src/enums/eventType.ts":
/*!**************************************!*\
  !*** ./jslib/src/enums/eventType.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventType;
(function (EventType) {
    EventType[EventType["User_LoggedIn"] = 1000] = "User_LoggedIn";
    EventType[EventType["User_ChangedPassword"] = 1001] = "User_ChangedPassword";
    EventType[EventType["User_Enabled2fa"] = 1002] = "User_Enabled2fa";
    EventType[EventType["User_Disabled2fa"] = 1003] = "User_Disabled2fa";
    EventType[EventType["User_Recovered2fa"] = 1004] = "User_Recovered2fa";
    EventType[EventType["User_FailedLogIn"] = 1005] = "User_FailedLogIn";
    EventType[EventType["User_FailedLogIn2fa"] = 1006] = "User_FailedLogIn2fa";
    EventType[EventType["Cipher_Created"] = 1100] = "Cipher_Created";
    EventType[EventType["Cipher_Updated"] = 1101] = "Cipher_Updated";
    EventType[EventType["Cipher_Deleted"] = 1102] = "Cipher_Deleted";
    EventType[EventType["Cipher_AttachmentCreated"] = 1103] = "Cipher_AttachmentCreated";
    EventType[EventType["Cipher_AttachmentDeleted"] = 1104] = "Cipher_AttachmentDeleted";
    EventType[EventType["Cipher_Shared"] = 1105] = "Cipher_Shared";
    EventType[EventType["Cipher_UpdatedCollections"] = 1106] = "Cipher_UpdatedCollections";
    EventType[EventType["Collection_Created"] = 1300] = "Collection_Created";
    EventType[EventType["Collection_Updated"] = 1301] = "Collection_Updated";
    EventType[EventType["Collection_Deleted"] = 1302] = "Collection_Deleted";
    EventType[EventType["Group_Created"] = 1400] = "Group_Created";
    EventType[EventType["Group_Updated"] = 1401] = "Group_Updated";
    EventType[EventType["Group_Deleted"] = 1402] = "Group_Deleted";
    EventType[EventType["OrganizationUser_Invited"] = 1500] = "OrganizationUser_Invited";
    EventType[EventType["OrganizationUser_Confirmed"] = 1501] = "OrganizationUser_Confirmed";
    EventType[EventType["OrganizationUser_Updated"] = 1502] = "OrganizationUser_Updated";
    EventType[EventType["OrganizationUser_Removed"] = 1503] = "OrganizationUser_Removed";
    EventType[EventType["OrganizationUser_UpdatedGroups"] = 1504] = "OrganizationUser_UpdatedGroups";
    EventType[EventType["Organization_Updated"] = 1600] = "Organization_Updated";
})(EventType = exports.EventType || (exports.EventType = {}));


/***/ }),

/***/ "./jslib/src/enums/fieldType.ts":
/*!**************************************!*\
  !*** ./jslib/src/enums/fieldType.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FieldType;
(function (FieldType) {
    FieldType[FieldType["Text"] = 0] = "Text";
    FieldType[FieldType["Hidden"] = 1] = "Hidden";
    FieldType[FieldType["Boolean"] = 2] = "Boolean";
})(FieldType = exports.FieldType || (exports.FieldType = {}));


/***/ }),

/***/ "./jslib/src/enums/index.ts":
/*!**********************************!*\
  !*** ./jslib/src/enums/index.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var cipherType_1 = __webpack_require__(/*! ./cipherType */ "./jslib/src/enums/cipherType.ts");
exports.CipherType = cipherType_1.CipherType;
var deviceType_1 = __webpack_require__(/*! ./deviceType */ "./jslib/src/enums/deviceType.ts");
exports.DeviceType = deviceType_1.DeviceType;
var encryptionType_1 = __webpack_require__(/*! ./encryptionType */ "./jslib/src/enums/encryptionType.ts");
exports.EncryptionType = encryptionType_1.EncryptionType;
var fieldType_1 = __webpack_require__(/*! ./fieldType */ "./jslib/src/enums/fieldType.ts");
exports.FieldType = fieldType_1.FieldType;
var logLevelType_1 = __webpack_require__(/*! ./logLevelType */ "./jslib/src/enums/logLevelType.ts");
exports.LogLevelType = logLevelType_1.LogLevelType;
var secureNoteType_1 = __webpack_require__(/*! ./secureNoteType */ "./jslib/src/enums/secureNoteType.ts");
exports.SecureNoteType = secureNoteType_1.SecureNoteType;
var twoFactorProviderType_1 = __webpack_require__(/*! ./twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
exports.TwoFactorProviderType = twoFactorProviderType_1.TwoFactorProviderType;
var uriMatchType_1 = __webpack_require__(/*! ./uriMatchType */ "./jslib/src/enums/uriMatchType.ts");
exports.UriMatchType = uriMatchType_1.UriMatchType;


/***/ }),

/***/ "./jslib/src/enums/logLevelType.ts":
/*!*****************************************!*\
  !*** ./jslib/src/enums/logLevelType.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var LogLevelType;
(function (LogLevelType) {
    LogLevelType[LogLevelType["Debug"] = 0] = "Debug";
    LogLevelType[LogLevelType["Info"] = 1] = "Info";
    LogLevelType[LogLevelType["Warning"] = 2] = "Warning";
    LogLevelType[LogLevelType["Error"] = 3] = "Error";
})(LogLevelType = exports.LogLevelType || (exports.LogLevelType = {}));


/***/ }),

/***/ "./jslib/src/enums/organizationUserStatusType.ts":
/*!*******************************************************!*\
  !*** ./jslib/src/enums/organizationUserStatusType.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationUserStatusType;
(function (OrganizationUserStatusType) {
    OrganizationUserStatusType[OrganizationUserStatusType["Invited"] = 0] = "Invited";
    OrganizationUserStatusType[OrganizationUserStatusType["Accepted"] = 1] = "Accepted";
    OrganizationUserStatusType[OrganizationUserStatusType["Confirmed"] = 2] = "Confirmed";
})(OrganizationUserStatusType = exports.OrganizationUserStatusType || (exports.OrganizationUserStatusType = {}));


/***/ }),

/***/ "./jslib/src/enums/organizationUserType.ts":
/*!*************************************************!*\
  !*** ./jslib/src/enums/organizationUserType.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationUserType;
(function (OrganizationUserType) {
    OrganizationUserType[OrganizationUserType["Owner"] = 0] = "Owner";
    OrganizationUserType[OrganizationUserType["Admin"] = 1] = "Admin";
    OrganizationUserType[OrganizationUserType["User"] = 2] = "User";
})(OrganizationUserType = exports.OrganizationUserType || (exports.OrganizationUserType = {}));


/***/ }),

/***/ "./jslib/src/enums/paymentMethodType.ts":
/*!**********************************************!*\
  !*** ./jslib/src/enums/paymentMethodType.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var PaymentMethodType;
(function (PaymentMethodType) {
    PaymentMethodType[PaymentMethodType["Card"] = 0] = "Card";
    PaymentMethodType[PaymentMethodType["BankAccount"] = 1] = "BankAccount";
    PaymentMethodType[PaymentMethodType["PayPal"] = 2] = "PayPal";
    PaymentMethodType[PaymentMethodType["Bitcoin"] = 3] = "Bitcoin";
})(PaymentMethodType = exports.PaymentMethodType || (exports.PaymentMethodType = {}));


/***/ }),

/***/ "./jslib/src/enums/planType.ts":
/*!*************************************!*\
  !*** ./jslib/src/enums/planType.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var PlanType;
(function (PlanType) {
    PlanType[PlanType["Free"] = 0] = "Free";
    PlanType[PlanType["FamiliesAnnually"] = 1] = "FamiliesAnnually";
    PlanType[PlanType["TeamsMonthly"] = 2] = "TeamsMonthly";
    PlanType[PlanType["TeamsAnnually"] = 3] = "TeamsAnnually";
    PlanType[PlanType["EnterpriseMonthly"] = 4] = "EnterpriseMonthly";
    PlanType[PlanType["EnterpriseAnnually"] = 5] = "EnterpriseAnnually";
    PlanType[PlanType["Custom"] = 6] = "Custom";
})(PlanType = exports.PlanType || (exports.PlanType = {}));


/***/ }),

/***/ "./jslib/src/enums/secureNoteType.ts":
/*!*******************************************!*\
  !*** ./jslib/src/enums/secureNoteType.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SecureNoteType;
(function (SecureNoteType) {
    SecureNoteType[SecureNoteType["Generic"] = 0] = "Generic";
})(SecureNoteType = exports.SecureNoteType || (exports.SecureNoteType = {}));


/***/ }),

/***/ "./jslib/src/enums/twoFactorProviderType.ts":
/*!**************************************************!*\
  !*** ./jslib/src/enums/twoFactorProviderType.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TwoFactorProviderType;
(function (TwoFactorProviderType) {
    TwoFactorProviderType[TwoFactorProviderType["Authenticator"] = 0] = "Authenticator";
    TwoFactorProviderType[TwoFactorProviderType["Email"] = 1] = "Email";
    TwoFactorProviderType[TwoFactorProviderType["Duo"] = 2] = "Duo";
    TwoFactorProviderType[TwoFactorProviderType["Yubikey"] = 3] = "Yubikey";
    TwoFactorProviderType[TwoFactorProviderType["U2f"] = 4] = "U2f";
    TwoFactorProviderType[TwoFactorProviderType["Remember"] = 5] = "Remember";
    TwoFactorProviderType[TwoFactorProviderType["OrganizationDuo"] = 6] = "OrganizationDuo";
})(TwoFactorProviderType = exports.TwoFactorProviderType || (exports.TwoFactorProviderType = {}));


/***/ }),

/***/ "./jslib/src/enums/uriMatchType.ts":
/*!*****************************************!*\
  !*** ./jslib/src/enums/uriMatchType.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var UriMatchType;
(function (UriMatchType) {
    UriMatchType[UriMatchType["Domain"] = 0] = "Domain";
    UriMatchType[UriMatchType["Host"] = 1] = "Host";
    UriMatchType[UriMatchType["StartsWith"] = 2] = "StartsWith";
    UriMatchType[UriMatchType["Exact"] = 3] = "Exact";
    UriMatchType[UriMatchType["RegularExpression"] = 4] = "RegularExpression";
    UriMatchType[UriMatchType["Never"] = 5] = "Never";
})(UriMatchType = exports.UriMatchType || (exports.UriMatchType = {}));


/***/ }),

/***/ "./jslib/src/importers/ascendoCsvImporter.ts":
/*!***************************************************!*\
  !*** ./jslib/src/importers/ascendoCsvImporter.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var AscendoCsvImporter = /** @class */ (function (_super) {
    __extends(AscendoCsvImporter, _super);
    function AscendoCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AscendoCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, false);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (value.length < 2) {
                return;
            }
            var cipher = _this.initLoginCipher();
            cipher.notes = _this.getValueOrDefault(value[value.length - 1]);
            cipher.name = _this.getValueOrDefault(value[0], '--');
            if (value.length > 2 && (value.length % 2) === 0) {
                for (var i = 0; i < value.length - 2; i += 2) {
                    var val = value[i + 2];
                    var field = value[i + 1];
                    if (_this.isNullOrWhitespace(val) || _this.isNullOrWhitespace(field)) {
                        continue;
                    }
                    var fieldLower = field.toLowerCase();
                    if (cipher.login.password == null && _this.passwordFieldNames.indexOf(fieldLower) > -1) {
                        cipher.login.password = _this.getValueOrDefault(val);
                    }
                    else if (cipher.login.username == null &&
                        _this.usernameFieldNames.indexOf(fieldLower) > -1) {
                        cipher.login.username = _this.getValueOrDefault(val);
                    }
                    else if ((cipher.login.uris == null || cipher.login.uris.length === 0) &&
                        _this.uriFieldNames.indexOf(fieldLower) > -1) {
                        cipher.login.uris = _this.makeUriArray(val);
                    }
                    else {
                        _this.processKvp(cipher, field, val);
                    }
                }
            }
            _this.convertToNoteIfNeeded(cipher);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return AscendoCsvImporter;
}(baseImporter_1.BaseImporter));
exports.AscendoCsvImporter = AscendoCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/aviraCsvImporter.ts":
/*!*************************************************!*\
  !*** ./jslib/src/importers/aviraCsvImporter.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var AviraCsvImporter = /** @class */ (function (_super) {
    __extends(AviraCsvImporter, _super);
    function AviraCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AviraCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(value.name, _this.getValueOrDefault(_this.nameFromUrl(value.website), '--'));
            cipher.login.uris = _this.makeUriArray(value.website);
            cipher.login.password = _this.getValueOrDefault(value.password);
            if (_this.isNullOrWhitespace(value.username) && !_this.isNullOrWhitespace(value.secondary_username)) {
                cipher.login.username = value.secondary_username;
            }
            else {
                cipher.login.username = _this.getValueOrDefault(value.username);
                cipher.notes = _this.getValueOrDefault(value.secondary_username);
            }
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return AviraCsvImporter;
}(baseImporter_1.BaseImporter));
exports.AviraCsvImporter = AviraCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/baseImporter.ts":
/*!*********************************************!*\
  !*** ./jslib/src/importers/baseImporter.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var papa = __webpack_require__(/*! papaparse */ "./node_modules/papaparse/papaparse.js");
var cipherView_1 = __webpack_require__(/*! ../models/view/cipherView */ "./jslib/src/models/view/cipherView.ts");
var collectionView_1 = __webpack_require__(/*! ../models/view/collectionView */ "./jslib/src/models/view/collectionView.ts");
var loginUriView_1 = __webpack_require__(/*! ../models/view/loginUriView */ "./jslib/src/models/view/loginUriView.ts");
var utils_1 = __webpack_require__(/*! ../misc/utils */ "./jslib/src/misc/utils.ts");
var fieldView_1 = __webpack_require__(/*! ../models/view/fieldView */ "./jslib/src/models/view/fieldView.ts");
var folderView_1 = __webpack_require__(/*! ../models/view/folderView */ "./jslib/src/models/view/folderView.ts");
var loginView_1 = __webpack_require__(/*! ../models/view/loginView */ "./jslib/src/models/view/loginView.ts");
var secureNoteView_1 = __webpack_require__(/*! ../models/view/secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var fieldType_1 = __webpack_require__(/*! ../enums/fieldType */ "./jslib/src/enums/fieldType.ts");
var secureNoteType_1 = __webpack_require__(/*! ../enums/secureNoteType */ "./jslib/src/enums/secureNoteType.ts");
var BaseImporter = /** @class */ (function () {
    function BaseImporter() {
        this.organization = false;
        this.newLineRegex = /(?:\r\n|\r|\n)/;
        this.passwordFieldNames = [
            'password', 'pass word', 'passphrase', 'pass phrase',
            'pass', 'code', 'code word', 'codeword',
            'secret', 'secret word', 'personpwd',
            'key', 'keyword', 'key word', 'keyphrase', 'key phrase',
            'form_pw', 'wppassword', 'pin', 'pwd', 'pw', 'pword', 'passwd',
            'p', 'serial', 'serial#', 'license key', 'reg #',
            // Non-English names
            'passwort',
        ];
        this.usernameFieldNames = [
            'user', 'name', 'user name', 'username', 'login name',
            'email', 'e-mail', 'id', 'userid', 'user id',
            'login', 'form_loginname', 'wpname', 'mail',
            'loginid', 'login id', 'log', 'personlogin',
            'first name', 'last name', 'card#', 'account #',
            'member', 'member #',
            // Non-English names
            'nom', 'benutzername',
        ];
        this.notesFieldNames = [
            'note', 'notes', 'comment', 'comments', 'memo',
            'description', 'free form', 'freeform',
            'free text', 'freetext', 'free',
            // Non-English names
            'kommentar',
        ];
        this.uriFieldNames = [
            'url', 'hyper link', 'hyperlink', 'link',
            'host', 'hostname', 'host name', 'server', 'address',
            'hyper ref', 'href', 'web', 'website', 'web site', 'site',
            'web-site', 'uri',
            // Non-English names
            'ort', 'adresse',
        ];
    }
    BaseImporter.prototype.parseXml = function (data) {
        var parser = new DOMParser();
        var doc = parser.parseFromString(data, 'application/xml');
        return doc != null && doc.querySelector('parsererror') == null ? doc : null;
    };
    BaseImporter.prototype.parseCsv = function (data, header) {
        data = this.splitNewLine(data).join('\n').trim();
        var result = papa.parse(data, {
            header: header,
            encoding: 'UTF-8',
            skipEmptyLines: false,
        });
        if (result.errors != null && result.errors.length > 0) {
            result.errors.forEach(function (e) {
                // tslint:disable-next-line
                console.warn('Error parsing row ' + e.row + ': ' + e.message);
            });
        }
        return result.data && result.data.length > 0 ? result.data : null;
    };
    BaseImporter.prototype.parseSingleRowCsv = function (rowData) {
        if (this.isNullOrWhitespace(rowData)) {
            return null;
        }
        var parsedRow = this.parseCsv(rowData, false);
        if (parsedRow != null && parsedRow.length > 0 && parsedRow[0].length > 0) {
            return parsedRow[0];
        }
        return null;
    };
    BaseImporter.prototype.makeUriArray = function (uri) {
        var _this = this;
        if (uri == null) {
            return null;
        }
        if (typeof uri === 'string') {
            var loginUri = new loginUriView_1.LoginUriView();
            loginUri.uri = this.fixUri(uri);
            if (this.isNullOrWhitespace(loginUri.uri)) {
                return null;
            }
            loginUri.match = null;
            return [loginUri];
        }
        if (uri.length > 0) {
            var returnArr_1 = [];
            uri.forEach(function (u) {
                var loginUri = new loginUriView_1.LoginUriView();
                loginUri.uri = _this.fixUri(u);
                if (_this.isNullOrWhitespace(loginUri.uri)) {
                    return;
                }
                loginUri.match = null;
                returnArr_1.push(loginUri);
            });
            return returnArr_1.length === 0 ? null : returnArr_1;
        }
        return null;
    };
    BaseImporter.prototype.fixUri = function (uri) {
        if (uri == null) {
            return null;
        }
        uri = uri.toLowerCase().trim();
        if (uri.indexOf('://') === -1 && uri.indexOf('.') >= 0) {
            uri = 'http://' + uri;
        }
        if (uri.length > 1000) {
            return uri.substring(0, 1000);
        }
        return uri;
    };
    BaseImporter.prototype.nameFromUrl = function (url) {
        var hostname = utils_1.Utils.getHostname(url);
        if (this.isNullOrWhitespace(hostname)) {
            return null;
        }
        return hostname.startsWith('www.') ? hostname.replace('www.', '') : hostname;
    };
    BaseImporter.prototype.isNullOrWhitespace = function (str) {
        return str == null || str.trim() === '';
    };
    BaseImporter.prototype.getValueOrDefault = function (str, defaultValue) {
        if (defaultValue === void 0) { defaultValue = null; }
        if (this.isNullOrWhitespace(str)) {
            return defaultValue;
        }
        return str;
    };
    BaseImporter.prototype.splitNewLine = function (str) {
        return str.split(this.newLineRegex);
    };
    // ref https://stackoverflow.com/a/5911300
    BaseImporter.prototype.getCardBrand = function (cardNum) {
        if (this.isNullOrWhitespace(cardNum)) {
            return null;
        }
        // Visa
        var re = new RegExp('^4');
        if (cardNum.match(re) != null) {
            return 'Visa';
        }
        // Mastercard
        // Updated for Mastercard 2017 BINs expansion
        if (/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/
            .test(cardNum)) {
            return 'Mastercard';
        }
        // AMEX
        re = new RegExp('^3[47]');
        if (cardNum.match(re) != null) {
            return 'Amex';
        }
        // Discover
        re = new RegExp('^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)');
        if (cardNum.match(re) != null) {
            return 'Discover';
        }
        // Diners
        re = new RegExp('^36');
        if (cardNum.match(re) != null) {
            return 'Diners Club';
        }
        // Diners - Carte Blanche
        re = new RegExp('^30[0-5]');
        if (cardNum.match(re) != null) {
            return 'Diners Club';
        }
        // JCB
        re = new RegExp('^35(2[89]|[3-8][0-9])');
        if (cardNum.match(re) != null) {
            return 'JCB';
        }
        // Visa Electron
        re = new RegExp('^(4026|417500|4508|4844|491(3|7))');
        if (cardNum.match(re) != null) {
            return 'Visa';
        }
        return null;
    };
    BaseImporter.prototype.moveFoldersToCollections = function (result) {
        result.folderRelationships.forEach(function (r) { return result.collectionRelationships.push(r); });
        result.collections = result.folders.map(function (f) {
            var collection = new collectionView_1.CollectionView();
            collection.name = f.name;
            return collection;
        });
        result.folderRelationships = [];
        result.folders = [];
    };
    BaseImporter.prototype.querySelectorDirectChild = function (parentEl, query) {
        var els = this.querySelectorAllDirectChild(parentEl, query);
        return els.length === 0 ? null : els[0];
    };
    BaseImporter.prototype.querySelectorAllDirectChild = function (parentEl, query) {
        return Array.from(parentEl.querySelectorAll(query)).filter(function (el) { return el.parentNode === parentEl; });
    };
    BaseImporter.prototype.initLoginCipher = function () {
        var cipher = new cipherView_1.CipherView();
        cipher.favorite = false;
        cipher.notes = '';
        cipher.fields = [];
        cipher.login = new loginView_1.LoginView();
        cipher.type = cipherType_1.CipherType.Login;
        return cipher;
    };
    BaseImporter.prototype.cleanupCipher = function (cipher) {
        if (cipher == null) {
            return;
        }
        if (cipher.type !== cipherType_1.CipherType.Login) {
            cipher.login = null;
        }
        if (this.isNullOrWhitespace(cipher.name)) {
            cipher.name = '--';
        }
        if (this.isNullOrWhitespace(cipher.notes)) {
            cipher.notes = null;
        }
        else {
            cipher.notes = cipher.notes.trim();
        }
        if (cipher.fields != null && cipher.fields.length === 0) {
            cipher.fields = null;
        }
    };
    BaseImporter.prototype.processKvp = function (cipher, key, value) {
        if (this.isNullOrWhitespace(value)) {
            return;
        }
        if (this.isNullOrWhitespace(key)) {
            key = '';
        }
        if (value.length > 200 || value.trim().search(this.newLineRegex) > -1) {
            if (cipher.notes == null) {
                cipher.notes = '';
            }
            cipher.notes += (key + ': ' + this.splitNewLine(value).join('\n') + '\n');
        }
        else {
            if (cipher.fields == null) {
                cipher.fields = [];
            }
            var field = new fieldView_1.FieldView();
            field.type = fieldType_1.FieldType.Text;
            field.name = key;
            field.value = value;
            cipher.fields.push(field);
        }
    };
    BaseImporter.prototype.processFolder = function (result, folderName) {
        var folderIndex = result.folders.length;
        var hasFolder = !this.isNullOrWhitespace(folderName);
        var addFolder = hasFolder;
        if (hasFolder) {
            for (var i = 0; i < result.folders.length; i++) {
                if (result.folders[i].name === folderName) {
                    addFolder = false;
                    folderIndex = i;
                    break;
                }
            }
        }
        if (addFolder) {
            var f = new folderView_1.FolderView();
            f.name = folderName;
            result.folders.push(f);
        }
        if (hasFolder) {
            result.folderRelationships.push([result.ciphers.length, folderIndex]);
        }
    };
    BaseImporter.prototype.convertToNoteIfNeeded = function (cipher) {
        if (cipher.type === cipherType_1.CipherType.Login && this.isNullOrWhitespace(cipher.login.username) &&
            this.isNullOrWhitespace(cipher.login.password) &&
            (cipher.login.uris == null || cipher.login.uris.length === 0)) {
            cipher.type = cipherType_1.CipherType.SecureNote;
            cipher.secureNote = new secureNoteView_1.SecureNoteView();
            cipher.secureNote.type = secureNoteType_1.SecureNoteType.Generic;
        }
    };
    return BaseImporter;
}());
exports.BaseImporter = BaseImporter;


/***/ }),

/***/ "./jslib/src/importers/bitwardenCsvImporter.ts":
/*!*****************************************************!*\
  !*** ./jslib/src/importers/bitwardenCsvImporter.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var cipherView_1 = __webpack_require__(/*! ../models/view/cipherView */ "./jslib/src/models/view/cipherView.ts");
var collectionView_1 = __webpack_require__(/*! ../models/view/collectionView */ "./jslib/src/models/view/collectionView.ts");
var fieldView_1 = __webpack_require__(/*! ../models/view/fieldView */ "./jslib/src/models/view/fieldView.ts");
var loginView_1 = __webpack_require__(/*! ../models/view/loginView */ "./jslib/src/models/view/loginView.ts");
var secureNoteView_1 = __webpack_require__(/*! ../models/view/secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var fieldType_1 = __webpack_require__(/*! ../enums/fieldType */ "./jslib/src/enums/fieldType.ts");
var secureNoteType_1 = __webpack_require__(/*! ../enums/secureNoteType */ "./jslib/src/enums/secureNoteType.ts");
var BitwardenCsvImporter = /** @class */ (function (_super) {
    __extends(BitwardenCsvImporter, _super);
    function BitwardenCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BitwardenCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (_this.organization && !_this.isNullOrWhitespace(value.collections)) {
                var collections = value.collections.split(',');
                collections.forEach(function (col) {
                    var addCollection = true;
                    var collectionIndex = result.collections.length;
                    for (var i = 0; i < result.collections.length; i++) {
                        if (result.collections[i].name === col) {
                            addCollection = false;
                            collectionIndex = i;
                            break;
                        }
                    }
                    if (addCollection) {
                        var collection = new collectionView_1.CollectionView();
                        collection.name = col;
                        result.collections.push(collection);
                    }
                    result.collectionRelationships.push([result.ciphers.length, collectionIndex]);
                });
            }
            else if (!_this.organization) {
                _this.processFolder(result, value.folder);
            }
            var cipher = new cipherView_1.CipherView();
            cipher.favorite = !_this.organization && _this.getValueOrDefault(value.favorite, '0') !== '0' ? true : false;
            cipher.type = cipherType_1.CipherType.Login;
            cipher.notes = _this.getValueOrDefault(value.notes);
            cipher.name = _this.getValueOrDefault(value.name, '--');
            if (!_this.isNullOrWhitespace(value.fields)) {
                var fields = _this.splitNewLine(value.fields);
                for (var i = 0; i < fields.length; i++) {
                    if (_this.isNullOrWhitespace(fields[i])) {
                        continue;
                    }
                    var delimPosition = fields[i].lastIndexOf(': ');
                    if (delimPosition === -1) {
                        continue;
                    }
                    if (cipher.fields == null) {
                        cipher.fields = [];
                    }
                    var field = new fieldView_1.FieldView();
                    field.name = fields[i].substr(0, delimPosition);
                    field.value = null;
                    field.type = fieldType_1.FieldType.Text;
                    if (fields[i].length > (delimPosition + 2)) {
                        field.value = fields[i].substr(delimPosition + 2);
                    }
                    cipher.fields.push(field);
                }
            }
            var valueType = value.type != null ? value.type.toLowerCase() : null;
            switch (valueType) {
                case 'login':
                case null:
                    cipher.type = cipherType_1.CipherType.Login;
                    cipher.login = new loginView_1.LoginView();
                    cipher.login.totp = _this.getValueOrDefault(value.login_totp || value.totp);
                    cipher.login.username = _this.getValueOrDefault(value.login_username || value.username);
                    cipher.login.password = _this.getValueOrDefault(value.login_password || value.password);
                    var uris = _this.parseSingleRowCsv(value.login_uri || value.uri);
                    cipher.login.uris = _this.makeUriArray(uris);
                    break;
                case 'note':
                    cipher.type = cipherType_1.CipherType.SecureNote;
                    cipher.secureNote = new secureNoteView_1.SecureNoteView();
                    cipher.secureNote.type = secureNoteType_1.SecureNoteType.Generic;
                    break;
                default:
                    break;
            }
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return BitwardenCsvImporter;
}(baseImporter_1.BaseImporter));
exports.BitwardenCsvImporter = BitwardenCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/blurCsvImporter.ts":
/*!************************************************!*\
  !*** ./jslib/src/importers/blurCsvImporter.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var BlurCsvImporter = /** @class */ (function (_super) {
    __extends(BlurCsvImporter, _super);
    function BlurCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BlurCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (value.label === 'null') {
                value.label = null;
            }
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(value.label, _this.getValueOrDefault(_this.nameFromUrl(value.domain), '--'));
            cipher.login.uris = _this.makeUriArray(value.domain);
            cipher.login.password = _this.getValueOrDefault(value.password);
            if (_this.isNullOrWhitespace(value.email) && !_this.isNullOrWhitespace(value.username)) {
                cipher.login.username = value.username;
            }
            else {
                cipher.login.username = _this.getValueOrDefault(value.email);
                cipher.notes = _this.getValueOrDefault(value.username);
            }
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return BlurCsvImporter;
}(baseImporter_1.BaseImporter));
exports.BlurCsvImporter = BlurCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/chromeCsvImporter.ts":
/*!**************************************************!*\
  !*** ./jslib/src/importers/chromeCsvImporter.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var ChromeCsvImporter = /** @class */ (function (_super) {
    __extends(ChromeCsvImporter, _super);
    function ChromeCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ChromeCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(value.name, '--');
            cipher.login.username = _this.getValueOrDefault(value.username);
            cipher.login.password = _this.getValueOrDefault(value.password);
            cipher.login.uris = _this.makeUriArray(value.url);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return ChromeCsvImporter;
}(baseImporter_1.BaseImporter));
exports.ChromeCsvImporter = ChromeCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/clipperzHtmlImporter.ts":
/*!*****************************************************!*\
  !*** ./jslib/src/importers/clipperzHtmlImporter.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var ClipperzHtmlImporter = /** @class */ (function (_super) {
    __extends(ClipperzHtmlImporter, _super);
    function ClipperzHtmlImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ClipperzHtmlImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var doc = this.parseXml(data);
        if (doc == null) {
            result.success = false;
            return result;
        }
        var textarea = doc.querySelector('textarea');
        if (textarea == null || this.isNullOrWhitespace(textarea.textContent)) {
            result.errorMessage = 'Missing textarea.';
            result.success = false;
            return result;
        }
        var entries = JSON.parse(textarea.textContent);
        entries.forEach(function (entry) {
            var cipher = _this.initLoginCipher();
            if (!_this.isNullOrWhitespace(entry.label)) {
                cipher.name = entry.label.split(' ')[0];
            }
            if (entry.data != null && !_this.isNullOrWhitespace(entry.data.notes)) {
                cipher.notes = entry.data.notes.split('\\n').join('\n');
            }
            if (entry.currentVersion != null && entry.currentVersion.fields != null) {
                for (var property in entry.currentVersion.fields) {
                    if (!entry.currentVersion.fields.hasOwnProperty(property)) {
                        continue;
                    }
                    var field = entry.currentVersion.fields[property];
                    var actionType = field.actionType != null ? field.actionType.toLowerCase() : null;
                    switch (actionType) {
                        case 'password':
                            cipher.login.password = _this.getValueOrDefault(field.value);
                            break;
                        case 'email':
                        case 'username':
                        case 'user':
                        case 'name':
                            cipher.login.username = _this.getValueOrDefault(field.value);
                            break;
                        case 'url':
                            cipher.login.uris = _this.makeUriArray(field.value);
                            break;
                        default:
                            var labelLower = field.label != null ? field.label.toLowerCase() : null;
                            if (cipher.login.password == null && _this.passwordFieldNames.indexOf(labelLower) > -1) {
                                cipher.login.password = _this.getValueOrDefault(field.value);
                            }
                            else if (cipher.login.username == null &&
                                _this.usernameFieldNames.indexOf(labelLower) > -1) {
                                cipher.login.username = _this.getValueOrDefault(field.value);
                            }
                            else if ((cipher.login.uris == null || cipher.login.uris.length === 0) &&
                                _this.uriFieldNames.indexOf(labelLower) > -1) {
                                cipher.login.uris = _this.makeUriArray(field.value);
                            }
                            else {
                                _this.processKvp(cipher, field.label, field.value);
                            }
                            break;
                    }
                }
            }
            _this.convertToNoteIfNeeded(cipher);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return ClipperzHtmlImporter;
}(baseImporter_1.BaseImporter));
exports.ClipperzHtmlImporter = ClipperzHtmlImporter;


/***/ }),

/***/ "./jslib/src/importers/dashlaneCsvImporter.ts":
/*!****************************************************!*\
  !*** ./jslib/src/importers/dashlaneCsvImporter.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var DashlaneCsvImporter = /** @class */ (function (_super) {
    __extends(DashlaneCsvImporter, _super);
    function DashlaneCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DashlaneCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, false);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            var skip = false;
            if (value.length < 2) {
                return;
            }
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(value[0], '--');
            if (value.length === 2) {
                cipher.login.uris = _this.makeUriArray(value[1]);
            }
            else if (value.length === 3) {
                cipher.login.uris = _this.makeUriArray(value[1]);
                cipher.login.username = _this.getValueOrDefault(value[2]);
            }
            else if (value.length === 4) {
                if (_this.isNullOrWhitespace(value[2]) && _this.isNullOrWhitespace(value[3])) {
                    cipher.login.username = value[1];
                    cipher.notes = value[2] + '\n' + value[3];
                }
                else {
                    cipher.login.username = value[2];
                    cipher.notes = value[1] + '\n' + value[3];
                }
            }
            else if (value.length === 5) {
                cipher.login.uris = _this.makeUriArray(value[1]);
                cipher.login.username = _this.getValueOrDefault(value[2]);
                cipher.login.password = _this.getValueOrDefault(value[3]);
                cipher.notes = _this.getValueOrDefault(value[4]);
            }
            else if (value.length === 6) {
                if (_this.isNullOrWhitespace(value[2])) {
                    cipher.login.username = _this.getValueOrDefault(value[3]);
                    cipher.login.password = _this.getValueOrDefault(value[4]);
                    cipher.notes = _this.getValueOrDefault(value[5]);
                }
                else {
                    cipher.login.username = _this.getValueOrDefault(value[2]);
                    cipher.login.password = _this.getValueOrDefault(value[3]);
                    cipher.notes = _this.getValueOrDefault(value[4], '') + '\n' + _this.getValueOrDefault(value[5], '');
                }
                cipher.login.uris = _this.makeUriArray(value[1]);
            }
            else if (value.length === 7) {
                if (_this.isNullOrWhitespace(value[2])) {
                    cipher.login.username = _this.getValueOrDefault(value[3]);
                    cipher.notes = _this.getValueOrDefault(value[4], '') + '\n' + _this.getValueOrDefault(value[6], '');
                }
                else {
                    cipher.login.username = _this.getValueOrDefault(value[2]);
                    cipher.notes = _this.getValueOrDefault(value[3], '') + '\n' +
                        _this.getValueOrDefault(value[4], '') + '\n' + _this.getValueOrDefault(value[6], '');
                }
                cipher.login.uris = _this.makeUriArray(value[1]);
                cipher.login.password = _this.getValueOrDefault(value[5]);
            }
            else {
                for (var i = 1; i < value.length; i++) {
                    cipher.notes += (value[i] + '\n');
                    if (value[i] === 'NO_TYPE') {
                        skip = true;
                        break;
                    }
                }
            }
            if (skip) {
                return;
            }
            if (_this.isNullOrWhitespace(cipher.login.username)) {
                cipher.login.username = null;
            }
            if (_this.isNullOrWhitespace(cipher.login.password)) {
                cipher.login.password = null;
            }
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return DashlaneCsvImporter;
}(baseImporter_1.BaseImporter));
exports.DashlaneCsvImporter = DashlaneCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/enpassCsvImporter.ts":
/*!**************************************************!*\
  !*** ./jslib/src/importers/enpassCsvImporter.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var secureNoteType_1 = __webpack_require__(/*! ../enums/secureNoteType */ "./jslib/src/enums/secureNoteType.ts");
var cardView_1 = __webpack_require__(/*! ../models/view/cardView */ "./jslib/src/models/view/cardView.ts");
var secureNoteView_1 = __webpack_require__(/*! ../models/view/secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
var EnpassCsvImporter = /** @class */ (function (_super) {
    __extends(EnpassCsvImporter, _super);
    function EnpassCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    EnpassCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, false);
        if (results == null) {
            result.success = false;
            return result;
        }
        var firstRow = true;
        results.forEach(function (value) {
            if (value.length < 2 || (firstRow && value[0] === 'Title')) {
                firstRow = false;
                return;
            }
            var cipher = _this.initLoginCipher();
            cipher.notes = _this.getValueOrDefault(value[value.length - 1]);
            cipher.name = _this.getValueOrDefault(value[0], '--');
            if (value.length === 2 || (value.indexOf('Username') < 0 && value.indexOf('Password') < 0 &&
                value.indexOf('Email') && value.indexOf('URL') < 0)) {
                cipher.type = cipherType_1.CipherType.SecureNote;
                cipher.secureNote = new secureNoteView_1.SecureNoteView();
                cipher.secureNote.type = secureNoteType_1.SecureNoteType.Generic;
            }
            if (value.indexOf('Cardholder') > -1 && value.indexOf('Number') > -1 && value.indexOf('Expiry date') > -1) {
                cipher.type = cipherType_1.CipherType.Card;
                cipher.card = new cardView_1.CardView();
            }
            if (value.length > 2 && (value.length % 2) === 0) {
                for (var i = 0; i < value.length - 2; i += 2) {
                    var fieldValue = value[i + 2];
                    if (_this.isNullOrWhitespace(fieldValue)) {
                        continue;
                    }
                    var fieldName = value[i + 1];
                    var fieldNameLower = fieldName.toLowerCase();
                    if (cipher.type === cipherType_1.CipherType.Login) {
                        if (fieldNameLower === 'url' && (cipher.login.uris == null || cipher.login.uris.length === 0)) {
                            cipher.login.uris = _this.makeUriArray(fieldValue);
                            continue;
                        }
                        else if ((fieldNameLower === 'username' || fieldNameLower === 'email') &&
                            _this.isNullOrWhitespace(cipher.login.username)) {
                            cipher.login.username = fieldValue;
                            continue;
                        }
                        else if (fieldNameLower === 'password' && _this.isNullOrWhitespace(cipher.login.password)) {
                            cipher.login.password = fieldValue;
                            continue;
                        }
                        else if (fieldNameLower === 'totp' && _this.isNullOrWhitespace(cipher.login.totp)) {
                            cipher.login.totp = fieldValue;
                            continue;
                        }
                    }
                    else if (cipher.type === cipherType_1.CipherType.Card) {
                        if (fieldNameLower === 'cardholder' && _this.isNullOrWhitespace(cipher.card.cardholderName)) {
                            cipher.card.cardholderName = fieldValue;
                            continue;
                        }
                        else if (fieldNameLower === 'number' && _this.isNullOrWhitespace(cipher.card.number)) {
                            cipher.card.number = fieldValue;
                            cipher.card.brand = _this.getCardBrand(fieldValue);
                            continue;
                        }
                        else if (fieldNameLower === 'cvc' && _this.isNullOrWhitespace(cipher.card.code)) {
                            cipher.card.code = fieldValue;
                            continue;
                        }
                        else if (fieldNameLower === 'expiry date' && _this.isNullOrWhitespace(cipher.card.expMonth) &&
                            _this.isNullOrWhitespace(cipher.card.expYear)) {
                            var parts = fieldValue.split('/');
                            if (parts.length === 2) {
                                var month = null;
                                var year = null;
                                if (parts[0].length === 1 || parts[0].length === 2) {
                                    month = parts[0];
                                    if (month.length === 2 && month[0] === '0') {
                                        month = month.substr(1, 1);
                                    }
                                }
                                if (parts[1].length === 2 || parts[1].length === 4) {
                                    year = month.length === 2 ? '20' + parts[1] : parts[1];
                                }
                                if (month != null && year != null) {
                                    cipher.card.expMonth = month;
                                    cipher.card.expYear = year;
                                    continue;
                                }
                            }
                        }
                        else if (fieldNameLower === 'type') {
                            // Skip since brand was determined from number above
                            continue;
                        }
                    }
                    _this.processKvp(cipher, fieldName, fieldValue);
                }
            }
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return EnpassCsvImporter;
}(baseImporter_1.BaseImporter));
exports.EnpassCsvImporter = EnpassCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/firefoxCsvImporter.ts":
/*!***************************************************!*\
  !*** ./jslib/src/importers/firefoxCsvImporter.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var FirefoxCsvImporter = /** @class */ (function (_super) {
    __extends(FirefoxCsvImporter, _super);
    function FirefoxCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FirefoxCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(_this.nameFromUrl(value.hostname), '--');
            cipher.login.username = _this.getValueOrDefault(value.username);
            cipher.login.password = _this.getValueOrDefault(value.password);
            cipher.login.uris = _this.makeUriArray(value.hostname);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return FirefoxCsvImporter;
}(baseImporter_1.BaseImporter));
exports.FirefoxCsvImporter = FirefoxCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/gnomeJsonImporter.ts":
/*!**************************************************!*\
  !*** ./jslib/src/importers/gnomeJsonImporter.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var GnomeJsonImporter = /** @class */ (function (_super) {
    __extends(GnomeJsonImporter, _super);
    function GnomeJsonImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    GnomeJsonImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = JSON.parse(data);
        if (results == null || Object.keys(results).length === 0) {
            result.success = false;
            return result;
        }
        var _loop_1 = function (keyRing) {
            if (!results.hasOwnProperty(keyRing) || this_1.isNullOrWhitespace(keyRing) ||
                results[keyRing].length === 0) {
                return "continue";
            }
            results[keyRing].forEach(function (value) {
                if (_this.isNullOrWhitespace(value.display_name) || value.display_name.indexOf('http') !== 0) {
                    return;
                }
                _this.processFolder(result, keyRing);
                var cipher = _this.initLoginCipher();
                cipher.name = value.display_name.replace('http://', '').replace('https://', '');
                if (cipher.name.length > 30) {
                    cipher.name = cipher.name.substring(0, 30);
                }
                cipher.login.password = _this.getValueOrDefault(value.secret);
                cipher.login.uris = _this.makeUriArray(value.display_name);
                if (value.attributes != null) {
                    cipher.login.username = value.attributes != null ?
                        _this.getValueOrDefault(value.attributes.username_value) : null;
                    for (var attr in value.attributes) {
                        if (!value.attributes.hasOwnProperty(attr) || attr === 'username_value' ||
                            attr === 'xdg:schema') {
                            continue;
                        }
                        _this.processKvp(cipher, attr, value.attributes[attr]);
                    }
                }
                _this.convertToNoteIfNeeded(cipher);
                _this.cleanupCipher(cipher);
                result.ciphers.push(cipher);
            });
        };
        var this_1 = this;
        for (var keyRing in results) {
            _loop_1(keyRing);
        }
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    return GnomeJsonImporter;
}(baseImporter_1.BaseImporter));
exports.GnomeJsonImporter = GnomeJsonImporter;


/***/ }),

/***/ "./jslib/src/importers/keepass2XmlImporter.ts":
/*!****************************************************!*\
  !*** ./jslib/src/importers/keepass2XmlImporter.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var folderView_1 = __webpack_require__(/*! ../models/view/folderView */ "./jslib/src/models/view/folderView.ts");
var KeePass2XmlImporter = /** @class */ (function (_super) {
    __extends(KeePass2XmlImporter, _super);
    function KeePass2XmlImporter() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.result = new importResult_1.ImportResult();
        return _this;
    }
    KeePass2XmlImporter.prototype.parse = function (data) {
        var doc = this.parseXml(data);
        if (doc == null) {
            this.result.success = false;
            return this.result;
        }
        var rootGroup = doc.querySelector('KeePassFile > Root > Group');
        if (rootGroup == null) {
            this.result.errorMessage = 'Missing `KeePassFile > Root > Group` node.';
            this.result.success = false;
            return this.result;
        }
        this.traverse(rootGroup, true, '');
        if (this.organization) {
            this.moveFoldersToCollections(this.result);
        }
        this.result.success = true;
        return this.result;
    };
    KeePass2XmlImporter.prototype.traverse = function (node, isRootNode, groupPrefixName) {
        var _this = this;
        var folderIndex = this.result.folders.length;
        var groupName = groupPrefixName;
        if (!isRootNode) {
            if (groupName !== '') {
                groupName += '/';
            }
            var nameEl = this.querySelectorDirectChild(node, 'Name');
            groupName += nameEl == null ? '-' : nameEl.textContent;
            var folder = new folderView_1.FolderView();
            folder.name = groupName;
            this.result.folders.push(folder);
        }
        this.querySelectorAllDirectChild(node, 'Entry').forEach(function (entry) {
            var cipherIndex = _this.result.ciphers.length;
            var cipher = _this.initLoginCipher();
            _this.querySelectorAllDirectChild(entry, 'String').forEach(function (entryString) {
                var valueEl = _this.querySelectorDirectChild(entryString, 'Value');
                var value = valueEl != null ? valueEl.textContent : null;
                if (_this.isNullOrWhitespace(value)) {
                    return;
                }
                var keyEl = _this.querySelectorDirectChild(entryString, 'Key');
                var key = keyEl != null ? keyEl.textContent : null;
                if (key === 'URL') {
                    cipher.login.uris = _this.makeUriArray(value);
                }
                else if (key === 'UserName') {
                    cipher.login.username = value;
                }
                else if (key === 'Password') {
                    cipher.login.password = value;
                }
                else if (key === 'Title') {
                    cipher.name = value;
                }
                else if (key === 'Notes') {
                    cipher.notes += (value + '\n');
                }
                else {
                    _this.processKvp(cipher, key, value);
                }
            });
            _this.cleanupCipher(cipher);
            _this.result.ciphers.push(cipher);
            if (!isRootNode) {
                _this.result.folderRelationships.push([cipherIndex, folderIndex]);
            }
        });
        this.querySelectorAllDirectChild(node, 'Group').forEach(function (group) {
            _this.traverse(group, false, groupName);
        });
    };
    return KeePass2XmlImporter;
}(baseImporter_1.BaseImporter));
exports.KeePass2XmlImporter = KeePass2XmlImporter;


/***/ }),

/***/ "./jslib/src/importers/keepassxCsvImporter.ts":
/*!****************************************************!*\
  !*** ./jslib/src/importers/keepassxCsvImporter.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var KeePassXCsvImporter = /** @class */ (function (_super) {
    __extends(KeePassXCsvImporter, _super);
    function KeePassXCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    KeePassXCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (_this.isNullOrWhitespace(value.Title)) {
                return;
            }
            value.Group = !_this.isNullOrWhitespace(value.Group) && value.Group.startsWith('Root/') ?
                value.Group.replace('Root/', '') : value.Group;
            var groupName = !_this.isNullOrWhitespace(value.Group) ? value.Group : null;
            _this.processFolder(result, groupName);
            var cipher = _this.initLoginCipher();
            cipher.notes = _this.getValueOrDefault(value.Notes);
            cipher.name = _this.getValueOrDefault(value.Title, '--');
            cipher.login.username = _this.getValueOrDefault(value.Username);
            cipher.login.password = _this.getValueOrDefault(value.Password);
            cipher.login.uris = _this.makeUriArray(value.URL);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    return KeePassXCsvImporter;
}(baseImporter_1.BaseImporter));
exports.KeePassXCsvImporter = KeePassXCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/keeperCsvImporter.ts":
/*!**************************************************!*\
  !*** ./jslib/src/importers/keeperCsvImporter.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var KeeperCsvImporter = /** @class */ (function (_super) {
    __extends(KeeperCsvImporter, _super);
    function KeeperCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    KeeperCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, false);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (value.length < 6) {
                return;
            }
            _this.processFolder(result, value[0]);
            var cipher = _this.initLoginCipher();
            cipher.notes = _this.getValueOrDefault(value[5]) + '\n';
            cipher.name = _this.getValueOrDefault(value[1], '--');
            cipher.login.username = _this.getValueOrDefault(value[2]);
            cipher.login.password = _this.getValueOrDefault(value[3]);
            cipher.login.uris = _this.makeUriArray(value[4]);
            if (value.length > 7) {
                // we have some custom fields.
                for (var i = 7; i < value.length; i = i + 2) {
                    _this.processKvp(cipher, value[i], value[i + 1]);
                }
            }
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    return KeeperCsvImporter;
}(baseImporter_1.BaseImporter));
exports.KeeperCsvImporter = KeeperCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/lastpassCsvImporter.ts":
/*!****************************************************!*\
  !*** ./jslib/src/importers/lastpassCsvImporter.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var cardView_1 = __webpack_require__(/*! ../models/view/cardView */ "./jslib/src/models/view/cardView.ts");
var cipherView_1 = __webpack_require__(/*! ../models/view/cipherView */ "./jslib/src/models/view/cipherView.ts");
var folderView_1 = __webpack_require__(/*! ../models/view/folderView */ "./jslib/src/models/view/folderView.ts");
var identityView_1 = __webpack_require__(/*! ../models/view/identityView */ "./jslib/src/models/view/identityView.ts");
var loginView_1 = __webpack_require__(/*! ../models/view/loginView */ "./jslib/src/models/view/loginView.ts");
var secureNoteView_1 = __webpack_require__(/*! ../models/view/secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var secureNoteType_1 = __webpack_require__(/*! ../enums/secureNoteType */ "./jslib/src/enums/secureNoteType.ts");
var LastPassCsvImporter = /** @class */ (function (_super) {
    __extends(LastPassCsvImporter, _super);
    function LastPassCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    LastPassCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value, index) {
            var cipherIndex = result.ciphers.length;
            var folderIndex = result.folders.length;
            var hasFolder = _this.getValueOrDefault(value.grouping, '(none)') !== '(none)';
            var addFolder = hasFolder;
            if (hasFolder) {
                for (var i = 0; i < result.folders.length; i++) {
                    if (result.folders[i].name === value.grouping) {
                        addFolder = false;
                        folderIndex = i;
                        break;
                    }
                }
            }
            var cipher = _this.buildBaseCipher(value);
            if (cipher.type === cipherType_1.CipherType.Login) {
                cipher.notes = _this.getValueOrDefault(value.extra);
                cipher.login = new loginView_1.LoginView();
                cipher.login.uris = _this.makeUriArray(value.url);
                cipher.login.username = _this.getValueOrDefault(value.username);
                cipher.login.password = _this.getValueOrDefault(value.password);
            }
            else if (cipher.type === cipherType_1.CipherType.SecureNote) {
                _this.parseSecureNote(value, cipher);
            }
            else if (cipher.type === cipherType_1.CipherType.Card) {
                cipher.card = _this.parseCard(value);
                cipher.notes = _this.getValueOrDefault(value.notes);
            }
            else if (cipher.type === cipherType_1.CipherType.Identity) {
                cipher.identity = _this.parseIdentity(value);
                cipher.notes = _this.getValueOrDefault(value.notes);
                if (!_this.isNullOrWhitespace(value.ccnum)) {
                    // there is a card on this identity too
                    var cardCipher = _this.buildBaseCipher(value);
                    cardCipher.identity = null;
                    cardCipher.type = cipherType_1.CipherType.Card;
                    cardCipher.card = _this.parseCard(value);
                    result.ciphers.push(cardCipher);
                }
            }
            result.ciphers.push(cipher);
            if (addFolder) {
                var f = new folderView_1.FolderView();
                f.name = value.grouping;
                result.folders.push(f);
            }
            if (hasFolder) {
                result.folderRelationships.push([cipherIndex, folderIndex]);
            }
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    LastPassCsvImporter.prototype.buildBaseCipher = function (value) {
        var cipher = new cipherView_1.CipherView();
        if (value.hasOwnProperty('profilename') && value.hasOwnProperty('profilelanguage')) {
            // form fill
            cipher.favorite = false;
            cipher.name = this.getValueOrDefault(value.profilename, '--');
            cipher.type = cipherType_1.CipherType.Card;
            if (!this.isNullOrWhitespace(value.title) || !this.isNullOrWhitespace(value.firstname) ||
                !this.isNullOrWhitespace(value.lastname) || !this.isNullOrWhitespace(value.address1) ||
                !this.isNullOrWhitespace(value.phone) || !this.isNullOrWhitespace(value.username) ||
                !this.isNullOrWhitespace(value.email)) {
                cipher.type = cipherType_1.CipherType.Identity;
            }
        }
        else {
            // site or secure note
            cipher.favorite = !this.organization && this.getValueOrDefault(value.fav, '0') === '1';
            cipher.name = this.getValueOrDefault(value.name, '--');
            cipher.type = value.url === 'http://sn' ? cipherType_1.CipherType.SecureNote : cipherType_1.CipherType.Login;
        }
        return cipher;
    };
    LastPassCsvImporter.prototype.parseCard = function (value) {
        var card = new cardView_1.CardView();
        card.cardholderName = this.getValueOrDefault(value.ccname);
        card.number = this.getValueOrDefault(value.ccnum);
        card.code = this.getValueOrDefault(value.cccsc);
        card.brand = this.getCardBrand(value.ccnum);
        if (!this.isNullOrWhitespace(value.ccexp) && value.ccexp.indexOf('-') > -1) {
            var ccexpParts = value.ccexp.split('-');
            if (ccexpParts.length > 1) {
                card.expYear = ccexpParts[0];
                card.expMonth = ccexpParts[1];
                if (card.expMonth.length === 2 && card.expMonth[0] === '0') {
                    card.expMonth = card.expMonth[1];
                }
            }
        }
        return card;
    };
    LastPassCsvImporter.prototype.parseIdentity = function (value) {
        var identity = new identityView_1.IdentityView();
        identity.title = this.getValueOrDefault(value.title);
        identity.firstName = this.getValueOrDefault(value.firstname);
        identity.middleName = this.getValueOrDefault(value.middlename);
        identity.lastName = this.getValueOrDefault(value.lastname);
        identity.username = this.getValueOrDefault(value.username);
        identity.company = this.getValueOrDefault(value.company);
        identity.ssn = this.getValueOrDefault(value.ssn);
        identity.address1 = this.getValueOrDefault(value.address1);
        identity.address2 = this.getValueOrDefault(value.address2);
        identity.address3 = this.getValueOrDefault(value.address3);
        identity.city = this.getValueOrDefault(value.city);
        identity.state = this.getValueOrDefault(value.state);
        identity.postalCode = this.getValueOrDefault(value.zip);
        identity.country = this.getValueOrDefault(value.country);
        identity.email = this.getValueOrDefault(value.email);
        identity.phone = this.getValueOrDefault(value.phone);
        if (!this.isNullOrWhitespace(identity.title)) {
            identity.title = identity.title.charAt(0).toUpperCase() + identity.title.slice(1);
        }
        return identity;
    };
    LastPassCsvImporter.prototype.parseSecureNote = function (value, cipher) {
        var extraParts = this.splitNewLine(value.extra);
        var processedNote = false;
        if (extraParts.length) {
            var typeParts = extraParts[0].split(':');
            if (typeParts.length > 1 && typeParts[0] === 'NoteType' &&
                (typeParts[1] === 'Credit Card' || typeParts[1] === 'Address')) {
                if (typeParts[1] === 'Credit Card') {
                    var mappedData = this.parseSecureNoteMapping(extraParts, {
                        'Number': 'number',
                        'Name on Card': 'cardholderName',
                        'Security Code': 'code',
                    });
                    cipher.type = cipherType_1.CipherType.Card;
                    cipher.card = mappedData[0];
                    cipher.notes = mappedData[1];
                }
                else if (typeParts[1] === 'Address') {
                    var mappedData = this.parseSecureNoteMapping(extraParts, {
                        'Title': 'title',
                        'First Name': 'firstName',
                        'Last Name': 'lastName',
                        'Middle Name': 'middleName',
                        'Company': 'company',
                        'Address 1': 'address1',
                        'Address 2': 'address2',
                        'Address 3': 'address3',
                        'City / Town': 'city',
                        'State': 'state',
                        'Zip / Postal Code': 'postalCode',
                        'Country': 'country',
                        'Email Address': 'email',
                        'Username': 'username',
                    });
                    cipher.type = cipherType_1.CipherType.Identity;
                    cipher.identity = mappedData[0];
                    cipher.notes = mappedData[1];
                }
                processedNote = true;
            }
        }
        if (!processedNote) {
            cipher.secureNote = new secureNoteView_1.SecureNoteView();
            cipher.secureNote.type = secureNoteType_1.SecureNoteType.Generic;
            cipher.notes = this.getValueOrDefault(value.extra);
        }
    };
    LastPassCsvImporter.prototype.parseSecureNoteMapping = function (extraParts, map) {
        var _this = this;
        var notes = null;
        var dataObj = {};
        extraParts.forEach(function (extraPart) {
            var fieldParts = extraPart.split(':');
            if (fieldParts.length < 1 || _this.isNullOrWhitespace(fieldParts[0]) ||
                _this.isNullOrWhitespace(fieldParts[1]) || fieldParts[0] === 'NoteType') {
                return;
            }
            if (fieldParts[0] === 'Notes') {
                if (!_this.isNullOrWhitespace(notes)) {
                    notes += ('\n' + fieldParts[1]);
                }
                else {
                    notes = fieldParts[1];
                }
            }
            else if (map.hasOwnProperty(fieldParts[0])) {
                dataObj[map[fieldParts[0]]] = fieldParts[1];
            }
            else {
                if (!_this.isNullOrWhitespace(notes)) {
                    notes += '\n';
                }
                else {
                    notes = '';
                }
                notes += (fieldParts[0] + ': ' + fieldParts[1]);
            }
        });
        return [dataObj, notes];
    };
    return LastPassCsvImporter;
}(baseImporter_1.BaseImporter));
exports.LastPassCsvImporter = LastPassCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/meldiumCsvImporter.ts":
/*!***************************************************!*\
  !*** ./jslib/src/importers/meldiumCsvImporter.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var MeldiumCsvImporter = /** @class */ (function (_super) {
    __extends(MeldiumCsvImporter, _super);
    function MeldiumCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MeldiumCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(value.DisplayName, '--');
            cipher.notes = _this.getValueOrDefault(value.Notes);
            cipher.login.username = _this.getValueOrDefault(value.UserName);
            cipher.login.password = _this.getValueOrDefault(value.Password);
            cipher.login.uris = _this.makeUriArray(value.Url);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return MeldiumCsvImporter;
}(baseImporter_1.BaseImporter));
exports.MeldiumCsvImporter = MeldiumCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/msecureCsvImporter.ts":
/*!***************************************************!*\
  !*** ./jslib/src/importers/msecureCsvImporter.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var secureNoteType_1 = __webpack_require__(/*! ../enums/secureNoteType */ "./jslib/src/enums/secureNoteType.ts");
var secureNoteView_1 = __webpack_require__(/*! ../models/view/secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
var MSecureCsvImporter = /** @class */ (function (_super) {
    __extends(MSecureCsvImporter, _super);
    function MSecureCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MSecureCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, false);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (value.length < 3) {
                return;
            }
            var folderName = _this.getValueOrDefault(value[0], 'Unassigned') !== 'Unassigned' ? value[0] : null;
            _this.processFolder(result, folderName);
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(value[2], '--');
            if (value[1] === 'Web Logins') {
                cipher.login.uris = _this.makeUriArray(value[4]);
                cipher.login.username = _this.getValueOrDefault(value[5]);
                cipher.login.password = _this.getValueOrDefault(value[6]);
                cipher.notes = !_this.isNullOrWhitespace(value[3]) ? value[3].split('\\n').join('\n') : null;
            }
            else if (value.length > 3) {
                cipher.type = cipherType_1.CipherType.SecureNote;
                cipher.secureNote = new secureNoteView_1.SecureNoteView();
                cipher.secureNote.type = secureNoteType_1.SecureNoteType.Generic;
                for (var i = 3; i < value.length; i++) {
                    if (!_this.isNullOrWhitespace(value[i])) {
                        cipher.notes += (value[i] + '\n');
                    }
                }
            }
            if (!_this.isNullOrWhitespace(value[1]) && cipher.type !== cipherType_1.CipherType.Login) {
                cipher.name = value[1] + ': ' + cipher.name;
            }
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    return MSecureCsvImporter;
}(baseImporter_1.BaseImporter));
exports.MSecureCsvImporter = MSecureCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/onepassword1PifImporter.ts":
/*!********************************************************!*\
  !*** ./jslib/src/importers/onepassword1PifImporter.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var cardView_1 = __webpack_require__(/*! ../models/view/cardView */ "./jslib/src/models/view/cardView.ts");
var secureNoteView_1 = __webpack_require__(/*! ../models/view/secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var secureNoteType_1 = __webpack_require__(/*! ../enums/secureNoteType */ "./jslib/src/enums/secureNoteType.ts");
var OnePassword1PifImporter = /** @class */ (function (_super) {
    __extends(OnePassword1PifImporter, _super);
    function OnePassword1PifImporter() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.result = new importResult_1.ImportResult();
        return _this;
    }
    OnePassword1PifImporter.prototype.parse = function (data) {
        var _this = this;
        data.split(this.newLineRegex).forEach(function (line) {
            if (_this.isNullOrWhitespace(line) || line[0] !== '{') {
                return;
            }
            var item = JSON.parse(line);
            var cipher = _this.initLoginCipher();
            cipher.favorite = item.openContents && item.openContents.faveIndex ? true : false;
            cipher.name = _this.getValueOrDefault(item.title, '--');
            if (item.typeName === 'securenotes.SecureNote') {
                cipher.type = cipherType_1.CipherType.SecureNote;
                cipher.secureNote = new secureNoteView_1.SecureNoteView();
                cipher.secureNote.type = secureNoteType_1.SecureNoteType.Generic;
            }
            else if (item.typeName === 'wallet.financial.CreditCard') {
                cipher.type = cipherType_1.CipherType.Card;
                cipher.card = new cardView_1.CardView();
            }
            else {
                cipher.login.uris = _this.makeUriArray(item.location);
            }
            if (item.secureContents != null) {
                if (!_this.isNullOrWhitespace(item.secureContents.notesPlain)) {
                    cipher.notes = item.secureContents.notesPlain.split(_this.newLineRegex).join('\n') + '\n';
                }
                if (item.secureContents.fields != null) {
                    _this.parseFields(item.secureContents.fields, cipher, 'designation', 'value', 'name');
                }
                if (item.secureContents.sections != null) {
                    item.secureContents.sections.forEach(function (section) {
                        if (section.fields != null) {
                            _this.parseFields(section.fields, cipher, 'n', 'v', 't');
                        }
                    });
                }
            }
            _this.cleanupCipher(cipher);
            _this.result.ciphers.push(cipher);
        });
        this.result.success = true;
        return this.result;
    };
    OnePassword1PifImporter.prototype.parseFields = function (fields, cipher, designationKey, valueKey, nameKey) {
        var _this = this;
        fields.forEach(function (field) {
            if (field[valueKey] == null || field[valueKey].toString().trim() === '') {
                return;
            }
            var fieldValue = field[valueKey].toString();
            var fieldDesignation = field[designationKey] != null ? field[designationKey].toString() : null;
            if (cipher.type === cipherType_1.CipherType.Login) {
                if (_this.isNullOrWhitespace(cipher.login.username) && fieldDesignation === 'username') {
                    cipher.login.username = fieldValue;
                    return;
                }
                else if (_this.isNullOrWhitespace(cipher.login.password) && fieldDesignation === 'password') {
                    cipher.login.password = fieldValue;
                    return;
                }
                else if (_this.isNullOrWhitespace(cipher.login.totp) && fieldDesignation != null &&
                    fieldDesignation.startsWith('TOTP_')) {
                    cipher.login.totp = fieldValue;
                    return;
                }
            }
            else if (cipher.type === cipherType_1.CipherType.Card) {
                if (_this.isNullOrWhitespace(cipher.card.number) && fieldDesignation === 'ccnum') {
                    cipher.card.number = fieldValue;
                    cipher.card.brand = _this.getCardBrand(fieldValue);
                    return;
                }
                else if (_this.isNullOrWhitespace(cipher.card.code) && fieldDesignation === 'cvv') {
                    cipher.card.code = fieldValue;
                    return;
                }
                else if (_this.isNullOrWhitespace(cipher.card.cardholderName) && fieldDesignation === 'cardholder') {
                    cipher.card.cardholderName = fieldValue;
                    return;
                }
                else if (_this.isNullOrWhitespace(cipher.card.expiration) && fieldDesignation === 'expiry' &&
                    fieldValue.length === 6) {
                    cipher.card.expMonth = fieldValue.substr(4, 2);
                    if (cipher.card.expMonth[0] === '0') {
                        cipher.card.expMonth = cipher.card.expMonth.substr(1, 1);
                    }
                    cipher.card.expYear = fieldValue.substr(0, 4);
                    return;
                }
                else if (fieldDesignation === 'type') {
                    // Skip since brand was determined from number above
                    return;
                }
            }
            var fieldName = _this.isNullOrWhitespace(field[nameKey]) ? 'no_name' : field[nameKey];
            _this.processKvp(cipher, fieldName, fieldValue);
        });
    };
    return OnePassword1PifImporter;
}(baseImporter_1.BaseImporter));
exports.OnePassword1PifImporter = OnePassword1PifImporter;


/***/ }),

/***/ "./jslib/src/importers/onepasswordWinCsvImporter.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/importers/onepasswordWinCsvImporter.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var view_1 = __webpack_require__(/*! ../models/view */ "./jslib/src/models/view/index.ts");
var IgnoredProperties = ['ainfo', 'autosubmit', 'notesPlain', 'ps', 'scope', 'tags', 'title', 'uuid'];
var OnePasswordWinCsvImporter = /** @class */ (function (_super) {
    __extends(OnePasswordWinCsvImporter, _super);
    function OnePasswordWinCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OnePasswordWinCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (_this.isNullOrWhitespace(value.title)) {
                return;
            }
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(value.title, '--');
            cipher.notes = _this.getValueOrDefault(value.notesPlain, '') + '\n';
            if (!_this.isNullOrWhitespace(value.number) && !_this.isNullOrWhitespace(value['expiry date'])) {
                cipher.type = cipherType_1.CipherType.Card;
                cipher.card = new view_1.CardView();
            }
            var altUsername = null;
            for (var property in value) {
                if (!value.hasOwnProperty(property) || _this.isNullOrWhitespace(value[property])) {
                    continue;
                }
                if (cipher.type === cipherType_1.CipherType.Login) {
                    if (_this.isNullOrWhitespace(cipher.login.password) && property === 'password') {
                        cipher.login.password = value[property];
                        continue;
                    }
                    else if (_this.isNullOrWhitespace(cipher.login.username) && property === 'username') {
                        cipher.login.username = value[property];
                        continue;
                    }
                    else if ((cipher.login.uris == null || cipher.login.uri.length === 0) && property === 'urls') {
                        var urls = value[property].split(_this.newLineRegex);
                        cipher.login.uris = _this.makeUriArray(urls);
                        continue;
                    }
                }
                else if (cipher.type === cipherType_1.CipherType.Card) {
                    if (_this.isNullOrWhitespace(cipher.card.number) && property === 'number') {
                        cipher.card.number = value[property];
                        cipher.card.brand = _this.getCardBrand(value.number);
                        continue;
                    }
                    else if (_this.isNullOrWhitespace(cipher.card.code) && property === 'verification number') {
                        cipher.card.code = value[property];
                        continue;
                    }
                    else if (_this.isNullOrWhitespace(cipher.card.cardholderName) && property === 'cardholder name') {
                        cipher.card.cardholderName = value[property];
                        continue;
                    }
                    else if (_this.isNullOrWhitespace(cipher.card.expiration) && property === 'expiry date' &&
                        value[property].length === 6) {
                        cipher.card.expMonth = value[property].substr(4, 2);
                        if (cipher.card.expMonth[0] === '0') {
                            cipher.card.expMonth = cipher.card.expMonth.substr(1, 1);
                        }
                        cipher.card.expYear = value[property].substr(0, 4);
                        continue;
                    }
                    else if (property === 'type') {
                        // Skip since brand was determined from number above
                        continue;
                    }
                }
                if (IgnoredProperties.indexOf(property) === -1 && !property.startsWith('section:')) {
                    if (altUsername == null && property === 'email') {
                        altUsername = value[property];
                    }
                    _this.processKvp(cipher, property, value[property]);
                }
            }
            if (cipher.type === cipherType_1.CipherType.Login && !_this.isNullOrWhitespace(altUsername) &&
                _this.isNullOrWhitespace(cipher.login.username) && altUsername.indexOf('://') === -1) {
                cipher.login.username = altUsername;
            }
            _this.convertToNoteIfNeeded(cipher);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return OnePasswordWinCsvImporter;
}(baseImporter_1.BaseImporter));
exports.OnePasswordWinCsvImporter = OnePasswordWinCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/padlockCsvImporter.ts":
/*!***************************************************!*\
  !*** ./jslib/src/importers/padlockCsvImporter.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var collectionView_1 = __webpack_require__(/*! ../models/view/collectionView */ "./jslib/src/models/view/collectionView.ts");
var PadlockCsvImporter = /** @class */ (function (_super) {
    __extends(PadlockCsvImporter, _super);
    function PadlockCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PadlockCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, false);
        if (results == null) {
            result.success = false;
            return result;
        }
        var headers = null;
        results.forEach(function (value) {
            if (headers == null) {
                headers = value.map(function (v) { return v; });
                return;
            }
            if (value.length < 2 || value.length !== headers.length) {
                return;
            }
            if (!_this.isNullOrWhitespace(value[1])) {
                if (_this.organization) {
                    var tags = value[1].split(',');
                    tags.forEach(function (tag) {
                        tag = tag.trim();
                        var addCollection = true;
                        var collectionIndex = result.collections.length;
                        for (var i = 0; i < result.collections.length; i++) {
                            if (result.collections[i].name === tag) {
                                addCollection = false;
                                collectionIndex = i;
                                break;
                            }
                        }
                        if (addCollection) {
                            var collection = new collectionView_1.CollectionView();
                            collection.name = tag;
                            result.collections.push(collection);
                        }
                        result.collectionRelationships.push([result.ciphers.length, collectionIndex]);
                    });
                }
                else {
                    var tags = value[1].split(',');
                    var tag = tags.length > 0 ? tags[0].trim() : null;
                    _this.processFolder(result, tag);
                }
            }
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(value[0], '--');
            for (var i = 2; i < value.length; i++) {
                var header = headers[i].trim().toLowerCase();
                if (_this.isNullOrWhitespace(value[i]) || _this.isNullOrWhitespace(header)) {
                    continue;
                }
                if (_this.usernameFieldNames.indexOf(header) > -1) {
                    cipher.login.username = value[i];
                }
                else if (_this.passwordFieldNames.indexOf(header) > -1) {
                    cipher.login.password = value[i];
                }
                else if (_this.uriFieldNames.indexOf(header) > -1) {
                    cipher.login.uris = _this.makeUriArray(value[i]);
                }
                else {
                    _this.processKvp(cipher, headers[i], value[i]);
                }
            }
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return PadlockCsvImporter;
}(baseImporter_1.BaseImporter));
exports.PadlockCsvImporter = PadlockCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/passkeepCsvImporter.ts":
/*!****************************************************!*\
  !*** ./jslib/src/importers/passkeepCsvImporter.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var PassKeepCsvImporter = /** @class */ (function (_super) {
    __extends(PassKeepCsvImporter, _super);
    function PassKeepCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PassKeepCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            _this.processFolder(result, _this.getValue('category', value));
            var cipher = _this.initLoginCipher();
            cipher.notes = _this.getValue('description', value);
            cipher.name = _this.getValueOrDefault(_this.getValue('title', value), '--');
            cipher.login.username = _this.getValue('username', value);
            cipher.login.password = _this.getValue('password', value);
            cipher.login.uris = _this.makeUriArray(_this.getValue('site', value));
            _this.processKvp(cipher, 'Password 2', _this.getValue('password2', value));
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    PassKeepCsvImporter.prototype.getValue = function (key, value) {
        return this.getValueOrDefault(value[key], this.getValueOrDefault(value[(' ' + key)]));
    };
    return PassKeepCsvImporter;
}(baseImporter_1.BaseImporter));
exports.PassKeepCsvImporter = PassKeepCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/passwordAgentCsvImporter.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/importers/passwordAgentCsvImporter.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var PasswordAgentCsvImporter = /** @class */ (function (_super) {
    __extends(PasswordAgentCsvImporter, _super);
    function PasswordAgentCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasswordAgentCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, false);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (value.length < 9) {
                return;
            }
            var folder = _this.getValueOrDefault(value[8], '(None)');
            var folderName = folder !== '(None)' ? folder.split('\\').join('/') : null;
            _this.processFolder(result, folderName);
            var cipher = _this.initLoginCipher();
            cipher.notes = _this.getValueOrDefault(value[3]);
            cipher.name = _this.getValueOrDefault(value[0], '--');
            cipher.login.username = _this.getValueOrDefault(value[1]);
            cipher.login.password = _this.getValueOrDefault(value[2]);
            cipher.login.uris = _this.makeUriArray(value[4]);
            _this.convertToNoteIfNeeded(cipher);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    return PasswordAgentCsvImporter;
}(baseImporter_1.BaseImporter));
exports.PasswordAgentCsvImporter = PasswordAgentCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/passwordBossJsonImporter.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/importers/passwordBossJsonImporter.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var cardView_1 = __webpack_require__(/*! ../models/view/cardView */ "./jslib/src/models/view/cardView.ts");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var PasswordBossJsonImporter = /** @class */ (function (_super) {
    __extends(PasswordBossJsonImporter, _super);
    function PasswordBossJsonImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasswordBossJsonImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = JSON.parse(data);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(value.name, '--');
            cipher.login.uris = _this.makeUriArray(value.login_url);
            if (value.identifiers == null) {
                return;
            }
            if (!_this.isNullOrWhitespace(value.identifiers.notes)) {
                cipher.notes = value.identifiers.notes.split('\\r\\n').join('\n').split('\\n').join('\n');
            }
            if (value.type === 'CreditCard') {
                cipher.card = new cardView_1.CardView();
                cipher.type = cipherType_1.CipherType.Card;
            }
            for (var property in value.identifiers) {
                if (!value.identifiers.hasOwnProperty(property)) {
                    continue;
                }
                var valObj = value.identifiers[property];
                var val = valObj != null ? valObj.toString() : null;
                if (_this.isNullOrWhitespace(val) || property === 'notes' || property === 'ignoreItemInSecurityScore') {
                    continue;
                }
                if (cipher.type === cipherType_1.CipherType.Card) {
                    if (property === 'cardNumber') {
                        cipher.card.number = val;
                        cipher.card.brand = _this.getCardBrand(val);
                        continue;
                    }
                    else if (property === 'nameOnCard') {
                        cipher.card.cardholderName = val;
                        continue;
                    }
                    else if (property === 'security_code') {
                        cipher.card.code = val;
                        continue;
                    }
                    else if (property === 'expires') {
                        try {
                            var expDate = new Date(val);
                            cipher.card.expYear = expDate.getFullYear().toString();
                            cipher.card.expMonth = (expDate.getMonth() + 1).toString();
                        }
                        catch (_a) { }
                        continue;
                    }
                    else if (property === 'cardType') {
                        continue;
                    }
                }
                else {
                    if (property === 'username') {
                        cipher.login.username = val;
                        continue;
                    }
                    else if (property === 'password') {
                        cipher.login.password = val;
                        continue;
                    }
                    else if ((cipher.login.uris == null || cipher.login.uris.length === 0) &&
                        _this.uriFieldNames.indexOf(property) > -1) {
                        cipher.login.uris = _this.makeUriArray(val);
                        continue;
                    }
                }
                _this.processKvp(cipher, property, val);
            }
            _this.convertToNoteIfNeeded(cipher);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return PasswordBossJsonImporter;
}(baseImporter_1.BaseImporter));
exports.PasswordBossJsonImporter = PasswordBossJsonImporter;


/***/ }),

/***/ "./jslib/src/importers/passwordDragonXmlImporter.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/importers/passwordDragonXmlImporter.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var PasswordDragonXmlImporter = /** @class */ (function (_super) {
    __extends(PasswordDragonXmlImporter, _super);
    function PasswordDragonXmlImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasswordDragonXmlImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var doc = this.parseXml(data);
        if (doc == null) {
            result.success = false;
            return result;
        }
        var records = doc.querySelectorAll('PasswordManager > record');
        Array.from(records).forEach(function (record) {
            var category = _this.querySelectorDirectChild(record, 'Category');
            var categoryText = category != null && !_this.isNullOrWhitespace(category.textContent) &&
                category.textContent !== 'Unfiled' ? category.textContent : null;
            _this.processFolder(result, categoryText);
            var accountName = _this.querySelectorDirectChild(record, 'Account-Name');
            var userId = _this.querySelectorDirectChild(record, 'User-Id');
            var password = _this.querySelectorDirectChild(record, 'Password');
            var url = _this.querySelectorDirectChild(record, 'URL');
            var notes = _this.querySelectorDirectChild(record, 'Notes');
            var cipher = _this.initLoginCipher();
            cipher.name = accountName != null ? _this.getValueOrDefault(accountName.textContent, '--') : '--';
            cipher.notes = notes != null ? _this.getValueOrDefault(notes.textContent) : '';
            cipher.login.username = userId != null ? _this.getValueOrDefault(userId.textContent) : null;
            cipher.login.password = password != null ? _this.getValueOrDefault(password.textContent) : null;
            cipher.login.uris = url != null ? _this.makeUriArray(url.textContent) : null;
            var attributes = [];
            for (var i = 1; i <= 10; i++) {
                attributes.push('Attribute-' + i);
            }
            _this.querySelectorAllDirectChild(record, attributes.join(',')).forEach(function (attr) {
                if (_this.isNullOrWhitespace(attr.textContent) || attr.textContent === 'null') {
                    return;
                }
                _this.processKvp(cipher, attr.tagName, attr.textContent);
            });
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    return PasswordDragonXmlImporter;
}(baseImporter_1.BaseImporter));
exports.PasswordDragonXmlImporter = PasswordDragonXmlImporter;


/***/ }),

/***/ "./jslib/src/importers/passwordSafeXmlImporter.ts":
/*!********************************************************!*\
  !*** ./jslib/src/importers/passwordSafeXmlImporter.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var PasswordSafeXmlImporter = /** @class */ (function (_super) {
    __extends(PasswordSafeXmlImporter, _super);
    function PasswordSafeXmlImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasswordSafeXmlImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var doc = this.parseXml(data);
        if (doc == null) {
            result.success = false;
            return result;
        }
        var passwordSafe = doc.querySelector('passwordsafe');
        if (passwordSafe == null) {
            result.errorMessage = 'Missing `passwordsafe` node.';
            result.success = false;
            return result;
        }
        var notesDelimiter = passwordSafe.getAttribute('delimiter');
        var entries = doc.querySelectorAll('passwordsafe > entry');
        Array.from(entries).forEach(function (entry) {
            var group = _this.querySelectorDirectChild(entry, 'group');
            var groupText = group != null && !_this.isNullOrWhitespace(group.textContent) ?
                group.textContent.split('.').join('/') : null;
            _this.processFolder(result, groupText);
            var title = _this.querySelectorDirectChild(entry, 'title');
            var username = _this.querySelectorDirectChild(entry, 'username');
            var email = _this.querySelectorDirectChild(entry, 'email');
            var password = _this.querySelectorDirectChild(entry, 'password');
            var url = _this.querySelectorDirectChild(entry, 'url');
            var notes = _this.querySelectorDirectChild(entry, 'notes');
            var cipher = _this.initLoginCipher();
            cipher.name = title != null ? _this.getValueOrDefault(title.textContent, '--') : '--';
            cipher.notes = notes != null ?
                _this.getValueOrDefault(notes.textContent, '').split(notesDelimiter).join('\n') : null;
            cipher.login.username = username != null ? _this.getValueOrDefault(username.textContent) : null;
            cipher.login.password = password != null ? _this.getValueOrDefault(password.textContent) : null;
            cipher.login.uris = url != null ? _this.makeUriArray(url.textContent) : null;
            if (_this.isNullOrWhitespace(cipher.login.username) && email != null) {
                cipher.login.username = _this.getValueOrDefault(email.textContent);
            }
            else if (email != null && !_this.isNullOrWhitespace(email.textContent)) {
                cipher.notes = _this.isNullOrWhitespace(cipher.notes) ? 'Email: ' + email.textContent
                    : (cipher.notes + '\n' + 'Email: ' + email.textContent);
            }
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    return PasswordSafeXmlImporter;
}(baseImporter_1.BaseImporter));
exports.PasswordSafeXmlImporter = PasswordSafeXmlImporter;


/***/ }),

/***/ "./jslib/src/importers/roboformCsvImporter.ts":
/*!****************************************************!*\
  !*** ./jslib/src/importers/roboformCsvImporter.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var RoboFormCsvImporter = /** @class */ (function (_super) {
    __extends(RoboFormCsvImporter, _super);
    function RoboFormCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    RoboFormCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        var i = 1;
        results.forEach(function (value) {
            var folder = !_this.isNullOrWhitespace(value.Folder) && value.Folder.startsWith('/') ?
                value.Folder.replace('/', '') : value.Folder;
            var folderName = !_this.isNullOrWhitespace(folder) ? folder : null;
            _this.processFolder(result, folderName);
            var cipher = _this.initLoginCipher();
            cipher.notes = _this.getValueOrDefault(value.Note);
            cipher.name = _this.getValueOrDefault(value.Name, '--');
            cipher.login.username = _this.getValueOrDefault(value.Login);
            cipher.login.password = _this.getValueOrDefault(value.Pwd);
            cipher.login.uris = _this.makeUriArray(value.Url);
            _this.cleanupCipher(cipher);
            if (i === results.length && cipher.name === '--' && _this.isNullOrWhitespace(cipher.login.password)) {
                return;
            }
            result.ciphers.push(cipher);
            i++;
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    return RoboFormCsvImporter;
}(baseImporter_1.BaseImporter));
exports.RoboFormCsvImporter = RoboFormCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/safeInCloudXmlImporter.ts":
/*!*******************************************************!*\
  !*** ./jslib/src/importers/safeInCloudXmlImporter.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var folderView_1 = __webpack_require__(/*! ../models/view/folderView */ "./jslib/src/models/view/folderView.ts");
var secureNoteView_1 = __webpack_require__(/*! ../models/view/secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var secureNoteType_1 = __webpack_require__(/*! ../enums/secureNoteType */ "./jslib/src/enums/secureNoteType.ts");
var SafeInCloudXmlImporter = /** @class */ (function (_super) {
    __extends(SafeInCloudXmlImporter, _super);
    function SafeInCloudXmlImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SafeInCloudXmlImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var doc = this.parseXml(data);
        if (doc == null) {
            result.success = false;
            return result;
        }
        var db = doc.querySelector('database');
        if (db == null) {
            result.errorMessage = 'Missing `database` node.';
            result.success = false;
            return result;
        }
        var foldersMap = new Map();
        Array.from(doc.querySelectorAll('database > label')).forEach(function (labelEl) {
            var name = labelEl.getAttribute('name');
            var id = labelEl.getAttribute('id');
            if (!_this.isNullOrWhitespace(name) && !_this.isNullOrWhitespace(id)) {
                foldersMap.set(id, result.folders.length);
                var folder = new folderView_1.FolderView();
                folder.name = name;
                result.folders.push(folder);
            }
        });
        Array.from(doc.querySelectorAll('database > card')).forEach(function (cardEl) {
            if (cardEl.getAttribute('template') === 'true') {
                return;
            }
            var labelIdEl = _this.querySelectorDirectChild(cardEl, 'label_id');
            if (labelIdEl != null) {
                var labelId = labelIdEl.textContent;
                if (!_this.isNullOrWhitespace(labelId) && foldersMap.has(labelId)) {
                    result.folderRelationships.push([result.ciphers.length, foldersMap.get(labelId)]);
                }
            }
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(cardEl.getAttribute('title'), '--');
            var cardType = cardEl.getAttribute('type');
            if (cardType === 'note') {
                cipher.type = cipherType_1.CipherType.SecureNote;
                cipher.secureNote = new secureNoteView_1.SecureNoteView();
                cipher.secureNote.type = secureNoteType_1.SecureNoteType.Generic;
            }
            else {
                Array.from(_this.querySelectorAllDirectChild(cardEl, 'field')).forEach(function (fieldEl) {
                    var text = fieldEl.textContent;
                    if (_this.isNullOrWhitespace(text)) {
                        return;
                    }
                    var name = fieldEl.getAttribute('name');
                    var fieldType = _this.getValueOrDefault(fieldEl.getAttribute('type'), '').toLowerCase();
                    if (fieldType === 'login') {
                        cipher.login.username = text;
                    }
                    else if (fieldType === 'password') {
                        cipher.login.password = text;
                    }
                    else if (fieldType === 'notes') {
                        cipher.notes += (text + '\n');
                    }
                    else if (fieldType === 'weblogin' || fieldType === 'website') {
                        cipher.login.uris = _this.makeUriArray(text);
                    }
                    else {
                        _this.processKvp(cipher, name, text);
                    }
                });
            }
            Array.from(_this.querySelectorAllDirectChild(cardEl, 'notes')).forEach(function (notesEl) {
                cipher.notes += (notesEl.textContent + '\n');
            });
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    return SafeInCloudXmlImporter;
}(baseImporter_1.BaseImporter));
exports.SafeInCloudXmlImporter = SafeInCloudXmlImporter;


/***/ }),

/***/ "./jslib/src/importers/saferpassCsvImport.ts":
/*!***************************************************!*\
  !*** ./jslib/src/importers/saferpassCsvImport.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var SaferPassCsvImporter = /** @class */ (function (_super) {
    __extends(SaferPassCsvImporter, _super);
    function SaferPassCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SaferPassCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(_this.nameFromUrl(value.url), '--');
            cipher.notes = _this.getValueOrDefault(value.notes);
            cipher.login.username = _this.getValueOrDefault(value.username);
            cipher.login.password = _this.getValueOrDefault(value.password);
            cipher.login.uris = _this.makeUriArray(value.url);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return SaferPassCsvImporter;
}(baseImporter_1.BaseImporter));
exports.SaferPassCsvImporter = SaferPassCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/splashIdCsvImporter.ts":
/*!****************************************************!*\
  !*** ./jslib/src/importers/splashIdCsvImporter.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var SplashIdCsvImporter = /** @class */ (function (_super) {
    __extends(SplashIdCsvImporter, _super);
    function SplashIdCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SplashIdCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, false);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (value.length < 3) {
                return;
            }
            _this.processFolder(result, _this.getValueOrDefault(value[value.length - 1]));
            var cipher = _this.initLoginCipher();
            cipher.notes = _this.getValueOrDefault(value[value.length - 2], '');
            cipher.name = _this.getValueOrDefault(value[1], '--');
            if (value[0] === 'Web Logins' || value[0] === 'Servers' || value[0] === 'Email Accounts') {
                cipher.login.username = _this.getValueOrDefault(value[2]);
                cipher.login.password = _this.getValueOrDefault(value[3]);
                cipher.login.uris = _this.makeUriArray(value[4]);
                _this.parseFieldsToNotes(cipher, 5, value);
            }
            else {
                _this.parseFieldsToNotes(cipher, 2, value);
            }
            _this.convertToNoteIfNeeded(cipher);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    SplashIdCsvImporter.prototype.parseFieldsToNotes = function (cipher, startIndex, value) {
        // last 3 rows do not get parsed
        for (var i = startIndex; i < value.length - 3; i++) {
            if (this.isNullOrWhitespace(value[i])) {
                continue;
            }
            cipher.notes += (value[i] + '\n');
        }
    };
    return SplashIdCsvImporter;
}(baseImporter_1.BaseImporter));
exports.SplashIdCsvImporter = SplashIdCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/stickyPasswordXmlImporter.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/importers/stickyPasswordXmlImporter.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var StickyPasswordXmlImporter = /** @class */ (function (_super) {
    __extends(StickyPasswordXmlImporter, _super);
    function StickyPasswordXmlImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    StickyPasswordXmlImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var doc = this.parseXml(data);
        if (doc == null) {
            result.success = false;
            return result;
        }
        var loginNodes = doc.querySelectorAll('root > Database > Logins > Login');
        Array.from(loginNodes).forEach(function (loginNode) {
            var accountId = loginNode.getAttribute('ID');
            if (_this.isNullOrWhitespace(accountId)) {
                return;
            }
            var usernameText = loginNode.getAttribute('Name');
            var passwordText = loginNode.getAttribute('Password');
            var titleText = null;
            var linkText = null;
            var notesText = null;
            var groupId = null;
            var groupText = null;
            var accountLogin = doc.querySelector('root > Database > Accounts > Account > ' +
                'LoginLinks > Login[SourceLoginID="' + accountId + '"]');
            if (accountLogin != null) {
                var account = accountLogin.parentElement.parentElement;
                if (account != null) {
                    titleText = account.getAttribute('Name');
                    linkText = account.getAttribute('Link');
                    groupId = account.getAttribute('ParentID');
                    notesText = account.getAttribute('Comments');
                    if (!_this.isNullOrWhitespace(notesText)) {
                        notesText = notesText.split('/n').join('\n');
                    }
                }
            }
            if (!_this.isNullOrWhitespace(groupId)) {
                groupText = _this.buildGroupText(doc, groupId, '');
                _this.processFolder(result, groupText);
            }
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(titleText, '--');
            cipher.notes = _this.getValueOrDefault(notesText);
            cipher.login.username = _this.getValueOrDefault(usernameText);
            cipher.login.password = _this.getValueOrDefault(passwordText);
            cipher.login.uris = _this.makeUriArray(linkText);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    StickyPasswordXmlImporter.prototype.buildGroupText = function (doc, groupId, groupText) {
        var group = doc.querySelector('root > Database > Groups > Group[ID="' + groupId + '"]');
        if (group == null) {
            return groupText;
        }
        if (!this.isNullOrWhitespace(groupText)) {
            groupText = '/' + groupText;
        }
        groupText = group.getAttribute('Name') + groupText;
        return this.buildGroupText(doc, group.getAttribute('ParentID'), groupText);
    };
    return StickyPasswordXmlImporter;
}(baseImporter_1.BaseImporter));
exports.StickyPasswordXmlImporter = StickyPasswordXmlImporter;


/***/ }),

/***/ "./jslib/src/importers/truekeyCsvImporter.ts":
/*!***************************************************!*\
  !*** ./jslib/src/importers/truekeyCsvImporter.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var cardView_1 = __webpack_require__(/*! ../models/view/cardView */ "./jslib/src/models/view/cardView.ts");
var secureNoteView_1 = __webpack_require__(/*! ../models/view/secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var secureNoteType_1 = __webpack_require__(/*! ../enums/secureNoteType */ "./jslib/src/enums/secureNoteType.ts");
var PropertiesToIgnore = ['kind', 'autologin', 'favorite', 'hexcolor', 'protectedwithpassword', 'subdomainonly',
    'type', 'tk_export_version', 'note', 'title', 'document_content',
];
var TrueKeyCsvImporter = /** @class */ (function (_super) {
    __extends(TrueKeyCsvImporter, _super);
    function TrueKeyCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TrueKeyCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            var cipher = _this.initLoginCipher();
            cipher.favorite = _this.getValueOrDefault(value.favorite, '').toLowerCase() === 'true';
            cipher.name = _this.getValueOrDefault(value.name, '--');
            cipher.notes = _this.getValueOrDefault(value.memo, '');
            cipher.login.username = _this.getValueOrDefault(value.login);
            cipher.login.password = _this.getValueOrDefault(value.password);
            cipher.login.uris = _this.makeUriArray(value.url);
            if (value.kind !== 'login') {
                cipher.name = _this.getValueOrDefault(value.title, '--');
                cipher.notes = _this.getValueOrDefault(value.note, '');
            }
            if (value.kind === 'cc') {
                cipher.type = cipherType_1.CipherType.Card;
                cipher.card = new cardView_1.CardView();
                cipher.card.cardholderName = _this.getValueOrDefault(value.cardholder);
                cipher.card.number = _this.getValueOrDefault(value.number);
                cipher.card.brand = _this.getCardBrand(cipher.card.number);
                if (!_this.isNullOrWhitespace(value.expiryDate)) {
                    try {
                        var expDate = new Date(value.expiryDate);
                        cipher.card.expYear = expDate.getFullYear().toString();
                        cipher.card.expMonth = (expDate.getMonth() + 1).toString();
                    }
                    catch (_a) { }
                }
            }
            else if (value.kind !== 'login') {
                cipher.type = cipherType_1.CipherType.SecureNote;
                cipher.secureNote = new secureNoteView_1.SecureNoteView();
                cipher.secureNote.type = secureNoteType_1.SecureNoteType.Generic;
                if (!_this.isNullOrWhitespace(cipher.notes)) {
                    cipher.notes = _this.getValueOrDefault(value.document_content, '');
                }
                for (var property in value) {
                    if (value.hasOwnProperty(property) && PropertiesToIgnore.indexOf(property.toLowerCase()) < 0 &&
                        !_this.isNullOrWhitespace(value[property])) {
                        _this.processKvp(cipher, property, value[property]);
                    }
                }
            }
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return TrueKeyCsvImporter;
}(baseImporter_1.BaseImporter));
exports.TrueKeyCsvImporter = TrueKeyCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/upmCsvImporter.ts":
/*!***********************************************!*\
  !*** ./jslib/src/importers/upmCsvImporter.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var UpmCsvImporter = /** @class */ (function (_super) {
    __extends(UpmCsvImporter, _super);
    function UpmCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    UpmCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, false);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (value.length !== 5) {
                return;
            }
            var cipher = _this.initLoginCipher();
            cipher.name = _this.getValueOrDefault(value[0], '--');
            cipher.notes = _this.getValueOrDefault(value[4]);
            cipher.login.username = _this.getValueOrDefault(value[1]);
            cipher.login.password = _this.getValueOrDefault(value[2]);
            cipher.login.uris = _this.makeUriArray(value[3]);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        result.success = true;
        return result;
    };
    return UpmCsvImporter;
}(baseImporter_1.BaseImporter));
exports.UpmCsvImporter = UpmCsvImporter;


/***/ }),

/***/ "./jslib/src/importers/zohoVaultCsvImporter.ts":
/*!*****************************************************!*\
  !*** ./jslib/src/importers/zohoVaultCsvImporter.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var baseImporter_1 = __webpack_require__(/*! ./baseImporter */ "./jslib/src/importers/baseImporter.ts");
var importResult_1 = __webpack_require__(/*! ../models/domain/importResult */ "./jslib/src/models/domain/importResult.ts");
var ZohoVaultCsvImporter = /** @class */ (function (_super) {
    __extends(ZohoVaultCsvImporter, _super);
    function ZohoVaultCsvImporter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ZohoVaultCsvImporter.prototype.parse = function (data) {
        var _this = this;
        var result = new importResult_1.ImportResult();
        var results = this.parseCsv(data, true);
        if (results == null) {
            result.success = false;
            return result;
        }
        results.forEach(function (value) {
            if (_this.isNullOrWhitespace(value['Secret Name'])) {
                return;
            }
            _this.processFolder(result, _this.getValueOrDefault(value.ChamberName));
            var cipher = _this.initLoginCipher();
            cipher.favorite = _this.getValueOrDefault(value.Favorite, '0') === '1';
            cipher.notes = _this.getValueOrDefault(value.Notes);
            cipher.name = _this.getValueOrDefault(value['Secret Name'], '--');
            cipher.login.uris = _this.makeUriArray(value['Secret URL']);
            _this.parseData(cipher, value.SecretData);
            _this.parseData(cipher, value.CustomData);
            _this.convertToNoteIfNeeded(cipher);
            _this.cleanupCipher(cipher);
            result.ciphers.push(cipher);
        });
        if (this.organization) {
            this.moveFoldersToCollections(result);
        }
        result.success = true;
        return result;
    };
    ZohoVaultCsvImporter.prototype.parseData = function (cipher, data) {
        var _this = this;
        if (this.isNullOrWhitespace(data)) {
            return;
        }
        var dataLines = this.splitNewLine(data);
        dataLines.forEach(function (line) {
            var delimPosition = line.indexOf(':');
            if (delimPosition < 0) {
                return;
            }
            var field = line.substring(0, delimPosition);
            var value = line.length > delimPosition ? line.substring(delimPosition + 1) : null;
            if (_this.isNullOrWhitespace(field) || _this.isNullOrWhitespace(value) || field === 'SecretType') {
                return;
            }
            var fieldLower = field.toLowerCase();
            if (cipher.login.username == null && _this.usernameFieldNames.indexOf(fieldLower) > -1) {
                cipher.login.username = value;
            }
            else if (cipher.login.password == null && _this.passwordFieldNames.indexOf(fieldLower) > -1) {
                cipher.login.password = value;
            }
            else {
                _this.processKvp(cipher, field, value);
            }
        });
    };
    return ZohoVaultCsvImporter;
}(baseImporter_1.BaseImporter));
exports.ZohoVaultCsvImporter = ZohoVaultCsvImporter;


/***/ }),

/***/ "./jslib/src/misc/analytics.ts":
/*!*************************************!*\
  !*** ./jslib/src/misc/analytics.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var _a;
var constants_service_1 = __webpack_require__(/*! ../services/constants.service */ "./jslib/src/services/constants.service.ts");
var deviceType_1 = __webpack_require__(/*! ../enums/deviceType */ "./jslib/src/enums/deviceType.ts");
var GaObj = 'ga';
exports.AnalyticsIds = (_a = {},
    _a[deviceType_1.DeviceType.ChromeExtension] = 'UA-81915606-6',
    _a[deviceType_1.DeviceType.FirefoxExtension] = 'UA-81915606-7',
    _a[deviceType_1.DeviceType.OperaExtension] = 'UA-81915606-8',
    _a[deviceType_1.DeviceType.EdgeExtension] = 'UA-81915606-9',
    _a[deviceType_1.DeviceType.VivaldiExtension] = 'UA-81915606-15',
    _a[deviceType_1.DeviceType.SafariExtension] = 'UA-81915606-16',
    _a[deviceType_1.DeviceType.WindowsDesktop] = 'UA-81915606-17',
    _a[deviceType_1.DeviceType.LinuxDesktop] = 'UA-81915606-19',
    _a[deviceType_1.DeviceType.MacOsDesktop] = 'UA-81915606-18',
    _a);
var Analytics = /** @class */ (function () {
    function Analytics(win, gaFilter, platformUtilsService, storageService, appIdService, dependencyResolver) {
        var _this = this;
        this.gaFilter = gaFilter;
        this.platformUtilsService = platformUtilsService;
        this.storageService = storageService;
        this.appIdService = appIdService;
        this.dependencyResolver = dependencyResolver;
        this.gaTrackingId = null;
        this.defaultDisabled = false;
        if (dependencyResolver != null) {
            var deps = dependencyResolver();
            if (platformUtilsService == null && deps.platformUtilsService) {
                this.platformUtilsService = deps.platformUtilsService;
            }
            if (storageService == null && deps.storageService) {
                this.storageService = deps.storageService;
            }
            if (appIdService == null && deps.appIdService) {
                this.appIdService = deps.appIdService;
            }
        }
        this.appVersion = this.platformUtilsService.getApplicationVersion();
        this.defaultDisabled = this.platformUtilsService.getDevice() === deviceType_1.DeviceType.FirefoxExtension ||
            this.platformUtilsService.isMacAppStore();
        this.gaTrackingId = this.platformUtilsService.analyticsId();
        win.GoogleAnalyticsObject = GaObj;
        win[GaObj] = function (action, param1, param2) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ga(action, param1, param2)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); };
    }
    Analytics.prototype.ga = function (action, param1, param2) {
        return __awaiter(this, void 0, void 0, function () {
            var disabled, gaAnonAppId, version, message, request;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.gaFilter != null && this.gaFilter()) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.storageService.get(constants_service_1.ConstantsService.disableGaKey)];
                    case 1:
                        disabled = _a.sent();
                        if ((this.defaultDisabled && disabled == null) || disabled != null && disabled) {
                            return [2 /*return*/];
                        }
                        if (action !== 'send' || !param1) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.appIdService.getAnonymousAppId()];
                    case 2:
                        gaAnonAppId = _a.sent();
                        version = encodeURIComponent(this.appVersion);
                        message = 'v=1&tid=' + this.gaTrackingId + '&cid=' + gaAnonAppId + '&cd1=' + version;
                        if (param1 === 'pageview' && param2) {
                            message += this.gaTrackPageView(param2);
                        }
                        else if (typeof param1 === 'object' && param1.hitType === 'pageview') {
                            message += this.gaTrackPageView(param1.page);
                        }
                        else if (param1 === 'event' && param2) {
                            message += this.gaTrackEvent(param2);
                        }
                        else if (typeof param1 === 'object' && param1.hitType === 'event') {
                            message += this.gaTrackEvent(param1);
                        }
                        request = new XMLHttpRequest();
                        request.open('POST', 'https://www.google-analytics.com/collect', true);
                        request.send(message);
                        return [2 /*return*/];
                }
            });
        });
    };
    Analytics.prototype.gaTrackEvent = function (options) {
        return '&t=event&ec=' + (options.eventCategory ? encodeURIComponent(options.eventCategory) : 'Event') +
            '&ea=' + encodeURIComponent(options.eventAction) +
            (options.eventLabel ? '&el=' + encodeURIComponent(options.eventLabel) : '') +
            (options.eventValue ? '&ev=' + encodeURIComponent(options.eventValue) : '') +
            (options.page ? '&dp=' + this.cleanPagePath(options.page) : '');
    };
    Analytics.prototype.gaTrackPageView = function (pagePath) {
        return '&t=pageview&dp=' + this.cleanPagePath(pagePath);
    };
    Analytics.prototype.cleanPagePath = function (pagePath) {
        var paramIndex = pagePath.indexOf('?');
        if (paramIndex > -1) {
            pagePath = pagePath.substring(0, paramIndex);
        }
        if (pagePath.indexOf('!/') === 0 || pagePath.indexOf('#/') === 0) {
            pagePath = pagePath.substring(1);
        }
        var pathParts = pagePath.split('/');
        var newPathParts = [];
        pathParts.forEach(function (p) {
            if (p.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i)) {
                newPathParts.push('__guid__');
            }
            else {
                newPathParts.push(p);
            }
        });
        return encodeURIComponent(newPathParts.join('/'));
    };
    return Analytics;
}());
exports.Analytics = Analytics;


/***/ }),

/***/ "./jslib/src/misc/duo.js":
/*!*******************************!*\
  !*** ./jslib/src/misc/duo.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**
 * Duo Web SDK v2
 * Copyright 2017, Duo Security
 */

(function (root, factory) {
    /*eslint-disable */
    if (true) {
        // AMD. Register as an anonymous module.
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    /*eslint-enable */
    } else { var Duo; }
}(this, function() {
    var DUO_MESSAGE_FORMAT = /^(?:AUTH|ENROLL)+\|[A-Za-z0-9\+\/=]+\|[A-Za-z0-9\+\/=]+$/;
    var DUO_ERROR_FORMAT = /^ERR\|[\w\s\.\(\)]+$/;
    var DUO_OPEN_WINDOW_FORMAT = /^DUO_OPEN_WINDOW\|/;
    var VALID_OPEN_WINDOW_DOMAINS = [
        'duo.com',
        'duosecurity.com',
        'duomobile.s3-us-west-1.amazonaws.com'
    ];

    var iframeId = 'duo_iframe',
        postAction = '',
        postArgument = 'sig_response',
        host,
        sigRequest,
        duoSig,
        appSig,
        iframe,
        submitCallback;

    function throwError(message, url) {
        throw new Error(
            'Duo Web SDK error: ' + message +
            (url ? ('\n' + 'See ' + url + ' for more information') : '')
        );
    }

    function hyphenize(str) {
        return str.replace(/([a-z])([A-Z])/, '$1-$2').toLowerCase();
    }

    // cross-browser data attributes
    function getDataAttribute(element, name) {
        if ('dataset' in element) {
            return element.dataset[name];
        } else {
            return element.getAttribute('data-' + hyphenize(name));
        }
    }

    // cross-browser event binding/unbinding
    function on(context, event, fallbackEvent, callback) {
        if ('addEventListener' in window) {
            context.addEventListener(event, callback, false);
        } else {
            context.attachEvent(fallbackEvent, callback);
        }
    }

    function off(context, event, fallbackEvent, callback) {
        if ('removeEventListener' in window) {
            context.removeEventListener(event, callback, false);
        } else {
            context.detachEvent(fallbackEvent, callback);
        }
    }

    function onReady(callback) {
        on(document, 'DOMContentLoaded', 'onreadystatechange', callback);
    }

    function offReady(callback) {
        off(document, 'DOMContentLoaded', 'onreadystatechange', callback);
    }

    function onMessage(callback) {
        on(window, 'message', 'onmessage', callback);
    }

    function offMessage(callback) {
        off(window, 'message', 'onmessage', callback);
    }

    /**
     * Parse the sig_request parameter, throwing errors if the token contains
     * a server error or if the token is invalid.
     *
     * @param {String} sig Request token
     */
    function parseSigRequest(sig) {
        if (!sig) {
            // nothing to do
            return;
        }

        // see if the token contains an error, throwing it if it does
        if (sig.indexOf('ERR|') === 0) {
            throwError(sig.split('|')[1]);
        }

        // validate the token
        if (sig.indexOf(':') === -1 || sig.split(':').length !== 2) {
            throwError(
                'Duo was given a bad token.  This might indicate a configuration ' +
                'problem with one of Duo\'s client libraries.',
                'https://www.duosecurity.com/docs/duoweb#first-steps'
            );
        }

        var sigParts = sig.split(':');

        // hang on to the token, and the parsed duo and app sigs
        sigRequest = sig;
        duoSig = sigParts[0];
        appSig = sigParts[1];

        return {
            sigRequest: sig,
            duoSig: sigParts[0],
            appSig: sigParts[1]
        };
    }

    /**
     * This function is set up to run when the DOM is ready, if the iframe was
     * not available during `init`.
     */
    function onDOMReady() {
        iframe = document.getElementById(iframeId);

        if (!iframe) {
            throw new Error(
                'This page does not contain an iframe for Duo to use.' +
                'Add an element like <iframe id="duo_iframe"></iframe> ' +
                'to this page.  ' +
                'See https://www.duosecurity.com/docs/duoweb#3.-show-the-iframe ' +
                'for more information.'
            );
        }

        // we've got an iframe, away we go!
        ready();

        // always clean up after yourself
        offReady(onDOMReady);
    }

    /**
     * Validate that a MessageEvent came from the Duo service, and that it
     * is a properly formatted payload.
     *
     * The Google Chrome sign-in page injects some JS into pages that also
     * make use of postMessage, so we need to do additional validation above
     * and beyond the origin.
     *
     * @param {MessageEvent} event Message received via postMessage
     */
    function isDuoMessage(event) {
        return Boolean(
            event.origin === ('https://' + host) &&
            typeof event.data === 'string' &&
            (
                event.data.match(DUO_MESSAGE_FORMAT) ||
                event.data.match(DUO_ERROR_FORMAT) ||
                event.data.match(DUO_OPEN_WINDOW_FORMAT)
            )
        );
    }

    /**
     * Validate the request token and prepare for the iframe to become ready.
     *
     * All options below can be passed into an options hash to `Duo.init`, or
     * specified on the iframe using `data-` attributes.
     *
     * Options specified using the options hash will take precedence over
     * `data-` attributes.
     *
     * Example using options hash:
     * ```javascript
     * Duo.init({
     *     iframe: "some_other_id",
     *     host: "api-main.duo.test",
     *     sig_request: "...",
     *     post_action: "/auth",
     *     post_argument: "resp"
     * });
     * ```
     *
     * Example using `data-` attributes:
     * ```
     * <iframe id="duo_iframe"
     *         data-host="api-main.duo.test"
     *         data-sig-request="..."
     *         data-post-action="/auth"
     *         data-post-argument="resp"
     *         >
     * </iframe>
     * ```
     *
     * @param {Object} options
     * @param {String} options.iframe                         The iframe, or id of an iframe to set up
     * @param {String} options.host                           Hostname
     * @param {String} options.sig_request                    Request token
     * @param {String} [options.post_action='']               URL to POST back to after successful auth
     * @param {String} [options.post_argument='sig_response'] Parameter name to use for response token
     * @param {Function} [options.submit_callback]            If provided, duo will not submit the form instead execute
     *                                                        the callback function with reference to the "duo_form" form object
     *                                                        submit_callback can be used to prevent the webpage from reloading.
     */
    function init(options) {
        if (options) {
            if (options.host) {
                host = options.host;
            }

            if (options.sig_request) {
                parseSigRequest(options.sig_request);
            }

            if (options.post_action) {
                postAction = options.post_action;
            }

            if (options.post_argument) {
                postArgument = options.post_argument;
            }

            if (options.iframe) {
                if (options.iframe.tagName) {
                    iframe = options.iframe;
                } else if (typeof options.iframe === 'string') {
                    iframeId = options.iframe;
                }
            }

            if (typeof options.submit_callback === 'function') {
                submitCallback = options.submit_callback;
            }
        }

        // if we were given an iframe, no need to wait for the rest of the DOM
        if (false) {} else {
            // try to find the iframe in the DOM
            iframe = document.getElementById(iframeId);

            // iframe is in the DOM, away we go!
            if (iframe) {
                ready();
            } else {
                // wait until the DOM is ready, then try again
                onReady(onDOMReady);
            }
        }

        // always clean up after yourself!
        offReady(init);
    }

    /**
     * This function is called when a message was received from another domain
     * using the `postMessage` API.  Check that the event came from the Duo
     * service domain, and that the message is a properly formatted payload,
     * then perform the post back to the primary service.
     *
     * @param event Event object (contains origin and data)
     */
    function onReceivedMessage(event) {
        if (isDuoMessage(event)) {
            if (event.data.match(DUO_OPEN_WINDOW_FORMAT)) {
                var url = event.data.substring("DUO_OPEN_WINDOW|".length);
                if (isValidUrlToOpen(url)) {
                    // Open the URL that comes after the DUO_WINDOW_OPEN token.
                    window.open(url, "_self");
                }
            }
            else {
                // the event came from duo, do the post back
                doPostBack(event.data);

                // always clean up after yourself!
                offMessage(onReceivedMessage);
            }
        }
    }

    /**
     * Validate that this passed in URL is one that we will actually allow to
     * be opened.
     * @param url String URL that the message poster wants to open
     * @returns {boolean} true if we allow this url to be opened in the window
     */
    function isValidUrlToOpen(url) {
        if (!url) {
            return false;
        }

        var parser = document.createElement('a');
        parser.href = url;

        if (parser.protocol === "duotrustedendpoints:") {
            return true;
        } else if (parser.protocol !== "https:") {
            return false;
        }

        for (var i = 0; i < VALID_OPEN_WINDOW_DOMAINS.length; i++) {
           if (parser.hostname.endsWith("." + VALID_OPEN_WINDOW_DOMAINS[i]) ||
                   parser.hostname === VALID_OPEN_WINDOW_DOMAINS[i]) {
               return true;
           }
        }
        return false;
    }

    /**
     * Point the iframe at Duo, then wait for it to postMessage back to us.
     */
    function ready() {
        if (!host) {
            host = getDataAttribute(iframe, 'host');

            if (!host) {
                throwError(
                    'No API hostname is given for Duo to use.  Be sure to pass ' +
                    'a `host` parameter to Duo.init, or through the `data-host` ' +
                    'attribute on the iframe element.',
                    'https://www.duosecurity.com/docs/duoweb#3.-show-the-iframe'
                );
            }
        }

        if (!duoSig || !appSig) {
            parseSigRequest(getDataAttribute(iframe, 'sigRequest'));

            if (!duoSig || !appSig) {
                throwError(
                    'No valid signed request is given.  Be sure to give the ' +
                    '`sig_request` parameter to Duo.init, or use the ' +
                    '`data-sig-request` attribute on the iframe element.',
                    'https://www.duosecurity.com/docs/duoweb#3.-show-the-iframe'
                );
            }
        }

        // if postAction/Argument are defaults, see if they are specified
        // as data attributes on the iframe
        if (postAction === '') {
            postAction = getDataAttribute(iframe, 'postAction') || postAction;
        }

        if (postArgument === 'sig_response') {
            postArgument = getDataAttribute(iframe, 'postArgument') || postArgument;
        }

        // point the iframe at Duo
        iframe.src = [
            'https://', host, '/frame/web/v1/auth?tx=', duoSig,
            '&parent=', encodeURIComponent(document.location.href),
            '&v=2.6'
        ].join('');

        // listen for the 'message' event
        onMessage(onReceivedMessage);
    }

    /**
     * We received a postMessage from Duo.  POST back to the primary service
     * with the response token, and any additional user-supplied parameters
     * given in form#duo_form.
     */
    function doPostBack(response) {
        // create a hidden input to contain the response token
        var input = document.createElement('input');
        input.type = 'hidden';
        input.name = postArgument;
        input.value = response + ':' + appSig;

        // user may supply their own form with additional inputs
        var form = document.getElementById('duo_form');

        // if the form doesn't exist, create one
        if (!form) {
            form = document.createElement('form');

            // insert the new form after the iframe
            iframe.parentElement.insertBefore(form, iframe.nextSibling);
        }

        // make sure we are actually posting to the right place
        form.method = 'POST';
        form.action = postAction;

        // add the response token input to the form
        form.appendChild(input);

        // away we go!
        if (typeof submitCallback === "function") {
            submitCallback.call(null, form);
        } else {
            form.submit();
        }
    }

    return {
        init: init,
        _onReady: onReady,
        _parseSigRequest: parseSigRequest,
        _isDuoMessage: isDuoMessage,
        _doPostBack: doPostBack
    };
}));


/***/ }),

/***/ "./jslib/src/misc/sequentialize.ts":
/*!*****************************************!*\
  !*** ./jslib/src/misc/sequentialize.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Use as a Decorator on async functions, it will prevent multiple 'active' calls as the same time
 *
 * If a promise was returned from a previous call to this function, that hasn't yet resolved it will
 * be returned, instead of calling the original function again
 *
 * Results are not cached, once the promise has returned, the next call will result in a fresh call
 *
 * WARNING: The decorator's scope is singleton, so using it on transient objects can lead to memory leaks.
 * Read more at https://github.com/bitwarden/jslib/pull/7
 */
function sequentialize(cacheKey) {
    return function (target, propertyKey, descriptor) {
        var originalMethod = descriptor.value;
        var caches = new Map();
        var getCache = function (obj) {
            var cache = caches.get(obj);
            if (cache != null) {
                return cache;
            }
            cache = new Map();
            caches.set(obj, cache);
            return cache;
        };
        return {
            value: function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                var argsCacheKey = cacheKey(args);
                var cache = getCache(this);
                var response = cache.get(argsCacheKey);
                if (response != null) {
                    return response;
                }
                response = originalMethod.apply(this, args).then(function (val) {
                    cache.delete(argsCacheKey);
                    return val;
                }).catch(function (err) {
                    cache.delete(argsCacheKey);
                    throw err;
                });
                cache.set(argsCacheKey, response);
                return response;
            },
        };
    };
}
exports.sequentialize = sequentialize;


/***/ }),

/***/ "./jslib/src/misc/u2f.ts":
/*!*******************************!*\
  !*** ./jslib/src/misc/u2f.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var U2f = /** @class */ (function () {
    function U2f(win, webVaultUrl, successCallback, errorCallback, infoCallback) {
        this.win = win;
        this.webVaultUrl = webVaultUrl;
        this.successCallback = successCallback;
        this.errorCallback = errorCallback;
        this.infoCallback = infoCallback;
        this.iframe = null;
        this.parseFunction = this.parseMessage.bind(this);
        this.connectorLink = win.document.createElement('a');
        this.webVaultUrl = webVaultUrl != null && webVaultUrl !== '' ? webVaultUrl : 'https://vault.bitwarden.com';
    }
    U2f.prototype.init = function (data) {
        this.connectorLink.href = this.webVaultUrl + '/u2f-connector.html' +
            '?data=' + this.base64Encode(JSON.stringify(data)) +
            '&parent=' + encodeURIComponent(this.win.document.location.href) +
            '&v=1';
        this.iframe = this.win.document.getElementById('u2f_iframe');
        this.iframe.src = this.connectorLink.href;
        this.win.addEventListener('message', this.parseFunction, false);
    };
    U2f.prototype.stop = function () {
        this.sendMessage('stop');
    };
    U2f.prototype.start = function () {
        this.sendMessage('start');
    };
    U2f.prototype.sendMessage = function (message) {
        if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {
            return;
        }
        this.iframe.contentWindow.postMessage(message, this.iframe.src);
    };
    U2f.prototype.base64Encode = function (str) {
        return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function (match, p1) {
            return String.fromCharCode(('0x' + p1));
        }));
    };
    U2f.prototype.cleanup = function () {
        this.win.removeEventListener('message', this.parseFunction, false);
    };
    U2f.prototype.parseMessage = function (event) {
        if (!this.validMessage(event)) {
            return;
        }
        var parts = event.data.split('|');
        if (parts[0] === 'success' && this.successCallback) {
            this.successCallback(parts[1]);
        }
        else if (parts[0] === 'error' && this.errorCallback) {
            this.errorCallback(parts[1]);
        }
        else if (parts[0] === 'info' && this.infoCallback) {
            this.infoCallback(parts[1]);
        }
    };
    U2f.prototype.validMessage = function (event) {
        if (event.origin == null || event.origin === '' || event.origin !== this.connectorLink.origin ||
            event.data == null || typeof (event.data) !== 'string') {
            return false;
        }
        return event.data.indexOf('success|') === 0 || event.data.indexOf('error|') === 0 ||
            event.data.indexOf('info|') === 0;
    };
    return U2f;
}());
exports.U2f = U2f;


/***/ }),

/***/ "./jslib/src/misc/utils.ts":
/*!*********************************!*\
  !*** ./jslib/src/misc/utils.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process, global, Buffer) {
Object.defineProperty(exports, "__esModule", { value: true });
// tslint:disable-next-line
var nodeURL = typeof window === 'undefined' ? __webpack_require__(/*! url */ "./node_modules/url/url.js").URL : null;
var Utils = /** @class */ (function () {
    function Utils() {
    }
    Utils.init = function () {
        if (Utils.inited) {
            return;
        }
        Utils.inited = true;
        Utils.isNode = typeof process !== 'undefined' && process.release != null &&
            process.release.name === 'node';
        Utils.isBrowser = typeof window !== 'undefined';
        Utils.global = Utils.isNode && !Utils.isBrowser ? global : window;
    };
    Utils.fromB64ToArray = function (str) {
        if (Utils.isNode) {
            return new Uint8Array(Buffer.from(str, 'base64'));
        }
        else {
            var binaryString = window.atob(str);
            var bytes = new Uint8Array(binaryString.length);
            for (var i = 0; i < binaryString.length; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes;
        }
    };
    Utils.fromHexToArray = function (str) {
        if (Utils.isNode) {
            return new Uint8Array(Buffer.from(str, 'hex'));
        }
        else {
            var bytes = new Uint8Array(str.length / 2);
            for (var i = 0; i < str.length; i += 2) {
                bytes[i / 2] = parseInt(str.substr(i, 2), 16);
            }
            return bytes;
        }
    };
    Utils.fromUtf8ToArray = function (str) {
        if (Utils.isNode) {
            return new Uint8Array(Buffer.from(str, 'utf8'));
        }
        else {
            var strUtf8 = unescape(encodeURIComponent(str));
            var arr = new Uint8Array(strUtf8.length);
            for (var i = 0; i < strUtf8.length; i++) {
                arr[i] = strUtf8.charCodeAt(i);
            }
            return arr;
        }
    };
    Utils.fromByteStringToArray = function (str) {
        var arr = new Uint8Array(str.length);
        for (var i = 0; i < str.length; i++) {
            arr[i] = str.charCodeAt(i);
        }
        return arr;
    };
    Utils.fromBufferToB64 = function (buffer) {
        if (Utils.isNode) {
            return new Buffer(buffer).toString('base64');
        }
        else {
            var binary = '';
            var bytes = new Uint8Array(buffer);
            for (var i = 0; i < bytes.byteLength; i++) {
                binary += String.fromCharCode(bytes[i]);
            }
            return window.btoa(binary);
        }
    };
    Utils.fromBufferToUtf8 = function (buffer) {
        if (Utils.isNode) {
            return new Buffer(buffer).toString('utf8');
        }
        else {
            var bytes = new Uint8Array(buffer);
            var encodedString = String.fromCharCode.apply(null, bytes);
            return decodeURIComponent(escape(encodedString));
        }
    };
    Utils.fromBufferToByteString = function (buffer) {
        return String.fromCharCode.apply(null, new Uint8Array(buffer));
    };
    // ref: https://stackoverflow.com/a/40031979/1090359
    Utils.fromBufferToHex = function (buffer) {
        if (Utils.isNode) {
            return new Buffer(buffer).toString('hex');
        }
        else {
            var bytes = new Uint8Array(buffer);
            return Array.prototype.map.call(bytes, function (x) { return ('00' + x.toString(16)).slice(-2); }).join('');
        }
    };
    Utils.fromUrlB64ToUtf8 = function (b64Str) {
        var output = b64Str.replace(/-/g, '+').replace(/_/g, '/');
        switch (output.length % 4) {
            case 0:
                break;
            case 2:
                output += '==';
                break;
            case 3:
                output += '=';
                break;
            default:
                throw new Error('Illegal base64url string!');
        }
        return Utils.fromB64ToUtf8(output);
    };
    Utils.fromB64ToUtf8 = function (b64Str) {
        if (Utils.isNode) {
            return new Buffer(b64Str, 'base64').toString('utf8');
        }
        else {
            return decodeURIComponent(escape(window.atob(b64Str)));
        }
    };
    // ref: http://stackoverflow.com/a/2117523/1090359
    Utils.newGuid = function () {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            // tslint:disable-next-line
            var r = Math.random() * 16 | 0;
            // tslint:disable-next-line
            var v = c === 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    };
    Utils.getHostname = function (uriString) {
        var url = Utils.getUrl(uriString);
        return url != null ? url.hostname : null;
    };
    Utils.getHost = function (uriString) {
        var url = Utils.getUrl(uriString);
        return url != null ? url.host : null;
    };
    Utils.getSortFunction = function (i18nService, prop) {
        return function (a, b) {
            if (a[prop] == null && b[prop] != null) {
                return -1;
            }
            if (a[prop] != null && b[prop] == null) {
                return 1;
            }
            if (a[prop] == null && b[prop] == null) {
                return 0;
            }
            return i18nService.collator ? i18nService.collator.compare(a[prop], b[prop]) :
                a[prop].localeCompare(b[prop]);
        };
    };
    Utils.getUrl = function (uriString) {
        if (uriString == null) {
            return null;
        }
        uriString = uriString.trim();
        if (uriString === '') {
            return null;
        }
        if (uriString.indexOf('://') === -1 && uriString.indexOf('.') > -1) {
            uriString = 'http://' + uriString;
        }
        if (uriString.startsWith('http://') || uriString.startsWith('https://')) {
            try {
                if (nodeURL != null) {
                    return new nodeURL(uriString);
                }
                else if (typeof URL === 'function') {
                    return new URL(uriString);
                }
                else if (window != null) {
                    var anchor = window.document.createElement('a');
                    anchor.href = uriString;
                    return anchor;
                }
            }
            catch (e) { }
        }
        return null;
    };
    Utils.inited = false;
    Utils.isNode = false;
    Utils.isBrowser = true;
    Utils.global = null;
    return Utils;
}());
exports.Utils = Utils;
Utils.init();

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/process/browser.js */ "./node_modules/process/browser.js"), __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../../../node_modules/buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./jslib/src/models/api/cardApi.ts":
/*!*****************************************!*\
  !*** ./jslib/src/models/api/cardApi.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CardApi = /** @class */ (function () {
    function CardApi(data) {
        this.cardholderName = data.CardholderName;
        this.brand = data.Brand;
        this.number = data.Number;
        this.expMonth = data.ExpMonth;
        this.expYear = data.ExpYear;
        this.code = data.Code;
    }
    return CardApi;
}());
exports.CardApi = CardApi;


/***/ }),

/***/ "./jslib/src/models/api/fieldApi.ts":
/*!******************************************!*\
  !*** ./jslib/src/models/api/fieldApi.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FieldApi = /** @class */ (function () {
    function FieldApi(response) {
        this.type = response.Type;
        this.name = response.Name;
        this.value = response.Value;
    }
    return FieldApi;
}());
exports.FieldApi = FieldApi;


/***/ }),

/***/ "./jslib/src/models/api/identityApi.ts":
/*!*********************************************!*\
  !*** ./jslib/src/models/api/identityApi.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var IdentityApi = /** @class */ (function () {
    function IdentityApi(data) {
        this.title = data.Title;
        this.firstName = data.FirstName;
        this.middleName = data.MiddleName;
        this.lastName = data.LastName;
        this.address1 = data.Address1;
        this.address2 = data.Address2;
        this.address3 = data.Address3;
        this.city = data.City;
        this.state = data.State;
        this.postalCode = data.PostalCode;
        this.country = data.Country;
        this.company = data.Company;
        this.email = data.Email;
        this.phone = data.Phone;
        this.ssn = data.SSN;
        this.username = data.Username;
        this.passportNumber = data.PassportNumber;
        this.licenseNumber = data.LicenseNumber;
    }
    return IdentityApi;
}());
exports.IdentityApi = IdentityApi;


/***/ }),

/***/ "./jslib/src/models/api/loginApi.ts":
/*!******************************************!*\
  !*** ./jslib/src/models/api/loginApi.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var loginUriApi_1 = __webpack_require__(/*! ./loginUriApi */ "./jslib/src/models/api/loginUriApi.ts");
var LoginApi = /** @class */ (function () {
    function LoginApi(data) {
        var _this = this;
        this.username = data.Username;
        this.password = data.Password;
        this.passwordRevisionDate = data.PasswordRevisionDate;
        this.totp = data.Totp;
        if (data.Uris) {
            this.uris = [];
            data.Uris.forEach(function (u) {
                _this.uris.push(new loginUriApi_1.LoginUriApi(u));
            });
        }
    }
    return LoginApi;
}());
exports.LoginApi = LoginApi;


/***/ }),

/***/ "./jslib/src/models/api/loginUriApi.ts":
/*!*********************************************!*\
  !*** ./jslib/src/models/api/loginUriApi.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var LoginUriApi = /** @class */ (function () {
    function LoginUriApi(data) {
        this.match = null;
        this.uri = data.Uri;
        this.match = data.Match != null ? data.Match : null;
    }
    return LoginUriApi;
}());
exports.LoginUriApi = LoginUriApi;


/***/ }),

/***/ "./jslib/src/models/api/secureNoteApi.ts":
/*!***********************************************!*\
  !*** ./jslib/src/models/api/secureNoteApi.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SecureNoteApi = /** @class */ (function () {
    function SecureNoteApi(data) {
        this.type = data.Type;
    }
    return SecureNoteApi;
}());
exports.SecureNoteApi = SecureNoteApi;


/***/ }),

/***/ "./jslib/src/models/data/attachmentData.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/data/attachmentData.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AttachmentData = /** @class */ (function () {
    function AttachmentData(response) {
        if (response == null) {
            return;
        }
        this.id = response.id;
        this.url = response.url;
        this.fileName = response.fileName;
        this.size = response.size;
        this.sizeName = response.sizeName;
    }
    return AttachmentData;
}());
exports.AttachmentData = AttachmentData;


/***/ }),

/***/ "./jslib/src/models/data/cardData.ts":
/*!*******************************************!*\
  !*** ./jslib/src/models/data/cardData.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CardData = /** @class */ (function () {
    function CardData(data) {
        if (data == null) {
            return;
        }
        this.cardholderName = data.cardholderName;
        this.brand = data.brand;
        this.number = data.number;
        this.expMonth = data.expMonth;
        this.expYear = data.expYear;
        this.code = data.code;
    }
    return CardData;
}());
exports.CardData = CardData;


/***/ }),

/***/ "./jslib/src/models/data/cipherData.ts":
/*!*********************************************!*\
  !*** ./jslib/src/models/data/cipherData.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var cipherType_1 = __webpack_require__(/*! ../../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var attachmentData_1 = __webpack_require__(/*! ./attachmentData */ "./jslib/src/models/data/attachmentData.ts");
var cardData_1 = __webpack_require__(/*! ./cardData */ "./jslib/src/models/data/cardData.ts");
var fieldData_1 = __webpack_require__(/*! ./fieldData */ "./jslib/src/models/data/fieldData.ts");
var identityData_1 = __webpack_require__(/*! ./identityData */ "./jslib/src/models/data/identityData.ts");
var loginData_1 = __webpack_require__(/*! ./loginData */ "./jslib/src/models/data/loginData.ts");
var passwordHistoryData_1 = __webpack_require__(/*! ./passwordHistoryData */ "./jslib/src/models/data/passwordHistoryData.ts");
var secureNoteData_1 = __webpack_require__(/*! ./secureNoteData */ "./jslib/src/models/data/secureNoteData.ts");
var CipherData = /** @class */ (function () {
    function CipherData(response, userId, collectionIds) {
        var _this = this;
        if (response == null) {
            return;
        }
        this.id = response.id;
        this.organizationId = response.organizationId;
        this.folderId = response.folderId;
        this.userId = userId;
        this.edit = response.edit;
        this.organizationUseTotp = response.organizationUseTotp;
        this.favorite = response.favorite;
        this.revisionDate = response.revisionDate;
        this.type = response.type;
        this.name = response.name;
        this.notes = response.notes;
        if (collectionIds != null) {
            this.collectionIds = collectionIds;
        }
        else {
            this.collectionIds = response.collectionIds;
        }
        switch (this.type) {
            case cipherType_1.CipherType.Login:
                this.login = new loginData_1.LoginData(response.login);
                break;
            case cipherType_1.CipherType.SecureNote:
                this.secureNote = new secureNoteData_1.SecureNoteData(response.secureNote);
                break;
            case cipherType_1.CipherType.Card:
                this.card = new cardData_1.CardData(response.card);
                break;
            case cipherType_1.CipherType.Identity:
                this.identity = new identityData_1.IdentityData(response.identity);
                break;
            default:
                break;
        }
        if (response.fields != null) {
            this.fields = [];
            response.fields.forEach(function (field) {
                _this.fields.push(new fieldData_1.FieldData(field));
            });
        }
        if (response.attachments != null) {
            this.attachments = [];
            response.attachments.forEach(function (attachment) {
                _this.attachments.push(new attachmentData_1.AttachmentData(attachment));
            });
        }
        if (response.passwordHistory != null) {
            this.passwordHistory = [];
            response.passwordHistory.forEach(function (ph) {
                _this.passwordHistory.push(new passwordHistoryData_1.PasswordHistoryData(ph));
            });
        }
    }
    return CipherData;
}());
exports.CipherData = CipherData;


/***/ }),

/***/ "./jslib/src/models/data/collectionData.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/data/collectionData.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CollectionData = /** @class */ (function () {
    function CollectionData(response) {
        this.id = response.id;
        this.organizationId = response.organizationId;
        this.name = response.name;
        this.readOnly = response.readOnly;
    }
    return CollectionData;
}());
exports.CollectionData = CollectionData;


/***/ }),

/***/ "./jslib/src/models/data/fieldData.ts":
/*!********************************************!*\
  !*** ./jslib/src/models/data/fieldData.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FieldData = /** @class */ (function () {
    function FieldData(response) {
        if (response == null) {
            return;
        }
        this.type = response.type;
        this.name = response.name;
        this.value = response.value;
    }
    return FieldData;
}());
exports.FieldData = FieldData;


/***/ }),

/***/ "./jslib/src/models/data/folderData.ts":
/*!*********************************************!*\
  !*** ./jslib/src/models/data/folderData.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FolderData = /** @class */ (function () {
    function FolderData(response, userId) {
        this.userId = userId;
        this.name = response.name;
        this.id = response.id;
        this.revisionDate = response.revisionDate;
    }
    return FolderData;
}());
exports.FolderData = FolderData;


/***/ }),

/***/ "./jslib/src/models/data/identityData.ts":
/*!***********************************************!*\
  !*** ./jslib/src/models/data/identityData.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var IdentityData = /** @class */ (function () {
    function IdentityData(data) {
        if (data == null) {
            return;
        }
        this.title = data.title;
        this.firstName = data.firstName;
        this.middleName = data.middleName;
        this.lastName = data.lastName;
        this.address1 = data.address1;
        this.address2 = data.address2;
        this.address3 = data.address3;
        this.city = data.city;
        this.state = data.state;
        this.postalCode = data.postalCode;
        this.country = data.country;
        this.company = data.company;
        this.email = data.email;
        this.phone = data.phone;
        this.ssn = data.ssn;
        this.username = data.username;
        this.passportNumber = data.passportNumber;
        this.licenseNumber = data.licenseNumber;
    }
    return IdentityData;
}());
exports.IdentityData = IdentityData;


/***/ }),

/***/ "./jslib/src/models/data/loginData.ts":
/*!********************************************!*\
  !*** ./jslib/src/models/data/loginData.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var loginUriData_1 = __webpack_require__(/*! ./loginUriData */ "./jslib/src/models/data/loginUriData.ts");
var LoginData = /** @class */ (function () {
    function LoginData(data) {
        var _this = this;
        if (data == null) {
            return;
        }
        this.username = data.username;
        this.password = data.password;
        this.passwordRevisionDate = data.passwordRevisionDate;
        this.totp = data.totp;
        if (data.uris) {
            this.uris = [];
            data.uris.forEach(function (u) {
                _this.uris.push(new loginUriData_1.LoginUriData(u));
            });
        }
    }
    return LoginData;
}());
exports.LoginData = LoginData;


/***/ }),

/***/ "./jslib/src/models/data/loginUriData.ts":
/*!***********************************************!*\
  !*** ./jslib/src/models/data/loginUriData.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var LoginUriData = /** @class */ (function () {
    function LoginUriData(data) {
        this.match = null;
        if (data == null) {
            return;
        }
        this.uri = data.uri;
        this.match = data.match;
    }
    return LoginUriData;
}());
exports.LoginUriData = LoginUriData;


/***/ }),

/***/ "./jslib/src/models/data/organizationData.ts":
/*!***************************************************!*\
  !*** ./jslib/src/models/data/organizationData.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationData = /** @class */ (function () {
    function OrganizationData(response) {
        this.id = response.id;
        this.name = response.name;
        this.status = response.status;
        this.type = response.type;
        this.enabled = response.enabled;
        this.useGroups = response.useGroups;
        this.useDirectory = response.useDirectory;
        this.useEvents = response.useEvents;
        this.useTotp = response.useTotp;
        this.use2fa = response.use2fa;
        this.selfHost = response.selfHost;
        this.usersGetPremium = response.usersGetPremium;
        this.seats = response.seats;
        this.maxCollections = response.maxCollections;
        this.maxStorageGb = response.maxStorageGb;
    }
    return OrganizationData;
}());
exports.OrganizationData = OrganizationData;


/***/ }),

/***/ "./jslib/src/models/data/passwordHistoryData.ts":
/*!******************************************************!*\
  !*** ./jslib/src/models/data/passwordHistoryData.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var PasswordHistoryData = /** @class */ (function () {
    function PasswordHistoryData(response) {
        if (response == null) {
            return;
        }
        this.password = response.password;
        this.lastUsedDate = response.lastUsedDate;
    }
    return PasswordHistoryData;
}());
exports.PasswordHistoryData = PasswordHistoryData;


/***/ }),

/***/ "./jslib/src/models/data/secureNoteData.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/data/secureNoteData.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SecureNoteData = /** @class */ (function () {
    function SecureNoteData(data) {
        if (data == null) {
            return;
        }
        this.type = data.type;
    }
    return SecureNoteData;
}());
exports.SecureNoteData = SecureNoteData;


/***/ }),

/***/ "./jslib/src/models/domain/attachment.ts":
/*!***********************************************!*\
  !*** ./jslib/src/models/domain/attachment.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var attachmentData_1 = __webpack_require__(/*! ../data/attachmentData */ "./jslib/src/models/data/attachmentData.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var attachmentView_1 = __webpack_require__(/*! ../view/attachmentView */ "./jslib/src/models/view/attachmentView.ts");
var Attachment = /** @class */ (function (_super) {
    __extends(Attachment, _super);
    function Attachment(obj, alreadyEncrypted) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.size = obj.size;
        _this.buildDomainModel(_this, obj, {
            id: null,
            url: null,
            sizeName: null,
            fileName: null,
        }, alreadyEncrypted, ['id', 'url', 'sizeName']);
        return _this;
    }
    Attachment.prototype.decrypt = function (orgId) {
        return this.decryptObj(new attachmentView_1.AttachmentView(this), {
            fileName: null,
        }, orgId);
    };
    Attachment.prototype.toAttachmentData = function () {
        var a = new attachmentData_1.AttachmentData();
        this.buildDataModel(this, a, {
            id: null,
            url: null,
            sizeName: null,
            fileName: null,
        }, ['id', 'url', 'sizeName']);
        return a;
    };
    return Attachment;
}(domain_1.default));
exports.Attachment = Attachment;


/***/ }),

/***/ "./jslib/src/models/domain/authResult.ts":
/*!***********************************************!*\
  !*** ./jslib/src/models/domain/authResult.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AuthResult = /** @class */ (function () {
    function AuthResult() {
        this.twoFactor = false;
        this.twoFactorProviders = null;
    }
    return AuthResult;
}());
exports.AuthResult = AuthResult;


/***/ }),

/***/ "./jslib/src/models/domain/card.ts":
/*!*****************************************!*\
  !*** ./jslib/src/models/domain/card.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var cardData_1 = __webpack_require__(/*! ../data/cardData */ "./jslib/src/models/data/cardData.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var cardView_1 = __webpack_require__(/*! ../view/cardView */ "./jslib/src/models/view/cardView.ts");
var Card = /** @class */ (function (_super) {
    __extends(Card, _super);
    function Card(obj, alreadyEncrypted) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.buildDomainModel(_this, obj, {
            cardholderName: null,
            brand: null,
            number: null,
            expMonth: null,
            expYear: null,
            code: null,
        }, alreadyEncrypted, []);
        return _this;
    }
    Card.prototype.decrypt = function (orgId) {
        return this.decryptObj(new cardView_1.CardView(this), {
            cardholderName: null,
            brand: null,
            number: null,
            expMonth: null,
            expYear: null,
            code: null,
        }, orgId);
    };
    Card.prototype.toCardData = function () {
        var c = new cardData_1.CardData();
        this.buildDataModel(this, c, {
            cardholderName: null,
            brand: null,
            number: null,
            expMonth: null,
            expYear: null,
            code: null,
        });
        return c;
    };
    return Card;
}(domain_1.default));
exports.Card = Card;


/***/ }),

/***/ "./jslib/src/models/domain/cipher.ts":
/*!*******************************************!*\
  !*** ./jslib/src/models/domain/cipher.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var cipherType_1 = __webpack_require__(/*! ../../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var cipherData_1 = __webpack_require__(/*! ../data/cipherData */ "./jslib/src/models/data/cipherData.ts");
var cipherView_1 = __webpack_require__(/*! ../view/cipherView */ "./jslib/src/models/view/cipherView.ts");
var attachment_1 = __webpack_require__(/*! ./attachment */ "./jslib/src/models/domain/attachment.ts");
var card_1 = __webpack_require__(/*! ./card */ "./jslib/src/models/domain/card.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var field_1 = __webpack_require__(/*! ./field */ "./jslib/src/models/domain/field.ts");
var identity_1 = __webpack_require__(/*! ./identity */ "./jslib/src/models/domain/identity.ts");
var login_1 = __webpack_require__(/*! ./login */ "./jslib/src/models/domain/login.ts");
var password_1 = __webpack_require__(/*! ./password */ "./jslib/src/models/domain/password.ts");
var secureNote_1 = __webpack_require__(/*! ./secureNote */ "./jslib/src/models/domain/secureNote.ts");
var Cipher = /** @class */ (function (_super) {
    __extends(Cipher, _super);
    function Cipher(obj, alreadyEncrypted, localData) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        if (localData === void 0) { localData = null; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.buildDomainModel(_this, obj, {
            id: null,
            userId: null,
            organizationId: null,
            folderId: null,
            name: null,
            notes: null,
        }, alreadyEncrypted, ['id', 'userId', 'organizationId', 'folderId']);
        _this.type = obj.type;
        _this.favorite = obj.favorite;
        _this.organizationUseTotp = obj.organizationUseTotp;
        _this.edit = obj.edit;
        _this.revisionDate = obj.revisionDate;
        _this.collectionIds = obj.collectionIds;
        _this.localData = localData;
        switch (_this.type) {
            case cipherType_1.CipherType.Login:
                _this.login = new login_1.Login(obj.login, alreadyEncrypted);
                break;
            case cipherType_1.CipherType.SecureNote:
                _this.secureNote = new secureNote_1.SecureNote(obj.secureNote, alreadyEncrypted);
                break;
            case cipherType_1.CipherType.Card:
                _this.card = new card_1.Card(obj.card, alreadyEncrypted);
                break;
            case cipherType_1.CipherType.Identity:
                _this.identity = new identity_1.Identity(obj.identity, alreadyEncrypted);
                break;
            default:
                break;
        }
        if (obj.attachments != null) {
            _this.attachments = [];
            obj.attachments.forEach(function (attachment) {
                _this.attachments.push(new attachment_1.Attachment(attachment, alreadyEncrypted));
            });
        }
        else {
            _this.attachments = null;
        }
        if (obj.fields != null) {
            _this.fields = [];
            obj.fields.forEach(function (field) {
                _this.fields.push(new field_1.Field(field, alreadyEncrypted));
            });
        }
        else {
            _this.fields = null;
        }
        if (obj.passwordHistory != null) {
            _this.passwordHistory = [];
            obj.passwordHistory.forEach(function (ph) {
                _this.passwordHistory.push(new password_1.Password(ph, alreadyEncrypted));
            });
        }
        else {
            _this.passwordHistory = null;
        }
        return _this;
    }
    Cipher.prototype.decrypt = function () {
        return __awaiter(this, void 0, void 0, function () {
            var model, _a, _b, _c, _d, _e, orgId, attachments_1, fields_1, passwordHistory_1;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        model = new cipherView_1.CipherView(this);
                        return [4 /*yield*/, this.decryptObj(model, {
                                name: null,
                                notes: null,
                            }, this.organizationId)];
                    case 1:
                        _f.sent();
                        _a = this.type;
                        switch (_a) {
                            case cipherType_1.CipherType.Login: return [3 /*break*/, 2];
                            case cipherType_1.CipherType.SecureNote: return [3 /*break*/, 4];
                            case cipherType_1.CipherType.Card: return [3 /*break*/, 6];
                            case cipherType_1.CipherType.Identity: return [3 /*break*/, 8];
                        }
                        return [3 /*break*/, 10];
                    case 2:
                        _b = model;
                        return [4 /*yield*/, this.login.decrypt(this.organizationId)];
                    case 3:
                        _b.login = _f.sent();
                        return [3 /*break*/, 11];
                    case 4:
                        _c = model;
                        return [4 /*yield*/, this.secureNote.decrypt(this.organizationId)];
                    case 5:
                        _c.secureNote = _f.sent();
                        return [3 /*break*/, 11];
                    case 6:
                        _d = model;
                        return [4 /*yield*/, this.card.decrypt(this.organizationId)];
                    case 7:
                        _d.card = _f.sent();
                        return [3 /*break*/, 11];
                    case 8:
                        _e = model;
                        return [4 /*yield*/, this.identity.decrypt(this.organizationId)];
                    case 9:
                        _e.identity = _f.sent();
                        return [3 /*break*/, 11];
                    case 10: return [3 /*break*/, 11];
                    case 11:
                        orgId = this.organizationId;
                        if (!(this.attachments != null && this.attachments.length > 0)) return [3 /*break*/, 13];
                        attachments_1 = [];
                        return [4 /*yield*/, this.attachments.reduce(function (promise, attachment) {
                                return promise.then(function () {
                                    return attachment.decrypt(orgId);
                                }).then(function (decAttachment) {
                                    attachments_1.push(decAttachment);
                                });
                            }, Promise.resolve())];
                    case 12:
                        _f.sent();
                        model.attachments = attachments_1;
                        _f.label = 13;
                    case 13:
                        if (!(this.fields != null && this.fields.length > 0)) return [3 /*break*/, 15];
                        fields_1 = [];
                        return [4 /*yield*/, this.fields.reduce(function (promise, field) {
                                return promise.then(function () {
                                    return field.decrypt(orgId);
                                }).then(function (decField) {
                                    fields_1.push(decField);
                                });
                            }, Promise.resolve())];
                    case 14:
                        _f.sent();
                        model.fields = fields_1;
                        _f.label = 15;
                    case 15:
                        if (!(this.passwordHistory != null && this.passwordHistory.length > 0)) return [3 /*break*/, 17];
                        passwordHistory_1 = [];
                        return [4 /*yield*/, this.passwordHistory.reduce(function (promise, ph) {
                                return promise.then(function () {
                                    return ph.decrypt(orgId);
                                }).then(function (decPh) {
                                    passwordHistory_1.push(decPh);
                                });
                            }, Promise.resolve())];
                    case 16:
                        _f.sent();
                        model.passwordHistory = passwordHistory_1;
                        _f.label = 17;
                    case 17: return [2 /*return*/, model];
                }
            });
        });
    };
    Cipher.prototype.toCipherData = function (userId) {
        var c = new cipherData_1.CipherData();
        c.id = this.id;
        c.organizationId = this.organizationId;
        c.folderId = this.folderId;
        c.userId = this.organizationId != null ? userId : null;
        c.edit = this.edit;
        c.organizationUseTotp = this.organizationUseTotp;
        c.favorite = this.favorite;
        c.revisionDate = this.revisionDate;
        c.type = this.type;
        c.collectionIds = this.collectionIds;
        this.buildDataModel(this, c, {
            name: null,
            notes: null,
        });
        switch (c.type) {
            case cipherType_1.CipherType.Login:
                c.login = this.login.toLoginData();
                break;
            case cipherType_1.CipherType.SecureNote:
                c.secureNote = this.secureNote.toSecureNoteData();
                break;
            case cipherType_1.CipherType.Card:
                c.card = this.card.toCardData();
                break;
            case cipherType_1.CipherType.Identity:
                c.identity = this.identity.toIdentityData();
                break;
            default:
                break;
        }
        if (this.fields != null) {
            c.fields = [];
            this.fields.forEach(function (field) {
                c.fields.push(field.toFieldData());
            });
        }
        if (this.attachments != null) {
            c.attachments = [];
            this.attachments.forEach(function (attachment) {
                c.attachments.push(attachment.toAttachmentData());
            });
        }
        if (this.passwordHistory != null) {
            c.passwordHistory = [];
            this.passwordHistory.forEach(function (ph) {
                c.passwordHistory.push(ph.toPasswordHistoryData());
            });
        }
        return c;
    };
    return Cipher;
}(domain_1.default));
exports.Cipher = Cipher;


/***/ }),

/***/ "./jslib/src/models/domain/cipherString.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/domain/cipherString.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var encryptionType_1 = __webpack_require__(/*! ../../enums/encryptionType */ "./jslib/src/enums/encryptionType.ts");
var utils_1 = __webpack_require__(/*! ../../misc/utils */ "./jslib/src/misc/utils.ts");
var CipherString = /** @class */ (function () {
    function CipherString(encryptedStringOrType, data, iv, mac) {
        if (data != null) {
            // data and header
            var encType = encryptedStringOrType;
            this.encryptedString = encType + '.' + data;
            // iv
            if (iv != null) {
                this.encryptedString += ('|' + iv);
            }
            // mac
            if (mac != null) {
                this.encryptedString += ('|' + mac);
            }
            this.encryptionType = encType;
            this.data = data;
            this.iv = iv;
            this.mac = mac;
            return;
        }
        this.encryptedString = encryptedStringOrType;
        if (!this.encryptedString) {
            return;
        }
        var headerPieces = this.encryptedString.split('.');
        var encPieces = null;
        if (headerPieces.length === 2) {
            try {
                this.encryptionType = parseInt(headerPieces[0], null);
                encPieces = headerPieces[1].split('|');
            }
            catch (e) {
                return;
            }
        }
        else {
            encPieces = this.encryptedString.split('|');
            this.encryptionType = encPieces.length === 3 ? encryptionType_1.EncryptionType.AesCbc128_HmacSha256_B64 :
                encryptionType_1.EncryptionType.AesCbc256_B64;
        }
        switch (this.encryptionType) {
            case encryptionType_1.EncryptionType.AesCbc128_HmacSha256_B64:
            case encryptionType_1.EncryptionType.AesCbc256_HmacSha256_B64:
                if (encPieces.length !== 3) {
                    return;
                }
                this.iv = encPieces[0];
                this.data = encPieces[1];
                this.mac = encPieces[2];
                break;
            case encryptionType_1.EncryptionType.AesCbc256_B64:
                if (encPieces.length !== 2) {
                    return;
                }
                this.iv = encPieces[0];
                this.data = encPieces[1];
                break;
            case encryptionType_1.EncryptionType.Rsa2048_OaepSha256_B64:
            case encryptionType_1.EncryptionType.Rsa2048_OaepSha1_B64:
                if (encPieces.length !== 1) {
                    return;
                }
                this.data = encPieces[0];
                break;
            default:
                return;
        }
    }
    CipherString.prototype.decrypt = function (orgId) {
        return __awaiter(this, void 0, void 0, function () {
            var cryptoService, containerService, orgKey, _a, e_1;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.decryptedValue) {
                            return [2 /*return*/, Promise.resolve(this.decryptedValue)];
                        }
                        containerService = utils_1.Utils.global.bitwardenContainerService;
                        if (containerService) {
                            cryptoService = containerService.getCryptoService();
                        }
                        else {
                            throw new Error('global bitwardenContainerService not initialized.');
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 4, , 5]);
                        return [4 /*yield*/, cryptoService.getOrgKey(orgId)];
                    case 2:
                        orgKey = _b.sent();
                        _a = this;
                        return [4 /*yield*/, cryptoService.decryptToUtf8(this, orgKey)];
                    case 3:
                        _a.decryptedValue = _b.sent();
                        return [3 /*break*/, 5];
                    case 4:
                        e_1 = _b.sent();
                        this.decryptedValue = '[error: cannot decrypt]';
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/, this.decryptedValue];
                }
            });
        });
    };
    return CipherString;
}());
exports.CipherString = CipherString;


/***/ }),

/***/ "./jslib/src/models/domain/collection.ts":
/*!***********************************************!*\
  !*** ./jslib/src/models/domain/collection.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var collectionView_1 = __webpack_require__(/*! ../view/collectionView */ "./jslib/src/models/view/collectionView.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var Collection = /** @class */ (function (_super) {
    __extends(Collection, _super);
    function Collection(obj, alreadyEncrypted) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.buildDomainModel(_this, obj, {
            id: null,
            organizationId: null,
            name: null,
            readOnly: null,
        }, alreadyEncrypted, ['id', 'organizationId', 'readOnly']);
        return _this;
    }
    Collection.prototype.decrypt = function () {
        return this.decryptObj(new collectionView_1.CollectionView(this), {
            name: null,
        }, this.organizationId);
    };
    return Collection;
}(domain_1.default));
exports.Collection = Collection;


/***/ }),

/***/ "./jslib/src/models/domain/decryptParameters.ts":
/*!******************************************************!*\
  !*** ./jslib/src/models/domain/decryptParameters.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var DecryptParameters = /** @class */ (function () {
    function DecryptParameters() {
    }
    return DecryptParameters;
}());
exports.DecryptParameters = DecryptParameters;


/***/ }),

/***/ "./jslib/src/models/domain/domain.ts":
/*!*******************************************!*\
  !*** ./jslib/src/models/domain/domain.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var cipherString_1 = __webpack_require__(/*! ./cipherString */ "./jslib/src/models/domain/cipherString.ts");
var Domain = /** @class */ (function () {
    function Domain() {
    }
    Domain.prototype.buildDomainModel = function (domain, dataObj, map, alreadyEncrypted, notEncList) {
        if (notEncList === void 0) { notEncList = []; }
        for (var prop in map) {
            if (!map.hasOwnProperty(prop)) {
                continue;
            }
            var objProp = dataObj[(map[prop] || prop)];
            if (alreadyEncrypted === true || notEncList.indexOf(prop) > -1) {
                domain[prop] = objProp ? objProp : null;
            }
            else {
                domain[prop] = objProp ? new cipherString_1.CipherString(objProp) : null;
            }
        }
    };
    Domain.prototype.buildDataModel = function (domain, dataObj, map, notCipherStringList) {
        if (notCipherStringList === void 0) { notCipherStringList = []; }
        for (var prop in map) {
            if (!map.hasOwnProperty(prop)) {
                continue;
            }
            var objProp = domain[(map[prop] || prop)];
            if (notCipherStringList.indexOf(prop) > -1) {
                dataObj[prop] = objProp != null ? objProp : null;
            }
            else {
                dataObj[prop] = objProp != null ? objProp.encryptedString : null;
            }
        }
    };
    Domain.prototype.decryptObj = function (viewModel, map, orgId) {
        return __awaiter(this, void 0, void 0, function () {
            var promises, self, prop;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        promises = [];
                        self = this;
                        for (prop in map) {
                            if (!map.hasOwnProperty(prop)) {
                                continue;
                            }
                            // tslint:disable-next-line
                            (function (theProp) {
                                var p = Promise.resolve().then(function () {
                                    var mapProp = map[theProp] || theProp;
                                    if (self[mapProp]) {
                                        return self[mapProp].decrypt(orgId);
                                    }
                                    return null;
                                }).then(function (val) {
                                    viewModel[theProp] = val;
                                });
                                promises.push(p);
                            })(prop);
                        }
                        return [4 /*yield*/, Promise.all(promises)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, viewModel];
                }
            });
        });
    };
    return Domain;
}());
exports.default = Domain;


/***/ }),

/***/ "./jslib/src/models/domain/encryptedObject.ts":
/*!****************************************************!*\
  !*** ./jslib/src/models/domain/encryptedObject.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EncryptedObject = /** @class */ (function () {
    function EncryptedObject() {
    }
    return EncryptedObject;
}());
exports.EncryptedObject = EncryptedObject;


/***/ }),

/***/ "./jslib/src/models/domain/environmentUrls.ts":
/*!****************************************************!*\
  !*** ./jslib/src/models/domain/environmentUrls.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EnvironmentUrls = /** @class */ (function () {
    function EnvironmentUrls() {
    }
    return EnvironmentUrls;
}());
exports.EnvironmentUrls = EnvironmentUrls;


/***/ }),

/***/ "./jslib/src/models/domain/field.ts":
/*!******************************************!*\
  !*** ./jslib/src/models/domain/field.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var fieldData_1 = __webpack_require__(/*! ../data/fieldData */ "./jslib/src/models/data/fieldData.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var fieldView_1 = __webpack_require__(/*! ../view/fieldView */ "./jslib/src/models/view/fieldView.ts");
var Field = /** @class */ (function (_super) {
    __extends(Field, _super);
    function Field(obj, alreadyEncrypted) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.type = obj.type;
        _this.buildDomainModel(_this, obj, {
            name: null,
            value: null,
        }, alreadyEncrypted, []);
        return _this;
    }
    Field.prototype.decrypt = function (orgId) {
        return this.decryptObj(new fieldView_1.FieldView(this), {
            name: null,
            value: null,
        }, orgId);
    };
    Field.prototype.toFieldData = function () {
        var f = new fieldData_1.FieldData();
        this.buildDataModel(this, f, {
            name: null,
            value: null,
            type: null,
        }, ['type']);
        return f;
    };
    return Field;
}(domain_1.default));
exports.Field = Field;


/***/ }),

/***/ "./jslib/src/models/domain/folder.ts":
/*!*******************************************!*\
  !*** ./jslib/src/models/domain/folder.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var folderView_1 = __webpack_require__(/*! ../view/folderView */ "./jslib/src/models/view/folderView.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var Folder = /** @class */ (function (_super) {
    __extends(Folder, _super);
    function Folder(obj, alreadyEncrypted) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.buildDomainModel(_this, obj, {
            id: null,
            name: null,
        }, alreadyEncrypted, ['id']);
        return _this;
    }
    Folder.prototype.decrypt = function () {
        return this.decryptObj(new folderView_1.FolderView(this), {
            name: null,
        }, null);
    };
    return Folder;
}(domain_1.default));
exports.Folder = Folder;


/***/ }),

/***/ "./jslib/src/models/domain/generatedPasswordHistory.ts":
/*!*************************************************************!*\
  !*** ./jslib/src/models/domain/generatedPasswordHistory.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var GeneratedPasswordHistory = /** @class */ (function () {
    function GeneratedPasswordHistory(password, date) {
        this.password = password;
        this.date = date;
    }
    return GeneratedPasswordHistory;
}());
exports.GeneratedPasswordHistory = GeneratedPasswordHistory;


/***/ }),

/***/ "./jslib/src/models/domain/identity.ts":
/*!*********************************************!*\
  !*** ./jslib/src/models/domain/identity.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var identityData_1 = __webpack_require__(/*! ../data/identityData */ "./jslib/src/models/data/identityData.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var identityView_1 = __webpack_require__(/*! ../view/identityView */ "./jslib/src/models/view/identityView.ts");
var Identity = /** @class */ (function (_super) {
    __extends(Identity, _super);
    function Identity(obj, alreadyEncrypted) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.buildDomainModel(_this, obj, {
            title: null,
            firstName: null,
            middleName: null,
            lastName: null,
            address1: null,
            address2: null,
            address3: null,
            city: null,
            state: null,
            postalCode: null,
            country: null,
            company: null,
            email: null,
            phone: null,
            ssn: null,
            username: null,
            passportNumber: null,
            licenseNumber: null,
        }, alreadyEncrypted, []);
        return _this;
    }
    Identity.prototype.decrypt = function (orgId) {
        return this.decryptObj(new identityView_1.IdentityView(this), {
            title: null,
            firstName: null,
            middleName: null,
            lastName: null,
            address1: null,
            address2: null,
            address3: null,
            city: null,
            state: null,
            postalCode: null,
            country: null,
            company: null,
            email: null,
            phone: null,
            ssn: null,
            username: null,
            passportNumber: null,
            licenseNumber: null,
        }, orgId);
    };
    Identity.prototype.toIdentityData = function () {
        var i = new identityData_1.IdentityData();
        this.buildDataModel(this, i, {
            title: null,
            firstName: null,
            middleName: null,
            lastName: null,
            address1: null,
            address2: null,
            address3: null,
            city: null,
            state: null,
            postalCode: null,
            country: null,
            company: null,
            email: null,
            phone: null,
            ssn: null,
            username: null,
            passportNumber: null,
            licenseNumber: null,
        });
        return i;
    };
    return Identity;
}(domain_1.default));
exports.Identity = Identity;


/***/ }),

/***/ "./jslib/src/models/domain/importResult.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/domain/importResult.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ImportResult = /** @class */ (function () {
    function ImportResult() {
        this.success = false;
        this.ciphers = [];
        this.folders = [];
        this.folderRelationships = [];
        this.collections = [];
        this.collectionRelationships = [];
    }
    return ImportResult;
}());
exports.ImportResult = ImportResult;


/***/ }),

/***/ "./jslib/src/models/domain/login.ts":
/*!******************************************!*\
  !*** ./jslib/src/models/domain/login.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var loginUri_1 = __webpack_require__(/*! ./loginUri */ "./jslib/src/models/domain/loginUri.ts");
var loginData_1 = __webpack_require__(/*! ../data/loginData */ "./jslib/src/models/data/loginData.ts");
var loginView_1 = __webpack_require__(/*! ../view/loginView */ "./jslib/src/models/view/loginView.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var Login = /** @class */ (function (_super) {
    __extends(Login, _super);
    function Login(obj, alreadyEncrypted) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.passwordRevisionDate = obj.passwordRevisionDate;
        _this.buildDomainModel(_this, obj, {
            username: null,
            password: null,
            totp: null,
        }, alreadyEncrypted, []);
        if (obj.uris) {
            _this.uris = [];
            obj.uris.forEach(function (u) {
                _this.uris.push(new loginUri_1.LoginUri(u, alreadyEncrypted));
            });
        }
        return _this;
    }
    Login.prototype.decrypt = function (orgId) {
        return __awaiter(this, void 0, void 0, function () {
            var view, i, uri;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.decryptObj(new loginView_1.LoginView(this), {
                            username: null,
                            password: null,
                            totp: null,
                        }, orgId)];
                    case 1:
                        view = _a.sent();
                        if (!(this.uris != null)) return [3 /*break*/, 5];
                        view.uris = [];
                        i = 0;
                        _a.label = 2;
                    case 2:
                        if (!(i < this.uris.length)) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.uris[i].decrypt(orgId)];
                    case 3:
                        uri = _a.sent();
                        view.uris.push(uri);
                        _a.label = 4;
                    case 4:
                        i++;
                        return [3 /*break*/, 2];
                    case 5: return [2 /*return*/, view];
                }
            });
        });
    };
    Login.prototype.toLoginData = function () {
        var l = new loginData_1.LoginData();
        l.passwordRevisionDate = this.passwordRevisionDate;
        this.buildDataModel(this, l, {
            username: null,
            password: null,
            totp: null,
        });
        if (this.uris != null && this.uris.length > 0) {
            l.uris = [];
            this.uris.forEach(function (u) {
                l.uris.push(u.toLoginUriData());
            });
        }
        return l;
    };
    return Login;
}(domain_1.default));
exports.Login = Login;


/***/ }),

/***/ "./jslib/src/models/domain/loginUri.ts":
/*!*********************************************!*\
  !*** ./jslib/src/models/domain/loginUri.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var loginUriData_1 = __webpack_require__(/*! ../data/loginUriData */ "./jslib/src/models/data/loginUriData.ts");
var loginUriView_1 = __webpack_require__(/*! ../view/loginUriView */ "./jslib/src/models/view/loginUriView.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var LoginUri = /** @class */ (function (_super) {
    __extends(LoginUri, _super);
    function LoginUri(obj, alreadyEncrypted) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.match = obj.match;
        _this.buildDomainModel(_this, obj, {
            uri: null,
        }, alreadyEncrypted, []);
        return _this;
    }
    LoginUri.prototype.decrypt = function (orgId) {
        return this.decryptObj(new loginUriView_1.LoginUriView(this), {
            uri: null,
        }, orgId);
    };
    LoginUri.prototype.toLoginUriData = function () {
        var u = new loginUriData_1.LoginUriData();
        this.buildDataModel(this, u, {
            uri: null,
        }, ['match']);
        return u;
    };
    return LoginUri;
}(domain_1.default));
exports.LoginUri = LoginUri;


/***/ }),

/***/ "./jslib/src/models/domain/organization.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/domain/organization.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var organizationUserStatusType_1 = __webpack_require__(/*! ../../enums/organizationUserStatusType */ "./jslib/src/enums/organizationUserStatusType.ts");
var organizationUserType_1 = __webpack_require__(/*! ../../enums/organizationUserType */ "./jslib/src/enums/organizationUserType.ts");
var Organization = /** @class */ (function () {
    function Organization(obj) {
        if (obj == null) {
            return;
        }
        this.id = obj.id;
        this.name = obj.name;
        this.status = obj.status;
        this.type = obj.type;
        this.enabled = obj.enabled;
        this.useGroups = obj.useGroups;
        this.useDirectory = obj.useDirectory;
        this.useEvents = obj.useEvents;
        this.useTotp = obj.useTotp;
        this.use2fa = obj.use2fa;
        this.selfHost = obj.selfHost;
        this.usersGetPremium = obj.usersGetPremium;
        this.seats = obj.seats;
        this.maxCollections = obj.maxCollections;
        this.maxStorageGb = obj.maxStorageGb;
    }
    Object.defineProperty(Organization.prototype, "canAccess", {
        get: function () {
            if (this.type === organizationUserType_1.OrganizationUserType.Owner) {
                return true;
            }
            return this.enabled && this.status === organizationUserStatusType_1.OrganizationUserStatusType.Confirmed;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Organization.prototype, "isAdmin", {
        get: function () {
            return this.type === organizationUserType_1.OrganizationUserType.Owner || this.type === organizationUserType_1.OrganizationUserType.Admin;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Organization.prototype, "isOwner", {
        get: function () {
            return this.type === organizationUserType_1.OrganizationUserType.Owner;
        },
        enumerable: true,
        configurable: true
    });
    return Organization;
}());
exports.Organization = Organization;


/***/ }),

/***/ "./jslib/src/models/domain/password.ts":
/*!*********************************************!*\
  !*** ./jslib/src/models/domain/password.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var passwordHistoryData_1 = __webpack_require__(/*! ../data/passwordHistoryData */ "./jslib/src/models/data/passwordHistoryData.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var passwordHistoryView_1 = __webpack_require__(/*! ../view/passwordHistoryView */ "./jslib/src/models/view/passwordHistoryView.ts");
var Password = /** @class */ (function (_super) {
    __extends(Password, _super);
    function Password(obj, alreadyEncrypted) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.buildDomainModel(_this, obj, {
            password: null,
            lastUsedDate: null,
        }, alreadyEncrypted, ['lastUsedDate']);
        return _this;
    }
    Password.prototype.decrypt = function (orgId) {
        return __awaiter(this, void 0, void 0, function () {
            var view;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.decryptObj(new passwordHistoryView_1.PasswordHistoryView(this), {
                            password: null,
                        }, orgId)];
                    case 1:
                        view = _a.sent();
                        return [2 /*return*/, view];
                }
            });
        });
    };
    Password.prototype.toPasswordHistoryData = function () {
        var ph = new passwordHistoryData_1.PasswordHistoryData();
        ph.lastUsedDate = this.lastUsedDate;
        this.buildDataModel(this, ph, {
            password: null,
        });
        return ph;
    };
    return Password;
}(domain_1.default));
exports.Password = Password;


/***/ }),

/***/ "./jslib/src/models/domain/secureNote.ts":
/*!***********************************************!*\
  !*** ./jslib/src/models/domain/secureNote.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var secureNoteData_1 = __webpack_require__(/*! ../data/secureNoteData */ "./jslib/src/models/data/secureNoteData.ts");
var domain_1 = __webpack_require__(/*! ./domain */ "./jslib/src/models/domain/domain.ts");
var secureNoteView_1 = __webpack_require__(/*! ../view/secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
var SecureNote = /** @class */ (function (_super) {
    __extends(SecureNote, _super);
    function SecureNote(obj, alreadyEncrypted) {
        if (alreadyEncrypted === void 0) { alreadyEncrypted = false; }
        var _this = _super.call(this) || this;
        if (obj == null) {
            return _this;
        }
        _this.type = obj.type;
        return _this;
    }
    SecureNote.prototype.decrypt = function (orgId) {
        return Promise.resolve(new secureNoteView_1.SecureNoteView(this));
    };
    SecureNote.prototype.toSecureNoteData = function () {
        var n = new secureNoteData_1.SecureNoteData();
        n.type = this.type;
        return n;
    };
    return SecureNote;
}(domain_1.default));
exports.SecureNote = SecureNote;


/***/ }),

/***/ "./jslib/src/models/domain/symmetricCryptoKey.ts":
/*!*******************************************************!*\
  !*** ./jslib/src/models/domain/symmetricCryptoKey.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var encryptionType_1 = __webpack_require__(/*! ../../enums/encryptionType */ "./jslib/src/enums/encryptionType.ts");
var utils_1 = __webpack_require__(/*! ../../misc/utils */ "./jslib/src/misc/utils.ts");
var SymmetricCryptoKey = /** @class */ (function () {
    function SymmetricCryptoKey(key, encType) {
        if (key == null) {
            throw new Error('Must provide key');
        }
        if (encType == null) {
            if (key.byteLength === 32) {
                encType = encryptionType_1.EncryptionType.AesCbc256_B64;
            }
            else if (key.byteLength === 64) {
                encType = encryptionType_1.EncryptionType.AesCbc256_HmacSha256_B64;
            }
            else {
                throw new Error('Unable to determine encType.');
            }
        }
        this.key = key;
        this.encType = encType;
        if (encType === encryptionType_1.EncryptionType.AesCbc256_B64 && key.byteLength === 32) {
            this.encKey = key;
            this.macKey = null;
        }
        else if (encType === encryptionType_1.EncryptionType.AesCbc128_HmacSha256_B64 && key.byteLength === 32) {
            this.encKey = key.slice(0, 16);
            this.macKey = key.slice(16, 32);
        }
        else if (encType === encryptionType_1.EncryptionType.AesCbc256_HmacSha256_B64 && key.byteLength === 64) {
            this.encKey = key.slice(0, 32);
            this.macKey = key.slice(32, 64);
        }
        else {
            throw new Error('Unsupported encType/key length.');
        }
        if (this.key != null) {
            this.keyB64 = utils_1.Utils.fromBufferToB64(this.key);
        }
        if (this.encKey != null) {
            this.encKeyB64 = utils_1.Utils.fromBufferToB64(this.encKey);
        }
        if (this.macKey != null) {
            this.macKeyB64 = utils_1.Utils.fromBufferToB64(this.macKey);
        }
    }
    return SymmetricCryptoKey;
}());
exports.SymmetricCryptoKey = SymmetricCryptoKey;


/***/ }),

/***/ "./jslib/src/models/request/cipherBulkDeleteRequest.ts":
/*!*************************************************************!*\
  !*** ./jslib/src/models/request/cipherBulkDeleteRequest.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CipherBulkDeleteRequest = /** @class */ (function () {
    function CipherBulkDeleteRequest(ids) {
        this.ids = ids == null ? [] : ids;
    }
    return CipherBulkDeleteRequest;
}());
exports.CipherBulkDeleteRequest = CipherBulkDeleteRequest;


/***/ }),

/***/ "./jslib/src/models/request/cipherBulkMoveRequest.ts":
/*!***********************************************************!*\
  !*** ./jslib/src/models/request/cipherBulkMoveRequest.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CipherBulkMoveRequest = /** @class */ (function () {
    function CipherBulkMoveRequest(ids, folderId) {
        this.ids = ids == null ? [] : ids;
        this.folderId = folderId;
    }
    return CipherBulkMoveRequest;
}());
exports.CipherBulkMoveRequest = CipherBulkMoveRequest;


/***/ }),

/***/ "./jslib/src/models/request/cipherBulkShareRequest.ts":
/*!************************************************************!*\
  !*** ./jslib/src/models/request/cipherBulkShareRequest.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var cipherWithIdRequest_1 = __webpack_require__(/*! ./cipherWithIdRequest */ "./jslib/src/models/request/cipherWithIdRequest.ts");
var CipherBulkShareRequest = /** @class */ (function () {
    function CipherBulkShareRequest(ciphers, collectionIds) {
        var _this = this;
        if (ciphers != null) {
            this.ciphers = [];
            ciphers.forEach(function (c) {
                _this.ciphers.push(new cipherWithIdRequest_1.CipherWithIdRequest(c));
            });
        }
        this.collectionIds = collectionIds;
    }
    return CipherBulkShareRequest;
}());
exports.CipherBulkShareRequest = CipherBulkShareRequest;


/***/ }),

/***/ "./jslib/src/models/request/cipherCollectionsRequest.ts":
/*!**************************************************************!*\
  !*** ./jslib/src/models/request/cipherCollectionsRequest.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CipherCollectionsRequest = /** @class */ (function () {
    function CipherCollectionsRequest(collectionIds) {
        this.collectionIds = collectionIds == null ? [] : collectionIds;
    }
    return CipherCollectionsRequest;
}());
exports.CipherCollectionsRequest = CipherCollectionsRequest;


/***/ }),

/***/ "./jslib/src/models/request/cipherRequest.ts":
/*!***************************************************!*\
  !*** ./jslib/src/models/request/cipherRequest.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var cipherType_1 = __webpack_require__(/*! ../../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var CipherRequest = /** @class */ (function () {
    function CipherRequest(cipher) {
        var _this = this;
        this.type = cipher.type;
        this.folderId = cipher.folderId;
        this.organizationId = cipher.organizationId;
        this.name = cipher.name ? cipher.name.encryptedString : null;
        this.notes = cipher.notes ? cipher.notes.encryptedString : null;
        this.favorite = cipher.favorite;
        switch (this.type) {
            case cipherType_1.CipherType.Login:
                this.login = {
                    uris: null,
                    username: cipher.login.username ? cipher.login.username.encryptedString : null,
                    password: cipher.login.password ? cipher.login.password.encryptedString : null,
                    passwordRevisionDate: cipher.login.passwordRevisionDate,
                    totp: cipher.login.totp ? cipher.login.totp.encryptedString : null,
                };
                if (cipher.login.uris) {
                    this.login.uris = [];
                    cipher.login.uris.forEach(function (u) {
                        _this.login.uris.push({
                            uri: u.uri ? u.uri.encryptedString : null,
                            match: u.match != null ? u.match : null,
                        });
                    });
                }
                break;
            case cipherType_1.CipherType.SecureNote:
                this.secureNote = {
                    type: cipher.secureNote.type,
                };
                break;
            case cipherType_1.CipherType.Card:
                this.card = {
                    cardholderName: cipher.card.cardholderName ? cipher.card.cardholderName.encryptedString : null,
                    brand: cipher.card.brand ? cipher.card.brand.encryptedString : null,
                    number: cipher.card.number ? cipher.card.number.encryptedString : null,
                    expMonth: cipher.card.expMonth ? cipher.card.expMonth.encryptedString : null,
                    expYear: cipher.card.expYear ? cipher.card.expYear.encryptedString : null,
                    code: cipher.card.code ? cipher.card.code.encryptedString : null,
                };
                break;
            case cipherType_1.CipherType.Identity:
                this.identity = {
                    title: cipher.identity.title ? cipher.identity.title.encryptedString : null,
                    firstName: cipher.identity.firstName ? cipher.identity.firstName.encryptedString : null,
                    middleName: cipher.identity.middleName ? cipher.identity.middleName.encryptedString : null,
                    lastName: cipher.identity.lastName ? cipher.identity.lastName.encryptedString : null,
                    address1: cipher.identity.address1 ? cipher.identity.address1.encryptedString : null,
                    address2: cipher.identity.address2 ? cipher.identity.address2.encryptedString : null,
                    address3: cipher.identity.address3 ? cipher.identity.address3.encryptedString : null,
                    city: cipher.identity.city ? cipher.identity.city.encryptedString : null,
                    state: cipher.identity.state ? cipher.identity.state.encryptedString : null,
                    postalCode: cipher.identity.postalCode ? cipher.identity.postalCode.encryptedString : null,
                    country: cipher.identity.country ? cipher.identity.country.encryptedString : null,
                    company: cipher.identity.company ? cipher.identity.company.encryptedString : null,
                    email: cipher.identity.email ? cipher.identity.email.encryptedString : null,
                    phone: cipher.identity.phone ? cipher.identity.phone.encryptedString : null,
                    ssn: cipher.identity.ssn ? cipher.identity.ssn.encryptedString : null,
                    username: cipher.identity.username ? cipher.identity.username.encryptedString : null,
                    passportNumber: cipher.identity.passportNumber ?
                        cipher.identity.passportNumber.encryptedString : null,
                    licenseNumber: cipher.identity.licenseNumber ? cipher.identity.licenseNumber.encryptedString : null,
                };
                break;
            default:
                break;
        }
        if (cipher.fields) {
            this.fields = [];
            cipher.fields.forEach(function (field) {
                _this.fields.push({
                    type: field.type,
                    name: field.name ? field.name.encryptedString : null,
                    value: field.value ? field.value.encryptedString : null,
                });
            });
        }
        if (cipher.passwordHistory) {
            this.passwordHistory = [];
            cipher.passwordHistory.forEach(function (ph) {
                _this.passwordHistory.push({
                    lastUsedDate: ph.lastUsedDate,
                    password: ph.password ? ph.password.encryptedString : null,
                });
            });
        }
        if (cipher.attachments) {
            this.attachments = {};
            cipher.attachments.forEach(function (attachment) {
                _this.attachments[attachment.id] = attachment.fileName ? attachment.fileName.encryptedString : null;
            });
        }
    }
    return CipherRequest;
}());
exports.CipherRequest = CipherRequest;


/***/ }),

/***/ "./jslib/src/models/request/cipherShareRequest.ts":
/*!********************************************************!*\
  !*** ./jslib/src/models/request/cipherShareRequest.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var cipherRequest_1 = __webpack_require__(/*! ./cipherRequest */ "./jslib/src/models/request/cipherRequest.ts");
var CipherShareRequest = /** @class */ (function () {
    function CipherShareRequest(cipher) {
        this.cipher = new cipherRequest_1.CipherRequest(cipher);
        this.collectionIds = cipher.collectionIds;
    }
    return CipherShareRequest;
}());
exports.CipherShareRequest = CipherShareRequest;


/***/ }),

/***/ "./jslib/src/models/request/cipherWithIdRequest.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/models/request/cipherWithIdRequest.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var cipherRequest_1 = __webpack_require__(/*! ./cipherRequest */ "./jslib/src/models/request/cipherRequest.ts");
var CipherWithIdRequest = /** @class */ (function (_super) {
    __extends(CipherWithIdRequest, _super);
    function CipherWithIdRequest(cipher) {
        var _this = _super.call(this, cipher) || this;
        _this.id = cipher.id;
        return _this;
    }
    return CipherWithIdRequest;
}(cipherRequest_1.CipherRequest));
exports.CipherWithIdRequest = CipherWithIdRequest;


/***/ }),

/***/ "./jslib/src/models/request/collectionRequest.ts":
/*!*******************************************************!*\
  !*** ./jslib/src/models/request/collectionRequest.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CollectionRequest = /** @class */ (function () {
    function CollectionRequest(collection) {
        this.groups = [];
        if (collection == null) {
            return;
        }
        this.name = collection.name ? collection.name.encryptedString : null;
    }
    return CollectionRequest;
}());
exports.CollectionRequest = CollectionRequest;


/***/ }),

/***/ "./jslib/src/models/request/deleteRecoverRequest.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/models/request/deleteRecoverRequest.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var DeleteRecoverRequest = /** @class */ (function () {
    function DeleteRecoverRequest() {
    }
    return DeleteRecoverRequest;
}());
exports.DeleteRecoverRequest = DeleteRecoverRequest;


/***/ }),

/***/ "./jslib/src/models/request/deviceRequest.ts":
/*!***************************************************!*\
  !*** ./jslib/src/models/request/deviceRequest.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var DeviceRequest = /** @class */ (function () {
    function DeviceRequest(appId, platformUtilsService) {
        this.type = platformUtilsService.getDevice();
        this.name = platformUtilsService.getDeviceString();
        this.identifier = appId;
        this.pushToken = null;
    }
    return DeviceRequest;
}());
exports.DeviceRequest = DeviceRequest;


/***/ }),

/***/ "./jslib/src/models/request/emailRequest.ts":
/*!**************************************************!*\
  !*** ./jslib/src/models/request/emailRequest.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var emailTokenRequest_1 = __webpack_require__(/*! ./emailTokenRequest */ "./jslib/src/models/request/emailTokenRequest.ts");
var EmailRequest = /** @class */ (function (_super) {
    __extends(EmailRequest, _super);
    function EmailRequest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return EmailRequest;
}(emailTokenRequest_1.EmailTokenRequest));
exports.EmailRequest = EmailRequest;


/***/ }),

/***/ "./jslib/src/models/request/emailTokenRequest.ts":
/*!*******************************************************!*\
  !*** ./jslib/src/models/request/emailTokenRequest.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var passwordVerificationRequest_1 = __webpack_require__(/*! ./passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var EmailTokenRequest = /** @class */ (function (_super) {
    __extends(EmailTokenRequest, _super);
    function EmailTokenRequest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return EmailTokenRequest;
}(passwordVerificationRequest_1.PasswordVerificationRequest));
exports.EmailTokenRequest = EmailTokenRequest;


/***/ }),

/***/ "./jslib/src/models/request/folderRequest.ts":
/*!***************************************************!*\
  !*** ./jslib/src/models/request/folderRequest.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FolderRequest = /** @class */ (function () {
    function FolderRequest(folder) {
        this.name = folder.name ? folder.name.encryptedString : null;
    }
    return FolderRequest;
}());
exports.FolderRequest = FolderRequest;


/***/ }),

/***/ "./jslib/src/models/request/folderWithIdRequest.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/models/request/folderWithIdRequest.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var folderRequest_1 = __webpack_require__(/*! ./folderRequest */ "./jslib/src/models/request/folderRequest.ts");
var FolderWithIdRequest = /** @class */ (function (_super) {
    __extends(FolderWithIdRequest, _super);
    function FolderWithIdRequest(folder) {
        var _this = _super.call(this, folder) || this;
        _this.id = folder.id;
        return _this;
    }
    return FolderWithIdRequest;
}(folderRequest_1.FolderRequest));
exports.FolderWithIdRequest = FolderWithIdRequest;


/***/ }),

/***/ "./jslib/src/models/request/groupRequest.ts":
/*!**************************************************!*\
  !*** ./jslib/src/models/request/groupRequest.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var GroupRequest = /** @class */ (function () {
    function GroupRequest() {
        this.collections = [];
    }
    return GroupRequest;
}());
exports.GroupRequest = GroupRequest;


/***/ }),

/***/ "./jslib/src/models/request/importCiphersRequest.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/models/request/importCiphersRequest.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ImportCiphersRequest = /** @class */ (function () {
    function ImportCiphersRequest() {
        this.ciphers = [];
        this.folders = [];
        this.folderRelationships = [];
    }
    return ImportCiphersRequest;
}());
exports.ImportCiphersRequest = ImportCiphersRequest;


/***/ }),

/***/ "./jslib/src/models/request/importOrganizationCiphersRequest.ts":
/*!**********************************************************************!*\
  !*** ./jslib/src/models/request/importOrganizationCiphersRequest.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ImportOrganizationCiphersRequest = /** @class */ (function () {
    function ImportOrganizationCiphersRequest() {
        this.ciphers = [];
        this.collections = [];
        this.collectionRelationships = [];
    }
    return ImportOrganizationCiphersRequest;
}());
exports.ImportOrganizationCiphersRequest = ImportOrganizationCiphersRequest;


/***/ }),

/***/ "./jslib/src/models/request/keysRequest.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/request/keysRequest.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var KeysRequest = /** @class */ (function () {
    function KeysRequest(publicKey, encryptedPrivateKey) {
        this.publicKey = publicKey;
        this.encryptedPrivateKey = encryptedPrivateKey;
    }
    return KeysRequest;
}());
exports.KeysRequest = KeysRequest;


/***/ }),

/***/ "./jslib/src/models/request/kvpRequest.ts":
/*!************************************************!*\
  !*** ./jslib/src/models/request/kvpRequest.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var KvpRequest = /** @class */ (function () {
    function KvpRequest(key, value) {
        this.key = key;
        this.value = value;
    }
    return KvpRequest;
}());
exports.KvpRequest = KvpRequest;


/***/ }),

/***/ "./jslib/src/models/request/organizationCreateRequest.ts":
/*!***************************************************************!*\
  !*** ./jslib/src/models/request/organizationCreateRequest.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationCreateRequest = /** @class */ (function () {
    function OrganizationCreateRequest() {
    }
    return OrganizationCreateRequest;
}());
exports.OrganizationCreateRequest = OrganizationCreateRequest;


/***/ }),

/***/ "./jslib/src/models/request/organizationUpdateRequest.ts":
/*!***************************************************************!*\
  !*** ./jslib/src/models/request/organizationUpdateRequest.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationUpdateRequest = /** @class */ (function () {
    function OrganizationUpdateRequest() {
    }
    return OrganizationUpdateRequest;
}());
exports.OrganizationUpdateRequest = OrganizationUpdateRequest;


/***/ }),

/***/ "./jslib/src/models/request/organizationUserAcceptRequest.ts":
/*!*******************************************************************!*\
  !*** ./jslib/src/models/request/organizationUserAcceptRequest.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationUserAcceptRequest = /** @class */ (function () {
    function OrganizationUserAcceptRequest() {
    }
    return OrganizationUserAcceptRequest;
}());
exports.OrganizationUserAcceptRequest = OrganizationUserAcceptRequest;


/***/ }),

/***/ "./jslib/src/models/request/organizationUserConfirmRequest.ts":
/*!********************************************************************!*\
  !*** ./jslib/src/models/request/organizationUserConfirmRequest.ts ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationUserConfirmRequest = /** @class */ (function () {
    function OrganizationUserConfirmRequest() {
    }
    return OrganizationUserConfirmRequest;
}());
exports.OrganizationUserConfirmRequest = OrganizationUserConfirmRequest;


/***/ }),

/***/ "./jslib/src/models/request/organizationUserInviteRequest.ts":
/*!*******************************************************************!*\
  !*** ./jslib/src/models/request/organizationUserInviteRequest.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationUserInviteRequest = /** @class */ (function () {
    function OrganizationUserInviteRequest() {
        this.emails = [];
        this.collections = [];
    }
    return OrganizationUserInviteRequest;
}());
exports.OrganizationUserInviteRequest = OrganizationUserInviteRequest;


/***/ }),

/***/ "./jslib/src/models/request/organizationUserUpdateGroupsRequest.ts":
/*!*************************************************************************!*\
  !*** ./jslib/src/models/request/organizationUserUpdateGroupsRequest.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationUserUpdateGroupsRequest = /** @class */ (function () {
    function OrganizationUserUpdateGroupsRequest() {
        this.groupIds = [];
    }
    return OrganizationUserUpdateGroupsRequest;
}());
exports.OrganizationUserUpdateGroupsRequest = OrganizationUserUpdateGroupsRequest;


/***/ }),

/***/ "./jslib/src/models/request/organizationUserUpdateRequest.ts":
/*!*******************************************************************!*\
  !*** ./jslib/src/models/request/organizationUserUpdateRequest.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationUserUpdateRequest = /** @class */ (function () {
    function OrganizationUserUpdateRequest() {
        this.collections = [];
    }
    return OrganizationUserUpdateRequest;
}());
exports.OrganizationUserUpdateRequest = OrganizationUserUpdateRequest;


/***/ }),

/***/ "./jslib/src/models/request/passwordHintRequest.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/models/request/passwordHintRequest.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var PasswordHintRequest = /** @class */ (function () {
    function PasswordHintRequest(email) {
        this.email = email;
    }
    return PasswordHintRequest;
}());
exports.PasswordHintRequest = PasswordHintRequest;


/***/ }),

/***/ "./jslib/src/models/request/passwordRequest.ts":
/*!*****************************************************!*\
  !*** ./jslib/src/models/request/passwordRequest.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var passwordVerificationRequest_1 = __webpack_require__(/*! ./passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var PasswordRequest = /** @class */ (function (_super) {
    __extends(PasswordRequest, _super);
    function PasswordRequest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return PasswordRequest;
}(passwordVerificationRequest_1.PasswordVerificationRequest));
exports.PasswordRequest = PasswordRequest;


/***/ }),

/***/ "./jslib/src/models/request/passwordVerificationRequest.ts":
/*!*****************************************************************!*\
  !*** ./jslib/src/models/request/passwordVerificationRequest.ts ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var PasswordVerificationRequest = /** @class */ (function () {
    function PasswordVerificationRequest() {
    }
    return PasswordVerificationRequest;
}());
exports.PasswordVerificationRequest = PasswordVerificationRequest;


/***/ }),

/***/ "./jslib/src/models/request/paymentRequest.ts":
/*!****************************************************!*\
  !*** ./jslib/src/models/request/paymentRequest.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var PaymentRequest = /** @class */ (function () {
    function PaymentRequest() {
    }
    return PaymentRequest;
}());
exports.PaymentRequest = PaymentRequest;


/***/ }),

/***/ "./jslib/src/models/request/registerRequest.ts":
/*!*****************************************************!*\
  !*** ./jslib/src/models/request/registerRequest.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var RegisterRequest = /** @class */ (function () {
    function RegisterRequest(email, name, masterPasswordHash, masterPasswordHint, key) {
        this.name = name;
        this.email = email;
        this.masterPasswordHash = masterPasswordHash;
        this.masterPasswordHint = masterPasswordHint ? masterPasswordHint : null;
        this.key = key;
    }
    return RegisterRequest;
}());
exports.RegisterRequest = RegisterRequest;


/***/ }),

/***/ "./jslib/src/models/request/seatRequest.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/request/seatRequest.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SeatRequest = /** @class */ (function () {
    function SeatRequest() {
    }
    return SeatRequest;
}());
exports.SeatRequest = SeatRequest;


/***/ }),

/***/ "./jslib/src/models/request/selectionReadOnlyRequest.ts":
/*!**************************************************************!*\
  !*** ./jslib/src/models/request/selectionReadOnlyRequest.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SelectionReadOnlyRequest = /** @class */ (function () {
    function SelectionReadOnlyRequest(id, readOnly) {
        this.id = id;
        this.readOnly = readOnly;
    }
    return SelectionReadOnlyRequest;
}());
exports.SelectionReadOnlyRequest = SelectionReadOnlyRequest;


/***/ }),

/***/ "./jslib/src/models/request/storageRequest.ts":
/*!****************************************************!*\
  !*** ./jslib/src/models/request/storageRequest.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var StorageRequest = /** @class */ (function () {
    function StorageRequest() {
    }
    return StorageRequest;
}());
exports.StorageRequest = StorageRequest;


/***/ }),

/***/ "./jslib/src/models/request/tokenRequest.ts":
/*!**************************************************!*\
  !*** ./jslib/src/models/request/tokenRequest.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TokenRequest = /** @class */ (function () {
    function TokenRequest(email, masterPasswordHash, provider, token, remember, device) {
        this.email = email;
        this.masterPasswordHash = masterPasswordHash;
        this.token = token;
        this.provider = provider;
        this.remember = remember;
        this.device = device != null ? device : null;
    }
    TokenRequest.prototype.toIdentityToken = function (clientId) {
        var obj = {
            grant_type: 'password',
            username: this.email,
            password: this.masterPasswordHash,
            scope: 'api offline_access',
            client_id: clientId,
        };
        if (this.device) {
            obj.deviceType = this.device.type;
            obj.deviceIdentifier = this.device.identifier;
            obj.deviceName = this.device.name;
            // no push tokens for browser apps yet
            // obj.devicePushToken = this.device.pushToken;
        }
        if (this.token && this.provider !== null && (typeof this.provider !== 'undefined')) {
            obj.twoFactorToken = this.token;
            obj.twoFactorProvider = this.provider;
            obj.twoFactorRemember = this.remember ? '1' : '0';
        }
        return obj;
    };
    return TokenRequest;
}());
exports.TokenRequest = TokenRequest;


/***/ }),

/***/ "./jslib/src/models/request/twoFactorEmailRequest.ts":
/*!***********************************************************!*\
  !*** ./jslib/src/models/request/twoFactorEmailRequest.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var passwordVerificationRequest_1 = __webpack_require__(/*! ./passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var TwoFactorEmailRequest = /** @class */ (function (_super) {
    __extends(TwoFactorEmailRequest, _super);
    function TwoFactorEmailRequest(email, masterPasswordHash) {
        var _this = _super.call(this) || this;
        _this.masterPasswordHash = masterPasswordHash;
        _this.email = email;
        return _this;
    }
    return TwoFactorEmailRequest;
}(passwordVerificationRequest_1.PasswordVerificationRequest));
exports.TwoFactorEmailRequest = TwoFactorEmailRequest;


/***/ }),

/***/ "./jslib/src/models/request/twoFactorProviderRequest.ts":
/*!**************************************************************!*\
  !*** ./jslib/src/models/request/twoFactorProviderRequest.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var passwordVerificationRequest_1 = __webpack_require__(/*! ./passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var TwoFactorProviderRequest = /** @class */ (function (_super) {
    __extends(TwoFactorProviderRequest, _super);
    function TwoFactorProviderRequest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return TwoFactorProviderRequest;
}(passwordVerificationRequest_1.PasswordVerificationRequest));
exports.TwoFactorProviderRequest = TwoFactorProviderRequest;


/***/ }),

/***/ "./jslib/src/models/request/twoFactorRecoveryRequest.ts":
/*!**************************************************************!*\
  !*** ./jslib/src/models/request/twoFactorRecoveryRequest.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var passwordVerificationRequest_1 = __webpack_require__(/*! ./passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var TwoFactorRecoveryRequest = /** @class */ (function (_super) {
    __extends(TwoFactorRecoveryRequest, _super);
    function TwoFactorRecoveryRequest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return TwoFactorRecoveryRequest;
}(passwordVerificationRequest_1.PasswordVerificationRequest));
exports.TwoFactorRecoveryRequest = TwoFactorRecoveryRequest;


/***/ }),

/***/ "./jslib/src/models/request/updateDomainsRequest.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/models/request/updateDomainsRequest.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var UpdateDomainsRequest = /** @class */ (function () {
    function UpdateDomainsRequest() {
    }
    return UpdateDomainsRequest;
}());
exports.UpdateDomainsRequest = UpdateDomainsRequest;


/***/ }),

/***/ "./jslib/src/models/request/updateKeyRequest.ts":
/*!******************************************************!*\
  !*** ./jslib/src/models/request/updateKeyRequest.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var UpdateKeyRequest = /** @class */ (function () {
    function UpdateKeyRequest() {
        this.ciphers = [];
        this.folders = [];
    }
    return UpdateKeyRequest;
}());
exports.UpdateKeyRequest = UpdateKeyRequest;


/***/ }),

/***/ "./jslib/src/models/request/updateProfileRequest.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/models/request/updateProfileRequest.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var UpdateProfileRequest = /** @class */ (function () {
    function UpdateProfileRequest(name, masterPasswordHint) {
        this.culture = 'en-US'; // deprecated
        this.name = name;
        this.masterPasswordHint = masterPasswordHint ? masterPasswordHint : null;
    }
    return UpdateProfileRequest;
}());
exports.UpdateProfileRequest = UpdateProfileRequest;


/***/ }),

/***/ "./jslib/src/models/request/updateTwoFactorAuthenticatorRequest.ts":
/*!*************************************************************************!*\
  !*** ./jslib/src/models/request/updateTwoFactorAuthenticatorRequest.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var passwordVerificationRequest_1 = __webpack_require__(/*! ./passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var UpdateTwoFactorAuthenticatorRequest = /** @class */ (function (_super) {
    __extends(UpdateTwoFactorAuthenticatorRequest, _super);
    function UpdateTwoFactorAuthenticatorRequest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return UpdateTwoFactorAuthenticatorRequest;
}(passwordVerificationRequest_1.PasswordVerificationRequest));
exports.UpdateTwoFactorAuthenticatorRequest = UpdateTwoFactorAuthenticatorRequest;


/***/ }),

/***/ "./jslib/src/models/request/updateTwoFactorDuoRequest.ts":
/*!***************************************************************!*\
  !*** ./jslib/src/models/request/updateTwoFactorDuoRequest.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var passwordVerificationRequest_1 = __webpack_require__(/*! ./passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var UpdateTwoFactorDuoRequest = /** @class */ (function (_super) {
    __extends(UpdateTwoFactorDuoRequest, _super);
    function UpdateTwoFactorDuoRequest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return UpdateTwoFactorDuoRequest;
}(passwordVerificationRequest_1.PasswordVerificationRequest));
exports.UpdateTwoFactorDuoRequest = UpdateTwoFactorDuoRequest;


/***/ }),

/***/ "./jslib/src/models/request/updateTwoFactorEmailRequest.ts":
/*!*****************************************************************!*\
  !*** ./jslib/src/models/request/updateTwoFactorEmailRequest.ts ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var passwordVerificationRequest_1 = __webpack_require__(/*! ./passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var UpdateTwoFactorEmailRequest = /** @class */ (function (_super) {
    __extends(UpdateTwoFactorEmailRequest, _super);
    function UpdateTwoFactorEmailRequest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return UpdateTwoFactorEmailRequest;
}(passwordVerificationRequest_1.PasswordVerificationRequest));
exports.UpdateTwoFactorEmailRequest = UpdateTwoFactorEmailRequest;


/***/ }),

/***/ "./jslib/src/models/request/updateTwoFactorU2fRequest.ts":
/*!***************************************************************!*\
  !*** ./jslib/src/models/request/updateTwoFactorU2fRequest.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var passwordVerificationRequest_1 = __webpack_require__(/*! ./passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var UpdateTwoFactorU2fRequest = /** @class */ (function (_super) {
    __extends(UpdateTwoFactorU2fRequest, _super);
    function UpdateTwoFactorU2fRequest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return UpdateTwoFactorU2fRequest;
}(passwordVerificationRequest_1.PasswordVerificationRequest));
exports.UpdateTwoFactorU2fRequest = UpdateTwoFactorU2fRequest;


/***/ }),

/***/ "./jslib/src/models/request/updateTwoFactorYubioOtpRequest.ts":
/*!********************************************************************!*\
  !*** ./jslib/src/models/request/updateTwoFactorYubioOtpRequest.ts ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var passwordVerificationRequest_1 = __webpack_require__(/*! ./passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var UpdateTwoFactorYubioOtpRequest = /** @class */ (function (_super) {
    __extends(UpdateTwoFactorYubioOtpRequest, _super);
    function UpdateTwoFactorYubioOtpRequest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return UpdateTwoFactorYubioOtpRequest;
}(passwordVerificationRequest_1.PasswordVerificationRequest));
exports.UpdateTwoFactorYubioOtpRequest = UpdateTwoFactorYubioOtpRequest;


/***/ }),

/***/ "./jslib/src/models/request/verifyBankRequest.ts":
/*!*******************************************************!*\
  !*** ./jslib/src/models/request/verifyBankRequest.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var VerifyBankRequest = /** @class */ (function () {
    function VerifyBankRequest() {
    }
    return VerifyBankRequest;
}());
exports.VerifyBankRequest = VerifyBankRequest;


/***/ }),

/***/ "./jslib/src/models/request/verifyDeleteRecoverRequest.ts":
/*!****************************************************************!*\
  !*** ./jslib/src/models/request/verifyDeleteRecoverRequest.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var VerifyDeleteRecoverRequest = /** @class */ (function () {
    function VerifyDeleteRecoverRequest(userId, token) {
        this.userId = userId;
        this.token = token;
    }
    return VerifyDeleteRecoverRequest;
}());
exports.VerifyDeleteRecoverRequest = VerifyDeleteRecoverRequest;


/***/ }),

/***/ "./jslib/src/models/request/verifyEmailRequest.ts":
/*!********************************************************!*\
  !*** ./jslib/src/models/request/verifyEmailRequest.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var VerifyEmailRequest = /** @class */ (function () {
    function VerifyEmailRequest(userId, token) {
        this.userId = userId;
        this.token = token;
    }
    return VerifyEmailRequest;
}());
exports.VerifyEmailRequest = VerifyEmailRequest;


/***/ }),

/***/ "./jslib/src/models/response/attachmentResponse.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/models/response/attachmentResponse.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AttachmentResponse = /** @class */ (function () {
    function AttachmentResponse(response) {
        this.id = response.Id;
        this.url = response.Url;
        this.fileName = response.FileName;
        this.size = response.Size;
        this.sizeName = response.SizeName;
    }
    return AttachmentResponse;
}());
exports.AttachmentResponse = AttachmentResponse;


/***/ }),

/***/ "./jslib/src/models/response/billingResponse.ts":
/*!******************************************************!*\
  !*** ./jslib/src/models/response/billingResponse.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var BillingResponse = /** @class */ (function () {
    function BillingResponse(response) {
        this.charges = [];
        this.storageName = response.StorageName;
        this.storageGb = response.StorageGb;
        this.maxStorageGb = response.MaxStorageGb;
        this.paymentSource = response.PaymentSource == null ? null : new BillingSourceResponse(response.PaymentSource);
        this.subscription = response.Subscription == null ?
            null : new BillingSubscriptionResponse(response.Subscription);
        this.upcomingInvoice = response.UpcomingInvoice == null ?
            null : new BillingInvoiceResponse(response.UpcomingInvoice);
        if (response.Charges != null) {
            this.charges = response.Charges.map(function (c) { return new BillingChargeResponse(c); });
        }
        this.license = response.License;
        this.expiration = response.Expiration;
    }
    return BillingResponse;
}());
exports.BillingResponse = BillingResponse;
var BillingSourceResponse = /** @class */ (function () {
    function BillingSourceResponse(response) {
        this.type = response.Type;
        this.cardBrand = response.CardBrand;
        this.description = response.Description;
        this.needsVerification = response.NeedsVerification;
    }
    return BillingSourceResponse;
}());
exports.BillingSourceResponse = BillingSourceResponse;
var BillingSubscriptionResponse = /** @class */ (function () {
    function BillingSubscriptionResponse(response) {
        this.items = [];
        this.trialEndDate = response.TrialStartDate;
        this.trialEndDate = response.TrialEndDate;
        this.periodStartDate = response.PeriodStartDate;
        this.periodEndDate = response.PeriodEndDate;
        this.cancelledDate = response.CancelledDate;
        this.cancelAtEndDate = response.CancelAtEndDate;
        this.status = response.Status;
        this.cancelled = response.Cancelled;
        if (response.Items != null) {
            this.items = response.Items.map(function (i) { return new BillingSubscriptionItemResponse(i); });
        }
    }
    return BillingSubscriptionResponse;
}());
exports.BillingSubscriptionResponse = BillingSubscriptionResponse;
var BillingSubscriptionItemResponse = /** @class */ (function () {
    function BillingSubscriptionItemResponse(response) {
        this.name = response.Name;
        this.amount = response.Amount;
        this.quantity = response.Quantity;
        this.interval = response.Interval;
    }
    return BillingSubscriptionItemResponse;
}());
exports.BillingSubscriptionItemResponse = BillingSubscriptionItemResponse;
var BillingInvoiceResponse = /** @class */ (function () {
    function BillingInvoiceResponse(response) {
        this.date = response.Date;
        this.amount = response.Amount;
    }
    return BillingInvoiceResponse;
}());
exports.BillingInvoiceResponse = BillingInvoiceResponse;
var BillingChargeResponse = /** @class */ (function () {
    function BillingChargeResponse(response) {
        this.createdDate = response.CreatedDate;
        this.amount = response.Amount;
        this.paymentSource = response.PaymentSource != null ? new BillingSourceResponse(response.PaymentSource) : null;
        this.status = response.Status;
        this.failureMessage = response.FailureMessage;
        this.refunded = response.Refunded;
        this.partiallyRefunded = response.PartiallyRefunded;
        this.refundedAmount = response.RefundedAmount;
        this.invoiceId = response.InvoiceId;
    }
    return BillingChargeResponse;
}());
exports.BillingChargeResponse = BillingChargeResponse;


/***/ }),

/***/ "./jslib/src/models/response/breachAccountResponse.ts":
/*!************************************************************!*\
  !*** ./jslib/src/models/response/breachAccountResponse.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var BreachAccountResponse = /** @class */ (function () {
    function BreachAccountResponse(response) {
        this.addedDate = response.AddedDate;
        this.breachDate = response.BreachDate;
        this.dataClasses = response.DataClasses;
        this.description = response.Description;
        this.domain = response.Domain;
        this.isActive = response.IsActive;
        this.isVerified = response.IsVerified;
        this.logoType = response.LogoType;
        this.modifiedDate = response.ModifiedDate;
        this.name = response.Name;
        this.pwnCount = response.PwnCount;
        this.title = response.Title;
    }
    return BreachAccountResponse;
}());
exports.BreachAccountResponse = BreachAccountResponse;


/***/ }),

/***/ "./jslib/src/models/response/cipherResponse.ts":
/*!*****************************************************!*\
  !*** ./jslib/src/models/response/cipherResponse.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var attachmentResponse_1 = __webpack_require__(/*! ./attachmentResponse */ "./jslib/src/models/response/attachmentResponse.ts");
var passwordHistoryResponse_1 = __webpack_require__(/*! ./passwordHistoryResponse */ "./jslib/src/models/response/passwordHistoryResponse.ts");
var cardApi_1 = __webpack_require__(/*! ../api/cardApi */ "./jslib/src/models/api/cardApi.ts");
var fieldApi_1 = __webpack_require__(/*! ../api/fieldApi */ "./jslib/src/models/api/fieldApi.ts");
var identityApi_1 = __webpack_require__(/*! ../api/identityApi */ "./jslib/src/models/api/identityApi.ts");
var loginApi_1 = __webpack_require__(/*! ../api/loginApi */ "./jslib/src/models/api/loginApi.ts");
var secureNoteApi_1 = __webpack_require__(/*! ../api/secureNoteApi */ "./jslib/src/models/api/secureNoteApi.ts");
var CipherResponse = /** @class */ (function () {
    function CipherResponse(response) {
        var _this = this;
        this.id = response.Id;
        this.organizationId = response.OrganizationId;
        this.folderId = response.FolderId || null;
        this.type = response.Type;
        this.name = response.Name;
        this.notes = response.Notes;
        this.favorite = response.Favorite || false;
        this.edit = response.Edit || true;
        this.organizationUseTotp = response.OrganizationUseTotp;
        this.revisionDate = new Date(response.RevisionDate);
        if (response.Login != null) {
            this.login = new loginApi_1.LoginApi(response.Login);
        }
        if (response.Card != null) {
            this.card = new cardApi_1.CardApi(response.Card);
        }
        if (response.Identity != null) {
            this.identity = new identityApi_1.IdentityApi(response.Identity);
        }
        if (response.SecureNote != null) {
            this.secureNote = new secureNoteApi_1.SecureNoteApi(response.SecureNote);
        }
        if (response.Fields != null) {
            this.fields = [];
            response.Fields.forEach(function (field) {
                _this.fields.push(new fieldApi_1.FieldApi(field));
            });
        }
        if (response.Attachments != null) {
            this.attachments = [];
            response.Attachments.forEach(function (attachment) {
                _this.attachments.push(new attachmentResponse_1.AttachmentResponse(attachment));
            });
        }
        if (response.PasswordHistory != null) {
            this.passwordHistory = [];
            response.PasswordHistory.forEach(function (ph) {
                _this.passwordHistory.push(new passwordHistoryResponse_1.PasswordHistoryResponse(ph));
            });
        }
        if (response.CollectionIds) {
            this.collectionIds = [];
            response.CollectionIds.forEach(function (id) {
                _this.collectionIds.push(id);
            });
        }
    }
    return CipherResponse;
}());
exports.CipherResponse = CipherResponse;


/***/ }),

/***/ "./jslib/src/models/response/collectionResponse.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/models/response/collectionResponse.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var selectionReadOnlyResponse_1 = __webpack_require__(/*! ./selectionReadOnlyResponse */ "./jslib/src/models/response/selectionReadOnlyResponse.ts");
var CollectionResponse = /** @class */ (function () {
    function CollectionResponse(response) {
        this.id = response.Id;
        this.organizationId = response.OrganizationId;
        this.name = response.Name;
    }
    return CollectionResponse;
}());
exports.CollectionResponse = CollectionResponse;
var CollectionDetailsResponse = /** @class */ (function (_super) {
    __extends(CollectionDetailsResponse, _super);
    function CollectionDetailsResponse(response) {
        var _this = _super.call(this, response) || this;
        _this.readOnly = response.ReadOnly || false;
        return _this;
    }
    return CollectionDetailsResponse;
}(CollectionResponse));
exports.CollectionDetailsResponse = CollectionDetailsResponse;
var CollectionGroupDetailsResponse = /** @class */ (function (_super) {
    __extends(CollectionGroupDetailsResponse, _super);
    function CollectionGroupDetailsResponse(response) {
        var _this = _super.call(this, response) || this;
        _this.groups = [];
        if (response.Groups != null) {
            _this.groups = response.Groups.map(function (g) { return new selectionReadOnlyResponse_1.SelectionReadOnlyResponse(g); });
        }
        return _this;
    }
    return CollectionGroupDetailsResponse;
}(CollectionResponse));
exports.CollectionGroupDetailsResponse = CollectionGroupDetailsResponse;


/***/ }),

/***/ "./jslib/src/models/response/collectionUserResponse.ts":
/*!*************************************************************!*\
  !*** ./jslib/src/models/response/collectionUserResponse.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CollectionUserResponse = /** @class */ (function () {
    function CollectionUserResponse(response) {
        this.organizationUserId = response.OrganizationUserId;
        this.accessAll = response.AccessAll;
        this.name = response.Name;
        this.email = response.Email;
        this.type = response.Type;
        this.status = response.Status;
        this.readOnly = response.ReadOnly;
    }
    return CollectionUserResponse;
}());
exports.CollectionUserResponse = CollectionUserResponse;


/***/ }),

/***/ "./jslib/src/models/response/domainsResponse.ts":
/*!******************************************************!*\
  !*** ./jslib/src/models/response/domainsResponse.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var globalDomainResponse_1 = __webpack_require__(/*! ./globalDomainResponse */ "./jslib/src/models/response/globalDomainResponse.ts");
var DomainsResponse = /** @class */ (function () {
    function DomainsResponse(response) {
        var _this = this;
        this.globalEquivalentDomains = [];
        this.equivalentDomains = response.EquivalentDomains;
        this.globalEquivalentDomains = [];
        if (response.GlobalEquivalentDomains) {
            response.GlobalEquivalentDomains.forEach(function (domain) {
                _this.globalEquivalentDomains.push(new globalDomainResponse_1.GlobalDomainResponse(domain));
            });
        }
    }
    return DomainsResponse;
}());
exports.DomainsResponse = DomainsResponse;


/***/ }),

/***/ "./jslib/src/models/response/errorResponse.ts":
/*!****************************************************!*\
  !*** ./jslib/src/models/response/errorResponse.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ErrorResponse = /** @class */ (function () {
    function ErrorResponse(response, status, identityResponse) {
        var errorModel = null;
        if (identityResponse && response && response.ErrorModel) {
            errorModel = response.ErrorModel;
        }
        else if (response) {
            errorModel = response;
        }
        if (errorModel) {
            this.message = errorModel.Message;
            this.validationErrors = errorModel.ValidationErrors;
        }
        else {
            if (status === 429) {
                this.message = 'Rate limit exceeded. Try again later.';
            }
        }
        this.statusCode = status;
    }
    ErrorResponse.prototype.getSingleMessage = function () {
        if (this.validationErrors) {
            for (var key in this.validationErrors) {
                if (!this.validationErrors.hasOwnProperty(key)) {
                    continue;
                }
                if (this.validationErrors[key].length) {
                    return this.validationErrors[key][0];
                }
            }
        }
        return this.message;
    };
    return ErrorResponse;
}());
exports.ErrorResponse = ErrorResponse;


/***/ }),

/***/ "./jslib/src/models/response/eventResponse.ts":
/*!****************************************************!*\
  !*** ./jslib/src/models/response/eventResponse.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventResponse = /** @class */ (function () {
    function EventResponse(response) {
        this.type = response.Type;
        this.userId = response.UserId;
        this.organizationId = response.OrganizationId;
        this.cipherId = response.CipherId;
        this.collectionId = response.CollectionId;
        this.groupId = response.GroupId;
        this.organizationUserId = response.OrganizationUserId;
        this.actingUserId = response.ActingUserId;
        this.date = response.Date;
        this.deviceType = response.DeviceType;
        this.ipAddress = response.IpAddress;
    }
    return EventResponse;
}());
exports.EventResponse = EventResponse;


/***/ }),

/***/ "./jslib/src/models/response/folderResponse.ts":
/*!*****************************************************!*\
  !*** ./jslib/src/models/response/folderResponse.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FolderResponse = /** @class */ (function () {
    function FolderResponse(response) {
        this.id = response.Id;
        this.name = response.Name;
        this.revisionDate = response.RevisionDate;
    }
    return FolderResponse;
}());
exports.FolderResponse = FolderResponse;


/***/ }),

/***/ "./jslib/src/models/response/globalDomainResponse.ts":
/*!***********************************************************!*\
  !*** ./jslib/src/models/response/globalDomainResponse.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var GlobalDomainResponse = /** @class */ (function () {
    function GlobalDomainResponse(response) {
        this.type = response.Type;
        this.domains = response.Domains;
        this.excluded = response.Excluded;
    }
    return GlobalDomainResponse;
}());
exports.GlobalDomainResponse = GlobalDomainResponse;


/***/ }),

/***/ "./jslib/src/models/response/groupResponse.ts":
/*!****************************************************!*\
  !*** ./jslib/src/models/response/groupResponse.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var selectionReadOnlyResponse_1 = __webpack_require__(/*! ./selectionReadOnlyResponse */ "./jslib/src/models/response/selectionReadOnlyResponse.ts");
var GroupResponse = /** @class */ (function () {
    function GroupResponse(response) {
        this.id = response.Id;
        this.organizationId = response.OrganizationId;
        this.name = response.Name;
        this.accessAll = response.AccessAll;
        this.externalId = response.ExternalId;
    }
    return GroupResponse;
}());
exports.GroupResponse = GroupResponse;
var GroupDetailsResponse = /** @class */ (function (_super) {
    __extends(GroupDetailsResponse, _super);
    function GroupDetailsResponse(response) {
        var _this = _super.call(this, response) || this;
        _this.collections = [];
        if (response.Collections != null) {
            _this.collections = response.Collections.map(function (c) { return new selectionReadOnlyResponse_1.SelectionReadOnlyResponse(c); });
        }
        return _this;
    }
    return GroupDetailsResponse;
}(GroupResponse));
exports.GroupDetailsResponse = GroupDetailsResponse;


/***/ }),

/***/ "./jslib/src/models/response/groupUserResponse.ts":
/*!********************************************************!*\
  !*** ./jslib/src/models/response/groupUserResponse.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var GroupUserResponse = /** @class */ (function () {
    function GroupUserResponse(response) {
        this.organizationUserId = response.OrganizationUserId;
        this.accessAll = response.AccessAll;
        this.name = response.Name;
        this.email = response.Email;
        this.type = response.Type;
        this.status = response.Status;
    }
    return GroupUserResponse;
}());
exports.GroupUserResponse = GroupUserResponse;


/***/ }),

/***/ "./jslib/src/models/response/identityTokenResponse.ts":
/*!************************************************************!*\
  !*** ./jslib/src/models/response/identityTokenResponse.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var IdentityTokenResponse = /** @class */ (function () {
    function IdentityTokenResponse(response) {
        this.accessToken = response.access_token;
        this.expiresIn = response.expires_in;
        this.refreshToken = response.refresh_token;
        this.tokenType = response.token_type;
        this.privateKey = response.PrivateKey;
        this.key = response.Key;
        this.twoFactorToken = response.TwoFactorToken;
    }
    return IdentityTokenResponse;
}());
exports.IdentityTokenResponse = IdentityTokenResponse;


/***/ }),

/***/ "./jslib/src/models/response/identityTwoFactorResponse.ts":
/*!****************************************************************!*\
  !*** ./jslib/src/models/response/identityTwoFactorResponse.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var IdentityTwoFactorResponse = /** @class */ (function () {
    function IdentityTwoFactorResponse(response) {
        this.twoFactorProviders2 = new Map();
        this.twoFactorProviders = response.TwoFactorProviders;
        if (response.TwoFactorProviders2 != null) {
            for (var prop in response.TwoFactorProviders2) {
                if (response.TwoFactorProviders2.hasOwnProperty(prop)) {
                    this.twoFactorProviders2.set(parseInt(prop, null), response.TwoFactorProviders2[prop]);
                }
            }
        }
    }
    return IdentityTwoFactorResponse;
}());
exports.IdentityTwoFactorResponse = IdentityTwoFactorResponse;


/***/ }),

/***/ "./jslib/src/models/response/listResponse.ts":
/*!***************************************************!*\
  !*** ./jslib/src/models/response/listResponse.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ListResponse = /** @class */ (function () {
    function ListResponse(response, t) {
        this.data = response.Data == null ? [] : response.Data.map(function (dr) { return new t(dr); });
        this.continuationToken = response.ContinuationToken;
    }
    return ListResponse;
}());
exports.ListResponse = ListResponse;


/***/ }),

/***/ "./jslib/src/models/response/organizationBillingResponse.ts":
/*!******************************************************************!*\
  !*** ./jslib/src/models/response/organizationBillingResponse.ts ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var billingResponse_1 = __webpack_require__(/*! ./billingResponse */ "./jslib/src/models/response/billingResponse.ts");
var organizationResponse_1 = __webpack_require__(/*! ./organizationResponse */ "./jslib/src/models/response/organizationResponse.ts");
var OrganizationBillingResponse = /** @class */ (function (_super) {
    __extends(OrganizationBillingResponse, _super);
    function OrganizationBillingResponse(response) {
        var _this = _super.call(this, response) || this;
        _this.charges = [];
        _this.storageName = response.StorageName;
        _this.storageGb = response.StorageGb;
        _this.paymentSource = response.PaymentSource == null ? null : new billingResponse_1.BillingSourceResponse(response.PaymentSource);
        _this.subscription = response.Subscription == null ?
            null : new billingResponse_1.BillingSubscriptionResponse(response.Subscription);
        _this.upcomingInvoice = response.UpcomingInvoice == null ?
            null : new billingResponse_1.BillingInvoiceResponse(response.UpcomingInvoice);
        if (response.Charges != null) {
            _this.charges = response.Charges.map(function (c) { return new billingResponse_1.BillingChargeResponse(c); });
        }
        _this.expiration = response.Expiration;
        return _this;
    }
    return OrganizationBillingResponse;
}(organizationResponse_1.OrganizationResponse));
exports.OrganizationBillingResponse = OrganizationBillingResponse;


/***/ }),

/***/ "./jslib/src/models/response/organizationResponse.ts":
/*!***********************************************************!*\
  !*** ./jslib/src/models/response/organizationResponse.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OrganizationResponse = /** @class */ (function () {
    function OrganizationResponse(response) {
        this.id = response.Id;
        this.name = response.Name;
        this.businessName = response.BusinessName;
        this.businessAddress1 = response.BusinessAddress1;
        this.businessAddress2 = response.BusinessAddress2;
        this.businessAddress3 = response.BusinessAddress3;
        this.businessCountry = response.BusinessCountry;
        this.businessTaxNumber = response.BusinessTaxNumber;
        this.billingEmail = response.BillingEmail;
        this.plan = response.Plan;
        this.planType = response.PlanType;
        this.seats = response.Seats;
        this.maxCollections = response.MaxCollections;
        this.maxStorageGb = response.MaxStorageGb;
        this.useGroups = response.UseGroups;
        this.useDirectory = response.UseDirectory;
        this.useEvents = response.UseEvents;
        this.useTotp = response.UseTotp;
        this.use2fa = response.Use2fa;
    }
    return OrganizationResponse;
}());
exports.OrganizationResponse = OrganizationResponse;


/***/ }),

/***/ "./jslib/src/models/response/organizationUserResponse.ts":
/*!***************************************************************!*\
  !*** ./jslib/src/models/response/organizationUserResponse.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var selectionReadOnlyResponse_1 = __webpack_require__(/*! ./selectionReadOnlyResponse */ "./jslib/src/models/response/selectionReadOnlyResponse.ts");
var OrganizationUserResponse = /** @class */ (function () {
    function OrganizationUserResponse(response) {
        this.id = response.Id;
        this.userId = response.UserId;
        this.type = response.Type;
        this.status = response.Status;
        this.accessAll = response.AccessAll;
    }
    return OrganizationUserResponse;
}());
exports.OrganizationUserResponse = OrganizationUserResponse;
var OrganizationUserUserDetailsResponse = /** @class */ (function (_super) {
    __extends(OrganizationUserUserDetailsResponse, _super);
    function OrganizationUserUserDetailsResponse(response) {
        var _this = _super.call(this, response) || this;
        _this.name = response.Name;
        _this.email = response.Email;
        return _this;
    }
    return OrganizationUserUserDetailsResponse;
}(OrganizationUserResponse));
exports.OrganizationUserUserDetailsResponse = OrganizationUserUserDetailsResponse;
var OrganizationUserDetailsResponse = /** @class */ (function (_super) {
    __extends(OrganizationUserDetailsResponse, _super);
    function OrganizationUserDetailsResponse(response) {
        var _this = _super.call(this, response) || this;
        _this.collections = [];
        if (response.Collections != null) {
            _this.collections = response.Collections.map(function (c) { return new selectionReadOnlyResponse_1.SelectionReadOnlyResponse(c); });
        }
        return _this;
    }
    return OrganizationUserDetailsResponse;
}(OrganizationUserResponse));
exports.OrganizationUserDetailsResponse = OrganizationUserDetailsResponse;


/***/ }),

/***/ "./jslib/src/models/response/passwordHistoryResponse.ts":
/*!**************************************************************!*\
  !*** ./jslib/src/models/response/passwordHistoryResponse.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var PasswordHistoryResponse = /** @class */ (function () {
    function PasswordHistoryResponse(response) {
        this.password = response.Password;
        this.lastUsedDate = response.LastUsedDate;
    }
    return PasswordHistoryResponse;
}());
exports.PasswordHistoryResponse = PasswordHistoryResponse;


/***/ }),

/***/ "./jslib/src/models/response/profileOrganizationResponse.ts":
/*!******************************************************************!*\
  !*** ./jslib/src/models/response/profileOrganizationResponse.ts ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ProfileOrganizationResponse = /** @class */ (function () {
    function ProfileOrganizationResponse(response) {
        this.id = response.Id;
        this.name = response.Name;
        this.useGroups = response.UseGroups;
        this.useDirectory = response.UseDirectory;
        this.useEvents = response.UseEvents;
        this.useTotp = response.UseTotp;
        this.use2fa = response.Use2fa;
        this.selfHost = response.SelfHost;
        this.usersGetPremium = response.UsersGetPremium;
        this.seats = response.Seats;
        this.maxCollections = response.MaxCollections;
        this.maxStorageGb = response.MaxStorageGb;
        this.key = response.Key;
        this.status = response.Status;
        this.type = response.Type;
        this.enabled = response.Enabled;
    }
    return ProfileOrganizationResponse;
}());
exports.ProfileOrganizationResponse = ProfileOrganizationResponse;


/***/ }),

/***/ "./jslib/src/models/response/profileResponse.ts":
/*!******************************************************!*\
  !*** ./jslib/src/models/response/profileResponse.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var profileOrganizationResponse_1 = __webpack_require__(/*! ./profileOrganizationResponse */ "./jslib/src/models/response/profileOrganizationResponse.ts");
var ProfileResponse = /** @class */ (function () {
    function ProfileResponse(response) {
        var _this = this;
        this.organizations = [];
        this.id = response.Id;
        this.name = response.Name;
        this.email = response.Email;
        this.emailVerified = response.EmailVerified;
        this.masterPasswordHint = response.MasterPasswordHint;
        this.premium = response.Premium;
        this.culture = response.Culture;
        this.twoFactorEnabled = response.TwoFactorEnabled;
        this.key = response.Key;
        this.privateKey = response.PrivateKey;
        this.securityStamp = response.SecurityStamp;
        if (response.Organizations) {
            response.Organizations.forEach(function (org) {
                _this.organizations.push(new profileOrganizationResponse_1.ProfileOrganizationResponse(org));
            });
        }
    }
    return ProfileResponse;
}());
exports.ProfileResponse = ProfileResponse;


/***/ }),

/***/ "./jslib/src/models/response/selectionReadOnlyResponse.ts":
/*!****************************************************************!*\
  !*** ./jslib/src/models/response/selectionReadOnlyResponse.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SelectionReadOnlyResponse = /** @class */ (function () {
    function SelectionReadOnlyResponse(response) {
        this.id = response.Id;
        this.readOnly = response.ReadOnly;
    }
    return SelectionReadOnlyResponse;
}());
exports.SelectionReadOnlyResponse = SelectionReadOnlyResponse;


/***/ }),

/***/ "./jslib/src/models/response/syncResponse.ts":
/*!***************************************************!*\
  !*** ./jslib/src/models/response/syncResponse.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var cipherResponse_1 = __webpack_require__(/*! ./cipherResponse */ "./jslib/src/models/response/cipherResponse.ts");
var collectionResponse_1 = __webpack_require__(/*! ./collectionResponse */ "./jslib/src/models/response/collectionResponse.ts");
var domainsResponse_1 = __webpack_require__(/*! ./domainsResponse */ "./jslib/src/models/response/domainsResponse.ts");
var folderResponse_1 = __webpack_require__(/*! ./folderResponse */ "./jslib/src/models/response/folderResponse.ts");
var profileResponse_1 = __webpack_require__(/*! ./profileResponse */ "./jslib/src/models/response/profileResponse.ts");
var SyncResponse = /** @class */ (function () {
    function SyncResponse(response) {
        var _this = this;
        this.folders = [];
        this.collections = [];
        this.ciphers = [];
        if (response.Profile) {
            this.profile = new profileResponse_1.ProfileResponse(response.Profile);
        }
        if (response.Folders) {
            response.Folders.forEach(function (folder) {
                _this.folders.push(new folderResponse_1.FolderResponse(folder));
            });
        }
        if (response.Collections) {
            response.Collections.forEach(function (collection) {
                _this.collections.push(new collectionResponse_1.CollectionDetailsResponse(collection));
            });
        }
        if (response.Ciphers) {
            response.Ciphers.forEach(function (cipher) {
                _this.ciphers.push(new cipherResponse_1.CipherResponse(cipher));
            });
        }
        if (response.Domains) {
            this.domains = new domainsResponse_1.DomainsResponse(response.Domains);
        }
    }
    return SyncResponse;
}());
exports.SyncResponse = SyncResponse;


/***/ }),

/***/ "./jslib/src/models/response/twoFactorAuthenticatorResponse.ts":
/*!*********************************************************************!*\
  !*** ./jslib/src/models/response/twoFactorAuthenticatorResponse.ts ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TwoFactorAuthenticatorResponse = /** @class */ (function () {
    function TwoFactorAuthenticatorResponse(response) {
        this.enabled = response.Enabled;
        this.key = response.Key;
    }
    return TwoFactorAuthenticatorResponse;
}());
exports.TwoFactorAuthenticatorResponse = TwoFactorAuthenticatorResponse;


/***/ }),

/***/ "./jslib/src/models/response/twoFactorDuoResponse.ts":
/*!***********************************************************!*\
  !*** ./jslib/src/models/response/twoFactorDuoResponse.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TwoFactorDuoResponse = /** @class */ (function () {
    function TwoFactorDuoResponse(response) {
        this.enabled = response.Enabled;
        this.host = response.Host;
        this.secretKey = response.SecretKey;
        this.integrationKey = response.IntegrationKey;
    }
    return TwoFactorDuoResponse;
}());
exports.TwoFactorDuoResponse = TwoFactorDuoResponse;


/***/ }),

/***/ "./jslib/src/models/response/twoFactorEmailResponse.ts":
/*!*************************************************************!*\
  !*** ./jslib/src/models/response/twoFactorEmailResponse.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TwoFactorEmailResponse = /** @class */ (function () {
    function TwoFactorEmailResponse(response) {
        this.enabled = response.Enabled;
        this.email = response.Email;
    }
    return TwoFactorEmailResponse;
}());
exports.TwoFactorEmailResponse = TwoFactorEmailResponse;


/***/ }),

/***/ "./jslib/src/models/response/twoFactorProviderResponse.ts":
/*!****************************************************************!*\
  !*** ./jslib/src/models/response/twoFactorProviderResponse.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TwoFactorProviderResponse = /** @class */ (function () {
    function TwoFactorProviderResponse(response) {
        this.enabled = response.Enabled;
        this.type = response.Type;
    }
    return TwoFactorProviderResponse;
}());
exports.TwoFactorProviderResponse = TwoFactorProviderResponse;


/***/ }),

/***/ "./jslib/src/models/response/twoFactorRescoverResponse.ts":
/*!****************************************************************!*\
  !*** ./jslib/src/models/response/twoFactorRescoverResponse.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TwoFactorRecoverResponse = /** @class */ (function () {
    function TwoFactorRecoverResponse(response) {
        this.code = response.Code;
    }
    return TwoFactorRecoverResponse;
}());
exports.TwoFactorRecoverResponse = TwoFactorRecoverResponse;


/***/ }),

/***/ "./jslib/src/models/response/twoFactorU2fResponse.ts":
/*!***********************************************************!*\
  !*** ./jslib/src/models/response/twoFactorU2fResponse.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TwoFactorU2fResponse = /** @class */ (function () {
    function TwoFactorU2fResponse(response) {
        this.enabled = response.Enabled;
        this.challenge = response.Challenge == null ? null : new ChallengeResponse(response.Challenge);
    }
    return TwoFactorU2fResponse;
}());
exports.TwoFactorU2fResponse = TwoFactorU2fResponse;
var ChallengeResponse = /** @class */ (function () {
    function ChallengeResponse(response) {
        this.userId = response.UserId;
        this.appId = response.AppId;
        this.challenge = response.Challenge;
        this.version = response.Version;
    }
    return ChallengeResponse;
}());
exports.ChallengeResponse = ChallengeResponse;


/***/ }),

/***/ "./jslib/src/models/response/twoFactorYubiKeyResponse.ts":
/*!***************************************************************!*\
  !*** ./jslib/src/models/response/twoFactorYubiKeyResponse.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TwoFactorYubiKeyResponse = /** @class */ (function () {
    function TwoFactorYubiKeyResponse(response) {
        this.enabled = response.Enabled;
        this.key1 = response.Key1;
        this.key2 = response.Key2;
        this.key3 = response.Key3;
        this.key4 = response.Key4;
        this.key5 = response.Key5;
        this.nfc = response.Nfc;
    }
    return TwoFactorYubiKeyResponse;
}());
exports.TwoFactorYubiKeyResponse = TwoFactorYubiKeyResponse;


/***/ }),

/***/ "./jslib/src/models/response/userKeyResponse.ts":
/*!******************************************************!*\
  !*** ./jslib/src/models/response/userKeyResponse.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var UserKeyResponse = /** @class */ (function () {
    function UserKeyResponse(response) {
        this.userId = response.UserId;
        this.publicKey = response.PublicKey;
    }
    return UserKeyResponse;
}());
exports.UserKeyResponse = UserKeyResponse;


/***/ }),

/***/ "./jslib/src/models/view/attachmentView.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/view/attachmentView.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AttachmentView = /** @class */ (function () {
    function AttachmentView(a) {
        if (!a) {
            return;
        }
        this.id = a.id;
        this.url = a.url;
        this.size = a.size;
        this.sizeName = a.sizeName;
    }
    return AttachmentView;
}());
exports.AttachmentView = AttachmentView;


/***/ }),

/***/ "./jslib/src/models/view/cardView.ts":
/*!*******************************************!*\
  !*** ./jslib/src/models/view/cardView.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CardView = /** @class */ (function () {
    // tslint:enable
    function CardView(c) {
        this.expMonth = null;
        // tslint:disable
        this._brand = null;
        // ctor
    }
    Object.defineProperty(CardView.prototype, "maskedCode", {
        get: function () {
            return this.code != null ? '•'.repeat(this.code.length) : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardView.prototype, "brand", {
        get: function () {
            return this._brand;
        },
        set: function (value) {
            this._brand = value;
            this._subTitle = null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardView.prototype, "number", {
        get: function () {
            return this._number;
        },
        set: function (value) {
            this._number = value;
            this._subTitle = null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardView.prototype, "subTitle", {
        get: function () {
            if (this._subTitle == null) {
                this._subTitle = this.brand;
                if (this.number != null && this.number.length >= 4) {
                    if (this._subTitle != null && this._subTitle !== '') {
                        this._subTitle += ', ';
                    }
                    else {
                        this._subTitle = '';
                    }
                    this._subTitle += ('*' + this.number.substr(this.number.length - 4));
                }
            }
            return this._subTitle;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardView.prototype, "expiration", {
        get: function () {
            if (!this.expMonth && !this.expYear) {
                return null;
            }
            var exp = this.expMonth != null ? ('0' + this.expMonth).slice(-2) : '__';
            exp += (' / ' + (this.expYear != null ? this.formatYear(this.expYear) : '____'));
            return exp;
        },
        enumerable: true,
        configurable: true
    });
    CardView.prototype.formatYear = function (year) {
        return year.length === 2 ? '20' + year : year;
    };
    return CardView;
}());
exports.CardView = CardView;


/***/ }),

/***/ "./jslib/src/models/view/cipherView.ts":
/*!*********************************************!*\
  !*** ./jslib/src/models/view/cipherView.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var cipherType_1 = __webpack_require__(/*! ../../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var CipherView = /** @class */ (function () {
    function CipherView(c) {
        this.favorite = false;
        this.organizationUseTotp = false;
        this.edit = false;
        if (!c) {
            return;
        }
        this.id = c.id;
        this.organizationId = c.organizationId;
        this.folderId = c.folderId;
        this.favorite = c.favorite;
        this.organizationUseTotp = c.organizationUseTotp;
        this.edit = c.edit;
        this.type = c.type;
        this.localData = c.localData;
        this.collectionIds = c.collectionIds;
        this.revisionDate = c.revisionDate;
    }
    Object.defineProperty(CipherView.prototype, "subTitle", {
        get: function () {
            switch (this.type) {
                case cipherType_1.CipherType.Login:
                    return this.login.subTitle;
                case cipherType_1.CipherType.SecureNote:
                    return this.secureNote.subTitle;
                case cipherType_1.CipherType.Card:
                    return this.card.subTitle;
                case cipherType_1.CipherType.Identity:
                    return this.identity.subTitle;
                default:
                    break;
            }
            return null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CipherView.prototype, "hasPasswordHistory", {
        get: function () {
            return this.passwordHistory && this.passwordHistory.length > 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CipherView.prototype, "hasAttachments", {
        get: function () {
            return this.attachments && this.attachments.length > 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CipherView.prototype, "hasFields", {
        get: function () {
            return this.fields && this.fields.length > 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CipherView.prototype, "login_username", {
        get: function () {
            return this.login != null ? this.login.username : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CipherView.prototype, "passwordRevisionDisplayDate", {
        get: function () {
            if (this.login == null) {
                return null;
            }
            else if (this.login.password == null || this.login.password === '') {
                return null;
            }
            return this.login.passwordRevisionDate != null ? this.login.passwordRevisionDate : this.revisionDate;
        },
        enumerable: true,
        configurable: true
    });
    return CipherView;
}());
exports.CipherView = CipherView;


/***/ }),

/***/ "./jslib/src/models/view/collectionView.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/view/collectionView.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CollectionView = /** @class */ (function () {
    function CollectionView(c) {
        if (!c) {
            return;
        }
        this.id = c.id;
        this.organizationId = c.organizationId;
        this.readOnly = c.readOnly;
    }
    return CollectionView;
}());
exports.CollectionView = CollectionView;


/***/ }),

/***/ "./jslib/src/models/view/fieldView.ts":
/*!********************************************!*\
  !*** ./jslib/src/models/view/fieldView.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FieldView = /** @class */ (function () {
    function FieldView(f) {
        if (!f) {
            return;
        }
        this.type = f.type;
    }
    Object.defineProperty(FieldView.prototype, "maskedValue", {
        get: function () {
            return this.value != null ? '••••••••' : null;
        },
        enumerable: true,
        configurable: true
    });
    return FieldView;
}());
exports.FieldView = FieldView;


/***/ }),

/***/ "./jslib/src/models/view/folderView.ts":
/*!*********************************************!*\
  !*** ./jslib/src/models/view/folderView.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FolderView = /** @class */ (function () {
    function FolderView(f) {
        this.id = null;
        if (!f) {
            return;
        }
        this.id = f.id;
    }
    return FolderView;
}());
exports.FolderView = FolderView;


/***/ }),

/***/ "./jslib/src/models/view/identityView.ts":
/*!***********************************************!*\
  !*** ./jslib/src/models/view/identityView.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var IdentityView = /** @class */ (function () {
    // tslint:enable
    function IdentityView(i) {
        this.title = null;
        // ctor
    }
    Object.defineProperty(IdentityView.prototype, "firstName", {
        get: function () {
            return this._firstName;
        },
        set: function (value) {
            this._firstName = value;
            this._subTitle = null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IdentityView.prototype, "lastName", {
        get: function () {
            return this._lastName;
        },
        set: function (value) {
            this._lastName = value;
            this._subTitle = null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IdentityView.prototype, "subTitle", {
        get: function () {
            if (this._subTitle == null && (this.firstName != null || this.lastName != null)) {
                this._subTitle = '';
                if (this.firstName != null) {
                    this._subTitle = this.firstName;
                }
                if (this.lastName != null) {
                    if (this._subTitle !== '') {
                        this._subTitle += ' ';
                    }
                    this._subTitle += this.lastName;
                }
            }
            return this._subTitle;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IdentityView.prototype, "fullName", {
        get: function () {
            if (this.title != null || this.firstName != null || this.middleName != null || this.lastName != null) {
                var name_1 = '';
                if (this.title != null) {
                    name_1 += (this.title + ' ');
                }
                if (this.firstName != null) {
                    name_1 += (this.firstName + ' ');
                }
                if (this.middleName != null) {
                    name_1 += (this.middleName + ' ');
                }
                if (this.lastName != null) {
                    name_1 += this.lastName;
                }
                return name_1.trim();
            }
            return null;
        },
        enumerable: true,
        configurable: true
    });
    return IdentityView;
}());
exports.IdentityView = IdentityView;


/***/ }),

/***/ "./jslib/src/models/view/index.ts":
/*!****************************************!*\
  !*** ./jslib/src/models/view/index.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var attachmentView_1 = __webpack_require__(/*! ./attachmentView */ "./jslib/src/models/view/attachmentView.ts");
exports.AttachmentView = attachmentView_1.AttachmentView;
var cardView_1 = __webpack_require__(/*! ./cardView */ "./jslib/src/models/view/cardView.ts");
exports.CardView = cardView_1.CardView;
var cipherView_1 = __webpack_require__(/*! ./cipherView */ "./jslib/src/models/view/cipherView.ts");
exports.CipherView = cipherView_1.CipherView;
var fieldView_1 = __webpack_require__(/*! ./fieldView */ "./jslib/src/models/view/fieldView.ts");
exports.FieldView = fieldView_1.FieldView;
var identityView_1 = __webpack_require__(/*! ./identityView */ "./jslib/src/models/view/identityView.ts");
exports.IdentityView = identityView_1.IdentityView;
var loginUriView_1 = __webpack_require__(/*! ./loginUriView */ "./jslib/src/models/view/loginUriView.ts");
exports.LoginUriView = loginUriView_1.LoginUriView;
var loginView_1 = __webpack_require__(/*! ./loginView */ "./jslib/src/models/view/loginView.ts");
exports.LoginView = loginView_1.LoginView;
var secureNoteView_1 = __webpack_require__(/*! ./secureNoteView */ "./jslib/src/models/view/secureNoteView.ts");
exports.SecureNoteView = secureNoteView_1.SecureNoteView;
var view_1 = __webpack_require__(/*! ./view */ "./jslib/src/models/view/view.ts");
exports.View = view_1.View;


/***/ }),

/***/ "./jslib/src/models/view/loginUriView.ts":
/*!***********************************************!*\
  !*** ./jslib/src/models/view/loginUriView.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! ../../misc/utils */ "./jslib/src/misc/utils.ts");
var LoginUriView = /** @class */ (function () {
    // tslint:enable
    function LoginUriView(u) {
        this.match = null;
        if (!u) {
            return;
        }
        this.match = u.match;
    }
    Object.defineProperty(LoginUriView.prototype, "uri", {
        get: function () {
            return this._uri;
        },
        set: function (value) {
            this._uri = value;
            this._domain = null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LoginUriView.prototype, "domain", {
        get: function () {
            if (this._domain == null && this.uri != null) {
                var containerService = utils_1.Utils.global.bitwardenContainerService;
                if (containerService) {
                    var platformUtilsService = containerService.getPlatformUtilsService();
                    this._domain = platformUtilsService.getDomain(this.uri);
                    if (this._domain === '') {
                        this._domain = null;
                    }
                }
                else {
                    throw new Error('global bitwardenContainerService not initialized.');
                }
            }
            return this._domain;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LoginUriView.prototype, "hostname", {
        get: function () {
            if (this._hostname == null && this.uri != null) {
                this._hostname = utils_1.Utils.getHostname(this.uri);
                if (this._hostname === '') {
                    this._hostname = null;
                }
            }
            return this._hostname;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LoginUriView.prototype, "hostnameOrUri", {
        get: function () {
            return this.hostname != null ? this.hostname : this.uri;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LoginUriView.prototype, "isWebsite", {
        get: function () {
            return this.uri != null && (this.uri.indexOf('http://') === 0 || this.uri.indexOf('https://') === 0);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LoginUriView.prototype, "canLaunch", {
        get: function () {
            return this.uri != null && this.uri.indexOf('://') > -1;
        },
        enumerable: true,
        configurable: true
    });
    return LoginUriView;
}());
exports.LoginUriView = LoginUriView;


/***/ }),

/***/ "./jslib/src/models/view/loginView.ts":
/*!********************************************!*\
  !*** ./jslib/src/models/view/loginView.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var LoginView = /** @class */ (function () {
    function LoginView(l) {
        if (!l) {
            return;
        }
        this.passwordRevisionDate = l.passwordRevisionDate;
    }
    Object.defineProperty(LoginView.prototype, "uri", {
        get: function () {
            return this.hasUris ? this.uris[0].uri : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LoginView.prototype, "maskedPassword", {
        get: function () {
            return this.password != null ? '••••••••' : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LoginView.prototype, "subTitle", {
        get: function () {
            return this.username;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LoginView.prototype, "canLaunch", {
        get: function () {
            return this.hasUris && this.uris[0].canLaunch;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LoginView.prototype, "hasUris", {
        get: function () {
            return this.uris != null && this.uris.length > 0;
        },
        enumerable: true,
        configurable: true
    });
    return LoginView;
}());
exports.LoginView = LoginView;


/***/ }),

/***/ "./jslib/src/models/view/passwordHistoryView.ts":
/*!******************************************************!*\
  !*** ./jslib/src/models/view/passwordHistoryView.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var PasswordHistoryView = /** @class */ (function () {
    function PasswordHistoryView(ph) {
        if (!ph) {
            return;
        }
        this.lastUsedDate = ph.lastUsedDate;
    }
    return PasswordHistoryView;
}());
exports.PasswordHistoryView = PasswordHistoryView;


/***/ }),

/***/ "./jslib/src/models/view/secureNoteView.ts":
/*!*************************************************!*\
  !*** ./jslib/src/models/view/secureNoteView.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SecureNoteView = /** @class */ (function () {
    function SecureNoteView(n) {
        if (!n) {
            return;
        }
        this.type = n.type;
    }
    Object.defineProperty(SecureNoteView.prototype, "subTitle", {
        get: function () {
            return null;
        },
        enumerable: true,
        configurable: true
    });
    return SecureNoteView;
}());
exports.SecureNoteView = SecureNoteView;


/***/ }),

/***/ "./jslib/src/models/view/view.ts":
/*!***************************************!*\
  !*** ./jslib/src/models/view/view.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var View = /** @class */ (function () {
    function View() {
    }
    return View;
}());
exports.View = View;


/***/ }),

/***/ "./jslib/src/services/api.service.ts":
/*!*******************************************!*\
  !*** ./jslib/src/services/api.service.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var deviceType_1 = __webpack_require__(/*! ../enums/deviceType */ "./jslib/src/enums/deviceType.ts");
var billingResponse_1 = __webpack_require__(/*! ../models/response/billingResponse */ "./jslib/src/models/response/billingResponse.ts");
var cipherResponse_1 = __webpack_require__(/*! ../models/response/cipherResponse */ "./jslib/src/models/response/cipherResponse.ts");
var collectionResponse_1 = __webpack_require__(/*! ../models/response/collectionResponse */ "./jslib/src/models/response/collectionResponse.ts");
var collectionUserResponse_1 = __webpack_require__(/*! ../models/response/collectionUserResponse */ "./jslib/src/models/response/collectionUserResponse.ts");
var domainsResponse_1 = __webpack_require__(/*! ../models/response/domainsResponse */ "./jslib/src/models/response/domainsResponse.ts");
var errorResponse_1 = __webpack_require__(/*! ../models/response/errorResponse */ "./jslib/src/models/response/errorResponse.ts");
var eventResponse_1 = __webpack_require__(/*! ../models/response/eventResponse */ "./jslib/src/models/response/eventResponse.ts");
var folderResponse_1 = __webpack_require__(/*! ../models/response/folderResponse */ "./jslib/src/models/response/folderResponse.ts");
var groupResponse_1 = __webpack_require__(/*! ../models/response/groupResponse */ "./jslib/src/models/response/groupResponse.ts");
var groupUserResponse_1 = __webpack_require__(/*! ../models/response/groupUserResponse */ "./jslib/src/models/response/groupUserResponse.ts");
var identityTokenResponse_1 = __webpack_require__(/*! ../models/response/identityTokenResponse */ "./jslib/src/models/response/identityTokenResponse.ts");
var identityTwoFactorResponse_1 = __webpack_require__(/*! ../models/response/identityTwoFactorResponse */ "./jslib/src/models/response/identityTwoFactorResponse.ts");
var listResponse_1 = __webpack_require__(/*! ../models/response/listResponse */ "./jslib/src/models/response/listResponse.ts");
var organizationBillingResponse_1 = __webpack_require__(/*! ../models/response/organizationBillingResponse */ "./jslib/src/models/response/organizationBillingResponse.ts");
var organizationResponse_1 = __webpack_require__(/*! ../models/response/organizationResponse */ "./jslib/src/models/response/organizationResponse.ts");
var organizationUserResponse_1 = __webpack_require__(/*! ../models/response/organizationUserResponse */ "./jslib/src/models/response/organizationUserResponse.ts");
var profileResponse_1 = __webpack_require__(/*! ../models/response/profileResponse */ "./jslib/src/models/response/profileResponse.ts");
var syncResponse_1 = __webpack_require__(/*! ../models/response/syncResponse */ "./jslib/src/models/response/syncResponse.ts");
var twoFactorAuthenticatorResponse_1 = __webpack_require__(/*! ../models/response/twoFactorAuthenticatorResponse */ "./jslib/src/models/response/twoFactorAuthenticatorResponse.ts");
var twoFactorDuoResponse_1 = __webpack_require__(/*! ../models/response/twoFactorDuoResponse */ "./jslib/src/models/response/twoFactorDuoResponse.ts");
var twoFactorEmailResponse_1 = __webpack_require__(/*! ../models/response/twoFactorEmailResponse */ "./jslib/src/models/response/twoFactorEmailResponse.ts");
var twoFactorProviderResponse_1 = __webpack_require__(/*! ../models/response/twoFactorProviderResponse */ "./jslib/src/models/response/twoFactorProviderResponse.ts");
var twoFactorRescoverResponse_1 = __webpack_require__(/*! ../models/response/twoFactorRescoverResponse */ "./jslib/src/models/response/twoFactorRescoverResponse.ts");
var twoFactorU2fResponse_1 = __webpack_require__(/*! ../models/response/twoFactorU2fResponse */ "./jslib/src/models/response/twoFactorU2fResponse.ts");
var twoFactorYubiKeyResponse_1 = __webpack_require__(/*! ../models/response/twoFactorYubiKeyResponse */ "./jslib/src/models/response/twoFactorYubiKeyResponse.ts");
var userKeyResponse_1 = __webpack_require__(/*! ../models/response/userKeyResponse */ "./jslib/src/models/response/userKeyResponse.ts");
var ApiService = /** @class */ (function () {
    function ApiService(tokenService, platformUtilsService, logoutCallback) {
        this.tokenService = tokenService;
        this.platformUtilsService = platformUtilsService;
        this.logoutCallback = logoutCallback;
        this.urlsSet = false;
        this.isWebClient = false;
        this.isDesktopClient = false;
        this.usingBaseUrl = false;
        var device = platformUtilsService.getDevice();
        this.deviceType = device.toString();
        this.isWebClient = device === deviceType_1.DeviceType.IEBrowser || device === deviceType_1.DeviceType.ChromeBrowser ||
            device === deviceType_1.DeviceType.EdgeBrowser || device === deviceType_1.DeviceType.FirefoxBrowser ||
            device === deviceType_1.DeviceType.OperaBrowser || device === deviceType_1.DeviceType.SafariBrowser ||
            device === deviceType_1.DeviceType.UnknownBrowser || device === deviceType_1.DeviceType.VivaldiBrowser;
        this.isDesktopClient = device === deviceType_1.DeviceType.WindowsDesktop || device === deviceType_1.DeviceType.MacOsDesktop ||
            device === deviceType_1.DeviceType.LinuxDesktop;
    }
    ApiService.prototype.setUrls = function (urls) {
        this.urlsSet = true;
        if (urls.base != null) {
            this.usingBaseUrl = true;
            this.apiBaseUrl = urls.base + '/api';
            this.identityBaseUrl = urls.base + '/identity';
            return;
        }
        if (urls.api != null && urls.identity != null) {
            this.apiBaseUrl = urls.api;
            this.identityBaseUrl = urls.identity;
            return;
        }
        /* tslint:disable */
        // Local Dev
        //this.apiBaseUrl = 'http://localhost:4000';
        //this.identityBaseUrl = 'http://localhost:33656';
        // Production
        this.apiBaseUrl = 'https://api.bitwarden.com';
        this.identityBaseUrl = 'https://identity.bitwarden.com';
        /* tslint:enable */
    };
    // Auth APIs
    ApiService.prototype.postIdentityToken = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var response, responseJson, typeHeader;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.fetch(new Request(this.identityBaseUrl + '/connect/token', {
                            body: this.qsStringify(request.toIdentityToken(this.platformUtilsService.identityClientId)),
                            credentials: this.getCredentials(),
                            cache: 'no-cache',
                            headers: new Headers({
                                'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8',
                                'Accept': 'application/json',
                                'Device-Type': this.deviceType,
                            }),
                            method: 'POST',
                        }))];
                    case 1:
                        response = _a.sent();
                        responseJson = null;
                        typeHeader = response.headers.get('content-type');
                        if (!(typeHeader != null && typeHeader.indexOf('application/json') > -1)) return [3 /*break*/, 3];
                        return [4 /*yield*/, response.json()];
                    case 2:
                        responseJson = _a.sent();
                        _a.label = 3;
                    case 3:
                        if (!(responseJson != null)) return [3 /*break*/, 6];
                        if (!(response.status === 200)) return [3 /*break*/, 4];
                        return [2 /*return*/, new identityTokenResponse_1.IdentityTokenResponse(responseJson)];
                    case 4:
                        if (!(response.status === 400 && responseJson.TwoFactorProviders2 &&
                            Object.keys(responseJson.TwoFactorProviders2).length)) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.tokenService.clearTwoFactorToken(request.email)];
                    case 5:
                        _a.sent();
                        return [2 /*return*/, new identityTwoFactorResponse_1.IdentityTwoFactorResponse(responseJson)];
                    case 6: return [2 /*return*/, Promise.reject(new errorResponse_1.ErrorResponse(responseJson, response.status, true))];
                }
            });
        });
    };
    ApiService.prototype.refreshIdentityToken = function () {
        return __awaiter(this, void 0, void 0, function () {
            var e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, this.doRefreshToken()];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        e_1 = _a.sent();
                        return [2 /*return*/, Promise.reject(null)];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    // Account APIs
    ApiService.prototype.getProfile = function () {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/accounts/profile', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new profileResponse_1.ProfileResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getUserBilling = function () {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/accounts/billing', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new billingResponse_1.BillingResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putProfile = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/accounts/profile', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new profileResponse_1.ProfileResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.postEmailToken = function (request) {
        return this.send('POST', '/accounts/email-token', request, true, false);
    };
    ApiService.prototype.postEmail = function (request) {
        return this.send('POST', '/accounts/email', request, true, false);
    };
    ApiService.prototype.postPassword = function (request) {
        return this.send('POST', '/accounts/password', request, true, false);
    };
    ApiService.prototype.postSecurityStamp = function (request) {
        return this.send('POST', '/accounts/security-stamp', request, true, false);
    };
    ApiService.prototype.deleteAccount = function (request) {
        return this.send('DELETE', '/accounts', request, true, false);
    };
    ApiService.prototype.getAccountRevisionDate = function () {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/accounts/revision-date', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, r];
                }
            });
        });
    };
    ApiService.prototype.postPasswordHint = function (request) {
        return this.send('POST', '/accounts/password-hint', request, false, false);
    };
    ApiService.prototype.postRegister = function (request) {
        return this.send('POST', '/accounts/register', request, false, false);
    };
    ApiService.prototype.postPremium = function (data) {
        return this.send('POST', '/accounts/premium', data, true, false);
    };
    ApiService.prototype.postReinstatePremium = function () {
        return this.send('POST', '/accounts/reinstate-premium', null, true, false);
    };
    ApiService.prototype.postCancelPremium = function () {
        return this.send('POST', '/accounts/cancel-premium', null, true, false);
    };
    ApiService.prototype.postAccountStorage = function (request) {
        return this.send('POST', '/accounts/storage', request, true, false);
    };
    ApiService.prototype.postAccountPayment = function (request) {
        return this.send('POST', '/accounts/payment', request, true, false);
    };
    ApiService.prototype.postAccountLicense = function (data) {
        return this.send('POST', '/accounts/license', data, true, false);
    };
    ApiService.prototype.postAccountKeys = function (request) {
        return this.send('POST', '/accounts/keys', request, true, false);
    };
    ApiService.prototype.postAccountKey = function (request) {
        return this.send('POST', '/accounts/key', request, true, false);
    };
    ApiService.prototype.postAccountVerifyEmail = function () {
        return this.send('POST', '/accounts/verify-email', null, true, false);
    };
    ApiService.prototype.postAccountVerifyEmailToken = function (request) {
        return this.send('POST', '/accounts/verify-email-token', request, false, false);
    };
    ApiService.prototype.postAccountRecoverDelete = function (request) {
        return this.send('POST', '/accounts/delete-recover', request, false, false);
    };
    ApiService.prototype.postAccountRecoverDeleteToken = function (request) {
        return this.send('POST', '/accounts/delete-recover-token', request, false, false);
    };
    // Folder APIs
    ApiService.prototype.postFolder = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/folders', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new folderResponse_1.FolderResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putFolder = function (id, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/folders/' + id, request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new folderResponse_1.FolderResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.deleteFolder = function (id) {
        return this.send('DELETE', '/folders/' + id, null, true, false);
    };
    // Cipher APIs
    ApiService.prototype.getCipher = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/ciphers/' + id, null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new cipherResponse_1.CipherResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getCipherAdmin = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/ciphers/' + id + '/admin', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new cipherResponse_1.CipherResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getCiphersOrganization = function (organizationId) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/ciphers/organization-details?organizationId=' + organizationId, null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, cipherResponse_1.CipherResponse)];
                }
            });
        });
    };
    ApiService.prototype.postCipher = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/ciphers', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new cipherResponse_1.CipherResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.postCipherAdmin = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/ciphers/admin', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new cipherResponse_1.CipherResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putCipher = function (id, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/ciphers/' + id, request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new cipherResponse_1.CipherResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putCipherAdmin = function (id, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/ciphers/' + id + '/admin', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new cipherResponse_1.CipherResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.deleteCipher = function (id) {
        return this.send('DELETE', '/ciphers/' + id, null, true, false);
    };
    ApiService.prototype.deleteCipherAdmin = function (id) {
        return this.send('DELETE', '/ciphers/' + id + '/admin', null, true, false);
    };
    ApiService.prototype.deleteManyCiphers = function (request) {
        return this.send('DELETE', '/ciphers', request, true, false);
    };
    ApiService.prototype.putMoveCiphers = function (request) {
        return this.send('PUT', '/ciphers/move', request, true, false);
    };
    ApiService.prototype.putShareCipher = function (id, request) {
        return this.send('PUT', '/ciphers/' + id + '/share', request, true, false);
    };
    ApiService.prototype.putShareCiphers = function (request) {
        return this.send('PUT', '/ciphers/share', request, true, false);
    };
    ApiService.prototype.putCipherCollections = function (id, request) {
        return this.send('PUT', '/ciphers/' + id + '/collections', request, true, false);
    };
    ApiService.prototype.putCipherCollectionsAdmin = function (id, request) {
        return this.send('PUT', '/ciphers/' + id + '/collections-admin', request, true, false);
    };
    ApiService.prototype.postPurgeCiphers = function (request) {
        return this.send('POST', '/ciphers/purge', request, true, false);
    };
    ApiService.prototype.postImportCiphers = function (request) {
        return this.send('POST', '/ciphers/import', request, true, false);
    };
    ApiService.prototype.postImportOrganizationCiphers = function (organizationId, request) {
        return this.send('POST', '/ciphers/import-organization?organizationId=' + organizationId, request, true, false);
    };
    // Attachments APIs
    ApiService.prototype.postCipherAttachment = function (id, data) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/ciphers/' + id + '/attachment', data, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new cipherResponse_1.CipherResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.postCipherAttachmentAdmin = function (id, data) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/ciphers/' + id + '/attachment-admin', data, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new cipherResponse_1.CipherResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.deleteCipherAttachment = function (id, attachmentId) {
        return this.send('DELETE', '/ciphers/' + id + '/attachment/' + attachmentId, null, true, false);
    };
    ApiService.prototype.deleteCipherAttachmentAdmin = function (id, attachmentId) {
        return this.send('DELETE', '/ciphers/' + id + '/attachment/' + attachmentId + '/admin', null, true, false);
    };
    ApiService.prototype.postShareCipherAttachment = function (id, attachmentId, data, organizationId) {
        return this.send('POST', '/ciphers/' + id + '/attachment/' +
            attachmentId + '/share?organizationId=' + organizationId, data, true, false);
    };
    // Collections APIs
    ApiService.prototype.getCollectionDetails = function (organizationId, id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + organizationId + '/collections/' + id + '/details', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new collectionResponse_1.CollectionGroupDetailsResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getCollections = function (organizationId) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + organizationId + '/collections', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, collectionResponse_1.CollectionResponse)];
                }
            });
        });
    };
    ApiService.prototype.getCollectionUsers = function (organizationId, id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + organizationId + '/collections/' + id + '/users', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, collectionUserResponse_1.CollectionUserResponse)];
                }
            });
        });
    };
    ApiService.prototype.postCollection = function (organizationId, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/organizations/' + organizationId + '/collections', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new collectionResponse_1.CollectionResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putCollection = function (organizationId, id, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/organizations/' + organizationId + '/collections/' + id, request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new collectionResponse_1.CollectionResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.deleteCollection = function (organizationId, id) {
        return this.send('DELETE', '/organizations/' + organizationId + '/collections/' + id, null, true, false);
    };
    ApiService.prototype.deleteCollectionUser = function (organizationId, id, organizationUserId) {
        return this.send('DELETE', '/organizations/' + organizationId + '/collections/' + id + '/user/' + organizationUserId, null, true, false);
    };
    // Groups APIs
    ApiService.prototype.getGroupDetails = function (organizationId, id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + organizationId + '/groups/' + id + '/details', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new groupResponse_1.GroupDetailsResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getGroups = function (organizationId) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + organizationId + '/groups', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, groupResponse_1.GroupResponse)];
                }
            });
        });
    };
    ApiService.prototype.getGroupUsers = function (organizationId, id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + organizationId + '/groups/' + id + '/users', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, groupUserResponse_1.GroupUserResponse)];
                }
            });
        });
    };
    ApiService.prototype.postGroup = function (organizationId, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/organizations/' + organizationId + '/groups', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new groupResponse_1.GroupResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putGroup = function (organizationId, id, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/organizations/' + organizationId + '/groups/' + id, request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new groupResponse_1.GroupResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.deleteGroup = function (organizationId, id) {
        return this.send('DELETE', '/organizations/' + organizationId + '/groups/' + id, null, true, false);
    };
    ApiService.prototype.deleteGroupUser = function (organizationId, id, organizationUserId) {
        return this.send('DELETE', '/organizations/' + organizationId + '/groups/' + id + '/user/' + organizationUserId, null, true, false);
    };
    // Organization User APIs
    ApiService.prototype.getOrganizationUser = function (organizationId, id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + organizationId + '/users/' + id, null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new organizationUserResponse_1.OrganizationUserDetailsResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getOrganizationUserGroups = function (organizationId, id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + organizationId + '/users/' + id + '/groups', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, r];
                }
            });
        });
    };
    ApiService.prototype.getOrganizationUsers = function (organizationId) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + organizationId + '/users', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, organizationUserResponse_1.OrganizationUserUserDetailsResponse)];
                }
            });
        });
    };
    ApiService.prototype.postOrganizationUserInvite = function (organizationId, request) {
        return this.send('POST', '/organizations/' + organizationId + '/users/invite', request, true, false);
    };
    ApiService.prototype.postOrganizationUserReinvite = function (organizationId, id) {
        return this.send('POST', '/organizations/' + organizationId + '/users/' + id + '/reinvite', null, true, false);
    };
    ApiService.prototype.postOrganizationUserAccept = function (organizationId, id, request) {
        return this.send('POST', '/organizations/' + organizationId + '/users/' + id + '/accept', request, true, false);
    };
    ApiService.prototype.postOrganizationUserConfirm = function (organizationId, id, request) {
        return this.send('POST', '/organizations/' + organizationId + '/users/' + id + '/confirm', request, true, false);
    };
    ApiService.prototype.putOrganizationUser = function (organizationId, id, request) {
        return this.send('PUT', '/organizations/' + organizationId + '/users/' + id, request, true, false);
    };
    ApiService.prototype.putOrganizationUserGroups = function (organizationId, id, request) {
        return this.send('PUT', '/organizations/' + organizationId + '/users/' + id + '/groups', request, true, false);
    };
    ApiService.prototype.deleteOrganizationUser = function (organizationId, id) {
        return this.send('DELETE', '/organizations/' + organizationId + '/users/' + id, null, true, false);
    };
    // Sync APIs
    ApiService.prototype.getSync = function () {
        return __awaiter(this, void 0, void 0, function () {
            var path, r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        path = this.isDesktopClient || this.isWebClient ? '/sync?excludeDomains=true' : '/sync';
                        return [4 /*yield*/, this.send('GET', path, null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new syncResponse_1.SyncResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.postImportDirectory = function (organizationId, request) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, this.send('POST', '/organizations/' + organizationId + '/import', request, true, false)];
            });
        });
    };
    // Settings APIs
    ApiService.prototype.getSettingsDomains = function () {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/settings/domains', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new domainsResponse_1.DomainsResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putSettingsDomains = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/settings/domains', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new domainsResponse_1.DomainsResponse(r)];
                }
            });
        });
    };
    // Two-factor APIs
    ApiService.prototype.getTwoFactorProviders = function () {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/two-factor', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, twoFactorProviderResponse_1.TwoFactorProviderResponse)];
                }
            });
        });
    };
    ApiService.prototype.getTwoFactorOrganizationProviders = function (organizationId) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + organizationId + '/two-factor', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, twoFactorProviderResponse_1.TwoFactorProviderResponse)];
                }
            });
        });
    };
    ApiService.prototype.getTwoFactorAuthenticator = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/two-factor/get-authenticator', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorAuthenticatorResponse_1.TwoFactorAuthenticatorResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getTwoFactorEmail = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/two-factor/get-email', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorEmailResponse_1.TwoFactorEmailResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getTwoFactorDuo = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/two-factor/get-duo', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorDuoResponse_1.TwoFactorDuoResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getTwoFactorOrganizationDuo = function (organizationId, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/organizations/' + organizationId + '/two-factor/get-duo', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorDuoResponse_1.TwoFactorDuoResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getTwoFactorYubiKey = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/two-factor/get-yubikey', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorYubiKeyResponse_1.TwoFactorYubiKeyResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getTwoFactorU2f = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/two-factor/get-u2f', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorU2fResponse_1.TwoFactorU2fResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getTwoFactorRecover = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/two-factor/get-recover', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorRescoverResponse_1.TwoFactorRecoverResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putTwoFactorAuthenticator = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/two-factor/authenticator', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorAuthenticatorResponse_1.TwoFactorAuthenticatorResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putTwoFactorEmail = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/two-factor/email', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorEmailResponse_1.TwoFactorEmailResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putTwoFactorDuo = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/two-factor/duo', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorDuoResponse_1.TwoFactorDuoResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putTwoFactorOrganizationDuo = function (organizationId, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/organizations/' + organizationId + '/two-factor/duo', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorDuoResponse_1.TwoFactorDuoResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putTwoFactorYubiKey = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/two-factor/yubikey', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorYubiKeyResponse_1.TwoFactorYubiKeyResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putTwoFactorU2f = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/two-factor/u2f', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorU2fResponse_1.TwoFactorU2fResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putTwoFactorDisable = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/two-factor/disable', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorProviderResponse_1.TwoFactorProviderResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putTwoFactorOrganizationDisable = function (organizationId, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/organizations/' + organizationId + '/two-factor/disable', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new twoFactorProviderResponse_1.TwoFactorProviderResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.postTwoFactorRecover = function (request) {
        return this.send('POST', '/two-factor/recover', request, false, false);
    };
    ApiService.prototype.postTwoFactorEmailSetup = function (request) {
        return this.send('POST', '/two-factor/send-email', request, true, false);
    };
    ApiService.prototype.postTwoFactorEmail = function (request) {
        return this.send('POST', '/two-factor/send-email-login', request, false, false);
    };
    // Organization APIs
    ApiService.prototype.getOrganization = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + id, null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new organizationResponse_1.OrganizationResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getOrganizationBilling = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/organizations/' + id + '/billing', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new organizationBillingResponse_1.OrganizationBillingResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.getOrganizationLicense = function (id, installationId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, this.send('GET', '/organizations/' + id + '/license?installationId=' + installationId, null, true, true)];
            });
        });
    };
    ApiService.prototype.postOrganization = function (request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/organizations', request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new organizationResponse_1.OrganizationResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.putOrganization = function (id, request) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('PUT', '/organizations/' + id, request, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new organizationResponse_1.OrganizationResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.postLeaveOrganization = function (id) {
        return this.send('POST', '/organizations/' + id + '/leave', null, true, false);
    };
    ApiService.prototype.postOrganizationLicense = function (data) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('POST', '/organizations/license', data, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new organizationResponse_1.OrganizationResponse(r)];
                }
            });
        });
    };
    ApiService.prototype.postOrganizationLicenseUpdate = function (id, data) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, this.send('POST', '/organizations/' + id + '/license', data, true, false)];
            });
        });
    };
    ApiService.prototype.postOrganizationSeat = function (id, request) {
        return this.send('POST', '/organizations/' + id + '/seat', request, true, false);
    };
    ApiService.prototype.postOrganizationStorage = function (id, request) {
        return this.send('POST', '/organizations/' + id + '/storage', request, true, false);
    };
    ApiService.prototype.postOrganizationPayment = function (id, request) {
        return this.send('POST', '/organizations/' + id + '/payment', request, true, false);
    };
    ApiService.prototype.postOrganizationVerifyBank = function (id, request) {
        return this.send('POST', '/organizations/' + id + '/verify-bank', request, true, false);
    };
    ApiService.prototype.postOrganizationCancel = function (id) {
        return this.send('POST', '/organizations/' + id + '/cancel', null, true, false);
    };
    ApiService.prototype.postOrganizationReinstate = function (id) {
        return this.send('POST', '/organizations/' + id + '/reinstate', null, true, false);
    };
    ApiService.prototype.deleteOrganization = function (id, request) {
        return this.send('DELETE', '/organizations/' + id, request, true, false);
    };
    // Event APIs
    ApiService.prototype.getEvents = function (start, end, token) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', this.addEventParameters('/events', start, end, token), null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, eventResponse_1.EventResponse)];
                }
            });
        });
    };
    ApiService.prototype.getEventsCipher = function (id, start, end, token) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', this.addEventParameters('/ciphers/' + id + '/events', start, end, token), null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, eventResponse_1.EventResponse)];
                }
            });
        });
    };
    ApiService.prototype.getEventsOrganization = function (id, start, end, token) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', this.addEventParameters('/organizations/' + id + '/events', start, end, token), null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, eventResponse_1.EventResponse)];
                }
            });
        });
    };
    ApiService.prototype.getEventsOrganizationUser = function (organizationId, id, start, end, token) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', this.addEventParameters('/organizations/' + organizationId + '/users/' + id + '/events', start, end, token), null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new listResponse_1.ListResponse(r, eventResponse_1.EventResponse)];
                }
            });
        });
    };
    // User APIs
    ApiService.prototype.getUserPublicKey = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var r;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.send('GET', '/users/' + id + '/public-key', null, true, true)];
                    case 1:
                        r = _a.sent();
                        return [2 /*return*/, new userKeyResponse_1.UserKeyResponse(r)];
                }
            });
        });
    };
    // Helpers
    ApiService.prototype.fetch = function (request) {
        if (request.method === 'GET') {
            request.headers.set('Cache-Control', 'no-cache');
            request.headers.set('Pragma', 'no-cache');
        }
        return fetch(request);
    };
    ApiService.prototype.send = function (method, path, body, authed, hasResponse) {
        return __awaiter(this, void 0, void 0, function () {
            var headers, requestInit, authHeader, response, responseJson, error;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        headers = new Headers({
                            'Device-Type': this.deviceType,
                        });
                        requestInit = {
                            cache: 'no-cache',
                            credentials: this.getCredentials(),
                            method: method,
                        };
                        if (!authed) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.handleTokenState()];
                    case 1:
                        authHeader = _a.sent();
                        headers.set('Authorization', authHeader);
                        _a.label = 2;
                    case 2:
                        if (body != null) {
                            if (typeof body === 'string') {
                                requestInit.body = body;
                                headers.set('Content-Type', 'application/x-www-form-urlencoded; charset=utf-8');
                            }
                            else if (typeof body === 'object') {
                                if (body instanceof FormData) {
                                    requestInit.body = body;
                                }
                                else {
                                    headers.set('Content-Type', 'application/json; charset=utf-8');
                                    requestInit.body = JSON.stringify(body);
                                }
                            }
                        }
                        if (hasResponse) {
                            headers.set('Accept', 'application/json');
                        }
                        requestInit.headers = headers;
                        return [4 /*yield*/, this.fetch(new Request(this.apiBaseUrl + path, requestInit))];
                    case 3:
                        response = _a.sent();
                        if (!(hasResponse && response.status === 200)) return [3 /*break*/, 5];
                        return [4 /*yield*/, response.json()];
                    case 4:
                        responseJson = _a.sent();
                        return [2 /*return*/, responseJson];
                    case 5:
                        if (!(response.status !== 200)) return [3 /*break*/, 7];
                        return [4 /*yield*/, this.handleError(response, false)];
                    case 6:
                        error = _a.sent();
                        return [2 /*return*/, Promise.reject(error)];
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    ApiService.prototype.handleError = function (response, tokenError) {
        return __awaiter(this, void 0, void 0, function () {
            var responseJson, typeHeader;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!((tokenError && response.status === 400) || response.status === 401 || response.status === 403)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.logoutCallback(true)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, null];
                    case 2:
                        responseJson = null;
                        typeHeader = response.headers.get('content-type');
                        if (!(typeHeader != null && typeHeader.indexOf('application/json') > -1)) return [3 /*break*/, 4];
                        return [4 /*yield*/, response.json()];
                    case 3:
                        responseJson = _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/, new errorResponse_1.ErrorResponse(responseJson, response.status, tokenError)];
                }
            });
        });
    };
    ApiService.prototype.handleTokenState = function () {
        return __awaiter(this, void 0, void 0, function () {
            var accessToken, tokenResponse;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.tokenService.getToken()];
                    case 1:
                        accessToken = _a.sent();
                        if (!this.tokenService.tokenNeedsRefresh()) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.doRefreshToken()];
                    case 2:
                        tokenResponse = _a.sent();
                        accessToken = tokenResponse.accessToken;
                        _a.label = 3;
                    case 3: return [2 /*return*/, 'Bearer ' + accessToken];
                }
            });
        });
    };
    ApiService.prototype.doRefreshToken = function () {
        return __awaiter(this, void 0, void 0, function () {
            var refreshToken, decodedToken, response, responseJson, tokenResponse, error;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.tokenService.getRefreshToken()];
                    case 1:
                        refreshToken = _a.sent();
                        if (refreshToken == null || refreshToken === '') {
                            throw new Error();
                        }
                        decodedToken = this.tokenService.decodeToken();
                        return [4 /*yield*/, this.fetch(new Request(this.identityBaseUrl + '/connect/token', {
                                body: this.qsStringify({
                                    grant_type: 'refresh_token',
                                    client_id: decodedToken.client_id,
                                    refresh_token: refreshToken,
                                }),
                                cache: 'no-cache',
                                credentials: this.getCredentials(),
                                headers: new Headers({
                                    'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8',
                                    'Accept': 'application/json',
                                    'Device-Type': this.deviceType,
                                }),
                                method: 'POST',
                            }))];
                    case 2:
                        response = _a.sent();
                        if (!(response.status === 200)) return [3 /*break*/, 5];
                        return [4 /*yield*/, response.json()];
                    case 3:
                        responseJson = _a.sent();
                        tokenResponse = new identityTokenResponse_1.IdentityTokenResponse(responseJson);
                        return [4 /*yield*/, this.tokenService.setTokens(tokenResponse.accessToken, tokenResponse.refreshToken)];
                    case 4:
                        _a.sent();
                        return [2 /*return*/, tokenResponse];
                    case 5: return [4 /*yield*/, this.handleError(response, true)];
                    case 6:
                        error = _a.sent();
                        return [2 /*return*/, Promise.reject(error)];
                }
            });
        });
    };
    ApiService.prototype.qsStringify = function (params) {
        return Object.keys(params).map(function (key) {
            return encodeURIComponent(key) + '=' + encodeURIComponent(params[key]);
        }).join('&');
    };
    ApiService.prototype.getCredentials = function () {
        if (!this.isWebClient || this.usingBaseUrl) {
            return 'include';
        }
        return undefined;
    };
    ApiService.prototype.addEventParameters = function (base, start, end, token) {
        if (start != null) {
            base += ('?start=' + start);
        }
        if (end != null) {
            base += (base.indexOf('?') > -1 ? '&' : '?');
            base += ('end=' + end);
        }
        if (token != null) {
            base += (base.indexOf('?') > -1 ? '&' : '?');
            base += ('continuationToken=' + token);
        }
        return base;
    };
    return ApiService;
}());
exports.ApiService = ApiService;


/***/ }),

/***/ "./jslib/src/services/appId.service.ts":
/*!*********************************************!*\
  !*** ./jslib/src/services/appId.service.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! ../misc/utils */ "./jslib/src/misc/utils.ts");
var AppIdService = /** @class */ (function () {
    function AppIdService(storageService) {
        this.storageService = storageService;
    }
    AppIdService.prototype.getAppId = function () {
        return this.makeAndGetAppId('appId');
    };
    AppIdService.prototype.getAnonymousAppId = function () {
        return this.makeAndGetAppId('anonymousAppId');
    };
    AppIdService.prototype.makeAndGetAppId = function (key) {
        return __awaiter(this, void 0, void 0, function () {
            var existingId, guid;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.get(key)];
                    case 1:
                        existingId = _a.sent();
                        if (existingId != null) {
                            return [2 /*return*/, existingId];
                        }
                        guid = utils_1.Utils.newGuid();
                        return [4 /*yield*/, this.storageService.save(key, guid)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/, guid];
                }
            });
        });
    };
    return AppIdService;
}());
exports.AppIdService = AppIdService;


/***/ }),

/***/ "./jslib/src/services/audit.service.ts":
/*!*********************************************!*\
  !*** ./jslib/src/services/audit.service.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! ../misc/utils */ "./jslib/src/misc/utils.ts");
var breachAccountResponse_1 = __webpack_require__(/*! ../models/response/breachAccountResponse */ "./jslib/src/models/response/breachAccountResponse.ts");
var PwnedPasswordsApi = 'https://api.pwnedpasswords.com/range/';
var HibpBreachApi = 'https://haveibeenpwned.com/api/v2/breachedaccount/';
var AuditService = /** @class */ (function () {
    function AuditService(cryptoFunctionService, apiService) {
        this.cryptoFunctionService = cryptoFunctionService;
        this.apiService = apiService;
    }
    AuditService.prototype.passwordLeaked = function (password) {
        return __awaiter(this, void 0, void 0, function () {
            var hashBytes, hash, hashStart, hashEnding, response, leakedHashes, match;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.cryptoFunctionService.hash(password, 'sha1')];
                    case 1:
                        hashBytes = _a.sent();
                        hash = utils_1.Utils.fromBufferToHex(hashBytes).toUpperCase();
                        hashStart = hash.substr(0, 5);
                        hashEnding = hash.substr(5);
                        return [4 /*yield*/, fetch(new Request(PwnedPasswordsApi + hashStart))];
                    case 2:
                        response = _a.sent();
                        return [4 /*yield*/, response.text()];
                    case 3:
                        leakedHashes = _a.sent();
                        match = leakedHashes.split(/\r?\n/).find(function (v) {
                            return v.split(':')[0] === hashEnding;
                        });
                        return [2 /*return*/, match != null ? parseInt(match.split(':')[1], 10) : 0];
                }
            });
        });
    };
    AuditService.prototype.breachedAccounts = function (username) {
        return __awaiter(this, void 0, void 0, function () {
            var response, responseJson;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.apiService.fetch(new Request(HibpBreachApi + username))];
                    case 1:
                        response = _a.sent();
                        if (response.status === 404) {
                            return [2 /*return*/, []];
                        }
                        else if (response.status !== 200) {
                            throw new Error();
                        }
                        return [4 /*yield*/, response.json()];
                    case 2:
                        responseJson = _a.sent();
                        return [2 /*return*/, responseJson.map(function (a) { return new breachAccountResponse_1.BreachAccountResponse(a); })];
                }
            });
        });
    };
    return AuditService;
}());
exports.AuditService = AuditService;


/***/ }),

/***/ "./jslib/src/services/auth.service.ts":
/*!********************************************!*\
  !*** ./jslib/src/services/auth.service.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var _a;
var twoFactorProviderType_1 = __webpack_require__(/*! ../enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var authResult_1 = __webpack_require__(/*! ../models/domain/authResult */ "./jslib/src/models/domain/authResult.ts");
var deviceRequest_1 = __webpack_require__(/*! ../models/request/deviceRequest */ "./jslib/src/models/request/deviceRequest.ts");
var keysRequest_1 = __webpack_require__(/*! ../models/request/keysRequest */ "./jslib/src/models/request/keysRequest.ts");
var tokenRequest_1 = __webpack_require__(/*! ../models/request/tokenRequest */ "./jslib/src/models/request/tokenRequest.ts");
exports.TwoFactorProviders = (_a = {},
    _a[twoFactorProviderType_1.TwoFactorProviderType.Authenticator] = {
        type: twoFactorProviderType_1.TwoFactorProviderType.Authenticator,
        name: null,
        description: null,
        priority: 1,
        sort: 1,
        premium: false,
    },
    _a[twoFactorProviderType_1.TwoFactorProviderType.Yubikey] = {
        type: twoFactorProviderType_1.TwoFactorProviderType.Yubikey,
        name: null,
        description: null,
        priority: 3,
        sort: 2,
        premium: true,
    },
    _a[twoFactorProviderType_1.TwoFactorProviderType.Duo] = {
        type: twoFactorProviderType_1.TwoFactorProviderType.Duo,
        name: 'Duo',
        description: null,
        priority: 2,
        sort: 3,
        premium: true,
    },
    _a[twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo] = {
        type: twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo,
        name: 'Duo (Organization)',
        description: null,
        priority: 10,
        sort: 4,
        premium: false,
    },
    _a[twoFactorProviderType_1.TwoFactorProviderType.U2f] = {
        type: twoFactorProviderType_1.TwoFactorProviderType.U2f,
        name: null,
        description: null,
        priority: 4,
        sort: 5,
        premium: true,
    },
    _a[twoFactorProviderType_1.TwoFactorProviderType.Email] = {
        type: twoFactorProviderType_1.TwoFactorProviderType.Email,
        name: null,
        description: null,
        priority: 0,
        sort: 6,
        premium: false,
    },
    _a);
var AuthService = /** @class */ (function () {
    function AuthService(cryptoService, apiService, userService, tokenService, appIdService, i18nService, platformUtilsService, messagingService, setCryptoKeys) {
        if (setCryptoKeys === void 0) { setCryptoKeys = true; }
        this.cryptoService = cryptoService;
        this.apiService = apiService;
        this.userService = userService;
        this.tokenService = tokenService;
        this.appIdService = appIdService;
        this.i18nService = i18nService;
        this.platformUtilsService = platformUtilsService;
        this.messagingService = messagingService;
        this.setCryptoKeys = setCryptoKeys;
        this.selectedTwoFactorProviderType = null;
    }
    AuthService.prototype.init = function () {
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Email].name = this.i18nService.t('emailTitle');
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Email].description = this.i18nService.t('emailDesc');
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Authenticator].name = this.i18nService.t('authenticatorAppTitle');
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Authenticator].description =
            this.i18nService.t('authenticatorAppDesc');
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Duo].description = this.i18nService.t('duoDesc');
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo].name =
            'Duo (' + this.i18nService.t('organization') + ')';
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo].description =
            this.i18nService.t('duoOrganizationDesc');
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.U2f].name = this.i18nService.t('u2fTitle');
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.U2f].description = this.i18nService.t('u2fDesc');
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Yubikey].name = this.i18nService.t('yubiKeyTitle');
        exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Yubikey].description = this.i18nService.t('yubiKeyDesc');
    };
    AuthService.prototype.logIn = function (email, masterPassword) {
        return __awaiter(this, void 0, void 0, function () {
            var key, hashedPassword;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.selectedTwoFactorProviderType = null;
                        email = email.toLowerCase();
                        return [4 /*yield*/, this.cryptoService.makeKey(masterPassword, email)];
                    case 1:
                        key = _a.sent();
                        return [4 /*yield*/, this.cryptoService.hashPassword(masterPassword, key)];
                    case 2:
                        hashedPassword = _a.sent();
                        return [4 /*yield*/, this.logInHelper(email, hashedPassword, key)];
                    case 3: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    AuthService.prototype.logInTwoFactor = function (twoFactorProvider, twoFactorToken, remember) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.logInHelper(this.email, this.masterPasswordHash, this.key, twoFactorProvider, twoFactorToken, remember)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    AuthService.prototype.logInComplete = function (email, masterPassword, twoFactorProvider, twoFactorToken, remember) {
        return __awaiter(this, void 0, void 0, function () {
            var key, hashedPassword;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.selectedTwoFactorProviderType = null;
                        email = email.toLowerCase();
                        return [4 /*yield*/, this.cryptoService.makeKey(masterPassword, email)];
                    case 1:
                        key = _a.sent();
                        return [4 /*yield*/, this.cryptoService.hashPassword(masterPassword, key)];
                    case 2:
                        hashedPassword = _a.sent();
                        return [4 /*yield*/, this.logInHelper(email, hashedPassword, key, twoFactorProvider, twoFactorToken, remember)];
                    case 3: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    AuthService.prototype.logOut = function (callback) {
        callback();
        this.messagingService.send('loggedOut');
    };
    AuthService.prototype.getSupportedTwoFactorProviders = function (win) {
        var providers = [];
        if (this.twoFactorProviders == null) {
            return providers;
        }
        if (this.twoFactorProviders.has(twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo) &&
            this.platformUtilsService.supportsDuo()) {
            providers.push(exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo]);
        }
        if (this.twoFactorProviders.has(twoFactorProviderType_1.TwoFactorProviderType.Authenticator)) {
            providers.push(exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Authenticator]);
        }
        if (this.twoFactorProviders.has(twoFactorProviderType_1.TwoFactorProviderType.Yubikey)) {
            providers.push(exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Yubikey]);
        }
        if (this.twoFactorProviders.has(twoFactorProviderType_1.TwoFactorProviderType.Duo) && this.platformUtilsService.supportsDuo()) {
            providers.push(exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Duo]);
        }
        if (this.twoFactorProviders.has(twoFactorProviderType_1.TwoFactorProviderType.U2f) && this.platformUtilsService.supportsU2f(win)) {
            providers.push(exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.U2f]);
        }
        if (this.twoFactorProviders.has(twoFactorProviderType_1.TwoFactorProviderType.Email)) {
            providers.push(exports.TwoFactorProviders[twoFactorProviderType_1.TwoFactorProviderType.Email]);
        }
        return providers;
    };
    AuthService.prototype.getDefaultTwoFactorProvider = function (u2fSupported) {
        if (this.twoFactorProviders == null) {
            return null;
        }
        if (this.selectedTwoFactorProviderType != null &&
            this.twoFactorProviders.has(this.selectedTwoFactorProviderType)) {
            return this.selectedTwoFactorProviderType;
        }
        var providerType = null;
        var providerPriority = -1;
        this.twoFactorProviders.forEach(function (value, type) {
            var provider = exports.TwoFactorProviders[type];
            if (provider != null && provider.priority > providerPriority) {
                if (type === twoFactorProviderType_1.TwoFactorProviderType.U2f && !u2fSupported) {
                    return;
                }
                providerType = type;
                providerPriority = provider.priority;
            }
        });
        return providerType;
    };
    AuthService.prototype.logInHelper = function (email, hashedPassword, key, twoFactorProvider, twoFactorToken, remember) {
        return __awaiter(this, void 0, void 0, function () {
            var storedTwoFactorToken, appId, deviceRequest, request, response, result, twoFactorResponse, tokenResponse, keyPair, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.tokenService.getTwoFactorToken(email)];
                    case 1:
                        storedTwoFactorToken = _a.sent();
                        return [4 /*yield*/, this.appIdService.getAppId()];
                    case 2:
                        appId = _a.sent();
                        deviceRequest = new deviceRequest_1.DeviceRequest(appId, this.platformUtilsService);
                        if (twoFactorToken != null && twoFactorProvider != null) {
                            request = new tokenRequest_1.TokenRequest(email, hashedPassword, twoFactorProvider, twoFactorToken, remember, deviceRequest);
                        }
                        else if (storedTwoFactorToken != null) {
                            request = new tokenRequest_1.TokenRequest(email, hashedPassword, twoFactorProviderType_1.TwoFactorProviderType.Remember, storedTwoFactorToken, false, deviceRequest);
                        }
                        else {
                            request = new tokenRequest_1.TokenRequest(email, hashedPassword, null, null, false, deviceRequest);
                        }
                        return [4 /*yield*/, this.apiService.postIdentityToken(request)];
                    case 3:
                        response = _a.sent();
                        this.clearState();
                        result = new authResult_1.AuthResult();
                        result.twoFactor = !response.accessToken;
                        if (result.twoFactor) {
                            twoFactorResponse = response;
                            this.email = email;
                            this.masterPasswordHash = hashedPassword;
                            this.key = this.setCryptoKeys ? key : null;
                            this.twoFactorProviders = twoFactorResponse.twoFactorProviders2;
                            result.twoFactorProviders = twoFactorResponse.twoFactorProviders2;
                            return [2 /*return*/, result];
                        }
                        tokenResponse = response;
                        if (tokenResponse.twoFactorToken != null) {
                            this.tokenService.setTwoFactorToken(tokenResponse.twoFactorToken, email);
                        }
                        return [4 /*yield*/, this.tokenService.setTokens(tokenResponse.accessToken, tokenResponse.refreshToken)];
                    case 4:
                        _a.sent();
                        return [4 /*yield*/, this.userService.setUserIdAndEmail(this.tokenService.getUserId(), this.tokenService.getEmail())];
                    case 5:
                        _a.sent();
                        if (!this.setCryptoKeys) return [3 /*break*/, 15];
                        return [4 /*yield*/, this.cryptoService.setKey(key)];
                    case 6:
                        _a.sent();
                        return [4 /*yield*/, this.cryptoService.setKeyHash(hashedPassword)];
                    case 7:
                        _a.sent();
                        return [4 /*yield*/, this.cryptoService.setEncKey(tokenResponse.key)];
                    case 8:
                        _a.sent();
                        if (!(tokenResponse.privateKey == null)) return [3 /*break*/, 13];
                        _a.label = 9;
                    case 9:
                        _a.trys.push([9, 12, , 13]);
                        return [4 /*yield*/, this.cryptoService.makeKeyPair()];
                    case 10:
                        keyPair = _a.sent();
                        return [4 /*yield*/, this.apiService.postAccountKeys(new keysRequest_1.KeysRequest(keyPair[0], keyPair[1].encryptedString))];
                    case 11:
                        _a.sent();
                        tokenResponse.privateKey = keyPair[1].encryptedString;
                        return [3 /*break*/, 13];
                    case 12:
                        e_1 = _a.sent();
                        // tslint:disable-next-line
                        console.error(e_1);
                        return [3 /*break*/, 13];
                    case 13: return [4 /*yield*/, this.cryptoService.setEncPrivateKey(tokenResponse.privateKey)];
                    case 14:
                        _a.sent();
                        _a.label = 15;
                    case 15:
                        this.messagingService.send('loggedIn');
                        return [2 /*return*/, result];
                }
            });
        });
    };
    AuthService.prototype.clearState = function () {
        this.email = null;
        this.masterPasswordHash = null;
        this.twoFactorProviders = null;
        this.selectedTwoFactorProviderType = null;
    };
    return AuthService;
}());
exports.AuthService = AuthService;


/***/ }),

/***/ "./jslib/src/services/cipher.service.ts":
/*!**********************************************!*\
  !*** ./jslib/src/services/cipher.service.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(Buffer) {
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var fieldType_1 = __webpack_require__(/*! ../enums/fieldType */ "./jslib/src/enums/fieldType.ts");
var uriMatchType_1 = __webpack_require__(/*! ../enums/uriMatchType */ "./jslib/src/enums/uriMatchType.ts");
var cipherData_1 = __webpack_require__(/*! ../models/data/cipherData */ "./jslib/src/models/data/cipherData.ts");
var attachment_1 = __webpack_require__(/*! ../models/domain/attachment */ "./jslib/src/models/domain/attachment.ts");
var card_1 = __webpack_require__(/*! ../models/domain/card */ "./jslib/src/models/domain/card.ts");
var cipher_1 = __webpack_require__(/*! ../models/domain/cipher */ "./jslib/src/models/domain/cipher.ts");
var field_1 = __webpack_require__(/*! ../models/domain/field */ "./jslib/src/models/domain/field.ts");
var identity_1 = __webpack_require__(/*! ../models/domain/identity */ "./jslib/src/models/domain/identity.ts");
var login_1 = __webpack_require__(/*! ../models/domain/login */ "./jslib/src/models/domain/login.ts");
var loginUri_1 = __webpack_require__(/*! ../models/domain/loginUri */ "./jslib/src/models/domain/loginUri.ts");
var password_1 = __webpack_require__(/*! ../models/domain/password */ "./jslib/src/models/domain/password.ts");
var secureNote_1 = __webpack_require__(/*! ../models/domain/secureNote */ "./jslib/src/models/domain/secureNote.ts");
var cipherBulkDeleteRequest_1 = __webpack_require__(/*! ../models/request/cipherBulkDeleteRequest */ "./jslib/src/models/request/cipherBulkDeleteRequest.ts");
var cipherBulkMoveRequest_1 = __webpack_require__(/*! ../models/request/cipherBulkMoveRequest */ "./jslib/src/models/request/cipherBulkMoveRequest.ts");
var cipherBulkShareRequest_1 = __webpack_require__(/*! ../models/request/cipherBulkShareRequest */ "./jslib/src/models/request/cipherBulkShareRequest.ts");
var cipherCollectionsRequest_1 = __webpack_require__(/*! ../models/request/cipherCollectionsRequest */ "./jslib/src/models/request/cipherCollectionsRequest.ts");
var cipherRequest_1 = __webpack_require__(/*! ../models/request/cipherRequest */ "./jslib/src/models/request/cipherRequest.ts");
var cipherShareRequest_1 = __webpack_require__(/*! ../models/request/cipherShareRequest */ "./jslib/src/models/request/cipherShareRequest.ts");
var passwordHistoryView_1 = __webpack_require__(/*! ../models/view/passwordHistoryView */ "./jslib/src/models/view/passwordHistoryView.ts");
var utils_1 = __webpack_require__(/*! ../misc/utils */ "./jslib/src/misc/utils.ts");
var Keys = {
    ciphersPrefix: 'ciphers_',
    localData: 'sitesLocalData',
    neverDomains: 'neverDomains',
};
var CipherService = /** @class */ (function () {
    function CipherService(cryptoService, userService, settingsService, apiService, storageService, i18nService, platformUtilsService) {
        this.cryptoService = cryptoService;
        this.userService = userService;
        this.settingsService = settingsService;
        this.apiService = apiService;
        this.storageService = storageService;
        this.i18nService = i18nService;
        this.platformUtilsService = platformUtilsService;
    }
    CipherService.prototype.clearCache = function () {
        this.decryptedCipherCache = null;
    };
    CipherService.prototype.encrypt = function (model, key) {
        return __awaiter(this, void 0, void 0, function () {
            var existingCipher, ph, existingHiddenFields, hiddenFields_1, cipher;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(model.id != null)) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.get(model.id)];
                    case 1: return [4 /*yield*/, (_a.sent()).decrypt()];
                    case 2:
                        existingCipher = _a.sent();
                        if (existingCipher != null) {
                            model.passwordHistory = existingCipher.passwordHistory || [];
                            if (model.type === cipherType_1.CipherType.Login && existingCipher.type === cipherType_1.CipherType.Login) {
                                if (existingCipher.login.password !== model.login.password) {
                                    ph = new passwordHistoryView_1.PasswordHistoryView();
                                    ph.password = existingCipher.login.password;
                                    ph.lastUsedDate = model.login.passwordRevisionDate = new Date();
                                    model.passwordHistory.splice(0, 0, ph);
                                }
                                else {
                                    model.login.passwordRevisionDate = existingCipher.login.passwordRevisionDate;
                                }
                            }
                            if (existingCipher.hasFields) {
                                existingHiddenFields = existingCipher.fields.filter(function (f) { return f.type === fieldType_1.FieldType.Hidden; });
                                hiddenFields_1 = model.fields == null ? [] :
                                    model.fields.filter(function (f) { return f.type === fieldType_1.FieldType.Hidden; });
                                existingHiddenFields.forEach(function (ef) {
                                    var matchedField = hiddenFields_1.filter(function (f) { return f.name === ef.name; });
                                    if (matchedField.length === 0 || matchedField[0].value !== ef.value) {
                                        var ph = new passwordHistoryView_1.PasswordHistoryView();
                                        ph.password = ef.name + ': ' + ef.value;
                                        ph.lastUsedDate = new Date();
                                        model.passwordHistory.splice(0, 0, ph);
                                    }
                                });
                            }
                        }
                        if (model.passwordHistory != null && model.passwordHistory.length === 0) {
                            model.passwordHistory = null;
                        }
                        else if (model.passwordHistory != null && model.passwordHistory.length > 5) {
                            // only save last 5 history
                            model.passwordHistory = model.passwordHistory.slice(0, 5);
                        }
                        _a.label = 3;
                    case 3:
                        cipher = new cipher_1.Cipher();
                        cipher.id = model.id;
                        cipher.folderId = model.folderId;
                        cipher.favorite = model.favorite;
                        cipher.organizationId = model.organizationId;
                        cipher.type = model.type;
                        cipher.collectionIds = model.collectionIds;
                        if (!(key == null && cipher.organizationId != null)) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.cryptoService.getOrgKey(cipher.organizationId)];
                    case 4:
                        key = _a.sent();
                        _a.label = 5;
                    case 5: return [4 /*yield*/, Promise.all([
                            this.encryptObjProperty(model, cipher, {
                                name: null,
                                notes: null,
                            }, key),
                            this.encryptCipherData(cipher, model, key),
                            this.encryptFields(model.fields, key).then(function (fields) {
                                cipher.fields = fields;
                            }),
                            this.encryptPasswordHistories(model.passwordHistory, key).then(function (ph) {
                                cipher.passwordHistory = ph;
                            }),
                            this.encryptAttachments(model.attachments, key).then(function (attachments) {
                                cipher.attachments = attachments;
                            }),
                        ])];
                    case 6:
                        _a.sent();
                        return [2 /*return*/, cipher];
                }
            });
        });
    };
    CipherService.prototype.encryptAttachments = function (attachmentsModel, key) {
        return __awaiter(this, void 0, void 0, function () {
            var promises, encAttachments;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (attachmentsModel == null || attachmentsModel.length === 0) {
                            return [2 /*return*/, null];
                        }
                        promises = [];
                        encAttachments = [];
                        attachmentsModel.forEach(function (model) { return __awaiter(_this, void 0, void 0, function () {
                            var attachment, promise;
                            return __generator(this, function (_a) {
                                attachment = new attachment_1.Attachment();
                                attachment.id = model.id;
                                attachment.size = model.size;
                                attachment.sizeName = model.sizeName;
                                attachment.url = model.url;
                                promise = this.encryptObjProperty(model, attachment, {
                                    fileName: null,
                                }, key).then(function () {
                                    encAttachments.push(attachment);
                                });
                                promises.push(promise);
                                return [2 /*return*/];
                            });
                        }); });
                        return [4 /*yield*/, Promise.all(promises)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, encAttachments];
                }
            });
        });
    };
    CipherService.prototype.encryptFields = function (fieldsModel, key) {
        return __awaiter(this, void 0, void 0, function () {
            var self, encFields;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!fieldsModel || !fieldsModel.length) {
                            return [2 /*return*/, null];
                        }
                        self = this;
                        encFields = [];
                        return [4 /*yield*/, fieldsModel.reduce(function (promise, field) {
                                return promise.then(function () {
                                    return self.encryptField(field, key);
                                }).then(function (encField) {
                                    encFields.push(encField);
                                });
                            }, Promise.resolve())];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, encFields];
                }
            });
        });
    };
    CipherService.prototype.encryptField = function (fieldModel, key) {
        return __awaiter(this, void 0, void 0, function () {
            var field;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        field = new field_1.Field();
                        field.type = fieldModel.type;
                        return [4 /*yield*/, this.encryptObjProperty(fieldModel, field, {
                                name: null,
                                value: null,
                            }, key)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, field];
                }
            });
        });
    };
    CipherService.prototype.encryptPasswordHistories = function (phModels, key) {
        return __awaiter(this, void 0, void 0, function () {
            var self, encPhs;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!phModels || !phModels.length) {
                            return [2 /*return*/, null];
                        }
                        self = this;
                        encPhs = [];
                        return [4 /*yield*/, phModels.reduce(function (promise, ph) {
                                return promise.then(function () {
                                    return self.encryptPasswordHistory(ph, key);
                                }).then(function (encPh) {
                                    encPhs.push(encPh);
                                });
                            }, Promise.resolve())];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, encPhs];
                }
            });
        });
    };
    CipherService.prototype.encryptPasswordHistory = function (phModel, key) {
        return __awaiter(this, void 0, void 0, function () {
            var ph;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        ph = new password_1.Password();
                        ph.lastUsedDate = phModel.lastUsedDate;
                        return [4 /*yield*/, this.encryptObjProperty(phModel, ph, {
                                password: null,
                            }, key)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, ph];
                }
            });
        });
    };
    CipherService.prototype.get = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, localData, ciphers;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.localData)];
                    case 2:
                        localData = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.ciphersPrefix + userId)];
                    case 3:
                        ciphers = _a.sent();
                        if (ciphers == null || !ciphers.hasOwnProperty(id)) {
                            return [2 /*return*/, null];
                        }
                        return [2 /*return*/, new cipher_1.Cipher(ciphers[id], false, localData ? localData[id] : null)];
                }
            });
        });
    };
    CipherService.prototype.getAll = function () {
        return __awaiter(this, void 0, void 0, function () {
            var userId, localData, ciphers, response, id;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.localData)];
                    case 2:
                        localData = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.ciphersPrefix + userId)];
                    case 3:
                        ciphers = _a.sent();
                        response = [];
                        for (id in ciphers) {
                            if (ciphers.hasOwnProperty(id)) {
                                response.push(new cipher_1.Cipher(ciphers[id], false, localData ? localData[id] : null));
                            }
                        }
                        return [2 /*return*/, response];
                }
            });
        });
    };
    CipherService.prototype.getAllDecrypted = function () {
        return __awaiter(this, void 0, void 0, function () {
            var decCiphers, hasKey, promises, ciphers;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.decryptedCipherCache != null) {
                            return [2 /*return*/, this.decryptedCipherCache];
                        }
                        decCiphers = [];
                        return [4 /*yield*/, this.cryptoService.hasKey()];
                    case 1:
                        hasKey = _a.sent();
                        if (!hasKey) {
                            throw new Error('No key.');
                        }
                        promises = [];
                        return [4 /*yield*/, this.getAll()];
                    case 2:
                        ciphers = _a.sent();
                        ciphers.forEach(function (cipher) {
                            promises.push(cipher.decrypt().then(function (c) { return decCiphers.push(c); }));
                        });
                        return [4 /*yield*/, Promise.all(promises)];
                    case 3:
                        _a.sent();
                        decCiphers.sort(this.getLocaleSortingFunction());
                        this.decryptedCipherCache = decCiphers;
                        return [2 /*return*/, this.decryptedCipherCache];
                }
            });
        });
    };
    CipherService.prototype.getAllDecryptedForGrouping = function (groupingId, folder) {
        if (folder === void 0) { folder = true; }
        return __awaiter(this, void 0, void 0, function () {
            var ciphers;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getAllDecrypted()];
                    case 1:
                        ciphers = _a.sent();
                        return [2 /*return*/, ciphers.filter(function (cipher) {
                                if (folder && cipher.folderId === groupingId) {
                                    return true;
                                }
                                else if (!folder && cipher.collectionIds != null && cipher.collectionIds.indexOf(groupingId) > -1) {
                                    return true;
                                }
                                return false;
                            })];
                }
            });
        });
    };
    CipherService.prototype.getAllDecryptedForUrl = function (url, includeOtherTypes) {
        return __awaiter(this, void 0, void 0, function () {
            var domain, eqDomainsPromise, result, matchingDomains, ciphers;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (url == null && !includeOtherTypes) {
                            return [2 /*return*/, Promise.resolve([])];
                        }
                        domain = this.platformUtilsService.getDomain(url);
                        eqDomainsPromise = domain == null ? Promise.resolve([]) :
                            this.settingsService.getEquivalentDomains().then(function (eqDomains) {
                                var matches = [];
                                eqDomains.forEach(function (eqDomain) {
                                    if (eqDomain.length && eqDomain.indexOf(domain) >= 0) {
                                        matches = matches.concat(eqDomain);
                                    }
                                });
                                if (!matches.length) {
                                    matches.push(domain);
                                }
                                return matches;
                            });
                        return [4 /*yield*/, Promise.all([eqDomainsPromise, this.getAllDecrypted()])];
                    case 1:
                        result = _a.sent();
                        matchingDomains = result[0];
                        ciphers = result[1];
                        return [2 /*return*/, ciphers.filter(function (cipher) {
                                if (includeOtherTypes && includeOtherTypes.indexOf(cipher.type) > -1) {
                                    return true;
                                }
                                if (url != null && cipher.type === cipherType_1.CipherType.Login && cipher.login.uris != null) {
                                    for (var i = 0; i < cipher.login.uris.length; i++) {
                                        var u = cipher.login.uris[i];
                                        if (u.uri == null) {
                                            continue;
                                        }
                                        switch (u.match) {
                                            case null:
                                            case undefined:
                                            case uriMatchType_1.UriMatchType.Domain:
                                                if (domain != null && u.domain != null && matchingDomains.indexOf(u.domain) > -1) {
                                                    return true;
                                                }
                                                break;
                                            case uriMatchType_1.UriMatchType.Host:
                                                var urlHost = utils_1.Utils.getHost(url);
                                                if (urlHost != null && urlHost === utils_1.Utils.getHost(u.uri)) {
                                                    return true;
                                                }
                                                break;
                                            case uriMatchType_1.UriMatchType.Exact:
                                                if (url === u.uri) {
                                                    return true;
                                                }
                                                break;
                                            case uriMatchType_1.UriMatchType.StartsWith:
                                                if (url.startsWith(u.uri)) {
                                                    return true;
                                                }
                                                break;
                                            case uriMatchType_1.UriMatchType.RegularExpression:
                                                try {
                                                    var regex = new RegExp(u.uri, 'i');
                                                    if (regex.test(url)) {
                                                        return true;
                                                    }
                                                }
                                                catch (_a) { }
                                                break;
                                            case uriMatchType_1.UriMatchType.Never:
                                            default:
                                                break;
                                        }
                                    }
                                }
                                return false;
                            })];
                }
            });
        });
    };
    CipherService.prototype.getLastUsedForUrl = function (url) {
        return __awaiter(this, void 0, void 0, function () {
            var ciphers, sortedCiphers;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getAllDecryptedForUrl(url)];
                    case 1:
                        ciphers = _a.sent();
                        if (ciphers.length === 0) {
                            return [2 /*return*/, null];
                        }
                        sortedCiphers = ciphers.sort(this.sortCiphersByLastUsed);
                        return [2 /*return*/, sortedCiphers[0]];
                }
            });
        });
    };
    CipherService.prototype.updateLastUsedDate = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var ciphersLocalData, i, cached;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.get(Keys.localData)];
                    case 1:
                        ciphersLocalData = _a.sent();
                        if (!ciphersLocalData) {
                            ciphersLocalData = {};
                        }
                        if (ciphersLocalData[id]) {
                            ciphersLocalData[id].lastUsedDate = new Date().getTime();
                        }
                        else {
                            ciphersLocalData[id] = {
                                lastUsedDate: new Date().getTime(),
                            };
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.localData, ciphersLocalData)];
                    case 2:
                        _a.sent();
                        if (this.decryptedCipherCache == null) {
                            return [2 /*return*/];
                        }
                        for (i = 0; i < this.decryptedCipherCache.length; i++) {
                            cached = this.decryptedCipherCache[i];
                            if (cached.id === id) {
                                cached.localData = ciphersLocalData[id];
                                break;
                            }
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.saveNeverDomain = function (domain) {
        return __awaiter(this, void 0, void 0, function () {
            var domains;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (domain == null) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.storageService.get(Keys.neverDomains)];
                    case 1:
                        domains = _a.sent();
                        if (!domains) {
                            domains = {};
                        }
                        domains[domain] = null;
                        return [4 /*yield*/, this.storageService.save(Keys.neverDomains, domains)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.saveWithServer = function (cipher) {
        return __awaiter(this, void 0, void 0, function () {
            var request, response, userId, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        request = new cipherRequest_1.CipherRequest(cipher);
                        if (!(cipher.id == null)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.apiService.postCipher(request)];
                    case 1:
                        response = _a.sent();
                        cipher.id = response.id;
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.apiService.putCipher(cipher.id, request)];
                    case 3:
                        response = _a.sent();
                        _a.label = 4;
                    case 4: return [4 /*yield*/, this.userService.getUserId()];
                    case 5:
                        userId = _a.sent();
                        data = new cipherData_1.CipherData(response, userId, cipher.collectionIds);
                        return [4 /*yield*/, this.upsert(data)];
                    case 6:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.shareWithServer = function (cipher, organizationId, collectionIds) {
        return __awaiter(this, void 0, void 0, function () {
            var encCipher, request, userId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        cipher.organizationId = organizationId;
                        cipher.collectionIds = collectionIds;
                        return [4 /*yield*/, this.encrypt(cipher)];
                    case 1:
                        encCipher = _a.sent();
                        request = new cipherShareRequest_1.CipherShareRequest(encCipher);
                        return [4 /*yield*/, this.apiService.putShareCipher(cipher.id, request)];
                    case 2:
                        _a.sent();
                        return [4 /*yield*/, this.userService.getUserId()];
                    case 3:
                        userId = _a.sent();
                        return [4 /*yield*/, this.upsert(encCipher.toCipherData(userId))];
                    case 4:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.shareManyWithServer = function (ciphers, organizationId, collectionIds) {
        return __awaiter(this, void 0, void 0, function () {
            var promises, encCiphers, _i, ciphers_1, cipher, request, userId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        promises = [];
                        encCiphers = [];
                        for (_i = 0, ciphers_1 = ciphers; _i < ciphers_1.length; _i++) {
                            cipher = ciphers_1[_i];
                            cipher.organizationId = organizationId;
                            cipher.collectionIds = collectionIds;
                            promises.push(this.encrypt(cipher).then(function (c) {
                                encCiphers.push(c);
                            }));
                        }
                        return [4 /*yield*/, Promise.all(promises)];
                    case 1:
                        _a.sent();
                        request = new cipherBulkShareRequest_1.CipherBulkShareRequest(encCiphers, collectionIds);
                        return [4 /*yield*/, this.apiService.putShareCiphers(request)];
                    case 2:
                        _a.sent();
                        return [4 /*yield*/, this.userService.getUserId()];
                    case 3:
                        userId = _a.sent();
                        return [4 /*yield*/, this.upsert(encCiphers.map(function (c) { return c.toCipherData(userId); }))];
                    case 4:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.shareAttachmentWithServer = function (attachmentView, cipherId, organizationId) {
        return __awaiter(this, void 0, void 0, function () {
            var attachmentResponse, buf, decBuf, key, encData, encFileName, fd, blob, response, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, fetch(new Request(attachmentView.url, { cache: 'no-cache' }))];
                    case 1:
                        attachmentResponse = _a.sent();
                        if (attachmentResponse.status !== 200) {
                            throw Error('Failed to download attachment: ' + attachmentResponse.status.toString());
                        }
                        return [4 /*yield*/, attachmentResponse.arrayBuffer()];
                    case 2:
                        buf = _a.sent();
                        return [4 /*yield*/, this.cryptoService.decryptFromBytes(buf, null)];
                    case 3:
                        decBuf = _a.sent();
                        return [4 /*yield*/, this.cryptoService.getOrgKey(organizationId)];
                    case 4:
                        key = _a.sent();
                        return [4 /*yield*/, this.cryptoService.encryptToBytes(decBuf, key)];
                    case 5:
                        encData = _a.sent();
                        return [4 /*yield*/, this.cryptoService.encrypt(attachmentView.fileName, key)];
                    case 6:
                        encFileName = _a.sent();
                        fd = new FormData();
                        try {
                            blob = new Blob([encData], { type: 'application/octet-stream' });
                            fd.append('data', blob, encFileName.encryptedString);
                        }
                        catch (e) {
                            if (utils_1.Utils.isNode && !utils_1.Utils.isBrowser) {
                                fd.append('data', new Buffer(encData), {
                                    filepath: encFileName.encryptedString,
                                    contentType: 'application/octet-stream',
                                });
                            }
                            else {
                                throw e;
                            }
                        }
                        _a.label = 7;
                    case 7:
                        _a.trys.push([7, 9, , 10]);
                        return [4 /*yield*/, this.apiService.postShareCipherAttachment(cipherId, attachmentView.id, fd, organizationId)];
                    case 8:
                        response = _a.sent();
                        return [3 /*break*/, 10];
                    case 9:
                        e_1 = _a.sent();
                        throw new Error(e_1.getSingleMessage());
                    case 10: return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.saveAttachmentWithServer = function (cipher, unencryptedFile, admin) {
        var _this = this;
        if (admin === void 0) { admin = false; }
        return new Promise(function (resolve, reject) {
            var reader = new FileReader();
            reader.readAsArrayBuffer(unencryptedFile);
            reader.onload = function (evt) { return __awaiter(_this, void 0, void 0, function () {
                var cData, e_2;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            _a.trys.push([0, 2, , 3]);
                            return [4 /*yield*/, this.saveAttachmentRawWithServer(cipher, unencryptedFile.name, evt.target.result, admin)];
                        case 1:
                            cData = _a.sent();
                            resolve(cData);
                            return [3 /*break*/, 3];
                        case 2:
                            e_2 = _a.sent();
                            reject(e_2);
                            return [3 /*break*/, 3];
                        case 3: return [2 /*return*/];
                    }
                });
            }); };
            reader.onerror = function (evt) {
                reject('Error reading file.');
            };
        });
    };
    CipherService.prototype.saveAttachmentRawWithServer = function (cipher, filename, data, admin) {
        if (admin === void 0) { admin = false; }
        return __awaiter(this, void 0, void 0, function () {
            var key, encFileName, encData, fd, blob, response, e_3, userId, cData;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.cryptoService.getOrgKey(cipher.organizationId)];
                    case 1:
                        key = _a.sent();
                        return [4 /*yield*/, this.cryptoService.encrypt(filename, key)];
                    case 2:
                        encFileName = _a.sent();
                        return [4 /*yield*/, this.cryptoService.encryptToBytes(data, key)];
                    case 3:
                        encData = _a.sent();
                        fd = new FormData();
                        try {
                            blob = new Blob([encData], { type: 'application/octet-stream' });
                            fd.append('data', blob, encFileName.encryptedString);
                        }
                        catch (e) {
                            if (utils_1.Utils.isNode && !utils_1.Utils.isBrowser) {
                                fd.append('data', new Buffer(encData), {
                                    filepath: encFileName.encryptedString,
                                    contentType: 'application/octet-stream',
                                });
                            }
                            else {
                                throw e;
                            }
                        }
                        _a.label = 4;
                    case 4:
                        _a.trys.push([4, 9, , 10]);
                        if (!admin) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.apiService.postCipherAttachmentAdmin(cipher.id, fd)];
                    case 5:
                        response = _a.sent();
                        return [3 /*break*/, 8];
                    case 6: return [4 /*yield*/, this.apiService.postCipherAttachment(cipher.id, fd)];
                    case 7:
                        response = _a.sent();
                        _a.label = 8;
                    case 8: return [3 /*break*/, 10];
                    case 9:
                        e_3 = _a.sent();
                        throw new Error(e_3.getSingleMessage());
                    case 10: return [4 /*yield*/, this.userService.getUserId()];
                    case 11:
                        userId = _a.sent();
                        cData = new cipherData_1.CipherData(response, userId, cipher.collectionIds);
                        if (!admin) {
                            this.upsert(cData);
                        }
                        return [2 /*return*/, new cipher_1.Cipher(cData)];
                }
            });
        });
    };
    CipherService.prototype.saveCollectionsWithServer = function (cipher) {
        return __awaiter(this, void 0, void 0, function () {
            var request, userId, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        request = new cipherCollectionsRequest_1.CipherCollectionsRequest(cipher.collectionIds);
                        return [4 /*yield*/, this.apiService.putCipherCollections(cipher.id, request)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.userService.getUserId()];
                    case 2:
                        userId = _a.sent();
                        data = cipher.toCipherData(userId);
                        return [4 /*yield*/, this.upsert(data)];
                    case 3:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.upsert = function (cipher) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, ciphers, c;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.ciphersPrefix + userId)];
                    case 2:
                        ciphers = _a.sent();
                        if (ciphers == null) {
                            ciphers = {};
                        }
                        if (cipher instanceof cipherData_1.CipherData) {
                            c = cipher;
                            ciphers[c.id] = c;
                        }
                        else {
                            cipher.forEach(function (c) {
                                ciphers[c.id] = c;
                            });
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.ciphersPrefix + userId, ciphers)];
                    case 3:
                        _a.sent();
                        this.decryptedCipherCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.replace = function (ciphers) {
        return __awaiter(this, void 0, void 0, function () {
            var userId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.save(Keys.ciphersPrefix + userId, ciphers)];
                    case 2:
                        _a.sent();
                        this.decryptedCipherCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.clear = function (userId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.remove(Keys.ciphersPrefix + userId)];
                    case 1:
                        _a.sent();
                        this.decryptedCipherCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.moveManyWithServer = function (ids, folderId) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, ciphers;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.apiService.putMoveCiphers(new cipherBulkMoveRequest_1.CipherBulkMoveRequest(ids, folderId))];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.userService.getUserId()];
                    case 2:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.ciphersPrefix + userId)];
                    case 3:
                        ciphers = _a.sent();
                        if (ciphers == null) {
                            ciphers = {};
                        }
                        ids.forEach(function (id) {
                            if (ciphers.hasOwnProperty(id)) {
                                ciphers[id].folderId = folderId;
                            }
                        });
                        return [4 /*yield*/, this.storageService.save(Keys.ciphersPrefix + userId, ciphers)];
                    case 4:
                        _a.sent();
                        this.decryptedCipherCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.delete = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, ciphers, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.ciphersPrefix + userId)];
                    case 2:
                        ciphers = _a.sent();
                        if (ciphers == null) {
                            return [2 /*return*/];
                        }
                        if (typeof id === 'string') {
                            i = id;
                            delete ciphers[id];
                        }
                        else {
                            id.forEach(function (i) {
                                delete ciphers[i];
                            });
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.ciphersPrefix + userId, ciphers)];
                    case 3:
                        _a.sent();
                        this.decryptedCipherCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.deleteWithServer = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.apiService.deleteCipher(id)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.delete(id)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.deleteManyWithServer = function (ids) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.apiService.deleteManyCiphers(new cipherBulkDeleteRequest_1.CipherBulkDeleteRequest(ids))];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.delete(ids)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.deleteAttachment = function (id, attachmentId) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, ciphers, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.ciphersPrefix + userId)];
                    case 2:
                        ciphers = _a.sent();
                        if (ciphers == null || !ciphers.hasOwnProperty(id) || ciphers[id].attachments == null) {
                            return [2 /*return*/];
                        }
                        for (i = 0; i < ciphers[id].attachments.length; i++) {
                            if (ciphers[id].attachments[i].id === attachmentId) {
                                ciphers[id].attachments.splice(i, 1);
                            }
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.ciphersPrefix + userId, ciphers)];
                    case 3:
                        _a.sent();
                        this.decryptedCipherCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.deleteAttachmentWithServer = function (id, attachmentId) {
        return __awaiter(this, void 0, void 0, function () {
            var e_4;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, this.apiService.deleteCipherAttachment(id, attachmentId)];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        e_4 = _a.sent();
                        return [2 /*return*/, Promise.reject(e_4.getSingleMessage())];
                    case 3: return [4 /*yield*/, this.deleteAttachment(id, attachmentId)];
                    case 4:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.sortCiphersByLastUsed = function (a, b) {
        var aLastUsed = a.localData && a.localData.lastUsedDate ? a.localData.lastUsedDate : null;
        var bLastUsed = b.localData && b.localData.lastUsedDate ? b.localData.lastUsedDate : null;
        if (aLastUsed != null && bLastUsed != null && aLastUsed < bLastUsed) {
            return 1;
        }
        if (aLastUsed != null && bLastUsed == null) {
            return -1;
        }
        if (bLastUsed != null && aLastUsed != null && aLastUsed > bLastUsed) {
            return -1;
        }
        if (bLastUsed != null && aLastUsed == null) {
            return 1;
        }
        return 0;
    };
    CipherService.prototype.sortCiphersByLastUsedThenName = function (a, b) {
        var result = this.sortCiphersByLastUsed(a, b);
        if (result !== 0) {
            return result;
        }
        return this.getLocaleSortingFunction()(a, b);
    };
    CipherService.prototype.getLocaleSortingFunction = function () {
        var _this = this;
        return function (a, b) {
            var aName = a.name;
            var bName = b.name;
            if (aName == null && bName != null) {
                return -1;
            }
            if (aName != null && bName == null) {
                return 1;
            }
            if (aName == null && bName == null) {
                return 0;
            }
            var result = _this.i18nService.collator ? _this.i18nService.collator.compare(aName, bName) :
                aName.localeCompare(bName);
            if (result !== 0 || a.type !== cipherType_1.CipherType.Login || b.type !== cipherType_1.CipherType.Login) {
                return result;
            }
            if (a.login.username != null) {
                aName += a.login.username;
            }
            if (b.login.username != null) {
                bName += b.login.username;
            }
            return _this.i18nService.collator ? _this.i18nService.collator.compare(aName, bName) :
                aName.localeCompare(bName);
        };
    };
    // Helpers
    CipherService.prototype.encryptObjProperty = function (model, obj, map, key) {
        return __awaiter(this, void 0, void 0, function () {
            var promises, self, prop;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        promises = [];
                        self = this;
                        for (prop in map) {
                            if (!map.hasOwnProperty(prop)) {
                                continue;
                            }
                            // tslint:disable-next-line
                            (function (theProp, theObj) {
                                var p = Promise.resolve().then(function () {
                                    var modelProp = model[(map[theProp] || theProp)];
                                    if (modelProp && modelProp !== '') {
                                        return self.cryptoService.encrypt(modelProp, key);
                                    }
                                    return null;
                                }).then(function (val) {
                                    theObj[theProp] = val;
                                });
                                promises.push(p);
                            })(prop, obj);
                        }
                        return [4 /*yield*/, Promise.all(promises)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CipherService.prototype.encryptCipherData = function (cipher, model, key) {
        return __awaiter(this, void 0, void 0, function () {
            var _a, i, loginUri;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = cipher.type;
                        switch (_a) {
                            case cipherType_1.CipherType.Login: return [3 /*break*/, 1];
                            case cipherType_1.CipherType.SecureNote: return [3 /*break*/, 7];
                            case cipherType_1.CipherType.Card: return [3 /*break*/, 8];
                            case cipherType_1.CipherType.Identity: return [3 /*break*/, 10];
                        }
                        return [3 /*break*/, 12];
                    case 1:
                        cipher.login = new login_1.Login();
                        cipher.login.passwordRevisionDate = model.login.passwordRevisionDate;
                        return [4 /*yield*/, this.encryptObjProperty(model.login, cipher.login, {
                                username: null,
                                password: null,
                                totp: null,
                            }, key)];
                    case 2:
                        _b.sent();
                        if (!(model.login.uris != null)) return [3 /*break*/, 6];
                        cipher.login.uris = [];
                        i = 0;
                        _b.label = 3;
                    case 3:
                        if (!(i < model.login.uris.length)) return [3 /*break*/, 6];
                        loginUri = new loginUri_1.LoginUri();
                        loginUri.match = model.login.uris[i].match;
                        return [4 /*yield*/, this.encryptObjProperty(model.login.uris[i], loginUri, {
                                uri: null,
                            }, key)];
                    case 4:
                        _b.sent();
                        cipher.login.uris.push(loginUri);
                        _b.label = 5;
                    case 5:
                        i++;
                        return [3 /*break*/, 3];
                    case 6: return [2 /*return*/];
                    case 7:
                        cipher.secureNote = new secureNote_1.SecureNote();
                        cipher.secureNote.type = model.secureNote.type;
                        return [2 /*return*/];
                    case 8:
                        cipher.card = new card_1.Card();
                        return [4 /*yield*/, this.encryptObjProperty(model.card, cipher.card, {
                                cardholderName: null,
                                brand: null,
                                number: null,
                                expMonth: null,
                                expYear: null,
                                code: null,
                            }, key)];
                    case 9:
                        _b.sent();
                        return [2 /*return*/];
                    case 10:
                        cipher.identity = new identity_1.Identity();
                        return [4 /*yield*/, this.encryptObjProperty(model.identity, cipher.identity, {
                                title: null,
                                firstName: null,
                                middleName: null,
                                lastName: null,
                                address1: null,
                                address2: null,
                                address3: null,
                                city: null,
                                state: null,
                                postalCode: null,
                                country: null,
                                company: null,
                                email: null,
                                phone: null,
                                ssn: null,
                                username: null,
                                passportNumber: null,
                                licenseNumber: null,
                            }, key)];
                    case 11:
                        _b.sent();
                        return [2 /*return*/];
                    case 12: throw new Error('Unknown cipher type.');
                }
            });
        });
    };
    return CipherService;
}());
exports.CipherService = CipherService;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./jslib/src/services/collection.service.ts":
/*!**************************************************!*\
  !*** ./jslib/src/services/collection.service.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var collectionData_1 = __webpack_require__(/*! ../models/data/collectionData */ "./jslib/src/models/data/collectionData.ts");
var collection_1 = __webpack_require__(/*! ../models/domain/collection */ "./jslib/src/models/domain/collection.ts");
var utils_1 = __webpack_require__(/*! ../misc/utils */ "./jslib/src/misc/utils.ts");
var Keys = {
    collectionsPrefix: 'collections_',
};
var CollectionService = /** @class */ (function () {
    function CollectionService(cryptoService, userService, storageService, i18nService) {
        this.cryptoService = cryptoService;
        this.userService = userService;
        this.storageService = storageService;
        this.i18nService = i18nService;
    }
    CollectionService.prototype.clearCache = function () {
        this.decryptedCollectionCache = null;
    };
    CollectionService.prototype.encrypt = function (model) {
        return __awaiter(this, void 0, void 0, function () {
            var key, collection, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (model.organizationId == null) {
                            throw new Error('Collection has no organization id.');
                        }
                        return [4 /*yield*/, this.cryptoService.getOrgKey(model.organizationId)];
                    case 1:
                        key = _b.sent();
                        if (key == null) {
                            throw new Error('No key for this collection\'s organization.');
                        }
                        collection = new collection_1.Collection();
                        collection.id = model.id;
                        collection.organizationId = model.organizationId;
                        collection.readOnly = model.readOnly;
                        _a = collection;
                        return [4 /*yield*/, this.cryptoService.encrypt(model.name, key)];
                    case 2:
                        _a.name = _b.sent();
                        return [2 /*return*/, collection];
                }
            });
        });
    };
    CollectionService.prototype.decryptMany = function (collections) {
        return __awaiter(this, void 0, void 0, function () {
            var decCollections, promises;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (collections == null) {
                            return [2 /*return*/, []];
                        }
                        decCollections = [];
                        promises = [];
                        collections.forEach(function (collection) {
                            promises.push(collection.decrypt().then(function (c) { return decCollections.push(c); }));
                        });
                        return [4 /*yield*/, Promise.all(promises)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, decCollections.sort(utils_1.Utils.getSortFunction(this.i18nService, 'name'))];
                }
            });
        });
    };
    CollectionService.prototype.get = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, collections;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.collectionsPrefix + userId)];
                    case 2:
                        collections = _a.sent();
                        if (collections == null || !collections.hasOwnProperty(id)) {
                            return [2 /*return*/, null];
                        }
                        return [2 /*return*/, new collection_1.Collection(collections[id])];
                }
            });
        });
    };
    CollectionService.prototype.getAll = function () {
        return __awaiter(this, void 0, void 0, function () {
            var userId, collections, response, id;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.collectionsPrefix + userId)];
                    case 2:
                        collections = _a.sent();
                        response = [];
                        for (id in collections) {
                            if (collections.hasOwnProperty(id)) {
                                response.push(new collection_1.Collection(collections[id]));
                            }
                        }
                        return [2 /*return*/, response];
                }
            });
        });
    };
    CollectionService.prototype.getAllDecrypted = function () {
        return __awaiter(this, void 0, void 0, function () {
            var hasKey, collections, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.decryptedCollectionCache != null) {
                            return [2 /*return*/, this.decryptedCollectionCache];
                        }
                        return [4 /*yield*/, this.cryptoService.hasKey()];
                    case 1:
                        hasKey = _b.sent();
                        if (!hasKey) {
                            throw new Error('No key.');
                        }
                        return [4 /*yield*/, this.getAll()];
                    case 2:
                        collections = _b.sent();
                        _a = this;
                        return [4 /*yield*/, this.decryptMany(collections)];
                    case 3:
                        _a.decryptedCollectionCache = _b.sent();
                        return [2 /*return*/, this.decryptedCollectionCache];
                }
            });
        });
    };
    CollectionService.prototype.upsert = function (collection) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, collections, c;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.collectionsPrefix + userId)];
                    case 2:
                        collections = _a.sent();
                        if (collections == null) {
                            collections = {};
                        }
                        if (collection instanceof collectionData_1.CollectionData) {
                            c = collection;
                            collections[c.id] = c;
                        }
                        else {
                            collection.forEach(function (c) {
                                collections[c.id] = c;
                            });
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.collectionsPrefix + userId, collections)];
                    case 3:
                        _a.sent();
                        this.decryptedCollectionCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CollectionService.prototype.replace = function (collections) {
        return __awaiter(this, void 0, void 0, function () {
            var userId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.save(Keys.collectionsPrefix + userId, collections)];
                    case 2:
                        _a.sent();
                        this.decryptedCollectionCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CollectionService.prototype.clear = function (userId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.remove(Keys.collectionsPrefix + userId)];
                    case 1:
                        _a.sent();
                        this.decryptedCollectionCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CollectionService.prototype.delete = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, collections, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.collectionsPrefix + userId)];
                    case 2:
                        collections = _a.sent();
                        if (collections == null) {
                            return [2 /*return*/];
                        }
                        if (typeof id === 'string') {
                            i = id;
                            delete collections[id];
                        }
                        else {
                            id.forEach(function (i) {
                                delete collections[i];
                            });
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.collectionsPrefix + userId, collections)];
                    case 3:
                        _a.sent();
                        this.decryptedCollectionCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    return CollectionService;
}());
exports.CollectionService = CollectionService;


/***/ }),

/***/ "./jslib/src/services/constants.service.ts":
/*!*************************************************!*\
  !*** ./jslib/src/services/constants.service.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ConstantsService = /** @class */ (function () {
    function ConstantsService() {
        this.environmentUrlsKey = ConstantsService.environmentUrlsKey;
        this.disableGaKey = ConstantsService.disableGaKey;
        this.disableAddLoginNotificationKey = ConstantsService.disableAddLoginNotificationKey;
        this.disableContextMenuItemKey = ConstantsService.disableContextMenuItemKey;
        this.disableFaviconKey = ConstantsService.disableFaviconKey;
        this.disableAutoTotpCopyKey = ConstantsService.disableAutoTotpCopyKey;
        this.enableAutoFillOnPageLoadKey = ConstantsService.enableAutoFillOnPageLoadKey;
        this.lockOptionKey = ConstantsService.lockOptionKey;
        this.lastActiveKey = ConstantsService.lastActiveKey;
        this.neverDomainsKey = ConstantsService.neverDomainsKey;
        this.installedVersionKey = ConstantsService.installedVersionKey;
        this.localeKey = ConstantsService.localeKey;
        this.themeKey = ConstantsService.themeKey;
    }
    ConstantsService.environmentUrlsKey = 'environmentUrls';
    ConstantsService.disableGaKey = 'disableGa';
    ConstantsService.disableAddLoginNotificationKey = 'disableAddLoginNotification';
    ConstantsService.disableContextMenuItemKey = 'disableContextMenuItem';
    ConstantsService.disableFaviconKey = 'disableFavicon';
    ConstantsService.disableAutoTotpCopyKey = 'disableAutoTotpCopy';
    ConstantsService.enableAutoFillOnPageLoadKey = 'enableAutoFillOnPageLoad';
    ConstantsService.lockOptionKey = 'lockOption';
    ConstantsService.lastActiveKey = 'lastActive';
    ConstantsService.neverDomainsKey = 'neverDomains';
    ConstantsService.installedVersionKey = 'installedVersion';
    ConstantsService.localeKey = 'locale';
    ConstantsService.themeKey = 'theme';
    return ConstantsService;
}());
exports.ConstantsService = ConstantsService;


/***/ }),

/***/ "./jslib/src/services/container.service.ts":
/*!*************************************************!*\
  !*** ./jslib/src/services/container.service.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ContainerService = /** @class */ (function () {
    function ContainerService(cryptoService, platformUtilsService) {
        this.cryptoService = cryptoService;
        this.platformUtilsService = platformUtilsService;
    }
    // deprecated, use attachToGlobal instead
    ContainerService.prototype.attachToWindow = function (win) {
        this.attachToGlobal(win);
    };
    ContainerService.prototype.attachToGlobal = function (global) {
        if (!global.bitwardenContainerService) {
            global.bitwardenContainerService = this;
        }
    };
    ContainerService.prototype.getCryptoService = function () {
        return this.cryptoService;
    };
    ContainerService.prototype.getPlatformUtilsService = function () {
        return this.platformUtilsService;
    };
    return ContainerService;
}());
exports.ContainerService = ContainerService;


/***/ }),

/***/ "./jslib/src/services/crypto.service.ts":
/*!**********************************************!*\
  !*** ./jslib/src/services/crypto.service.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var encryptionType_1 = __webpack_require__(/*! ../enums/encryptionType */ "./jslib/src/enums/encryptionType.ts");
var cipherString_1 = __webpack_require__(/*! ../models/domain/cipherString */ "./jslib/src/models/domain/cipherString.ts");
var encryptedObject_1 = __webpack_require__(/*! ../models/domain/encryptedObject */ "./jslib/src/models/domain/encryptedObject.ts");
var symmetricCryptoKey_1 = __webpack_require__(/*! ../models/domain/symmetricCryptoKey */ "./jslib/src/models/domain/symmetricCryptoKey.ts");
var constants_service_1 = __webpack_require__(/*! ./constants.service */ "./jslib/src/services/constants.service.ts");
var sequentialize_1 = __webpack_require__(/*! ../misc/sequentialize */ "./jslib/src/misc/sequentialize.ts");
var utils_1 = __webpack_require__(/*! ../misc/utils */ "./jslib/src/misc/utils.ts");
var Keys = {
    key: 'key',
    encOrgKeys: 'encOrgKeys',
    encPrivateKey: 'encPrivateKey',
    encKey: 'encKey',
    keyHash: 'keyHash',
};
var CryptoService = /** @class */ (function () {
    function CryptoService(storageService, secureStorageService, cryptoFunctionService) {
        this.storageService = storageService;
        this.secureStorageService = secureStorageService;
        this.cryptoFunctionService = cryptoFunctionService;
    }
    CryptoService.prototype.setKey = function (key) {
        return __awaiter(this, void 0, void 0, function () {
            var option;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.key = key;
                        return [4 /*yield*/, this.storageService.get(constants_service_1.ConstantsService.lockOptionKey)];
                    case 1:
                        option = _a.sent();
                        if (option != null) {
                            // if we have a lock option set, we do not store the key
                            return [2 /*return*/];
                        }
                        return [2 /*return*/, this.secureStorageService.save(Keys.key, key.keyB64)];
                }
            });
        });
    };
    CryptoService.prototype.setKeyHash = function (keyHash) {
        this.keyHash = keyHash;
        return this.storageService.save(Keys.keyHash, keyHash);
    };
    CryptoService.prototype.setEncKey = function (encKey) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (encKey == null) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.encKey, encKey)];
                    case 1:
                        _a.sent();
                        this.encKey = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CryptoService.prototype.setEncPrivateKey = function (encPrivateKey) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (encPrivateKey == null) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.encPrivateKey, encPrivateKey)];
                    case 1:
                        _a.sent();
                        this.privateKey = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CryptoService.prototype.setOrgKeys = function (orgs) {
        var orgKeys = {};
        orgs.forEach(function (org) {
            orgKeys[org.id] = org.key;
        });
        return this.storageService.save(Keys.encOrgKeys, orgKeys);
    };
    CryptoService.prototype.getKey = function () {
        return __awaiter(this, void 0, void 0, function () {
            var key;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.key != null) {
                            return [2 /*return*/, this.key];
                        }
                        return [4 /*yield*/, this.secureStorageService.get(Keys.key)];
                    case 1:
                        key = _a.sent();
                        if (key != null) {
                            this.key = new symmetricCryptoKey_1.SymmetricCryptoKey(utils_1.Utils.fromB64ToArray(key).buffer);
                        }
                        return [2 /*return*/, key == null ? null : this.key];
                }
            });
        });
    };
    CryptoService.prototype.getKeyHash = function () {
        if (this.keyHash != null) {
            return Promise.resolve(this.keyHash);
        }
        return this.storageService.get(Keys.keyHash);
    };
    CryptoService.prototype.getEncKey = function () {
        return __awaiter(this, void 0, void 0, function () {
            var encKey, key, decEncKey, encKeyCipher, newKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.encKey != null) {
                            return [2 /*return*/, this.encKey];
                        }
                        return [4 /*yield*/, this.storageService.get(Keys.encKey)];
                    case 1:
                        encKey = _a.sent();
                        if (encKey == null) {
                            return [2 /*return*/, null];
                        }
                        return [4 /*yield*/, this.getKey()];
                    case 2:
                        key = _a.sent();
                        if (key == null) {
                            return [2 /*return*/, null];
                        }
                        encKeyCipher = new cipherString_1.CipherString(encKey);
                        if (!(encKeyCipher.encryptionType === encryptionType_1.EncryptionType.AesCbc256_B64)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.decrypt(encKeyCipher, key)];
                    case 3:
                        decEncKey = _a.sent();
                        return [3 /*break*/, 8];
                    case 4:
                        if (!(encKeyCipher.encryptionType === encryptionType_1.EncryptionType.AesCbc256_HmacSha256_B64)) return [3 /*break*/, 7];
                        return [4 /*yield*/, this.stretchKey(key)];
                    case 5:
                        newKey = _a.sent();
                        return [4 /*yield*/, this.decrypt(encKeyCipher, newKey)];
                    case 6:
                        decEncKey = _a.sent();
                        return [3 /*break*/, 8];
                    case 7: throw new Error('Unsupported encKey type.');
                    case 8:
                        if (decEncKey == null) {
                            return [2 /*return*/, null];
                        }
                        this.encKey = new symmetricCryptoKey_1.SymmetricCryptoKey(decEncKey);
                        return [2 /*return*/, this.encKey];
                }
            });
        });
    };
    CryptoService.prototype.getPublicKey = function () {
        return __awaiter(this, void 0, void 0, function () {
            var privateKey, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.publicKey != null) {
                            return [2 /*return*/, this.publicKey];
                        }
                        return [4 /*yield*/, this.getPrivateKey()];
                    case 1:
                        privateKey = _b.sent();
                        if (privateKey == null) {
                            return [2 /*return*/, null];
                        }
                        _a = this;
                        return [4 /*yield*/, this.cryptoFunctionService.rsaExtractPublicKey(privateKey)];
                    case 2:
                        _a.publicKey = _b.sent();
                        return [2 /*return*/, this.publicKey];
                }
            });
        });
    };
    CryptoService.prototype.getPrivateKey = function () {
        return __awaiter(this, void 0, void 0, function () {
            var encPrivateKey, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.privateKey != null) {
                            return [2 /*return*/, this.privateKey];
                        }
                        return [4 /*yield*/, this.storageService.get(Keys.encPrivateKey)];
                    case 1:
                        encPrivateKey = _b.sent();
                        if (encPrivateKey == null) {
                            return [2 /*return*/, null];
                        }
                        _a = this;
                        return [4 /*yield*/, this.decrypt(new cipherString_1.CipherString(encPrivateKey), null)];
                    case 2:
                        _a.privateKey = _b.sent();
                        return [2 /*return*/, this.privateKey];
                }
            });
        });
    };
    CryptoService.prototype.getOrgKeys = function () {
        return __awaiter(this, void 0, void 0, function () {
            var encOrgKeys, orgKeys, setKey, _a, _b, _i, orgId, decValue;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (this.orgKeys != null && this.orgKeys.size > 0) {
                            return [2 /*return*/, this.orgKeys];
                        }
                        return [4 /*yield*/, this.storageService.get(Keys.encOrgKeys)];
                    case 1:
                        encOrgKeys = _c.sent();
                        if (encOrgKeys == null) {
                            return [2 /*return*/, null];
                        }
                        orgKeys = new Map();
                        setKey = false;
                        _a = [];
                        for (_b in encOrgKeys)
                            _a.push(_b);
                        _i = 0;
                        _c.label = 2;
                    case 2:
                        if (!(_i < _a.length)) return [3 /*break*/, 5];
                        orgId = _a[_i];
                        if (!encOrgKeys.hasOwnProperty(orgId)) {
                            return [3 /*break*/, 4];
                        }
                        return [4 /*yield*/, this.rsaDecrypt(encOrgKeys[orgId])];
                    case 3:
                        decValue = _c.sent();
                        orgKeys.set(orgId, new symmetricCryptoKey_1.SymmetricCryptoKey(decValue));
                        setKey = true;
                        _c.label = 4;
                    case 4:
                        _i++;
                        return [3 /*break*/, 2];
                    case 5:
                        if (setKey) {
                            this.orgKeys = orgKeys;
                        }
                        return [2 /*return*/, this.orgKeys];
                }
            });
        });
    };
    CryptoService.prototype.getOrgKey = function (orgId) {
        return __awaiter(this, void 0, void 0, function () {
            var orgKeys;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (orgId == null) {
                            return [2 /*return*/, null];
                        }
                        return [4 /*yield*/, this.getOrgKeys()];
                    case 1:
                        orgKeys = _a.sent();
                        if (orgKeys == null || !orgKeys.has(orgId)) {
                            return [2 /*return*/, null];
                        }
                        return [2 /*return*/, orgKeys.get(orgId)];
                }
            });
        });
    };
    CryptoService.prototype.hasKey = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getKey()];
                    case 1: return [2 /*return*/, (_a.sent()) != null];
                }
            });
        });
    };
    CryptoService.prototype.hasEncKey = function () {
        return __awaiter(this, void 0, void 0, function () {
            var encKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.get(Keys.encKey)];
                    case 1:
                        encKey = _a.sent();
                        return [2 /*return*/, encKey != null];
                }
            });
        });
    };
    CryptoService.prototype.clearKey = function () {
        this.key = this.legacyEtmKey = null;
        return this.secureStorageService.remove(Keys.key);
    };
    CryptoService.prototype.clearKeyHash = function () {
        this.keyHash = null;
        return this.storageService.remove(Keys.keyHash);
    };
    CryptoService.prototype.clearEncKey = function (memoryOnly) {
        this.encKey = null;
        if (memoryOnly) {
            return Promise.resolve();
        }
        return this.storageService.remove(Keys.encKey);
    };
    CryptoService.prototype.clearKeyPair = function (memoryOnly) {
        this.privateKey = null;
        this.publicKey = null;
        if (memoryOnly) {
            return Promise.resolve();
        }
        return this.storageService.remove(Keys.encPrivateKey);
    };
    CryptoService.prototype.clearOrgKeys = function (memoryOnly) {
        this.orgKeys = null;
        if (memoryOnly) {
            return Promise.resolve();
        }
        return this.storageService.remove(Keys.encOrgKeys);
    };
    CryptoService.prototype.clearKeys = function () {
        return Promise.all([
            this.clearKey(),
            this.clearKeyHash(),
            this.clearOrgKeys(),
            this.clearEncKey(),
            this.clearKeyPair(),
        ]);
    };
    CryptoService.prototype.toggleKey = function () {
        return __awaiter(this, void 0, void 0, function () {
            var key, option;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getKey()];
                    case 1:
                        key = _a.sent();
                        return [4 /*yield*/, this.storageService.get(constants_service_1.ConstantsService.lockOptionKey)];
                    case 2:
                        option = _a.sent();
                        if (!(option != null || option === 0)) return [3 /*break*/, 4];
                        // if we have a lock option set, clear the key
                        return [4 /*yield*/, this.clearKey()];
                    case 3:
                        // if we have a lock option set, clear the key
                        _a.sent();
                        this.key = key;
                        return [2 /*return*/];
                    case 4: return [4 /*yield*/, this.setKey(key)];
                    case 5:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CryptoService.prototype.makeKey = function (password, salt) {
        return __awaiter(this, void 0, void 0, function () {
            var key;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.cryptoFunctionService.pbkdf2(password, salt, 'sha256', 5000)];
                    case 1:
                        key = _a.sent();
                        return [2 /*return*/, new symmetricCryptoKey_1.SymmetricCryptoKey(key)];
                }
            });
        });
    };
    CryptoService.prototype.makeShareKey = function () {
        return __awaiter(this, void 0, void 0, function () {
            var shareKey, publicKey, encKey, encShareKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.cryptoFunctionService.randomBytes(64)];
                    case 1:
                        shareKey = _a.sent();
                        return [4 /*yield*/, this.getPublicKey()];
                    case 2:
                        publicKey = _a.sent();
                        return [4 /*yield*/, this.getEncKey()];
                    case 3:
                        encKey = _a.sent();
                        return [4 /*yield*/, this.rsaEncrypt(shareKey, publicKey, encKey)];
                    case 4:
                        encShareKey = _a.sent();
                        return [2 /*return*/, [encShareKey, new symmetricCryptoKey_1.SymmetricCryptoKey(shareKey)]];
                }
            });
        });
    };
    CryptoService.prototype.makeKeyPair = function (key) {
        return __awaiter(this, void 0, void 0, function () {
            var keyPair, publicB64, privateEnc;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.cryptoFunctionService.rsaGenerateKeyPair(2048)];
                    case 1:
                        keyPair = _a.sent();
                        publicB64 = utils_1.Utils.fromBufferToB64(keyPair[0]);
                        return [4 /*yield*/, this.encrypt(keyPair[1], key)];
                    case 2:
                        privateEnc = _a.sent();
                        return [2 /*return*/, [publicB64, privateEnc]];
                }
            });
        });
    };
    CryptoService.prototype.hashPassword = function (password, key) {
        return __awaiter(this, void 0, void 0, function () {
            var hash;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(key == null)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.getKey()];
                    case 1:
                        key = _a.sent();
                        _a.label = 2;
                    case 2:
                        if (password == null || key == null) {
                            throw new Error('Invalid parameters.');
                        }
                        return [4 /*yield*/, this.cryptoFunctionService.pbkdf2(key.key, password, 'sha256', 1)];
                    case 3:
                        hash = _a.sent();
                        return [2 /*return*/, utils_1.Utils.fromBufferToB64(hash)];
                }
            });
        });
    };
    CryptoService.prototype.makeEncKey = function (key) {
        return __awaiter(this, void 0, void 0, function () {
            var encKey, encKeyEnc;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.cryptoFunctionService.randomBytes(64)];
                    case 1:
                        encKey = _a.sent();
                        encKeyEnc = null;
                        return [4 /*yield*/, this.encrypt(encKey, key)];
                    case 2:
                        // TODO: Uncomment when we're ready to enable key stretching
                        encKeyEnc = _a.sent();
                        /*
                        if (key.key.byteLength === 32) {
                            const newKey = await this.stretchKey(key);
                            encKeyEnc = await this.encrypt(encKey, newKey);
                        } else if (key.key.byteLength === 64) {
                            encKeyEnc = await this.encrypt(encKey, key);
                        } else {
                            throw new Error('Invalid key size.');
                        }
                        */
                        return [2 /*return*/, [new symmetricCryptoKey_1.SymmetricCryptoKey(encKey), encKeyEnc]];
                }
            });
        });
    };
    CryptoService.prototype.encrypt = function (plainValue, key) {
        return __awaiter(this, void 0, void 0, function () {
            var plainBuf, encObj, iv, data, mac;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (plainValue == null) {
                            return [2 /*return*/, Promise.resolve(null)];
                        }
                        if (typeof (plainValue) === 'string') {
                            plainBuf = utils_1.Utils.fromUtf8ToArray(plainValue).buffer;
                        }
                        else {
                            plainBuf = plainValue;
                        }
                        return [4 /*yield*/, this.aesEncrypt(plainBuf, key)];
                    case 1:
                        encObj = _a.sent();
                        iv = utils_1.Utils.fromBufferToB64(encObj.iv);
                        data = utils_1.Utils.fromBufferToB64(encObj.data);
                        mac = encObj.mac != null ? utils_1.Utils.fromBufferToB64(encObj.mac) : null;
                        return [2 /*return*/, new cipherString_1.CipherString(encObj.key.encType, iv, data, mac)];
                }
            });
        });
    };
    CryptoService.prototype.encryptToBytes = function (plainValue, key) {
        return __awaiter(this, void 0, void 0, function () {
            var encValue, macLen, encBytes;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.aesEncrypt(plainValue, key)];
                    case 1:
                        encValue = _a.sent();
                        macLen = 0;
                        if (encValue.mac != null) {
                            macLen = encValue.mac.byteLength;
                        }
                        encBytes = new Uint8Array(1 + encValue.iv.byteLength + macLen + encValue.data.byteLength);
                        encBytes.set([encValue.key.encType]);
                        encBytes.set(new Uint8Array(encValue.iv), 1);
                        if (encValue.mac != null) {
                            encBytes.set(new Uint8Array(encValue.mac), 1 + encValue.iv.byteLength);
                        }
                        encBytes.set(new Uint8Array(encValue.data), 1 + encValue.iv.byteLength + macLen);
                        return [2 /*return*/, encBytes.buffer];
                }
            });
        });
    };
    CryptoService.prototype.rsaEncrypt = function (data, publicKey, key) {
        return __awaiter(this, void 0, void 0, function () {
            var type, encBytes, mac, macBytes;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(publicKey == null)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.getPublicKey()];
                    case 1:
                        publicKey = _a.sent();
                        _a.label = 2;
                    case 2:
                        if (publicKey == null) {
                            throw new Error('Public key unavailable.');
                        }
                        type = encryptionType_1.EncryptionType.Rsa2048_OaepSha1_B64;
                        return [4 /*yield*/, this.cryptoFunctionService.rsaEncrypt(data, publicKey, 'sha1')];
                    case 3:
                        encBytes = _a.sent();
                        mac = null;
                        if (!(key != null && key.macKey != null)) return [3 /*break*/, 5];
                        type = encryptionType_1.EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64;
                        return [4 /*yield*/, this.cryptoFunctionService.hmac(encBytes, key.macKey, 'sha256')];
                    case 4:
                        macBytes = _a.sent();
                        mac = utils_1.Utils.fromBufferToB64(macBytes);
                        _a.label = 5;
                    case 5: return [2 /*return*/, new cipherString_1.CipherString(type, utils_1.Utils.fromBufferToB64(encBytes), null, mac)];
                }
            });
        });
    };
    CryptoService.prototype.decrypt = function (cipherString, key) {
        return __awaiter(this, void 0, void 0, function () {
            var iv, data, mac, decipher;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        iv = utils_1.Utils.fromB64ToArray(cipherString.iv).buffer;
                        data = utils_1.Utils.fromB64ToArray(cipherString.data).buffer;
                        mac = cipherString.mac ? utils_1.Utils.fromB64ToArray(cipherString.mac).buffer : null;
                        return [4 /*yield*/, this.aesDecryptToBytes(cipherString.encryptionType, data, iv, mac, key)];
                    case 1:
                        decipher = _a.sent();
                        if (decipher == null) {
                            return [2 /*return*/, null];
                        }
                        return [2 /*return*/, decipher];
                }
            });
        });
    };
    CryptoService.prototype.decryptToUtf8 = function (cipherString, key) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.aesDecryptToUtf8(cipherString.encryptionType, cipherString.data, cipherString.iv, cipherString.mac, key)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    CryptoService.prototype.decryptFromBytes = function (encBuf, key) {
        return __awaiter(this, void 0, void 0, function () {
            var encBytes, encType, ctBytes, ivBytes, macBytes;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (encBuf == null) {
                            throw new Error('no encBuf.');
                        }
                        encBytes = new Uint8Array(encBuf);
                        encType = encBytes[0];
                        ctBytes = null;
                        ivBytes = null;
                        macBytes = null;
                        switch (encType) {
                            case encryptionType_1.EncryptionType.AesCbc128_HmacSha256_B64:
                            case encryptionType_1.EncryptionType.AesCbc256_HmacSha256_B64:
                                if (encBytes.length <= 49) { // 1 + 16 + 32 + ctLength
                                    return [2 /*return*/, null];
                                }
                                ivBytes = encBytes.slice(1, 17);
                                macBytes = encBytes.slice(17, 49);
                                ctBytes = encBytes.slice(49);
                                break;
                            case encryptionType_1.EncryptionType.AesCbc256_B64:
                                if (encBytes.length <= 17) { // 1 + 16 + ctLength
                                    return [2 /*return*/, null];
                                }
                                ivBytes = encBytes.slice(1, 17);
                                ctBytes = encBytes.slice(17);
                                break;
                            default:
                                return [2 /*return*/, null];
                        }
                        return [4 /*yield*/, this.aesDecryptToBytes(encType, ctBytes.buffer, ivBytes.buffer, macBytes != null ? macBytes.buffer : null, key)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    // EFForg/OpenWireless
    // ref https://github.com/EFForg/OpenWireless/blob/master/app/js/diceware.js
    CryptoService.prototype.randomNumber = function (min, max) {
        return __awaiter(this, void 0, void 0, function () {
            var rval, range, bitsNeeded, bytesNeeded, mask, byteArray, _a, p, i;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        rval = 0;
                        range = max - min + 1;
                        bitsNeeded = Math.ceil(Math.log2(range));
                        if (bitsNeeded > 53) {
                            throw new Error('We cannot generate numbers larger than 53 bits.');
                        }
                        bytesNeeded = Math.ceil(bitsNeeded / 8);
                        mask = Math.pow(2, bitsNeeded) - 1;
                        _a = Uint8Array.bind;
                        return [4 /*yield*/, this.cryptoFunctionService.randomBytes(bytesNeeded)];
                    case 1:
                        byteArray = new (_a.apply(Uint8Array, [void 0, _b.sent()]))();
                        p = (bytesNeeded - 1) * 8;
                        for (i = 0; i < bytesNeeded; i++) {
                            rval += byteArray[i] * Math.pow(2, p);
                            p -= 8;
                        }
                        // Use & to apply the mask and reduce the number of recursive lookups
                        // tslint:disable-next-line
                        rval = rval & mask;
                        if (rval >= range) {
                            // Integer out of acceptable range
                            return [2 /*return*/, this.randomNumber(min, max)];
                        }
                        // Return an integer that falls within the range
                        return [2 /*return*/, min + rval];
                }
            });
        });
    };
    // Helpers
    CryptoService.prototype.aesEncrypt = function (data, key) {
        return __awaiter(this, void 0, void 0, function () {
            var obj, _a, _b, _c, macData, _d;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        obj = new encryptedObject_1.EncryptedObject();
                        _a = obj;
                        return [4 /*yield*/, this.getKeyForEncryption(key)];
                    case 1:
                        _a.key = _e.sent();
                        _b = obj;
                        return [4 /*yield*/, this.cryptoFunctionService.randomBytes(16)];
                    case 2:
                        _b.iv = _e.sent();
                        _c = obj;
                        return [4 /*yield*/, this.cryptoFunctionService.aesEncrypt(data, obj.iv, obj.key.encKey)];
                    case 3:
                        _c.data = _e.sent();
                        if (!(obj.key.macKey != null)) return [3 /*break*/, 5];
                        macData = new Uint8Array(obj.iv.byteLength + obj.data.byteLength);
                        macData.set(new Uint8Array(obj.iv), 0);
                        macData.set(new Uint8Array(obj.data), obj.iv.byteLength);
                        _d = obj;
                        return [4 /*yield*/, this.cryptoFunctionService.hmac(macData.buffer, obj.key.macKey, 'sha256')];
                    case 4:
                        _d.mac = _e.sent();
                        _e.label = 5;
                    case 5: return [2 /*return*/, obj];
                }
            });
        });
    };
    CryptoService.prototype.aesDecryptToUtf8 = function (encType, data, iv, mac, key) {
        return __awaiter(this, void 0, void 0, function () {
            var keyForEnc, theKey, fastParams, computedMac, macsEqual;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getKeyForEncryption(key)];
                    case 1:
                        keyForEnc = _a.sent();
                        theKey = this.resolveLegacyKey(encType, keyForEnc);
                        if (theKey.macKey != null && mac == null) {
                            // tslint:disable-next-line
                            console.error('mac required.');
                            return [2 /*return*/, null];
                        }
                        if (theKey.encType !== encType) {
                            // tslint:disable-next-line
                            console.error('encType unavailable.');
                            return [2 /*return*/, null];
                        }
                        fastParams = this.cryptoFunctionService.aesDecryptFastParameters(data, iv, mac, theKey);
                        if (!(fastParams.macKey != null && fastParams.mac != null)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.cryptoFunctionService.hmacFast(fastParams.macData, fastParams.macKey, 'sha256')];
                    case 2:
                        computedMac = _a.sent();
                        return [4 /*yield*/, this.cryptoFunctionService.compareFast(fastParams.mac, computedMac)];
                    case 3:
                        macsEqual = _a.sent();
                        if (!macsEqual) {
                            // tslint:disable-next-line
                            console.error('mac failed.');
                            return [2 /*return*/, null];
                        }
                        _a.label = 4;
                    case 4: return [2 /*return*/, this.cryptoFunctionService.aesDecryptFast(fastParams)];
                }
            });
        });
    };
    CryptoService.prototype.aesDecryptToBytes = function (encType, data, iv, mac, key) {
        return __awaiter(this, void 0, void 0, function () {
            var keyForEnc, theKey, macData, computedMac, macsMatch;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getKeyForEncryption(key)];
                    case 1:
                        keyForEnc = _a.sent();
                        theKey = this.resolveLegacyKey(encType, keyForEnc);
                        if (theKey.macKey != null && mac == null) {
                            return [2 /*return*/, null];
                        }
                        if (theKey.encType !== encType) {
                            return [2 /*return*/, null];
                        }
                        if (!(theKey.macKey != null && mac != null)) return [3 /*break*/, 4];
                        macData = new Uint8Array(iv.byteLength + data.byteLength);
                        macData.set(new Uint8Array(iv), 0);
                        macData.set(new Uint8Array(data), iv.byteLength);
                        return [4 /*yield*/, this.cryptoFunctionService.hmac(macData.buffer, theKey.macKey, 'sha256')];
                    case 2:
                        computedMac = _a.sent();
                        if (computedMac === null) {
                            return [2 /*return*/, null];
                        }
                        return [4 /*yield*/, this.cryptoFunctionService.compare(mac, computedMac)];
                    case 3:
                        macsMatch = _a.sent();
                        if (!macsMatch) {
                            // tslint:disable-next-line
                            console.error('mac failed.');
                            return [2 /*return*/, null];
                        }
                        _a.label = 4;
                    case 4: return [4 /*yield*/, this.cryptoFunctionService.aesDecrypt(data, iv, theKey.encKey)];
                    case 5: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    CryptoService.prototype.rsaDecrypt = function (encValue) {
        return __awaiter(this, void 0, void 0, function () {
            var headerPieces, encType, encPieces, data, key, mac, computedMac, macsEqual, privateKey, alg;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        headerPieces = encValue.split('.');
                        encType = null;
                        if (headerPieces.length === 1) {
                            encType = encryptionType_1.EncryptionType.Rsa2048_OaepSha256_B64;
                            encPieces = [headerPieces[0]];
                        }
                        else if (headerPieces.length === 2) {
                            try {
                                encType = parseInt(headerPieces[0], null);
                                encPieces = headerPieces[1].split('|');
                            }
                            catch (e) { }
                        }
                        switch (encType) {
                            case encryptionType_1.EncryptionType.Rsa2048_OaepSha256_B64:
                            case encryptionType_1.EncryptionType.Rsa2048_OaepSha1_B64:
                                if (encPieces.length !== 1) {
                                    throw new Error('Invalid cipher format.');
                                }
                                break;
                            case encryptionType_1.EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64:
                            case encryptionType_1.EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:
                                if (encPieces.length !== 2) {
                                    throw new Error('Invalid cipher format.');
                                }
                                break;
                            default:
                                throw new Error('encType unavailable.');
                        }
                        if (encPieces == null || encPieces.length <= 0) {
                            throw new Error('encPieces unavailable.');
                        }
                        data = utils_1.Utils.fromB64ToArray(encPieces[0]).buffer;
                        return [4 /*yield*/, this.getEncKey()];
                    case 1:
                        key = _a.sent();
                        if (!(key != null && key.macKey != null && encPieces.length > 1)) return [3 /*break*/, 4];
                        mac = utils_1.Utils.fromB64ToArray(encPieces[1]).buffer;
                        return [4 /*yield*/, this.cryptoFunctionService.hmac(data, key.macKey, 'sha256')];
                    case 2:
                        computedMac = _a.sent();
                        return [4 /*yield*/, this.cryptoFunctionService.compare(mac, computedMac)];
                    case 3:
                        macsEqual = _a.sent();
                        if (!macsEqual) {
                            throw new Error('MAC failed.');
                        }
                        _a.label = 4;
                    case 4: return [4 /*yield*/, this.getPrivateKey()];
                    case 5:
                        privateKey = _a.sent();
                        if (privateKey == null) {
                            throw new Error('No private key.');
                        }
                        alg = 'sha1';
                        switch (encType) {
                            case encryptionType_1.EncryptionType.Rsa2048_OaepSha256_B64:
                            case encryptionType_1.EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64:
                                alg = 'sha256';
                                break;
                            case encryptionType_1.EncryptionType.Rsa2048_OaepSha1_B64:
                            case encryptionType_1.EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:
                                break;
                            default:
                                throw new Error('encType unavailable.');
                        }
                        return [2 /*return*/, this.cryptoFunctionService.rsaDecrypt(data, privateKey, alg)];
                }
            });
        });
    };
    CryptoService.prototype.getKeyForEncryption = function (key) {
        return __awaiter(this, void 0, void 0, function () {
            var encKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (key != null) {
                            return [2 /*return*/, key];
                        }
                        return [4 /*yield*/, this.getEncKey()];
                    case 1:
                        encKey = _a.sent();
                        if (encKey != null) {
                            return [2 /*return*/, encKey];
                        }
                        return [4 /*yield*/, this.getKey()];
                    case 2: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    CryptoService.prototype.resolveLegacyKey = function (encType, key) {
        if (encType === encryptionType_1.EncryptionType.AesCbc128_HmacSha256_B64 &&
            key.encType === encryptionType_1.EncryptionType.AesCbc256_B64) {
            // Old encrypt-then-mac scheme, make a new key
            if (this.legacyEtmKey == null) {
                this.legacyEtmKey = new symmetricCryptoKey_1.SymmetricCryptoKey(key.key, encryptionType_1.EncryptionType.AesCbc128_HmacSha256_B64);
            }
            return this.legacyEtmKey;
        }
        return key;
    };
    CryptoService.prototype.stretchKey = function (key) {
        return __awaiter(this, void 0, void 0, function () {
            var newKey, _a, _b, _c, _d;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        newKey = new Uint8Array(64);
                        _b = (_a = newKey).set;
                        return [4 /*yield*/, this.hkdfExpand(key.key, utils_1.Utils.fromUtf8ToArray('enc'), 32)];
                    case 1:
                        _b.apply(_a, [_e.sent()]);
                        _d = (_c = newKey).set;
                        return [4 /*yield*/, this.hkdfExpand(key.key, utils_1.Utils.fromUtf8ToArray('mac'), 32)];
                    case 2:
                        _d.apply(_c, [_e.sent(), 32]);
                        return [2 /*return*/, new symmetricCryptoKey_1.SymmetricCryptoKey(newKey.buffer)];
                }
            });
        });
    };
    // ref: https://tools.ietf.org/html/rfc5869
    CryptoService.prototype.hkdfExpand = function (prk, info, size) {
        return __awaiter(this, void 0, void 0, function () {
            var hashLen, okm, previousT, n, i, t, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        hashLen = 32;
                        okm = new Uint8Array(size);
                        previousT = new Uint8Array(0);
                        n = Math.ceil(size / hashLen);
                        i = 0;
                        _b.label = 1;
                    case 1:
                        if (!(i < n)) return [3 /*break*/, 4];
                        t = new Uint8Array(previousT.length + info.length + 1);
                        t.set(previousT);
                        t.set(info, previousT.length);
                        t.set([i + 1], t.length - 1);
                        _a = Uint8Array.bind;
                        return [4 /*yield*/, this.cryptoFunctionService.hmac(t.buffer, prk, 'sha256')];
                    case 2:
                        previousT = new (_a.apply(Uint8Array, [void 0, _b.sent()]))();
                        okm.set(previousT, i * hashLen);
                        _b.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, okm];
                }
            });
        });
    };
    __decorate([
        sequentialize_1.sequentialize(function () { return 'getEncKey'; }),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", Promise)
    ], CryptoService.prototype, "getEncKey", null);
    __decorate([
        sequentialize_1.sequentialize(function () { return 'getOrgKeys'; }),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", Promise)
    ], CryptoService.prototype, "getOrgKeys", null);
    return CryptoService;
}());
exports.CryptoService = CryptoService;


/***/ }),

/***/ "./jslib/src/services/environment.service.ts":
/*!***************************************************!*\
  !*** ./jslib/src/services/environment.service.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var environmentUrls_1 = __webpack_require__(/*! ../models/domain/environmentUrls */ "./jslib/src/models/domain/environmentUrls.ts");
var constants_service_1 = __webpack_require__(/*! ./constants.service */ "./jslib/src/services/constants.service.ts");
var EnvironmentService = /** @class */ (function () {
    function EnvironmentService(apiService, storageService) {
        this.apiService = apiService;
        this.storageService = storageService;
    }
    EnvironmentService.prototype.getWebVaultUrl = function () {
        if (this.webVaultUrl != null) {
            return this.webVaultUrl;
        }
        else if (this.baseUrl) {
            return this.baseUrl;
        }
        return null;
    };
    EnvironmentService.prototype.setUrlsFromStorage = function () {
        return __awaiter(this, void 0, void 0, function () {
            var urlsObj, urls, envUrls;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.get(constants_service_1.ConstantsService.environmentUrlsKey)];
                    case 1:
                        urlsObj = _a.sent();
                        urls = urlsObj || {
                            base: null,
                            api: null,
                            identity: null,
                            icons: null,
                            webVault: null,
                        };
                        envUrls = new environmentUrls_1.EnvironmentUrls();
                        if (!urls.base) return [3 /*break*/, 3];
                        this.baseUrl = envUrls.base = urls.base;
                        return [4 /*yield*/, this.apiService.setUrls(envUrls)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                    case 3:
                        this.webVaultUrl = urls.webVault;
                        this.apiUrl = envUrls.api = urls.api;
                        this.identityUrl = envUrls.identity = urls.identity;
                        this.iconsUrl = urls.icons;
                        return [4 /*yield*/, this.apiService.setUrls(envUrls)];
                    case 4:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    EnvironmentService.prototype.setUrls = function (urls) {
        return __awaiter(this, void 0, void 0, function () {
            var envUrls;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        urls.base = this.formatUrl(urls.base);
                        urls.webVault = this.formatUrl(urls.webVault);
                        urls.api = this.formatUrl(urls.api);
                        urls.identity = this.formatUrl(urls.identity);
                        urls.icons = this.formatUrl(urls.icons);
                        return [4 /*yield*/, this.storageService.save(constants_service_1.ConstantsService.environmentUrlsKey, {
                                base: urls.base,
                                api: urls.api,
                                identity: urls.identity,
                                webVault: urls.webVault,
                                icons: urls.icons,
                            })];
                    case 1:
                        _a.sent();
                        this.baseUrl = urls.base;
                        this.webVaultUrl = urls.webVault;
                        this.apiUrl = urls.api;
                        this.identityUrl = urls.identity;
                        this.iconsUrl = urls.icons;
                        envUrls = new environmentUrls_1.EnvironmentUrls();
                        if (this.baseUrl) {
                            envUrls.base = this.baseUrl;
                        }
                        else {
                            envUrls.api = this.apiUrl;
                            envUrls.identity = this.identityUrl;
                        }
                        return [4 /*yield*/, this.apiService.setUrls(envUrls)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/, urls];
                }
            });
        });
    };
    EnvironmentService.prototype.formatUrl = function (url) {
        if (url == null || url === '') {
            return null;
        }
        url = url.replace(/\/+$/g, '');
        if (!url.startsWith('http://') && !url.startsWith('https://')) {
            url = 'https://' + url;
        }
        return url;
    };
    return EnvironmentService;
}());
exports.EnvironmentService = EnvironmentService;


/***/ }),

/***/ "./jslib/src/services/export.service.ts":
/*!**********************************************!*\
  !*** ./jslib/src/services/export.service.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var papa = __webpack_require__(/*! papaparse */ "./node_modules/papaparse/papaparse.js");
var cipherType_1 = __webpack_require__(/*! ../enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var cipher_1 = __webpack_require__(/*! ../models/domain/cipher */ "./jslib/src/models/domain/cipher.ts");
var collection_1 = __webpack_require__(/*! ../models/domain/collection */ "./jslib/src/models/domain/collection.ts");
var cipherData_1 = __webpack_require__(/*! ../models/data/cipherData */ "./jslib/src/models/data/cipherData.ts");
var collectionData_1 = __webpack_require__(/*! ../models/data/collectionData */ "./jslib/src/models/data/collectionData.ts");
var ExportService = /** @class */ (function () {
    function ExportService(folderService, cipherService, apiService) {
        this.folderService = folderService;
        this.cipherService = cipherService;
        this.apiService = apiService;
    }
    ExportService.prototype.getExport = function (format) {
        if (format === void 0) { format = 'csv'; }
        return __awaiter(this, void 0, void 0, function () {
            var decFolders, decCiphers, promises, foldersMap, exportCiphers;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        decFolders = [];
                        decCiphers = [];
                        promises = [];
                        promises.push(this.folderService.getAllDecrypted().then(function (folders) {
                            decFolders = folders;
                        }));
                        promises.push(this.cipherService.getAllDecrypted().then(function (ciphers) {
                            decCiphers = ciphers;
                        }));
                        return [4 /*yield*/, Promise.all(promises)];
                    case 1:
                        _a.sent();
                        foldersMap = new Map();
                        decFolders.forEach(function (f) {
                            foldersMap.set(f.id, f);
                        });
                        exportCiphers = [];
                        decCiphers.forEach(function (c) {
                            // only export logins and secure notes
                            if (c.type !== cipherType_1.CipherType.Login && c.type !== cipherType_1.CipherType.SecureNote) {
                                return;
                            }
                            if (c.organizationId != null) {
                                return;
                            }
                            var cipher = {};
                            cipher.folder = c.folderId != null && foldersMap.has(c.folderId) ? foldersMap.get(c.folderId).name : null;
                            cipher.favorite = c.favorite ? 1 : null;
                            _this.buildCommonCipher(cipher, c);
                            exportCiphers.push(cipher);
                        });
                        if (format === 'csv') {
                            return [2 /*return*/, papa.unparse(exportCiphers)];
                        }
                        else {
                            return [2 /*return*/, JSON.stringify(exportCiphers, null, '  ')];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    ExportService.prototype.getOrganizationExport = function (organizationId, format) {
        if (format === void 0) { format = 'csv'; }
        return __awaiter(this, void 0, void 0, function () {
            var decCollections, decCiphers, promises, collectionsMap, exportCiphers;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        decCollections = [];
                        decCiphers = [];
                        promises = [];
                        promises.push(this.apiService.getCollections(organizationId).then(function (collections) {
                            var collectionPromises = [];
                            if (collections != null && collections.data != null && collections.data.length > 0) {
                                collections.data.forEach(function (c) {
                                    var collection = new collection_1.Collection(new collectionData_1.CollectionData(c));
                                    collectionPromises.push(collection.decrypt().then(function (decCol) {
                                        decCollections.push(decCol);
                                    }));
                                });
                            }
                            return Promise.all(collectionPromises);
                        }));
                        promises.push(this.apiService.getCiphersOrganization(organizationId).then(function (ciphers) {
                            var cipherPromises = [];
                            if (ciphers != null && ciphers.data != null && ciphers.data.length > 0) {
                                ciphers.data.forEach(function (c) {
                                    var cipher = new cipher_1.Cipher(new cipherData_1.CipherData(c));
                                    cipherPromises.push(cipher.decrypt().then(function (decCipher) {
                                        decCiphers.push(decCipher);
                                    }));
                                });
                            }
                            return Promise.all(cipherPromises);
                        }));
                        return [4 /*yield*/, Promise.all(promises)];
                    case 1:
                        _a.sent();
                        collectionsMap = new Map();
                        decCollections.forEach(function (c) {
                            collectionsMap.set(c.id, c);
                        });
                        exportCiphers = [];
                        decCiphers.forEach(function (c) {
                            // only export logins and secure notes
                            if (c.type !== cipherType_1.CipherType.Login && c.type !== cipherType_1.CipherType.SecureNote) {
                                return;
                            }
                            var cipher = {};
                            cipher.collections = [];
                            if (c.collectionIds != null) {
                                cipher.collections = c.collectionIds.filter(function (id) { return collectionsMap.has(id); })
                                    .map(function (id) { return collectionsMap.get(id).name; });
                            }
                            _this.buildCommonCipher(cipher, c);
                            exportCiphers.push(cipher);
                        });
                        if (format === 'csv') {
                            return [2 /*return*/, papa.unparse(exportCiphers)];
                        }
                        else {
                            return [2 /*return*/, JSON.stringify(exportCiphers, null, '  ')];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    ExportService.prototype.getFileName = function (prefix) {
        if (prefix === void 0) { prefix = null; }
        var now = new Date();
        var dateString = now.getFullYear() + '' + this.padNumber(now.getMonth() + 1, 2) + '' + this.padNumber(now.getDate(), 2) +
            this.padNumber(now.getHours(), 2) + '' + this.padNumber(now.getMinutes(), 2) +
            this.padNumber(now.getSeconds(), 2);
        return 'bitwarden' + (prefix ? ('_' + prefix) : '') + '_export_' + dateString + '.csv';
    };
    ExportService.prototype.padNumber = function (num, width, padCharacter) {
        if (padCharacter === void 0) { padCharacter = '0'; }
        var numString = num.toString();
        return numString.length >= width ? numString :
            new Array(width - numString.length + 1).join(padCharacter) + numString;
    };
    ExportService.prototype.buildCommonCipher = function (cipher, c) {
        cipher.type = null;
        cipher.name = c.name;
        cipher.notes = c.notes;
        cipher.fields = null;
        // Login props
        cipher.login_uri = null;
        cipher.login_username = null;
        cipher.login_password = null;
        cipher.login_totp = null;
        if (c.fields) {
            c.fields.forEach(function (f) {
                if (!cipher.fields) {
                    cipher.fields = '';
                }
                else {
                    cipher.fields += '\n';
                }
                cipher.fields += ((f.name || '') + ': ' + f.value);
            });
        }
        switch (c.type) {
            case cipherType_1.CipherType.Login:
                cipher.type = 'login';
                cipher.login_username = c.login.username;
                cipher.login_password = c.login.password;
                cipher.login_totp = c.login.totp;
                if (c.login.uris) {
                    cipher.login_uri = [];
                    c.login.uris.forEach(function (u) {
                        cipher.login_uri.push(u.uri);
                    });
                }
                break;
            case cipherType_1.CipherType.SecureNote:
                cipher.type = 'note';
                break;
            default:
                return;
        }
        return cipher;
    };
    return ExportService;
}());
exports.ExportService = ExportService;


/***/ }),

/***/ "./jslib/src/services/folder.service.ts":
/*!**********************************************!*\
  !*** ./jslib/src/services/folder.service.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var folderData_1 = __webpack_require__(/*! ../models/data/folderData */ "./jslib/src/models/data/folderData.ts");
var folder_1 = __webpack_require__(/*! ../models/domain/folder */ "./jslib/src/models/domain/folder.ts");
var folderRequest_1 = __webpack_require__(/*! ../models/request/folderRequest */ "./jslib/src/models/request/folderRequest.ts");
var folderView_1 = __webpack_require__(/*! ../models/view/folderView */ "./jslib/src/models/view/folderView.ts");
var utils_1 = __webpack_require__(/*! ../misc/utils */ "./jslib/src/misc/utils.ts");
var Keys = {
    foldersPrefix: 'folders_',
    ciphersPrefix: 'ciphers_',
};
var FolderService = /** @class */ (function () {
    function FolderService(cryptoService, userService, apiService, storageService, i18nService, cipherService) {
        this.cryptoService = cryptoService;
        this.userService = userService;
        this.apiService = apiService;
        this.storageService = storageService;
        this.i18nService = i18nService;
        this.cipherService = cipherService;
    }
    FolderService.prototype.clearCache = function () {
        this.decryptedFolderCache = null;
    };
    FolderService.prototype.encrypt = function (model, key) {
        return __awaiter(this, void 0, void 0, function () {
            var folder, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        folder = new folder_1.Folder();
                        folder.id = model.id;
                        _a = folder;
                        return [4 /*yield*/, this.cryptoService.encrypt(model.name, key)];
                    case 1:
                        _a.name = _b.sent();
                        return [2 /*return*/, folder];
                }
            });
        });
    };
    FolderService.prototype.get = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, folders;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.foldersPrefix + userId)];
                    case 2:
                        folders = _a.sent();
                        if (folders == null || !folders.hasOwnProperty(id)) {
                            return [2 /*return*/, null];
                        }
                        return [2 /*return*/, new folder_1.Folder(folders[id])];
                }
            });
        });
    };
    FolderService.prototype.getAll = function () {
        return __awaiter(this, void 0, void 0, function () {
            var userId, folders, response, id;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.foldersPrefix + userId)];
                    case 2:
                        folders = _a.sent();
                        response = [];
                        for (id in folders) {
                            if (folders.hasOwnProperty(id)) {
                                response.push(new folder_1.Folder(folders[id]));
                            }
                        }
                        return [2 /*return*/, response];
                }
            });
        });
    };
    FolderService.prototype.getAllDecrypted = function () {
        return __awaiter(this, void 0, void 0, function () {
            var hasKey, decFolders, promises, folders, noneFolder;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.decryptedFolderCache != null) {
                            return [2 /*return*/, this.decryptedFolderCache];
                        }
                        return [4 /*yield*/, this.cryptoService.hasKey()];
                    case 1:
                        hasKey = _a.sent();
                        if (!hasKey) {
                            throw new Error('No key.');
                        }
                        decFolders = [];
                        promises = [];
                        return [4 /*yield*/, this.getAll()];
                    case 2:
                        folders = _a.sent();
                        folders.forEach(function (folder) {
                            promises.push(folder.decrypt().then(function (f) { return decFolders.push(f); }));
                        });
                        return [4 /*yield*/, Promise.all(promises)];
                    case 3:
                        _a.sent();
                        decFolders.sort(utils_1.Utils.getSortFunction(this.i18nService, 'name'));
                        noneFolder = new folderView_1.FolderView();
                        noneFolder.name = this.i18nService.t('noneFolder');
                        decFolders.push(noneFolder);
                        this.decryptedFolderCache = decFolders;
                        return [2 /*return*/, this.decryptedFolderCache];
                }
            });
        });
    };
    FolderService.prototype.saveWithServer = function (folder) {
        return __awaiter(this, void 0, void 0, function () {
            var request, response, userId, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        request = new folderRequest_1.FolderRequest(folder);
                        if (!(folder.id == null)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.apiService.postFolder(request)];
                    case 1:
                        response = _a.sent();
                        folder.id = response.id;
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.apiService.putFolder(folder.id, request)];
                    case 3:
                        response = _a.sent();
                        _a.label = 4;
                    case 4: return [4 /*yield*/, this.userService.getUserId()];
                    case 5:
                        userId = _a.sent();
                        data = new folderData_1.FolderData(response, userId);
                        return [4 /*yield*/, this.upsert(data)];
                    case 6:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    FolderService.prototype.upsert = function (folder) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, folders, f;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.foldersPrefix + userId)];
                    case 2:
                        folders = _a.sent();
                        if (folders == null) {
                            folders = {};
                        }
                        if (folder instanceof folderData_1.FolderData) {
                            f = folder;
                            folders[f.id] = f;
                        }
                        else {
                            folder.forEach(function (f) {
                                folders[f.id] = f;
                            });
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.foldersPrefix + userId, folders)];
                    case 3:
                        _a.sent();
                        this.decryptedFolderCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    FolderService.prototype.replace = function (folders) {
        return __awaiter(this, void 0, void 0, function () {
            var userId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.save(Keys.foldersPrefix + userId, folders)];
                    case 2:
                        _a.sent();
                        this.decryptedFolderCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    FolderService.prototype.clear = function (userId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.remove(Keys.foldersPrefix + userId)];
                    case 1:
                        _a.sent();
                        this.decryptedFolderCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    FolderService.prototype.delete = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, folders, i, ciphers, updates, cId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.foldersPrefix + userId)];
                    case 2:
                        folders = _a.sent();
                        if (folders == null) {
                            return [2 /*return*/];
                        }
                        if (typeof id === 'string') {
                            i = id;
                            delete folders[id];
                        }
                        else {
                            id.forEach(function (i) {
                                delete folders[i];
                            });
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.foldersPrefix + userId, folders)];
                    case 3:
                        _a.sent();
                        this.decryptedFolderCache = null;
                        return [4 /*yield*/, this.storageService.get(Keys.ciphersPrefix + userId)];
                    case 4:
                        ciphers = _a.sent();
                        if (ciphers != null) {
                            updates = [];
                            for (cId in ciphers) {
                                if (ciphers[cId].folderId === id) {
                                    ciphers[cId].folderId = null;
                                    updates.push(ciphers[cId]);
                                }
                            }
                            if (updates.length > 0) {
                                this.cipherService.upsert(updates);
                            }
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    FolderService.prototype.deleteWithServer = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.apiService.deleteFolder(id)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.delete(id)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return FolderService;
}());
exports.FolderService = FolderService;


/***/ }),

/***/ "./jslib/src/services/i18n.service.ts":
/*!********************************************!*\
  !*** ./jslib/src/services/i18n.service.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var I18nService = /** @class */ (function () {
    function I18nService(systemLanguage, localesDirectory, getLocalesJson) {
        this.systemLanguage = systemLanguage;
        this.localesDirectory = localesDirectory;
        this.getLocalesJson = getLocalesJson;
        // First locale is the default (English)
        this.supportedTranslationLocales = ['en'];
        this.defaultMessages = {};
        this.localeMessages = {};
        this.systemLanguage = systemLanguage.replace('_', '-');
    }
    I18nService.prototype.init = function (locale) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.inited) {
                            throw new Error('i18n already initialized.');
                        }
                        if (this.supportedTranslationLocales == null || this.supportedTranslationLocales.length === 0) {
                            throw new Error('supportedTranslationLocales not set.');
                        }
                        this.inited = true;
                        this.locale = this.translationLocale = locale != null ? locale : this.systemLanguage;
                        try {
                            this.collator = new Intl.Collator(this.locale, { numeric: true, sensitivity: 'base' });
                        }
                        catch (_b) {
                            this.collator = null;
                        }
                        if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {
                            this.translationLocale = this.translationLocale.slice(0, 2);
                            if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {
                                this.translationLocale = this.supportedTranslationLocales[0];
                            }
                        }
                        if (!(this.localesDirectory != null)) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.loadMessages(this.translationLocale, this.localeMessages)];
                    case 1:
                        _a.sent();
                        if (!(this.translationLocale !== this.supportedTranslationLocales[0])) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.loadMessages(this.supportedTranslationLocales[0], this.defaultMessages)];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    I18nService.prototype.t = function (id, p1, p2, p3) {
        return this.translate(id, p1, p2, p3);
    };
    I18nService.prototype.translate = function (id, p1, p2, p3) {
        var result;
        if (this.localeMessages.hasOwnProperty(id) && this.localeMessages[id]) {
            result = this.localeMessages[id];
        }
        else if (this.defaultMessages.hasOwnProperty(id) && this.defaultMessages[id]) {
            result = this.defaultMessages[id];
        }
        else {
            result = '';
        }
        if (result !== '') {
            if (p1 != null) {
                result = result.split('__$1__').join(p1);
            }
            if (p2 != null) {
                result = result.split('__$2__').join(p2);
            }
            if (p3 != null) {
                result = result.split('__$3__').join(p3);
            }
        }
        return result;
    };
    I18nService.prototype.loadMessages = function (locale, messagesObj) {
        return __awaiter(this, void 0, void 0, function () {
            var formattedLocale, locales, prop, placeProp, replaceToken, replaceContent;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        formattedLocale = locale.replace('-', '_');
                        return [4 /*yield*/, this.getLocalesJson(formattedLocale)];
                    case 1:
                        locales = _a.sent();
                        for (prop in locales) {
                            if (!locales.hasOwnProperty(prop)) {
                                continue;
                            }
                            messagesObj[prop] = locales[prop].message;
                            if (locales[prop].placeholders) {
                                for (placeProp in locales[prop].placeholders) {
                                    if (!locales[prop].placeholders.hasOwnProperty(placeProp) ||
                                        !locales[prop].placeholders[placeProp].content) {
                                        continue;
                                    }
                                    replaceToken = '\\$' + placeProp.toUpperCase() + '\\$';
                                    replaceContent = locales[prop].placeholders[placeProp].content;
                                    if (replaceContent === '$1' || replaceContent === '$2' || replaceContent === '$3') {
                                        replaceContent = '__' + replaceContent + '__';
                                    }
                                    messagesObj[prop] = messagesObj[prop].replace(new RegExp(replaceToken, 'g'), replaceContent);
                                }
                            }
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    return I18nService;
}());
exports.I18nService = I18nService;


/***/ }),

/***/ "./jslib/src/services/index.ts":
/*!*************************************!*\
  !*** ./jslib/src/services/index.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var api_service_1 = __webpack_require__(/*! ./api.service */ "./jslib/src/services/api.service.ts");
exports.ApiService = api_service_1.ApiService;
var appId_service_1 = __webpack_require__(/*! ./appId.service */ "./jslib/src/services/appId.service.ts");
exports.AppIdService = appId_service_1.AppIdService;
var audit_service_1 = __webpack_require__(/*! ./audit.service */ "./jslib/src/services/audit.service.ts");
exports.AuditService = audit_service_1.AuditService;
var auth_service_1 = __webpack_require__(/*! ./auth.service */ "./jslib/src/services/auth.service.ts");
exports.AuthService = auth_service_1.AuthService;
var cipher_service_1 = __webpack_require__(/*! ./cipher.service */ "./jslib/src/services/cipher.service.ts");
exports.CipherService = cipher_service_1.CipherService;
var collection_service_1 = __webpack_require__(/*! ./collection.service */ "./jslib/src/services/collection.service.ts");
exports.CollectionService = collection_service_1.CollectionService;
var constants_service_1 = __webpack_require__(/*! ./constants.service */ "./jslib/src/services/constants.service.ts");
exports.ConstantsService = constants_service_1.ConstantsService;
var container_service_1 = __webpack_require__(/*! ./container.service */ "./jslib/src/services/container.service.ts");
exports.ContainerService = container_service_1.ContainerService;
var crypto_service_1 = __webpack_require__(/*! ./crypto.service */ "./jslib/src/services/crypto.service.ts");
exports.CryptoService = crypto_service_1.CryptoService;
var environment_service_1 = __webpack_require__(/*! ./environment.service */ "./jslib/src/services/environment.service.ts");
exports.EnvironmentService = environment_service_1.EnvironmentService;
var folder_service_1 = __webpack_require__(/*! ./folder.service */ "./jslib/src/services/folder.service.ts");
exports.FolderService = folder_service_1.FolderService;
var i18n_service_1 = __webpack_require__(/*! ./i18n.service */ "./jslib/src/services/i18n.service.ts");
exports.I18nService = i18n_service_1.I18nService;
var lock_service_1 = __webpack_require__(/*! ./lock.service */ "./jslib/src/services/lock.service.ts");
exports.LockService = lock_service_1.LockService;
var passwordGeneration_service_1 = __webpack_require__(/*! ./passwordGeneration.service */ "./jslib/src/services/passwordGeneration.service.ts");
exports.PasswordGenerationService = passwordGeneration_service_1.PasswordGenerationService;
var settings_service_1 = __webpack_require__(/*! ./settings.service */ "./jslib/src/services/settings.service.ts");
exports.SettingsService = settings_service_1.SettingsService;
var state_service_1 = __webpack_require__(/*! ./state.service */ "./jslib/src/services/state.service.ts");
exports.StateService = state_service_1.StateService;
var sync_service_1 = __webpack_require__(/*! ./sync.service */ "./jslib/src/services/sync.service.ts");
exports.SyncService = sync_service_1.SyncService;
var token_service_1 = __webpack_require__(/*! ./token.service */ "./jslib/src/services/token.service.ts");
exports.TokenService = token_service_1.TokenService;
var totp_service_1 = __webpack_require__(/*! ./totp.service */ "./jslib/src/services/totp.service.ts");
exports.TotpService = totp_service_1.TotpService;
var user_service_1 = __webpack_require__(/*! ./user.service */ "./jslib/src/services/user.service.ts");
exports.UserService = user_service_1.UserService;


/***/ }),

/***/ "./jslib/src/services/lock.service.ts":
/*!********************************************!*\
  !*** ./jslib/src/services/lock.service.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var constants_service_1 = __webpack_require__(/*! ./constants.service */ "./jslib/src/services/constants.service.ts");
var LockService = /** @class */ (function () {
    function LockService(cipherService, folderService, collectionService, cryptoService, platformUtilsService, storageService, messagingService, lockedCallback) {
        this.cipherService = cipherService;
        this.folderService = folderService;
        this.collectionService = collectionService;
        this.cryptoService = cryptoService;
        this.platformUtilsService = platformUtilsService;
        this.storageService = storageService;
        this.messagingService = messagingService;
        this.lockedCallback = lockedCallback;
        this.inited = false;
    }
    LockService.prototype.init = function (checkOnInterval) {
        var _this = this;
        if (this.inited) {
            return;
        }
        this.inited = true;
        if (checkOnInterval) {
            this.checkLock();
            setInterval(function () { return _this.checkLock(); }, 10 * 1000); // check every 10 seconds
        }
    };
    LockService.prototype.checkLock = function () {
        return __awaiter(this, void 0, void 0, function () {
            var hasKey, lockOption, lastActive, lockOptionSeconds, diffSeconds;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.platformUtilsService.isViewOpen()) {
                            // Do not lock
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.cryptoService.hasKey()];
                    case 1:
                        hasKey = _a.sent();
                        if (!hasKey) {
                            // no key so no need to lock
                            return [2 /*return*/];
                        }
                        lockOption = this.platformUtilsService.lockTimeout();
                        if (!(lockOption == null)) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.storageService.get(constants_service_1.ConstantsService.lockOptionKey)];
                    case 2:
                        lockOption = _a.sent();
                        _a.label = 3;
                    case 3:
                        if (lockOption == null || lockOption < 0) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.storageService.get(constants_service_1.ConstantsService.lastActiveKey)];
                    case 4:
                        lastActive = _a.sent();
                        if (lastActive == null) {
                            return [2 /*return*/];
                        }
                        lockOptionSeconds = lockOption * 60;
                        diffSeconds = ((new Date()).getTime() - lastActive) / 1000;
                        if (!(diffSeconds >= lockOptionSeconds)) return [3 /*break*/, 6];
                        // need to lock now
                        return [4 /*yield*/, this.lock()];
                    case 5:
                        // need to lock now
                        _a.sent();
                        _a.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    LockService.prototype.lock = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all([
                            this.cryptoService.clearKey(),
                            this.cryptoService.clearOrgKeys(true),
                            this.cryptoService.clearKeyPair(true),
                            this.cryptoService.clearEncKey(true),
                        ])];
                    case 1:
                        _a.sent();
                        this.folderService.clearCache();
                        this.cipherService.clearCache();
                        this.collectionService.clearCache();
                        this.messagingService.send('locked');
                        if (!(this.lockedCallback != null)) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.lockedCallback()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    LockService.prototype.setLockOption = function (lockOption) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.save(constants_service_1.ConstantsService.lockOptionKey, lockOption)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.cryptoService.toggleKey()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return LockService;
}());
exports.LockService = LockService;


/***/ }),

/***/ "./jslib/src/services/passwordGeneration.service.ts":
/*!**********************************************************!*\
  !*** ./jslib/src/services/passwordGeneration.service.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var cipherString_1 = __webpack_require__(/*! ../models/domain/cipherString */ "./jslib/src/models/domain/cipherString.ts");
var generatedPasswordHistory_1 = __webpack_require__(/*! ../models/domain/generatedPasswordHistory */ "./jslib/src/models/domain/generatedPasswordHistory.ts");
var DefaultOptions = {
    length: 14,
    ambiguous: false,
    number: true,
    minNumber: 1,
    uppercase: true,
    minUppercase: 0,
    lowercase: true,
    minLowercase: 0,
    special: false,
    minSpecial: 1,
};
var Keys = {
    options: 'passwordGenerationOptions',
    history: 'generatedPasswordHistory',
};
var MaxPasswordsInHistory = 100;
var PasswordGenerationService = /** @class */ (function () {
    function PasswordGenerationService(cryptoService, storageService) {
        this.cryptoService = cryptoService;
        this.storageService = storageService;
    }
    PasswordGenerationService.prototype.generatePassword = function (options) {
        return __awaiter(this, void 0, void 0, function () {
            var o, minLength, positions, i, i, i, i, allCharSet, lowercaseCharSet, uppercaseCharSet, numberCharSet, specialCharSet, password, i, positionChars, randomCharIndex;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        o = Object.assign({}, DefaultOptions, options);
                        // sanitize
                        if (o.uppercase && o.minUppercase <= 0) {
                            o.minUppercase = 1;
                        }
                        if (o.lowercase && o.minLowercase <= 0) {
                            o.minLowercase = 1;
                        }
                        if (o.number && o.minNumber <= 0) {
                            o.minNumber = 1;
                        }
                        if (o.special && o.minSpecial <= 0) {
                            o.minSpecial = 1;
                        }
                        if (!o.length || o.length < 1) {
                            o.length = 10;
                        }
                        minLength = o.minUppercase + o.minLowercase + o.minNumber + o.minSpecial;
                        if (o.length < minLength) {
                            o.length = minLength;
                        }
                        positions = [];
                        if (o.lowercase && o.minLowercase > 0) {
                            for (i = 0; i < o.minLowercase; i++) {
                                positions.push('l');
                            }
                        }
                        if (o.uppercase && o.minUppercase > 0) {
                            for (i = 0; i < o.minUppercase; i++) {
                                positions.push('u');
                            }
                        }
                        if (o.number && o.minNumber > 0) {
                            for (i = 0; i < o.minNumber; i++) {
                                positions.push('n');
                            }
                        }
                        if (o.special && o.minSpecial > 0) {
                            for (i = 0; i < o.minSpecial; i++) {
                                positions.push('s');
                            }
                        }
                        while (positions.length < o.length) {
                            positions.push('a');
                        }
                        // shuffle
                        return [4 /*yield*/, this.shuffleArray(positions)];
                    case 1:
                        // shuffle
                        _a.sent();
                        allCharSet = '';
                        lowercaseCharSet = 'abcdefghijkmnopqrstuvwxyz';
                        if (o.ambiguous) {
                            lowercaseCharSet += 'l';
                        }
                        if (o.lowercase) {
                            allCharSet += lowercaseCharSet;
                        }
                        uppercaseCharSet = 'ABCDEFGHIJKLMNPQRSTUVWXYZ';
                        if (o.ambiguous) {
                            uppercaseCharSet += 'O';
                        }
                        if (o.uppercase) {
                            allCharSet += uppercaseCharSet;
                        }
                        numberCharSet = '23456789';
                        if (o.ambiguous) {
                            numberCharSet += '01';
                        }
                        if (o.number) {
                            allCharSet += numberCharSet;
                        }
                        specialCharSet = '!@#$%^&*';
                        if (o.special) {
                            allCharSet += specialCharSet;
                        }
                        password = '';
                        i = 0;
                        _a.label = 2;
                    case 2:
                        if (!(i < o.length)) return [3 /*break*/, 5];
                        positionChars = void 0;
                        switch (positions[i]) {
                            case 'l':
                                positionChars = lowercaseCharSet;
                                break;
                            case 'u':
                                positionChars = uppercaseCharSet;
                                break;
                            case 'n':
                                positionChars = numberCharSet;
                                break;
                            case 's':
                                positionChars = specialCharSet;
                                break;
                            case 'a':
                                positionChars = allCharSet;
                                break;
                            default:
                                break;
                        }
                        return [4 /*yield*/, this.cryptoService.randomNumber(0, positionChars.length - 1)];
                    case 3:
                        randomCharIndex = _a.sent();
                        password += positionChars.charAt(randomCharIndex);
                        _a.label = 4;
                    case 4:
                        i++;
                        return [3 /*break*/, 2];
                    case 5: return [2 /*return*/, password];
                }
            });
        });
    };
    PasswordGenerationService.prototype.getOptions = function () {
        return __awaiter(this, void 0, void 0, function () {
            var options;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(this.optionsCache == null)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.storageService.get(Keys.options)];
                    case 1:
                        options = _a.sent();
                        if (options == null) {
                            this.optionsCache = DefaultOptions;
                        }
                        else {
                            this.optionsCache = options;
                        }
                        _a.label = 2;
                    case 2: return [2 /*return*/, this.optionsCache];
                }
            });
        });
    };
    PasswordGenerationService.prototype.saveOptions = function (options) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.save(Keys.options, options)];
                    case 1:
                        _a.sent();
                        this.optionsCache = options;
                        return [2 /*return*/];
                }
            });
        });
    };
    PasswordGenerationService.prototype.getHistory = function () {
        return __awaiter(this, void 0, void 0, function () {
            var hasKey, encrypted, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.cryptoService.hasKey()];
                    case 1:
                        hasKey = _b.sent();
                        if (!hasKey) {
                            return [2 /*return*/, new Array()];
                        }
                        if (!!this.history) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.storageService.get(Keys.history)];
                    case 2:
                        encrypted = _b.sent();
                        _a = this;
                        return [4 /*yield*/, this.decryptHistory(encrypted)];
                    case 3:
                        _a.history = _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, this.history || new Array()];
                }
            });
        });
    };
    PasswordGenerationService.prototype.addHistory = function (password) {
        return __awaiter(this, void 0, void 0, function () {
            var hasKey, currentHistory, newHistory;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.cryptoService.hasKey()];
                    case 1:
                        hasKey = _a.sent();
                        if (!hasKey) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.getHistory()];
                    case 2:
                        currentHistory = _a.sent();
                        // Prevent duplicates
                        if (this.matchesPrevious(password, currentHistory)) {
                            return [2 /*return*/];
                        }
                        currentHistory.unshift(new generatedPasswordHistory_1.GeneratedPasswordHistory(password, Date.now()));
                        // Remove old items.
                        if (currentHistory.length > MaxPasswordsInHistory) {
                            currentHistory.pop();
                        }
                        return [4 /*yield*/, this.encryptHistory(currentHistory)];
                    case 3:
                        newHistory = _a.sent();
                        return [4 /*yield*/, this.storageService.save(Keys.history, newHistory)];
                    case 4: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    PasswordGenerationService.prototype.clear = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.history = [];
                        return [4 /*yield*/, this.storageService.remove(Keys.history)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    PasswordGenerationService.prototype.encryptHistory = function (history) {
        return __awaiter(this, void 0, void 0, function () {
            var promises;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (history == null || history.length === 0) {
                            return [2 /*return*/, Promise.resolve([])];
                        }
                        promises = history.map(function (item) { return __awaiter(_this, void 0, void 0, function () {
                            var encrypted;
                            return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, this.cryptoService.encrypt(item.password)];
                                    case 1:
                                        encrypted = _a.sent();
                                        return [2 /*return*/, new generatedPasswordHistory_1.GeneratedPasswordHistory(encrypted.encryptedString, item.date)];
                                }
                            });
                        }); });
                        return [4 /*yield*/, Promise.all(promises)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    PasswordGenerationService.prototype.decryptHistory = function (history) {
        return __awaiter(this, void 0, void 0, function () {
            var promises;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (history == null || history.length === 0) {
                            return [2 /*return*/, Promise.resolve([])];
                        }
                        promises = history.map(function (item) { return __awaiter(_this, void 0, void 0, function () {
                            var decrypted;
                            return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, this.cryptoService.decryptToUtf8(new cipherString_1.CipherString(item.password))];
                                    case 1:
                                        decrypted = _a.sent();
                                        return [2 /*return*/, new generatedPasswordHistory_1.GeneratedPasswordHistory(decrypted, item.date)];
                                }
                            });
                        }); });
                        return [4 /*yield*/, Promise.all(promises)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    PasswordGenerationService.prototype.matchesPrevious = function (password, history) {
        if (history == null || history.length === 0) {
            return false;
        }
        return history[history.length - 1].password === password;
    };
    // ref: https://stackoverflow.com/a/12646864/1090359
    PasswordGenerationService.prototype.shuffleArray = function (array) {
        return __awaiter(this, void 0, void 0, function () {
            var _a, i, j;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        i = array.length - 1;
                        _b.label = 1;
                    case 1:
                        if (!(i > 0)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.cryptoService.randomNumber(0, i)];
                    case 2:
                        j = _b.sent();
                        _a = [array[j], array[i]], array[i] = _a[0], array[j] = _a[1];
                        _b.label = 3;
                    case 3:
                        i--;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    return PasswordGenerationService;
}());
exports.PasswordGenerationService = PasswordGenerationService;


/***/ }),

/***/ "./jslib/src/services/settings.service.ts":
/*!************************************************!*\
  !*** ./jslib/src/services/settings.service.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Keys = {
    settingsPrefix: 'settings_',
    equivalentDomains: 'equivalentDomains',
};
var SettingsService = /** @class */ (function () {
    function SettingsService(userService, storageService) {
        this.userService = userService;
        this.storageService = storageService;
    }
    SettingsService.prototype.clearCache = function () {
        this.settingsCache = null;
    };
    SettingsService.prototype.getEquivalentDomains = function () {
        return this.getSettingsKey(Keys.equivalentDomains);
    };
    SettingsService.prototype.setEquivalentDomains = function (equivalentDomains) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.setSettingsKey(Keys.equivalentDomains, equivalentDomains)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    SettingsService.prototype.clear = function (userId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.remove(Keys.settingsPrefix + userId)];
                    case 1:
                        _a.sent();
                        this.settingsCache = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    // Helpers
    SettingsService.prototype.getSettings = function () {
        return __awaiter(this, void 0, void 0, function () {
            var userId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(this.settingsCache == null)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        this.settingsCache = this.storageService.get(Keys.settingsPrefix + userId);
                        _a.label = 2;
                    case 2: return [2 /*return*/, this.settingsCache];
                }
            });
        });
    };
    SettingsService.prototype.getSettingsKey = function (key) {
        return __awaiter(this, void 0, void 0, function () {
            var settings;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getSettings()];
                    case 1:
                        settings = _a.sent();
                        if (settings != null && settings[key]) {
                            return [2 /*return*/, settings[key]];
                        }
                        return [2 /*return*/, null];
                }
            });
        });
    };
    SettingsService.prototype.setSettingsKey = function (key, value) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, settings;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.getSettings()];
                    case 2:
                        settings = _a.sent();
                        if (!settings) {
                            settings = {};
                        }
                        settings[key] = value;
                        return [4 /*yield*/, this.storageService.save(Keys.settingsPrefix + userId, settings)];
                    case 3:
                        _a.sent();
                        this.settingsCache = settings;
                        return [2 /*return*/];
                }
            });
        });
    };
    return SettingsService;
}());
exports.SettingsService = SettingsService;


/***/ }),

/***/ "./jslib/src/services/state.service.ts":
/*!*********************************************!*\
  !*** ./jslib/src/services/state.service.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var StateService = /** @class */ (function () {
    function StateService() {
        this.state = {};
    }
    StateService.prototype.get = function (key) {
        if (this.state.hasOwnProperty(key)) {
            return Promise.resolve(this.state[key]);
        }
        return Promise.resolve(null);
    };
    StateService.prototype.save = function (key, obj) {
        this.state[key] = obj;
        return Promise.resolve();
    };
    StateService.prototype.remove = function (key) {
        delete this.state[key];
        return Promise.resolve();
    };
    StateService.prototype.purge = function () {
        this.state = {};
        return Promise.resolve();
    };
    return StateService;
}());
exports.StateService = StateService;


/***/ }),

/***/ "./jslib/src/services/sync.service.ts":
/*!********************************************!*\
  !*** ./jslib/src/services/sync.service.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var cipherData_1 = __webpack_require__(/*! ../models/data/cipherData */ "./jslib/src/models/data/cipherData.ts");
var collectionData_1 = __webpack_require__(/*! ../models/data/collectionData */ "./jslib/src/models/data/collectionData.ts");
var folderData_1 = __webpack_require__(/*! ../models/data/folderData */ "./jslib/src/models/data/folderData.ts");
var organizationData_1 = __webpack_require__(/*! ../models/data/organizationData */ "./jslib/src/models/data/organizationData.ts");
var Keys = {
    lastSyncPrefix: 'lastSync_',
};
var SyncService = /** @class */ (function () {
    function SyncService(userService, apiService, settingsService, folderService, cipherService, cryptoService, collectionService, storageService, messagingService, logoutCallback) {
        this.userService = userService;
        this.apiService = apiService;
        this.settingsService = settingsService;
        this.folderService = folderService;
        this.cipherService = cipherService;
        this.cryptoService = cryptoService;
        this.collectionService = collectionService;
        this.storageService = storageService;
        this.messagingService = messagingService;
        this.logoutCallback = logoutCallback;
        this.syncInProgress = false;
    }
    SyncService.prototype.getLastSync = function () {
        return __awaiter(this, void 0, void 0, function () {
            var userId, lastSync;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        if (userId == null) {
                            return [2 /*return*/, null];
                        }
                        return [4 /*yield*/, this.storageService.get(Keys.lastSyncPrefix + userId)];
                    case 2:
                        lastSync = _a.sent();
                        if (lastSync) {
                            return [2 /*return*/, new Date(lastSync)];
                        }
                        return [2 /*return*/, null];
                }
            });
        });
    };
    SyncService.prototype.setLastSync = function (date) {
        return __awaiter(this, void 0, void 0, function () {
            var userId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        if (userId == null) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.storageService.save(Keys.lastSyncPrefix + userId, date.toJSON())];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    SyncService.prototype.syncStarted = function () {
        this.syncInProgress = true;
        this.messagingService.send('syncStarted');
    };
    SyncService.prototype.syncCompleted = function (successfully) {
        this.syncInProgress = false;
        this.messagingService.send('syncCompleted', { successfully: successfully });
    };
    SyncService.prototype.fullSync = function (forceSync) {
        return __awaiter(this, void 0, void 0, function () {
            var isAuthenticated, now, needsSyncResult, needsSync, skipped, userId, response, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.syncStarted();
                        return [4 /*yield*/, this.userService.isAuthenticated()];
                    case 1:
                        isAuthenticated = _a.sent();
                        if (!isAuthenticated) {
                            this.syncCompleted(false);
                            return [2 /*return*/, false];
                        }
                        now = new Date();
                        return [4 /*yield*/, this.needsSyncing(forceSync)];
                    case 2:
                        needsSyncResult = _a.sent();
                        needsSync = needsSyncResult[0];
                        skipped = needsSyncResult[1];
                        if (skipped) {
                            this.syncCompleted(false);
                            return [2 /*return*/, false];
                        }
                        if (!!needsSync) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.setLastSync(now)];
                    case 3:
                        _a.sent();
                        this.syncCompleted(false);
                        return [2 /*return*/, false];
                    case 4: return [4 /*yield*/, this.userService.getUserId()];
                    case 5:
                        userId = _a.sent();
                        _a.label = 6;
                    case 6:
                        _a.trys.push([6, 14, , 15]);
                        return [4 /*yield*/, this.apiService.getSync()];
                    case 7:
                        response = _a.sent();
                        return [4 /*yield*/, this.syncProfile(response.profile)];
                    case 8:
                        _a.sent();
                        return [4 /*yield*/, this.syncFolders(userId, response.folders)];
                    case 9:
                        _a.sent();
                        return [4 /*yield*/, this.syncCollections(response.collections)];
                    case 10:
                        _a.sent();
                        return [4 /*yield*/, this.syncCiphers(userId, response.ciphers)];
                    case 11:
                        _a.sent();
                        return [4 /*yield*/, this.syncSettings(userId, response.domains)];
                    case 12:
                        _a.sent();
                        return [4 /*yield*/, this.setLastSync(now)];
                    case 13:
                        _a.sent();
                        this.syncCompleted(true);
                        return [2 /*return*/, true];
                    case 14:
                        e_1 = _a.sent();
                        this.syncCompleted(false);
                        return [2 /*return*/, false];
                    case 15: return [2 /*return*/];
                }
            });
        });
    };
    // Helpers
    SyncService.prototype.needsSyncing = function (forceSync) {
        return __awaiter(this, void 0, void 0, function () {
            var response, accountRevisionDate, lastSync, e_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (forceSync) {
                            return [2 /*return*/, [true, false]];
                        }
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        return [4 /*yield*/, this.apiService.getAccountRevisionDate()];
                    case 2:
                        response = _a.sent();
                        accountRevisionDate = new Date(response);
                        return [4 /*yield*/, this.getLastSync()];
                    case 3:
                        lastSync = _a.sent();
                        if (lastSync != null && accountRevisionDate <= lastSync) {
                            return [2 /*return*/, [false, false]];
                        }
                        return [2 /*return*/, [true, false]];
                    case 4:
                        e_2 = _a.sent();
                        return [2 /*return*/, [false, true]];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    SyncService.prototype.syncProfile = function (response) {
        return __awaiter(this, void 0, void 0, function () {
            var stamp, organizations;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getSecurityStamp()];
                    case 1:
                        stamp = _a.sent();
                        if (!(stamp != null && stamp !== response.securityStamp)) return [3 /*break*/, 4];
                        if (!(this.logoutCallback != null)) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.logoutCallback(true)];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: throw new Error('Stamp has changed');
                    case 4: return [4 /*yield*/, this.cryptoService.setEncKey(response.key)];
                    case 5:
                        _a.sent();
                        return [4 /*yield*/, this.cryptoService.setEncPrivateKey(response.privateKey)];
                    case 6:
                        _a.sent();
                        return [4 /*yield*/, this.cryptoService.setOrgKeys(response.organizations)];
                    case 7:
                        _a.sent();
                        return [4 /*yield*/, this.userService.setSecurityStamp(response.securityStamp)];
                    case 8:
                        _a.sent();
                        return [4 /*yield*/, this.userService.setSecurityStamp(response.securityStamp)];
                    case 9:
                        _a.sent();
                        organizations = {};
                        response.organizations.forEach(function (o) {
                            organizations[o.id] = new organizationData_1.OrganizationData(o);
                        });
                        return [4 /*yield*/, this.userService.replaceOrganizations(organizations)];
                    case 10: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    SyncService.prototype.syncFolders = function (userId, response) {
        return __awaiter(this, void 0, void 0, function () {
            var folders;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        folders = {};
                        response.forEach(function (f) {
                            folders[f.id] = new folderData_1.FolderData(f, userId);
                        });
                        return [4 /*yield*/, this.folderService.replace(folders)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    SyncService.prototype.syncCollections = function (response) {
        return __awaiter(this, void 0, void 0, function () {
            var collections;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        collections = {};
                        response.forEach(function (c) {
                            collections[c.id] = new collectionData_1.CollectionData(c);
                        });
                        return [4 /*yield*/, this.collectionService.replace(collections)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    SyncService.prototype.syncCiphers = function (userId, response) {
        return __awaiter(this, void 0, void 0, function () {
            var ciphers;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        ciphers = {};
                        response.forEach(function (c) {
                            ciphers[c.id] = new cipherData_1.CipherData(c, userId);
                        });
                        return [4 /*yield*/, this.cipherService.replace(ciphers)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    SyncService.prototype.syncSettings = function (userId, response) {
        return __awaiter(this, void 0, void 0, function () {
            var eqDomains;
            return __generator(this, function (_a) {
                eqDomains = [];
                if (response != null && response.equivalentDomains != null) {
                    eqDomains = eqDomains.concat(response.equivalentDomains);
                }
                if (response != null && response.globalEquivalentDomains != null) {
                    response.globalEquivalentDomains.forEach(function (global) {
                        if (global.domains.length > 0) {
                            eqDomains.push(global.domains);
                        }
                    });
                }
                return [2 /*return*/, this.settingsService.setEquivalentDomains(eqDomains)];
            });
        });
    };
    return SyncService;
}());
exports.SyncService = SyncService;


/***/ }),

/***/ "./jslib/src/services/token.service.ts":
/*!*********************************************!*\
  !*** ./jslib/src/services/token.service.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! ../misc/utils */ "./jslib/src/misc/utils.ts");
var Keys = {
    accessToken: 'accessToken',
    refreshToken: 'refreshToken',
    twoFactorTokenPrefix: 'twoFactorToken_',
};
var TokenService = /** @class */ (function () {
    function TokenService(storageService) {
        this.storageService = storageService;
    }
    TokenService.prototype.setTokens = function (accessToken, refreshToken) {
        return Promise.all([
            this.setToken(accessToken),
            this.setRefreshToken(refreshToken),
        ]);
    };
    TokenService.prototype.setToken = function (token) {
        this.token = token;
        this.decodedToken = null;
        return this.storageService.save(Keys.accessToken, token);
    };
    TokenService.prototype.getToken = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.token != null) {
                            return [2 /*return*/, this.token];
                        }
                        _a = this;
                        return [4 /*yield*/, this.storageService.get(Keys.accessToken)];
                    case 1:
                        _a.token = _b.sent();
                        return [2 /*return*/, this.token];
                }
            });
        });
    };
    TokenService.prototype.setRefreshToken = function (refreshToken) {
        this.refreshToken = refreshToken;
        return this.storageService.save(Keys.refreshToken, refreshToken);
    };
    TokenService.prototype.getRefreshToken = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.refreshToken != null) {
                            return [2 /*return*/, this.refreshToken];
                        }
                        _a = this;
                        return [4 /*yield*/, this.storageService.get(Keys.refreshToken)];
                    case 1:
                        _a.refreshToken = _b.sent();
                        return [2 /*return*/, this.refreshToken];
                }
            });
        });
    };
    TokenService.prototype.setTwoFactorToken = function (token, email) {
        return this.storageService.save(Keys.twoFactorTokenPrefix + email, token);
    };
    TokenService.prototype.getTwoFactorToken = function (email) {
        return this.storageService.get(Keys.twoFactorTokenPrefix + email);
    };
    TokenService.prototype.clearTwoFactorToken = function (email) {
        return this.storageService.remove(Keys.twoFactorTokenPrefix + email);
    };
    TokenService.prototype.clearToken = function () {
        this.token = null;
        this.decodedToken = null;
        this.refreshToken = null;
        return Promise.all([
            this.storageService.remove(Keys.accessToken),
            this.storageService.remove(Keys.refreshToken),
        ]);
    };
    // jwthelper methods
    // ref https://github.com/auth0/angular-jwt/blob/master/src/angularJwt/services/jwt.js
    TokenService.prototype.decodeToken = function () {
        if (this.decodedToken) {
            return this.decodedToken;
        }
        if (this.token == null) {
            throw new Error('Token not found.');
        }
        var parts = this.token.split('.');
        if (parts.length !== 3) {
            throw new Error('JWT must have 3 parts');
        }
        var decoded = utils_1.Utils.fromUrlB64ToUtf8(parts[1]);
        if (decoded == null) {
            throw new Error('Cannot decode the token');
        }
        this.decodedToken = JSON.parse(decoded);
        return this.decodedToken;
    };
    TokenService.prototype.getTokenExpirationDate = function () {
        var decoded = this.decodeToken();
        if (typeof decoded.exp === 'undefined') {
            return null;
        }
        var d = new Date(0); // The 0 here is the key, which sets the date to the epoch
        d.setUTCSeconds(decoded.exp);
        return d;
    };
    TokenService.prototype.tokenSecondsRemaining = function (offsetSeconds) {
        if (offsetSeconds === void 0) { offsetSeconds = 0; }
        var d = this.getTokenExpirationDate();
        if (d == null) {
            return 0;
        }
        var msRemaining = d.valueOf() - (new Date().valueOf() + (offsetSeconds * 1000));
        return Math.round(msRemaining / 1000);
    };
    TokenService.prototype.tokenNeedsRefresh = function (minutes) {
        if (minutes === void 0) { minutes = 5; }
        var sRemaining = this.tokenSecondsRemaining();
        return sRemaining < (60 * minutes);
    };
    TokenService.prototype.getUserId = function () {
        var decoded = this.decodeToken();
        if (typeof decoded.sub === 'undefined') {
            throw new Error('No user id found');
        }
        return decoded.sub;
    };
    TokenService.prototype.getEmail = function () {
        var decoded = this.decodeToken();
        if (typeof decoded.email === 'undefined') {
            throw new Error('No email found');
        }
        return decoded.email;
    };
    TokenService.prototype.getEmailVerified = function () {
        var decoded = this.decodeToken();
        if (typeof decoded.email_verified === 'undefined') {
            throw new Error('No email verification found');
        }
        return decoded.email_verified;
    };
    TokenService.prototype.getName = function () {
        var decoded = this.decodeToken();
        if (typeof decoded.name === 'undefined') {
            return null;
        }
        return decoded.name;
    };
    TokenService.prototype.getPremium = function () {
        var decoded = this.decodeToken();
        if (typeof decoded.premium === 'undefined') {
            return false;
        }
        return decoded.premium;
    };
    TokenService.prototype.getIssuer = function () {
        var decoded = this.decodeToken();
        if (typeof decoded.iss === 'undefined') {
            throw new Error('No issuer found');
        }
        return decoded.iss;
    };
    return TokenService;
}());
exports.TokenService = TokenService;


/***/ }),

/***/ "./jslib/src/services/totp.service.ts":
/*!********************************************!*\
  !*** ./jslib/src/services/totp.service.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var constants_service_1 = __webpack_require__(/*! ./constants.service */ "./jslib/src/services/constants.service.ts");
var utils_1 = __webpack_require__(/*! ../misc/utils */ "./jslib/src/misc/utils.ts");
var b32Chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567';
var TotpService = /** @class */ (function () {
    function TotpService(storageService, cryptoFunctionService) {
        this.storageService = storageService;
        this.cryptoFunctionService = cryptoFunctionService;
    }
    TotpService.prototype.getCode = function (keyb32) {
        return __awaiter(this, void 0, void 0, function () {
            var epoch, timeHex, timeBytes, keyBytes, hashHex, offset, otp;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        epoch = Math.round(new Date().getTime() / 1000.0);
                        timeHex = this.leftpad(this.dec2hex(Math.floor(epoch / 30)), 16, '0');
                        timeBytes = utils_1.Utils.fromHexToArray(timeHex);
                        keyBytes = this.b32tobytes(keyb32);
                        if (!keyBytes.length || !timeBytes.length) {
                            return [2 /*return*/, null];
                        }
                        return [4 /*yield*/, this.sign(keyBytes, timeBytes)];
                    case 1:
                        hashHex = _a.sent();
                        if (!hashHex) {
                            return [2 /*return*/, null];
                        }
                        offset = this.hex2dec(hashHex.substring(hashHex.length - 1));
                        otp = (this.hex2dec(hashHex.substr(offset * 2, 8)) & this.hex2dec('7fffffff')) + '';
                        otp = (otp).substr(otp.length - 6, 6);
                        return [2 /*return*/, otp];
                }
            });
        });
    };
    TotpService.prototype.isAutoCopyEnabled = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.get(constants_service_1.ConstantsService.disableAutoTotpCopyKey)];
                    case 1: return [2 /*return*/, !(_a.sent())];
                }
            });
        });
    };
    // Helpers
    TotpService.prototype.leftpad = function (s, l, p) {
        if (l + 1 >= s.length) {
            s = Array(l + 1 - s.length).join(p) + s;
        }
        return s;
    };
    TotpService.prototype.dec2hex = function (d) {
        return (d < 15.5 ? '0' : '') + Math.round(d).toString(16);
    };
    TotpService.prototype.hex2dec = function (s) {
        return parseInt(s, 16);
    };
    TotpService.prototype.b32tohex = function (s) {
        s = s.toUpperCase();
        var cleanedInput = '';
        for (var i = 0; i < s.length; i++) {
            if (b32Chars.indexOf(s[i]) < 0) {
                continue;
            }
            cleanedInput += s[i];
        }
        s = cleanedInput;
        var bits = '';
        var hex = '';
        for (var i = 0; i < s.length; i++) {
            var byteIndex = b32Chars.indexOf(s.charAt(i));
            if (byteIndex < 0) {
                continue;
            }
            bits += this.leftpad(byteIndex.toString(2), 5, '0');
        }
        for (var i = 0; i + 4 <= bits.length; i += 4) {
            var chunk = bits.substr(i, 4);
            hex = hex + parseInt(chunk, 2).toString(16);
        }
        return hex;
    };
    TotpService.prototype.b32tobytes = function (s) {
        return utils_1.Utils.fromHexToArray(this.b32tohex(s));
    };
    TotpService.prototype.sign = function (keyBytes, timeBytes) {
        return __awaiter(this, void 0, void 0, function () {
            var signature;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.cryptoFunctionService.hmac(timeBytes.buffer, keyBytes.buffer, 'sha1')];
                    case 1:
                        signature = _a.sent();
                        return [2 /*return*/, utils_1.Utils.fromBufferToHex(signature)];
                }
            });
        });
    };
    return TotpService;
}());
exports.TotpService = TotpService;


/***/ }),

/***/ "./jslib/src/services/user.service.ts":
/*!********************************************!*\
  !*** ./jslib/src/services/user.service.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var organization_1 = __webpack_require__(/*! ../models/domain/organization */ "./jslib/src/models/domain/organization.ts");
var Keys = {
    userId: 'userId',
    userEmail: 'userEmail',
    stamp: 'securityStamp',
    organizationsPrefix: 'organizations_',
};
var UserService = /** @class */ (function () {
    function UserService(tokenService, storageService) {
        this.tokenService = tokenService;
        this.storageService = storageService;
    }
    UserService.prototype.setUserIdAndEmail = function (userId, email) {
        this.email = email;
        this.userId = userId;
        return Promise.all([
            this.storageService.save(Keys.userEmail, email),
            this.storageService.save(Keys.userId, userId),
        ]);
    };
    UserService.prototype.setSecurityStamp = function (stamp) {
        this.stamp = stamp;
        return this.storageService.save(Keys.stamp, stamp);
    };
    UserService.prototype.getUserId = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.userId != null) {
                            return [2 /*return*/, this.userId];
                        }
                        _a = this;
                        return [4 /*yield*/, this.storageService.get(Keys.userId)];
                    case 1:
                        _a.userId = _b.sent();
                        return [2 /*return*/, this.userId];
                }
            });
        });
    };
    UserService.prototype.getEmail = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.email != null) {
                            return [2 /*return*/, this.email];
                        }
                        _a = this;
                        return [4 /*yield*/, this.storageService.get(Keys.userEmail)];
                    case 1:
                        _a.email = _b.sent();
                        return [2 /*return*/, this.email];
                }
            });
        });
    };
    UserService.prototype.getSecurityStamp = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.stamp != null) {
                            return [2 /*return*/, this.stamp];
                        }
                        _a = this;
                        return [4 /*yield*/, this.storageService.get(Keys.stamp)];
                    case 1:
                        _a.stamp = _b.sent();
                        return [2 /*return*/, this.stamp];
                }
            });
        });
    };
    UserService.prototype.clear = function () {
        return __awaiter(this, void 0, void 0, function () {
            var userId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, Promise.all([
                                this.storageService.remove(Keys.userId),
                                this.storageService.remove(Keys.userEmail),
                                this.storageService.remove(Keys.stamp),
                                this.clearOrganizations(userId),
                            ])];
                    case 2:
                        _a.sent();
                        this.userId = this.email = this.stamp = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    UserService.prototype.isAuthenticated = function () {
        return __awaiter(this, void 0, void 0, function () {
            var token, userId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.tokenService.getToken()];
                    case 1:
                        token = _a.sent();
                        if (token == null) {
                            return [2 /*return*/, false];
                        }
                        return [4 /*yield*/, this.getUserId()];
                    case 2:
                        userId = _a.sent();
                        return [2 /*return*/, userId != null];
                }
            });
        });
    };
    UserService.prototype.getOrganization = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var userId, organizations;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.organizationsPrefix + userId)];
                    case 2:
                        organizations = _a.sent();
                        if (organizations == null || !organizations.hasOwnProperty(id)) {
                            return [2 /*return*/, null];
                        }
                        return [2 /*return*/, new organization_1.Organization(organizations[id])];
                }
            });
        });
    };
    UserService.prototype.getAllOrganizations = function () {
        return __awaiter(this, void 0, void 0, function () {
            var userId, organizations, response, id;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.get(Keys.organizationsPrefix + userId)];
                    case 2:
                        organizations = _a.sent();
                        response = [];
                        for (id in organizations) {
                            if (organizations.hasOwnProperty(id)) {
                                response.push(new organization_1.Organization(organizations[id]));
                            }
                        }
                        return [2 /*return*/, response];
                }
            });
        });
    };
    UserService.prototype.replaceOrganizations = function (organizations) {
        return __awaiter(this, void 0, void 0, function () {
            var userId;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, this.storageService.save(Keys.organizationsPrefix + userId, organizations)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserService.prototype.clearOrganizations = function (userId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.storageService.remove(Keys.organizationsPrefix + userId)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return UserService;
}());
exports.UserService = UserService;


/***/ }),

/***/ "./jslib/src/services/webCryptoFunction.service.ts":
/*!*********************************************************!*\
  !*** ./jslib/src/services/webCryptoFunction.service.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var forge = __webpack_require__(/*! node-forge */ "./node_modules/node-forge/lib/index.js");
var utils_1 = __webpack_require__(/*! ../misc/utils */ "./jslib/src/misc/utils.ts");
var decryptParameters_1 = __webpack_require__(/*! ../models/domain/decryptParameters */ "./jslib/src/models/domain/decryptParameters.ts");
var WebCryptoFunctionService = /** @class */ (function () {
    function WebCryptoFunctionService(win, platformUtilsService) {
        this.win = win;
        this.platformUtilsService = platformUtilsService;
        this.crypto = typeof win.crypto !== 'undefined' ? win.crypto : null;
        this.subtle = (!!this.crypto && typeof win.crypto.subtle !== 'undefined') ? win.crypto.subtle : null;
        this.isEdge = platformUtilsService.isEdge();
        this.isIE = platformUtilsService.isIE();
    }
    WebCryptoFunctionService.prototype.pbkdf2 = function (password, salt, algorithm, iterations) {
        return __awaiter(this, void 0, void 0, function () {
            var forgeLen, passwordBytes, saltBytes, derivedKeyBytes, wcLen, passwordBuf, saltBuf, pbkdf2Params, impKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.isEdge || this.isIE) {
                            forgeLen = algorithm === 'sha256' ? 32 : 64;
                            passwordBytes = this.toByteString(password);
                            saltBytes = this.toByteString(salt);
                            derivedKeyBytes = forge.pbkdf2(passwordBytes, saltBytes, iterations, forgeLen, algorithm);
                            return [2 /*return*/, utils_1.Utils.fromByteStringToArray(derivedKeyBytes).buffer];
                        }
                        wcLen = algorithm === 'sha256' ? 256 : 512;
                        passwordBuf = this.toBuf(password);
                        saltBuf = this.toBuf(salt);
                        pbkdf2Params = {
                            name: 'PBKDF2',
                            salt: saltBuf,
                            iterations: iterations,
                            hash: { name: this.toWebCryptoAlgorithm(algorithm) },
                        };
                        return [4 /*yield*/, this.subtle.importKey('raw', passwordBuf, { name: 'PBKDF2' }, false, ['deriveBits'])];
                    case 1:
                        impKey = _a.sent();
                        return [4 /*yield*/, this.subtle.deriveBits(pbkdf2Params, impKey, wcLen)];
                    case 2: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    WebCryptoFunctionService.prototype.hash = function (value, algorithm) {
        return __awaiter(this, void 0, void 0, function () {
            var md, valueBytes, valueBuf;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if ((this.isEdge || this.isIE) && algorithm === 'sha1') {
                            md = forge.md.sha1.create();
                            valueBytes = this.toByteString(value);
                            md.update(valueBytes, 'raw');
                            return [2 /*return*/, utils_1.Utils.fromByteStringToArray(md.digest().data).buffer];
                        }
                        valueBuf = this.toBuf(value);
                        return [4 /*yield*/, this.subtle.digest({ name: this.toWebCryptoAlgorithm(algorithm) }, valueBuf)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    WebCryptoFunctionService.prototype.hmac = function (value, key, algorithm) {
        return __awaiter(this, void 0, void 0, function () {
            var signingAlgorithm, impKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        signingAlgorithm = {
                            name: 'HMAC',
                            hash: { name: this.toWebCryptoAlgorithm(algorithm) },
                        };
                        return [4 /*yield*/, this.subtle.importKey('raw', key, signingAlgorithm, false, ['sign'])];
                    case 1:
                        impKey = _a.sent();
                        return [4 /*yield*/, this.subtle.sign(signingAlgorithm, impKey, value)];
                    case 2: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    // Safely compare two values in a way that protects against timing attacks (Double HMAC Verification).
    // ref: https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/february/double-hmac-verification/
    // ref: https://paragonie.com/blog/2015/11/preventing-timing-attacks-on-string-comparison-with-double-hmac-strategy
    WebCryptoFunctionService.prototype.compare = function (a, b) {
        return __awaiter(this, void 0, void 0, function () {
            var macKey, signingAlgorithm, impKey, mac1, mac2, arr1, arr2, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.randomBytes(32)];
                    case 1:
                        macKey = _a.sent();
                        signingAlgorithm = {
                            name: 'HMAC',
                            hash: { name: 'SHA-256' },
                        };
                        return [4 /*yield*/, this.subtle.importKey('raw', macKey, signingAlgorithm, false, ['sign'])];
                    case 2:
                        impKey = _a.sent();
                        return [4 /*yield*/, this.subtle.sign(signingAlgorithm, impKey, a)];
                    case 3:
                        mac1 = _a.sent();
                        return [4 /*yield*/, this.subtle.sign(signingAlgorithm, impKey, b)];
                    case 4:
                        mac2 = _a.sent();
                        if (mac1.byteLength !== mac2.byteLength) {
                            return [2 /*return*/, false];
                        }
                        arr1 = new Uint8Array(mac1);
                        arr2 = new Uint8Array(mac2);
                        for (i = 0; i < arr2.length; i++) {
                            if (arr1[i] !== arr2[i]) {
                                return [2 /*return*/, false];
                            }
                        }
                        return [2 /*return*/, true];
                }
            });
        });
    };
    WebCryptoFunctionService.prototype.hmacFast = function (value, key, algorithm) {
        var hmac = forge.hmac.create();
        hmac.start(algorithm, key);
        hmac.update(value);
        var bytes = hmac.digest().getBytes();
        return Promise.resolve(bytes);
    };
    WebCryptoFunctionService.prototype.compareFast = function (a, b) {
        return __awaiter(this, void 0, void 0, function () {
            var rand, bytes, buffer, i, macKey, hmac, mac1, mac2, equals;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.randomBytes(32)];
                    case 1:
                        rand = _a.sent();
                        bytes = new Uint32Array(rand);
                        buffer = forge.util.createBuffer();
                        for (i = 0; i < bytes.length; i++) {
                            buffer.putInt32(bytes[i]);
                        }
                        macKey = buffer.getBytes();
                        hmac = forge.hmac.create();
                        hmac.start('sha256', macKey);
                        hmac.update(a);
                        mac1 = hmac.digest().getBytes();
                        hmac.start(null, null);
                        hmac.update(b);
                        mac2 = hmac.digest().getBytes();
                        equals = mac1 === mac2;
                        return [2 /*return*/, equals];
                }
            });
        });
    };
    WebCryptoFunctionService.prototype.aesEncrypt = function (data, iv, key) {
        return __awaiter(this, void 0, void 0, function () {
            var impKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.subtle.importKey('raw', key, { name: 'AES-CBC' }, false, ['encrypt'])];
                    case 1:
                        impKey = _a.sent();
                        return [4 /*yield*/, this.subtle.encrypt({ name: 'AES-CBC', iv: iv }, impKey, data)];
                    case 2: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    WebCryptoFunctionService.prototype.aesDecryptFastParameters = function (data, iv, mac, key) {
        var p = new decryptParameters_1.DecryptParameters();
        if (key.meta != null) {
            p.encKey = key.meta.encKeyByteString;
            p.macKey = key.meta.macKeyByteString;
        }
        if (p.encKey == null) {
            p.encKey = forge.util.decode64(key.encKeyB64);
        }
        p.data = forge.util.decode64(data);
        p.iv = forge.util.decode64(iv);
        p.macData = p.iv + p.data;
        if (p.macKey == null && key.macKeyB64 != null) {
            p.macKey = forge.util.decode64(key.macKeyB64);
        }
        if (mac != null) {
            p.mac = forge.util.decode64(mac);
        }
        // cache byte string keys for later
        if (key.meta == null) {
            key.meta = {};
        }
        if (key.meta.encKeyByteString == null) {
            key.meta.encKeyByteString = p.encKey;
        }
        if (p.macKey != null && key.meta.macKeyByteString == null) {
            key.meta.macKeyByteString = p.macKey;
        }
        return p;
    };
    WebCryptoFunctionService.prototype.aesDecryptFast = function (parameters) {
        var dataBuffer = forge.util.createBuffer(parameters.data);
        var decipher = forge.cipher.createDecipher('AES-CBC', parameters.encKey);
        decipher.start({ iv: parameters.iv });
        decipher.update(dataBuffer);
        decipher.finish();
        var val = decipher.output.toString('utf8');
        return Promise.resolve(val);
    };
    WebCryptoFunctionService.prototype.aesDecrypt = function (data, iv, key) {
        return __awaiter(this, void 0, void 0, function () {
            var impKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.subtle.importKey('raw', key, { name: 'AES-CBC' }, false, ['decrypt'])];
                    case 1:
                        impKey = _a.sent();
                        return [4 /*yield*/, this.subtle.decrypt({ name: 'AES-CBC', iv: iv }, impKey, data)];
                    case 2: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    WebCryptoFunctionService.prototype.rsaEncrypt = function (data, publicKey, algorithm) {
        return __awaiter(this, void 0, void 0, function () {
            var rsaParams, impKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        rsaParams = {
                            name: 'RSA-OAEP',
                            hash: { name: this.toWebCryptoAlgorithm(algorithm) },
                        };
                        return [4 /*yield*/, this.subtle.importKey('spki', publicKey, rsaParams, false, ['encrypt'])];
                    case 1:
                        impKey = _a.sent();
                        return [4 /*yield*/, this.subtle.encrypt(rsaParams, impKey, data)];
                    case 2: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    WebCryptoFunctionService.prototype.rsaDecrypt = function (data, privateKey, algorithm) {
        return __awaiter(this, void 0, void 0, function () {
            var rsaParams, impKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        rsaParams = {
                            name: 'RSA-OAEP',
                            hash: { name: this.toWebCryptoAlgorithm(algorithm) },
                        };
                        return [4 /*yield*/, this.subtle.importKey('pkcs8', privateKey, rsaParams, false, ['decrypt'])];
                    case 1:
                        impKey = _a.sent();
                        return [4 /*yield*/, this.subtle.decrypt(rsaParams, impKey, data)];
                    case 2: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    WebCryptoFunctionService.prototype.rsaExtractPublicKey = function (privateKey) {
        return __awaiter(this, void 0, void 0, function () {
            var rsaParams, impPrivateKey, jwkPrivateKey, jwkPublicKeyParams, impPublicKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        rsaParams = {
                            name: 'RSA-OAEP',
                            // Have to specify some algorithm
                            hash: { name: this.toWebCryptoAlgorithm('sha1') },
                        };
                        return [4 /*yield*/, this.subtle.importKey('pkcs8', privateKey, rsaParams, true, ['decrypt'])];
                    case 1:
                        impPrivateKey = _a.sent();
                        return [4 /*yield*/, this.subtle.exportKey('jwk', impPrivateKey)];
                    case 2:
                        jwkPrivateKey = _a.sent();
                        jwkPublicKeyParams = {
                            kty: 'RSA',
                            e: jwkPrivateKey.e,
                            n: jwkPrivateKey.n,
                            alg: 'RSA-OAEP',
                            ext: true,
                        };
                        return [4 /*yield*/, this.subtle.importKey('jwk', jwkPublicKeyParams, rsaParams, true, ['encrypt'])];
                    case 3:
                        impPublicKey = _a.sent();
                        return [4 /*yield*/, this.subtle.exportKey('spki', impPublicKey)];
                    case 4: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    WebCryptoFunctionService.prototype.rsaGenerateKeyPair = function (length) {
        return __awaiter(this, void 0, void 0, function () {
            var rsaParams, keyPair, publicKey, privateKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        rsaParams = {
                            name: 'RSA-OAEP',
                            modulusLength: length,
                            publicExponent: new Uint8Array([0x01, 0x00, 0x01]),
                            // Have to specify some algorithm
                            hash: { name: this.toWebCryptoAlgorithm('sha1') },
                        };
                        return [4 /*yield*/, this.subtle.generateKey(rsaParams, true, ['encrypt', 'decrypt'])];
                    case 1:
                        keyPair = _a.sent();
                        return [4 /*yield*/, this.subtle.exportKey('spki', keyPair.publicKey)];
                    case 2:
                        publicKey = _a.sent();
                        return [4 /*yield*/, this.subtle.exportKey('pkcs8', keyPair.privateKey)];
                    case 3:
                        privateKey = _a.sent();
                        return [2 /*return*/, [publicKey, privateKey]];
                }
            });
        });
    };
    WebCryptoFunctionService.prototype.randomBytes = function (length) {
        var arr = new Uint8Array(length);
        this.crypto.getRandomValues(arr);
        return Promise.resolve(arr.buffer);
    };
    WebCryptoFunctionService.prototype.toBuf = function (value) {
        var buf;
        if (typeof (value) === 'string') {
            buf = utils_1.Utils.fromUtf8ToArray(value).buffer;
        }
        else {
            buf = value;
        }
        return buf;
    };
    WebCryptoFunctionService.prototype.toByteString = function (value) {
        var bytes;
        if (typeof (value) === 'string') {
            bytes = forge.util.encodeUtf8(value);
        }
        else {
            bytes = utils_1.Utils.fromBufferToByteString(value);
        }
        return bytes;
    };
    WebCryptoFunctionService.prototype.toWebCryptoAlgorithm = function (algorithm) {
        return algorithm === 'sha1' ? 'SHA-1' : algorithm === 'sha256' ? 'SHA-256' : 'SHA-512';
    };
    return WebCryptoFunctionService;
}());
exports.WebCryptoFunctionService = WebCryptoFunctionService;


/***/ }),

/***/ "./src lazy recursive":
/*!***********************************!*\
  !*** ./src lazy namespace object ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./src lazy recursive";

/***/ }),

/***/ "./src/app/accounts/accept-organization.component.html":
/*!*************************************************************!*\
  !*** ./src/app/accounts/accept-organization.component.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<div class=\"mt-5 d-flex justify-content-center\" *ngIf=\"loading\">\n    <div>\n        <img src=\"" + __webpack_require__(/*! ../../images/logo-dark@2x.png */ "./src/images/logo-dark@2x.png") + "\" class=\"mb-4 logo\" alt=\"Bitwarden\">\n        <p class=\"text-center\">\n            <i class=\"fa fa-spinner fa-spin fa-2x text-muted\" title=\"{{'loading' | i18n}}\"></i>\n        </p>\n    </div>\n</div>\n<div class=\"container\" *ngIf=\"!loading && !authed\">\n    <div class=\"row justify-content-md-center mt-5\">\n        <div class=\"col-5\">\n            <p class=\"lead text-center mb-4\">{{'joinOrganization' | i18n}}</p>\n            <div class=\"card d-block\">\n                <div class=\"card-body\">\n                    <p class=\"text-center\">\n                        {{orgName}}\n                        <strong class=\"d-block mt-2\">{{email}}</strong>\n                    </p>\n                    <p>{{'joinOrganizationDesc' | i18n}}</p>\n                    <hr>\n                    <div class=\"d-flex\">\n                        <a routerLink=\"/\" [queryParams]=\"{email: email}\" class=\"btn btn-primary btn-block\">\n                            {{'logIn' | i18n}}\n                        </a>\n                        <a routerLink=\"/register\" [queryParams]=\"{email: email}\" class=\"btn btn-primary btn-block ml-2 mt-0\">\n                            {{'createAccount' | i18n}}\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/accounts/accept-organization.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/accounts/accept-organization.component.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var state_service_1 = __webpack_require__(/*! jslib/abstractions/state.service */ "./jslib/src/abstractions/state.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var organizationUserAcceptRequest_1 = __webpack_require__(/*! jslib/models/request/organizationUserAcceptRequest */ "./jslib/src/models/request/organizationUserAcceptRequest.ts");
var AcceptOrganizationComponent = /** @class */ (function () {
    function AcceptOrganizationComponent(router, toasterService, i18nService, route, apiService, userService, stateService) {
        this.router = router;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.route = route;
        this.apiService = apiService;
        this.userService = userService;
        this.stateService = stateService;
        this.loading = true;
        this.authed = false;
    }
    AcceptOrganizationComponent.prototype.ngOnInit = function () {
        var _this = this;
        var fired = false;
        this.route.queryParams.subscribe(function (qParams) { return __awaiter(_this, void 0, void 0, function () {
            var error, _a, request, toast, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (fired) {
                            return [2 /*return*/];
                        }
                        fired = true;
                        return [4 /*yield*/, this.stateService.remove('orgInvitation')];
                    case 1:
                        _c.sent();
                        error = qParams.organizationId == null || qParams.organizationUserId == null || qParams.token == null;
                        if (!!error) return [3 /*break*/, 9];
                        _a = this;
                        return [4 /*yield*/, this.userService.isAuthenticated()];
                    case 2:
                        _a.authed = _c.sent();
                        if (!this.authed) return [3 /*break*/, 7];
                        request = new organizationUserAcceptRequest_1.OrganizationUserAcceptRequest();
                        request.token = qParams.token;
                        _c.label = 3;
                    case 3:
                        _c.trys.push([3, 5, , 6]);
                        this.actionPromise = this.apiService.postOrganizationUserAccept(qParams.organizationId, qParams.organizationUserId, request);
                        return [4 /*yield*/, this.actionPromise];
                    case 4:
                        _c.sent();
                        toast = {
                            type: 'success',
                            title: this.i18nService.t('inviteAccepted'),
                            body: this.i18nService.t('inviteAcceptedDesc'),
                            timeout: 10000,
                        };
                        this.toasterService.popAsync(toast);
                        this.router.navigate(['/vault']);
                        return [3 /*break*/, 6];
                    case 5:
                        _b = _c.sent();
                        error = true;
                        return [3 /*break*/, 6];
                    case 6: return [3 /*break*/, 9];
                    case 7: return [4 /*yield*/, this.stateService.save('orgInvitation', qParams)];
                    case 8:
                        _c.sent();
                        this.email = qParams.email;
                        this.orgName = qParams.organizationName;
                        if (this.orgName != null) {
                            // Fix URL encoding of space issue with Angular
                            this.orgName = this.orgName.replace(/\+/g, ' ');
                        }
                        _c.label = 9;
                    case 9:
                        if (error) {
                            this.toasterService.popAsync('error', null, this.i18nService.t('inviteAcceptFailed'));
                            this.router.navigate(['/']);
                        }
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        }); });
    };
    AcceptOrganizationComponent = __decorate([
        core_1.Component({
            selector: 'app-accept-organization',
            template: __webpack_require__(/*! ./accept-organization.component.html */ "./src/app/accounts/accept-organization.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.Router, angular2_toaster_1.ToasterService,
            i18n_service_1.I18nService, router_1.ActivatedRoute,
            api_service_1.ApiService, user_service_1.UserService,
            state_service_1.StateService])
    ], AcceptOrganizationComponent);
    return AcceptOrganizationComponent;
}());
exports.AcceptOrganizationComponent = AcceptOrganizationComponent;


/***/ }),

/***/ "./src/app/accounts/hint.component.html":
/*!**********************************************!*\
  !*** ./src/app/accounts/hint.component.html ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" class=\"container\" ngNativeValidate>\n    <div class=\"row justify-content-md-center mt-5\">\n        <div class=\"col-5\">\n            <p class=\"lead text-center mb-4\">{{'passwordHint' | i18n}}</p>\n            <div class=\"card d-block\">\n                <div class=\"card-body\">\n                    <div class=\"form-group\">\n                        <label for=\"email\">{{'emailAddress' | i18n}}</label>\n                        <input id=\"email\" class=\"form-control\" type=\"text\" name=\"Email\" [(ngModel)]=\"email\" required appAutofocus inputmode=\"email\"\n                            appInputVerbatim=\"false\">\n                        <small class=\"form-text text-muted\">{{'enterEmailToGetHint' | i18n}}</small>\n                    </div>\n                    <hr>\n                    <div class=\"d-flex\">\n                        <button type=\"submit\" class=\"btn btn-primary btn-block btn-submit\" [disabled]=\"form.loading\">\n                            <span [hidden]=\"form.loading\">{{'submit' | i18n}}</span>\n                            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        </button>\n                        <a routerLink=\"/\" class=\"btn btn-outline-secondary btn-block ml-2 mt-0\">\n                            {{'cancel' | i18n}}\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/accounts/hint.component.ts":
/*!********************************************!*\
  !*** ./src/app/accounts/hint.component.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var hint_component_1 = __webpack_require__(/*! jslib/angular/components/hint.component */ "./jslib/src/angular/components/hint.component.ts");
var HintComponent = /** @class */ (function (_super) {
    __extends(HintComponent, _super);
    function HintComponent(router, analytics, toasterService, i18nService, apiService) {
        return _super.call(this, router, analytics, toasterService, i18nService, apiService) || this;
    }
    HintComponent = __decorate([
        core_1.Component({
            selector: 'app-hint',
            template: __webpack_require__(/*! ./hint.component.html */ "./src/app/accounts/hint.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.Router, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            api_service_1.ApiService])
    ], HintComponent);
    return HintComponent;
}(hint_component_1.HintComponent));
exports.HintComponent = HintComponent;


/***/ }),

/***/ "./src/app/accounts/lock.component.html":
/*!**********************************************!*\
  !*** ./src/app/accounts/lock.component.html ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form (ngSubmit)=\"submit()\" class=\"container\" ngNativeValidate>\n    <div class=\"row justify-content-md-center mt-5\">\n        <div class=\"col-5\">\n            <p class=\"text-center mb-4\">\n                <i class=\"fa fa-lock fa-4x text-muted\"></i>\n            </p>\n            <p class=\"lead text-center mx-4 mb-4\">{{'yourVaultIsLocked' | i18n}}</p>\n            <div class=\"card d-block\">\n                <div class=\"card-body\">\n                    <div class=\"form-group\">\n                        <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n                        <div class=\"d-flex\">\n                            <input id=\"masterPassword\" type=\"{{showPassword ? 'text' : 'password'}}\" name=\"MasterPassword\" class=\"text-monospace form-control\"\n                                [(ngModel)]=\"masterPassword\" required appAutofocus appInputVerbatim>\n                            <button type=\"button\" class=\"ml-1 btn btn-link\" title=\"{{'toggleVisibility' | i18n}}\" (click)=\"togglePassword()\">\n                                <i class=\"fa fa-lg\" [ngClass]=\"{'fa-eye': !showPassword, 'fa-eye-slash': showPassword}\"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <hr>\n                    <div class=\"d-flex\">\n                        <button type=\"submit\" class=\"btn btn-primary btn-block\">\n                            <i class=\"fa fa-unlock-alt\"></i>\n                            {{'unlock' | i18n}}\n                        </button>\n                        <button type=\"button\" class=\"btn btn-outline-secondary btn-block ml-2 mt-0\" (click)=\"logOut()\">\n                            {{'logOut' | i18n}}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/accounts/lock.component.ts":
/*!********************************************!*\
  !*** ./src/app/accounts/lock.component.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var router_service_1 = __webpack_require__(/*! ../services/router.service */ "./src/app/services/router.service.ts");
var lock_component_1 = __webpack_require__(/*! jslib/angular/components/lock.component */ "./jslib/src/angular/components/lock.component.ts");
var LockComponent = /** @class */ (function (_super) {
    __extends(LockComponent, _super);
    function LockComponent(router, analytics, toasterService, i18nService, platformUtilsService, messagingService, userService, cryptoService, routerService) {
        var _this = _super.call(this, router, analytics, toasterService, i18nService, platformUtilsService, messagingService, userService, cryptoService) || this;
        _this.routerService = routerService;
        return _this;
    }
    LockComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var authed, previousUrl;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.isAuthenticated()];
                    case 1:
                        authed = _a.sent();
                        if (!!authed) return [3 /*break*/, 2];
                        this.router.navigate(['/']);
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.cryptoService.hasKey()];
                    case 3:
                        if (_a.sent()) {
                            this.router.navigate(['vault']);
                        }
                        _a.label = 4;
                    case 4:
                        previousUrl = this.routerService.getPreviousUrl();
                        if (previousUrl !== '/' && previousUrl.indexOf('lock') === -1) {
                            this.successRoute = previousUrl;
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    LockComponent = __decorate([
        core_1.Component({
            selector: 'app-lock',
            template: __webpack_require__(/*! ./lock.component.html */ "./src/app/accounts/lock.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.Router, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            platformUtils_service_1.PlatformUtilsService, messaging_service_1.MessagingService,
            user_service_1.UserService, crypto_service_1.CryptoService,
            router_service_1.RouterService])
    ], LockComponent);
    return LockComponent;
}(lock_component_1.LockComponent));
exports.LockComponent = LockComponent;


/***/ }),

/***/ "./src/app/accounts/login.component.html":
/*!***********************************************!*\
  !*** ./src/app/accounts/login.component.html ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" class=\"container\" ngNativeValidate>\n    <div class=\"row justify-content-md-center mt-5\">\n        <div class=\"col-5\">\n            <img src=\"" + __webpack_require__(/*! ../../images/logo-dark@2x.png */ "./src/images/logo-dark@2x.png") + "\" class=\"logo mb-2\" alt=\"Bitwarden\">\n            <p class=\"lead text-center mx-4 mb-4\">{{'loginOrCreateNewAccount' | i18n}}</p>\n            <div class=\"card d-block\">\n                <div class=\"card-body\">\n                    <div class=\"form-group\">\n                        <label for=\"email\">{{'emailAddress' | i18n}}</label>\n                        <input id=\"email\" class=\"form-control\" type=\"text\" name=\"Email\" [(ngModel)]=\"email\" required inputmode=\"email\" appInputVerbatim=\"false\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n                        <div class=\"d-flex\">\n                            <input id=\"masterPassword\" type=\"{{showPassword ? 'text' : 'password'}}\" name=\"MasterPassword\" class=\"text-monospace form-control\"\n                                [(ngModel)]=\"masterPassword\" required appInputVerbatim>\n                            <button type=\"button\" class=\"ml-1 btn btn-link\" title=\"{{'toggleVisibility' | i18n}}\" (click)=\"togglePassword()\">\n                                <i class=\"fa fa-lg\" [ngClass]=\"{'fa-eye': !showPassword, 'fa-eye-slash': showPassword}\"></i>\n                            </button>\n                        </div>\n                        <small class=\"form-text\">\n                            <a routerLink=\"/hint\">{{'getMasterPasswordHint' | i18n}}</a>\n                        </small>\n                    </div>\n                    <div class=\"form-check\">\n                        <input type=\"checkbox\" class=\"form-check-input\" id=\"rememberEmail\" name=\"RememberEmail\" [(ngModel)]=\"rememberEmail\">\n                        <label class=\"form-check-label\" for=\"rememberEmail\">{{'rememberEmail' | i18n}}</label>\n                    </div>\n                    <hr>\n                    <div class=\"d-flex\">\n                        <button type=\"submit\" class=\"btn btn-primary btn-block btn-submit\" [disabled]=\"form.loading\">\n                            <span>\n                                <i class=\"fa fa-sign-in\"></i> {{'logIn' | i18n}}\n                            </span>\n                            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        </button>\n                        <a routerLink=\"/register\" [queryParams]=\"{email: email}\" class=\"btn btn-outline-secondary btn-block ml-2 mt-0\">\n                            <i class=\"fa fa-pencil-square-o\"></i> {{'createAccount' | i18n}}\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/accounts/login.component.ts":
/*!*********************************************!*\
  !*** ./src/app/accounts/login.component.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var auth_service_1 = __webpack_require__(/*! jslib/abstractions/auth.service */ "./jslib/src/abstractions/auth.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var state_service_1 = __webpack_require__(/*! jslib/abstractions/state.service */ "./jslib/src/abstractions/state.service.ts");
var storage_service_1 = __webpack_require__(/*! jslib/abstractions/storage.service */ "./jslib/src/abstractions/storage.service.ts");
var login_component_1 = __webpack_require__(/*! jslib/angular/components/login.component */ "./jslib/src/angular/components/login.component.ts");
var LoginComponent = /** @class */ (function (_super) {
    __extends(LoginComponent, _super);
    function LoginComponent(authService, router, analytics, toasterService, i18nService, route, storageService, stateService) {
        var _this = _super.call(this, authService, router, analytics, toasterService, i18nService, storageService) || this;
        _this.route = route;
        _this.stateService = stateService;
        _this.onSuccessfulLoginNavigate = _this.goAfterLogIn;
        return _this;
    }
    LoginComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                this.route.queryParams.subscribe(function (qParams) { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                if (qParams.email != null && qParams.email.indexOf('@') > -1) {
                                    this.email = qParams.email;
                                }
                                if (qParams.premium != null) {
                                    this.stateService.save('loginRedirect', { route: '/settings/premium' });
                                }
                                else if (qParams.org != null) {
                                    this.stateService.save('loginRedirect', { route: '/settings/create-organization', qParams: { plan: qParams.org } });
                                }
                                return [4 /*yield*/, _super.prototype.ngOnInit.call(this)];
                            case 1:
                                _a.sent();
                                return [2 /*return*/];
                        }
                    });
                }); });
                return [2 /*return*/];
            });
        });
    };
    LoginComponent.prototype.goAfterLogIn = function () {
        return __awaiter(this, void 0, void 0, function () {
            var invite, loginRedirect;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.stateService.get('orgInvitation')];
                    case 1:
                        invite = _a.sent();
                        if (!(invite != null)) return [3 /*break*/, 2];
                        this.router.navigate(['accept-organization'], { queryParams: invite });
                        return [3 /*break*/, 6];
                    case 2: return [4 /*yield*/, this.stateService.get('loginRedirect')];
                    case 3:
                        loginRedirect = _a.sent();
                        if (!(loginRedirect != null)) return [3 /*break*/, 5];
                        this.router.navigate([loginRedirect.route], { queryParams: loginRedirect.qParams });
                        return [4 /*yield*/, this.stateService.remove('loginRedirect')];
                    case 4:
                        _a.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.router.navigate([this.successRoute]);
                        _a.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    LoginComponent = __decorate([
        core_1.Component({
            selector: 'app-login',
            template: __webpack_require__(/*! ./login.component.html */ "./src/app/accounts/login.component.html"),
        }),
        __metadata("design:paramtypes", [auth_service_1.AuthService, router_1.Router,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            i18n_service_1.I18nService, router_1.ActivatedRoute,
            storage_service_1.StorageService, state_service_1.StateService])
    ], LoginComponent);
    return LoginComponent;
}(login_component_1.LoginComponent));
exports.LoginComponent = LoginComponent;


/***/ }),

/***/ "./src/app/accounts/recover-delete.component.html":
/*!********************************************************!*\
  !*** ./src/app/accounts/recover-delete.component.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" class=\"container\" ngNativeValidate>\n    <div class=\"row justify-content-md-center mt-5\">\n        <div class=\"col-5\">\n            <p class=\"lead text-center mb-4\">{{'deleteAccount' | i18n}}</p>\n            <div class=\"card\">\n                <div class=\"card-body\">\n                    <p>{{'deleteRecoverDesc' | i18n}}</p>\n                    <div class=\"form-group\">\n                        <label for=\"email\">{{'emailAddress' | i18n}}</label>\n                        <input id=\"email\" class=\"form-control\" type=\"text\" name=\"Email\" [(ngModel)]=\"email\" required appAutofocus inputmode=\"email\"\n                            appInputVerbatim=\"false\">\n                    </div>\n                    <hr>\n                    <div class=\"d-flex\">\n                        <button type=\"submit\" class=\"btn btn-primary btn-block btn-submit\" [disabled]=\"form.loading\">\n                            <span>{{'submit' | i18n}}</span>\n                            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        </button>\n                        <a routerLink=\"/\" class=\"btn btn-outline-secondary btn-block ml-2 mt-0\">\n                            {{'cancel' | i18n}}\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/accounts/recover-delete.component.ts":
/*!******************************************************!*\
  !*** ./src/app/accounts/recover-delete.component.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var deleteRecoverRequest_1 = __webpack_require__(/*! jslib/models/request/deleteRecoverRequest */ "./jslib/src/models/request/deleteRecoverRequest.ts");
var RecoverDeleteComponent = /** @class */ (function () {
    function RecoverDeleteComponent(router, apiService, analytics, toasterService, i18nService) {
        this.router = router;
        this.apiService = apiService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
    }
    RecoverDeleteComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        request = new deleteRecoverRequest_1.DeleteRecoverRequest();
                        request.email = this.email.toLowerCase();
                        this.formPromise = this.apiService.postAccountRecoverDelete(request);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Started Delete Recovery' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('deleteRecoverEmailSent'));
                        this.router.navigate(['/']);
                        return [3 /*break*/, 3];
                    case 2:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    RecoverDeleteComponent = __decorate([
        core_1.Component({
            selector: 'app-recover-delete',
            template: __webpack_require__(/*! ./recover-delete.component.html */ "./src/app/accounts/recover-delete.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.Router, api_service_1.ApiService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            i18n_service_1.I18nService])
    ], RecoverDeleteComponent);
    return RecoverDeleteComponent;
}());
exports.RecoverDeleteComponent = RecoverDeleteComponent;


/***/ }),

/***/ "./src/app/accounts/recover-two-factor.component.html":
/*!************************************************************!*\
  !*** ./src/app/accounts/recover-two-factor.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" class=\"container\" ngNativeValidate>\n    <div class=\"row justify-content-md-center mt-5\">\n        <div class=\"col-5\">\n            <p class=\"lead text-center mb-4\">{{'recoverAccountTwoStep' | i18n}}</p>\n            <div class=\"card\">\n                <div class=\"card-body\">\n                    <p>{{'recoverAccountTwoStepDesc' | i18n}}\n                        <a href=\"https://help.bitwarden.com/article/lost-two-step-device/\" target=\"_blank\" rel=\"noopener\">{{'learnMore' | i18n}}</a>\n                    </p>\n                    <div class=\"form-group\">\n                        <label for=\"email\">{{'emailAddress' | i18n}}</label>\n                        <input id=\"email\" class=\"form-control\" type=\"text\" name=\"Email\" [(ngModel)]=\"email\" required appAutofocus inputmode=\"email\"\n                            appInputVerbatim=\"false\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n                        <input id=\"masterPassword\" type=\"password\" name=\"MasterPassword\" class=\"form-control\" [(ngModel)]=\"masterPassword\" required\n                            appInputVerbatim>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"recoveryCode\">{{'recoveryCodeTitle' | i18n}}</label>\n                        <input id=\"recoveryCode\" class=\"text-monospace form-control\" type=\"text\" name=\"RecoveryCode\" [(ngModel)]=\"recoveryCode\" required\n                            appInputVerbatim>\n                    </div>\n                    <hr>\n                    <div class=\"d-flex\">\n                        <button type=\"submit\" class=\"btn btn-primary btn-block btn-submit\" [disabled]=\"form.loading\">\n                            <span>{{'submit' | i18n}}</span>\n                            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        </button>\n                        <a routerLink=\"/\" class=\"btn btn-outline-secondary btn-block ml-2 mt-0\">\n                            {{'cancel' | i18n}}\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/accounts/recover-two-factor.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/accounts/recover-two-factor.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var twoFactorRecoveryRequest_1 = __webpack_require__(/*! jslib/models/request/twoFactorRecoveryRequest */ "./jslib/src/models/request/twoFactorRecoveryRequest.ts");
var RecoverTwoFactorComponent = /** @class */ (function () {
    function RecoverTwoFactorComponent(router, apiService, analytics, toasterService, i18nService, cryptoService) {
        this.router = router;
        this.apiService = apiService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.cryptoService = cryptoService;
    }
    RecoverTwoFactorComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, key, _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 4, , 5]);
                        request = new twoFactorRecoveryRequest_1.TwoFactorRecoveryRequest();
                        request.recoveryCode = this.recoveryCode.replace(/\s/g, '').toLowerCase();
                        request.email = this.email.toLowerCase();
                        return [4 /*yield*/, this.cryptoService.makeKey(this.masterPassword, request.email)];
                    case 1:
                        key = _c.sent();
                        _a = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, key)];
                    case 2:
                        _a.masterPasswordHash = _c.sent();
                        this.formPromise = this.apiService.postTwoFactorRecover(request);
                        return [4 /*yield*/, this.formPromise];
                    case 3:
                        _c.sent();
                        this.analytics.eventTrack.next({ action: 'Recovered 2FA' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('twoStepRecoverDisabled'));
                        this.router.navigate(['/']);
                        return [3 /*break*/, 5];
                    case 4:
                        _b = _c.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    RecoverTwoFactorComponent = __decorate([
        core_1.Component({
            selector: 'app-recover-two-factor',
            template: __webpack_require__(/*! ./recover-two-factor.component.html */ "./src/app/accounts/recover-two-factor.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.Router, api_service_1.ApiService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            i18n_service_1.I18nService, crypto_service_1.CryptoService])
    ], RecoverTwoFactorComponent);
    return RecoverTwoFactorComponent;
}());
exports.RecoverTwoFactorComponent = RecoverTwoFactorComponent;


/***/ }),

/***/ "./src/app/accounts/register.component.html":
/*!**************************************************!*\
  !*** ./src/app/accounts/register.component.html ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" class=\"container\" ngNativeValidate>\n    <div class=\"row justify-content-md-center mt-5\">\n        <div class=\"col-5\">\n            <p class=\"lead text-center mb-4\">{{'createAccount' | i18n}}</p>\n            <div class=\"card d-block\">\n                <div class=\"card-body\">\n                    <app-callout title=\"{{'createOrganizationStep1' | i18n}}\" type=\"info\" icon=\"fa-thumb-tack\" *ngIf=\"showCreateOrgMessage\">\n                        {{'createOrganizationCreatePersonalAccount' | i18n}}\n                    </app-callout>\n                    <div class=\"form-group\">\n                        <label for=\"email\">{{'emailAddress' | i18n}}</label>\n                        <input id=\"email\" class=\"form-control\" type=\"text\" name=\"Email\" [(ngModel)]=\"email\" required [appAutofocus]=\"email === ''\"\n                            inputmode=\"email\" appInputVerbatim=\"false\">\n                        <small class=\"form-text text-muted\">{{'emailAddressDesc' | i18n}}</small>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"name\">{{'yourName' | i18n}}</label>\n                        <input id=\"name\" class=\"form-control\" type=\"text\" name=\"Name\" [(ngModel)]=\"name\" [appAutofocus]=\"email !== ''\">\n                        <small class=\"form-text text-muted\">{{'yourNameDesc' | i18n}}</small>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n                        <div class=\"d-flex\">\n                            <input id=\"masterPassword\" type=\"{{showPassword ? 'text' : 'password'}}\" name=\"MasterPassword\" class=\"text-monospace form-control\"\n                                [(ngModel)]=\"masterPassword\" required appInputVerbatim>\n                            <button type=\"button\" class=\"ml-1 btn btn-link\" title=\"{{'toggleVisibility' | i18n}}\" (click)=\"togglePassword(false)\">\n                                <i class=\"fa fa-lg\" [ngClass]=\"{'fa-eye': !showPassword, 'fa-eye-slash': showPassword}\"></i>\n                            </button>\n                        </div>\n                        <small class=\"form-text text-muted\">{{'masterPassDesc' | i18n}}</small>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"masterPasswordRetype\">{{'reTypeMasterPass' | i18n}}</label>\n                        <div class=\"d-flex\">\n                            <input id=\"masterPasswordRetype\" type=\"{{showPassword ? 'text' : 'password'}}\" name=\"MasterPasswordRetype\" class=\"text-monospace form-control\"\n                                [(ngModel)]=\"confirmMasterPassword\" required appInputVerbatim>\n                            <button type=\"button\" class=\"ml-1 btn btn-link\" title=\"{{'toggleVisibility' | i18n}}\" (click)=\"togglePassword(true)\">\n                                <i class=\"fa fa-lg\" [ngClass]=\"{'fa-eye': !showPassword, 'fa-eye-slash': showPassword}\"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"hint\">{{'masterPassHint' | i18n}}</label>\n                        <input id=\"hint\" class=\"form-control\" type=\"text\" name=\"Hint\" [(ngModel)]=\"hint\">\n                        <small class=\"form-text text-muted\">{{'masterPassHintDesc' | i18n}}</small>\n                    </div>\n                    <hr>\n                    <div class=\"d-flex mb-2\">\n                        <button type=\"submit\" class=\"btn btn-primary btn-block btn-submit\" [disabled]=\"form.loading\">\n                            <span>{{'submit' | i18n}}</span>\n                            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        </button>\n                        <a routerLink=\"/\" class=\"btn btn-outline-secondary btn-block ml-2 mt-0\">\n                            {{'cancel' | i18n}}\n                        </a>\n                    </div>\n                    <small class=\"text-muted\" *ngIf=\"showTerms\">\n                        {{'submitAgreePolicies' | i18n}}\n                        <a href=\"https://bitwarden.com/terms/\" target=\"_blank\" rel=\"noopener\">{{'termsOfService' | i18n}}</a>,\n                        <a href=\"https://bitwarden.com/privacy/\" target=\"_blank\" rel=\"noopener\">{{'privacyPolicy' | i18n}}</a>\n                    </small>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/accounts/register.component.ts":
/*!************************************************!*\
  !*** ./src/app/accounts/register.component.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var auth_service_1 = __webpack_require__(/*! jslib/abstractions/auth.service */ "./jslib/src/abstractions/auth.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var state_service_1 = __webpack_require__(/*! jslib/abstractions/state.service */ "./jslib/src/abstractions/state.service.ts");
var register_component_1 = __webpack_require__(/*! jslib/angular/components/register.component */ "./jslib/src/angular/components/register.component.ts");
var RegisterComponent = /** @class */ (function (_super) {
    __extends(RegisterComponent, _super);
    function RegisterComponent(authService, router, analytics, toasterService, i18nService, cryptoService, apiService, route, stateService, platformUtilsService) {
        var _this = _super.call(this, authService, router, analytics, toasterService, i18nService, cryptoService, apiService, stateService) || this;
        _this.route = route;
        _this.showCreateOrgMessage = false;
        _this.showTerms = true;
        _this.showTerms = !platformUtilsService.isSelfHost();
        return _this;
    }
    RegisterComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.queryParams.subscribe(function (qParams) {
            if (qParams.email != null && qParams.email.indexOf('@') > -1) {
                _this.email = qParams.email;
            }
            if (qParams.premium != null) {
                _this.stateService.save('loginRedirect', { route: '/settings/premium' });
            }
            else if (qParams.org != null) {
                _this.showCreateOrgMessage = true;
                _this.stateService.save('loginRedirect', { route: '/settings/create-organization', qParams: { plan: qParams.org } });
            }
        });
    };
    RegisterComponent = __decorate([
        core_1.Component({
            selector: 'app-register',
            template: __webpack_require__(/*! ./register.component.html */ "./src/app/accounts/register.component.html"),
        }),
        __metadata("design:paramtypes", [auth_service_1.AuthService, router_1.Router,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            i18n_service_1.I18nService, crypto_service_1.CryptoService,
            api_service_1.ApiService, router_1.ActivatedRoute,
            state_service_1.StateService, platformUtils_service_1.PlatformUtilsService])
    ], RegisterComponent);
    return RegisterComponent;
}(register_component_1.RegisterComponent));
exports.RegisterComponent = RegisterComponent;


/***/ }),

/***/ "./src/app/accounts/two-factor-options.component.html":
/*!************************************************************!*\
  !*** ./src/app/accounts/two-factor-options.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{'twoStepOptions' | i18n}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"list-group list-group-flush\">\n                <a href=\"#\" appStopClick *ngFor=\"let p of providers\" (click)=\"choose(p)\" class=\"list-group-item list-group-item-action\">\n                    <img [src]=\"'images/two-factor/' + p.type + '.png'\" alt=\"\" class=\"pull-right\">\n                    <h3>{{p.name}}</h3>\n                    {{p.description}}\n                </a>\n                <a href=\"#\" appStopClick class=\"list-group-item list-group-item-action\" (click)=\"recover()\">\n                    <h3>{{'recoveryCodeTitle' | i18n}}</h3>\n                    {{'recoveryCodeDesc' | i18n}}\n                </a>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n            </div>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/accounts/two-factor-options.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/accounts/two-factor-options.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var auth_service_1 = __webpack_require__(/*! jslib/abstractions/auth.service */ "./jslib/src/abstractions/auth.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var two_factor_options_component_1 = __webpack_require__(/*! jslib/angular/components/two-factor-options.component */ "./jslib/src/angular/components/two-factor-options.component.ts");
var TwoFactorOptionsComponent = /** @class */ (function (_super) {
    __extends(TwoFactorOptionsComponent, _super);
    function TwoFactorOptionsComponent(authService, router, analytics, toasterService, i18nService, platformUtilsService) {
        return _super.call(this, authService, router, analytics, toasterService, i18nService, platformUtilsService, window) || this;
    }
    TwoFactorOptionsComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor-options',
            template: __webpack_require__(/*! ./two-factor-options.component.html */ "./src/app/accounts/two-factor-options.component.html"),
        }),
        __metadata("design:paramtypes", [auth_service_1.AuthService, router_1.Router,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            i18n_service_1.I18nService, platformUtils_service_1.PlatformUtilsService])
    ], TwoFactorOptionsComponent);
    return TwoFactorOptionsComponent;
}(two_factor_options_component_1.TwoFactorOptionsComponent));
exports.TwoFactorOptionsComponent = TwoFactorOptionsComponent;


/***/ }),

/***/ "./src/app/accounts/two-factor.component.html":
/*!****************************************************!*\
  !*** ./src/app/accounts/two-factor.component.html ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" class=\"container\" ngNativeValidate>\n    <div class=\"row justify-content-md-center mt-5\">\n        <div class=\"col-5\" [ngClass]=\"{'col-9': selectedProviderType === providerType.Duo || selectedProviderType === providerType.OrganizationDuo}\">\n            <p class=\"lead text-center mb-4\">{{title}}</p>\n            <div class=\"card d-block\">\n                <div class=\"card-body\">\n                    <ng-container *ngIf=\"selectedProviderType === providerType.Email || selectedProviderType === providerType.Authenticator\">\n                        <p *ngIf=\"selectedProviderType === providerType.Authenticator\">{{'enterVerificationCodeApp' | i18n}}</p>\n                        <p *ngIf=\"selectedProviderType === providerType.Email\">\n                            {{'enterVerificationCodeEmail' | i18n : twoFactorEmail}}\n                        </p>\n                        <div class=\"form-group\">\n                            <label for=\"code\" class=\"sr-only\">{{'verificationCode' | i18n}}</label>\n                            <input id=\"code\" type=\"text\" name=\"Code\" class=\"form-control\" [(ngModel)]=\"token\" required appAutofocus inputmode=\"tel\" appInputVerbatim>\n                            <small class=\"form-text\" *ngIf=\"selectedProviderType === providerType.Email\">\n                                <a href=\"#\" appStopClick (click)=\"sendEmail(true)\" [appApiAction]=\"emailPromise\" *ngIf=\"selectedProviderType === providerType.Email\">\n                                    {{'sendVerificationCodeEmailAgain' | i18n}}\n                                </a>\n                            </small>\n                        </div>\n                    </ng-container>\n                    <ng-container *ngIf=\"selectedProviderType === providerType.Yubikey\">\n                        <p class=\"text-center\">{{'insertYubiKey' | i18n}}</p>\n                        <img src=\"" + __webpack_require__(/*! ../../images/yubikey.jpg */ "./src/images/yubikey.jpg") + "\" class=\"rounded img-fluid mb-3\" alt=\"\">\n                        <div class=\"form-group\">\n                            <label for=\"code\" class=\"sr-only\">{{'verificationCode' | i18n}}</label>\n                            <input id=\"code\" type=\"password\" name=\"Code\" class=\"form-control\" [(ngModel)]=\"token\" required appAutofocus appInputVerbatim>\n                        </div>\n                    </ng-container>\n                    <ng-container *ngIf=\"selectedProviderType === providerType.U2f\">\n                        <p class=\"text-center\" *ngIf=\"!u2fReady\">\n                            <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n                        </p>\n                        <ng-container *ngIf=\"u2fReady\">\n                            <p class=\"text-center\">{{'insertU2f' | i18n}}</p>\n                            <img src=\"" + __webpack_require__(/*! ../../images/u2fkey.jpg */ "./src/images/u2fkey.jpg") + "\" alt=\"\" class=\"rounded img-fluid mb-3\">\n                        </ng-container>\n                    </ng-container>\n                    <ng-container *ngIf=\"selectedProviderType === providerType.Duo ||\n                        selectedProviderType === providerType.OrganizationDuo\">\n                        <div id=\"duo-frame\" class=\"mb-3\">\n                            <iframe id=\"duo_iframe\"></iframe>\n                        </div>\n                    </ng-container>\n                    <i class=\"fa fa-spinner text-muted fa-spin pull-right\" title=\"{{'loading' | i18n}}\" *ngIf=\"form.loading && selectedProviderType === providerType.U2f\"></i>\n                    <div class=\"form-check\" *ngIf=\"selectedProviderType != null\">\n                        <input id=\"remember\" type=\"checkbox\" name=\"Remember\" class=\"form-check-input\" [(ngModel)]=\"remember\">\n                        <label for=\"remember\" class=\"form-check-label\">{{'rememberMe' | i18n}}</label>\n                    </div>\n                    <ng-container *ngIf=\"selectedProviderType == null\">\n                        <p>{{'noTwoStepProviders' | i18n}}</p>\n                        <p>{{'noTwoStepProviders2' | i18n}}</p>\n                    </ng-container>\n                    <hr>\n                    <div class=\"d-flex mb-3\">\n                        <button type=\"submit\" class=\"btn btn-primary btn-block btn-submit\" [disabled]=\"form.loading\" *ngIf=\"selectedProviderType != null && selectedProviderType !== providerType.Duo && \n                        selectedProviderType !== providerType.OrganizationDuo && selectedProviderType !== providerType.U2f\">\n                            <span>\n                                <i class=\"fa fa-sign-in\"></i> {{'continue' | i18n}}\n                            </span>\n                            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        </button>\n                        <a routerLink=\"/\" class=\"btn btn-outline-secondary btn-block ml-2 mt-0\">\n                            {{'cancel' | i18n}}\n                        </a>\n                    </div>\n                    <div class=\"text-center\">\n                        <a href=\"#\" appStopClick (click)=\"anotherMethod()\">{{'useAnotherTwoStepMethod' | i18n}}</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n<ng-template #twoFactorOptions></ng-template>\n<iframe id=\"u2f_iframe\" hidden></iframe>\n";

/***/ }),

/***/ "./src/app/accounts/two-factor.component.ts":
/*!**************************************************!*\
  !*** ./src/app/accounts/two-factor.component.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var two_factor_options_component_1 = __webpack_require__(/*! ./two-factor-options.component */ "./src/app/accounts/two-factor-options.component.ts");
var modal_component_1 = __webpack_require__(/*! ../modal.component */ "./src/app/modal.component.ts");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var auth_service_1 = __webpack_require__(/*! jslib/abstractions/auth.service */ "./jslib/src/abstractions/auth.service.ts");
var environment_service_1 = __webpack_require__(/*! jslib/abstractions/environment.service */ "./jslib/src/abstractions/environment.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var state_service_1 = __webpack_require__(/*! jslib/abstractions/state.service */ "./jslib/src/abstractions/state.service.ts");
var two_factor_component_1 = __webpack_require__(/*! jslib/angular/components/two-factor.component */ "./jslib/src/angular/components/two-factor.component.ts");
var TwoFactorComponent = /** @class */ (function (_super) {
    __extends(TwoFactorComponent, _super);
    function TwoFactorComponent(authService, router, analytics, toasterService, i18nService, apiService, platformUtilsService, stateService, environmentService, componentFactoryResolver) {
        var _this = _super.call(this, authService, router, analytics, toasterService, i18nService, apiService, platformUtilsService, window, environmentService) || this;
        _this.stateService = stateService;
        _this.componentFactoryResolver = componentFactoryResolver;
        _this.onSuccessfulLoginNavigate = _this.goAfterLogIn;
        return _this;
    }
    TwoFactorComponent.prototype.anotherMethod = function () {
        var _this = this;
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        var modal = this.twoFactorOptionsModal.createComponent(factory).instance;
        var childComponent = modal.show(two_factor_options_component_1.TwoFactorOptionsComponent, this.twoFactorOptionsModal);
        childComponent.onProviderSelected.subscribe(function (provider) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        modal.close();
                        this.selectedProviderType = provider;
                        return [4 /*yield*/, this.init()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        childComponent.onRecoverSelected.subscribe(function () {
            modal.close();
        });
    };
    TwoFactorComponent.prototype.goAfterLogIn = function () {
        return __awaiter(this, void 0, void 0, function () {
            var invite, loginRedirect;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.stateService.get('orgInvitation')];
                    case 1:
                        invite = _a.sent();
                        if (!(invite != null)) return [3 /*break*/, 2];
                        this.router.navigate(['accept-organization'], { queryParams: invite });
                        return [3 /*break*/, 6];
                    case 2: return [4 /*yield*/, this.stateService.get('loginRedirect')];
                    case 3:
                        loginRedirect = _a.sent();
                        if (!(loginRedirect != null)) return [3 /*break*/, 5];
                        this.router.navigate([loginRedirect.route], { queryParams: loginRedirect.qParams });
                        return [4 /*yield*/, this.stateService.remove('loginRedirect')];
                    case 4:
                        _a.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.router.navigate([this.successRoute]);
                        _a.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.ViewChild('twoFactorOptions', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], TwoFactorComponent.prototype, "twoFactorOptionsModal", void 0);
    TwoFactorComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor',
            template: __webpack_require__(/*! ./two-factor.component.html */ "./src/app/accounts/two-factor.component.html"),
        }),
        __metadata("design:paramtypes", [auth_service_1.AuthService, router_1.Router,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            i18n_service_1.I18nService, api_service_1.ApiService,
            platformUtils_service_1.PlatformUtilsService, state_service_1.StateService,
            environment_service_1.EnvironmentService, core_1.ComponentFactoryResolver])
    ], TwoFactorComponent);
    return TwoFactorComponent;
}(two_factor_component_1.TwoFactorComponent));
exports.TwoFactorComponent = TwoFactorComponent;


/***/ }),

/***/ "./src/app/accounts/verify-email-token.component.html":
/*!************************************************************!*\
  !*** ./src/app/accounts/verify-email-token.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<div class=\"mt-5 d-flex justify-content-center\">\n    <div>\n        <img src=\"" + __webpack_require__(/*! ../../images/logo-dark@2x.png */ "./src/images/logo-dark@2x.png") + "\" class=\"mb-4 logo\" alt=\"Bitwarden\">\n        <p class=\"text-center\">\n            <i class=\"fa fa-spinner fa-spin fa-2x text-muted\" title=\"{{'loading' | i18n}}\"></i>\n        </p>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/accounts/verify-email-token.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/accounts/verify-email-token.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var verifyEmailRequest_1 = __webpack_require__(/*! jslib/models/request/verifyEmailRequest */ "./jslib/src/models/request/verifyEmailRequest.ts");
var VerifyEmailTokenComponent = /** @class */ (function () {
    function VerifyEmailTokenComponent(router, toasterService, i18nService, route, apiService, userService) {
        this.router = router;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.route = route;
        this.apiService = apiService;
        this.userService = userService;
    }
    VerifyEmailTokenComponent.prototype.ngOnInit = function () {
        var _this = this;
        var fired = false;
        this.route.queryParams.subscribe(function (qParams) { return __awaiter(_this, void 0, void 0, function () {
            var authed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (fired) {
                            return [2 /*return*/];
                        }
                        fired = true;
                        if (!(qParams.userId != null && qParams.token != null)) return [3 /*break*/, 7];
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 6, , 7]);
                        return [4 /*yield*/, this.apiService.postAccountVerifyEmailToken(new verifyEmailRequest_1.VerifyEmailRequest(qParams.userId, qParams.token))];
                    case 2:
                        _b.sent();
                        return [4 /*yield*/, this.userService.isAuthenticated()];
                    case 3:
                        authed = _b.sent();
                        if (!authed) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.apiService.refreshIdentityToken()];
                    case 4:
                        _b.sent();
                        _b.label = 5;
                    case 5:
                        this.toasterService.popAsync('success', null, this.i18nService.t('emailVerified'));
                        this.router.navigate(['/']);
                        return [2 /*return*/];
                    case 6:
                        _a = _b.sent();
                        return [3 /*break*/, 7];
                    case 7:
                        this.toasterService.popAsync('error', null, this.i18nService.t('emailVerifiedFailed'));
                        this.router.navigate(['/']);
                        return [2 /*return*/];
                }
            });
        }); });
    };
    VerifyEmailTokenComponent = __decorate([
        core_1.Component({
            selector: 'app-verify-email-token',
            template: __webpack_require__(/*! ./verify-email-token.component.html */ "./src/app/accounts/verify-email-token.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.Router, angular2_toaster_1.ToasterService,
            i18n_service_1.I18nService, router_1.ActivatedRoute,
            api_service_1.ApiService, user_service_1.UserService])
    ], VerifyEmailTokenComponent);
    return VerifyEmailTokenComponent;
}());
exports.VerifyEmailTokenComponent = VerifyEmailTokenComponent;


/***/ }),

/***/ "./src/app/accounts/verify-recover-delete.component.html":
/*!***************************************************************!*\
  !*** ./src/app/accounts/verify-recover-delete.component.html ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" class=\"container\" ngNativeValidate>\n    <div class=\"row justify-content-md-center mt-5\">\n        <div class=\"col-5\">\n            <p class=\"lead text-center mb-4\">{{'deleteAccount' | i18n}}</p>\n            <div class=\"card\">\n                <div class=\"card-body\">\n                    <app-callout type=\"warning\">{{'deleteAccountWarning' | i18n}}</app-callout>\n                    <p class=\"text-center\">\n                        <strong>{{email}}</strong>\n                    </p>\n                    <p>{{'deleteRecoverConfirmDesc' | i18n}}</p>\n                    <hr>\n                    <div class=\"d-flex\">\n                        <button type=\"submit\" class=\"btn btn-danger btn-block btn-submit\" [disabled]=\"form.loading\">\n                            <span>{{'deleteAccount' | i18n}}</span>\n                            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        </button>\n                        <a routerLink=\"/\" class=\"btn btn-outline-secondary btn-block ml-2 mt-0\">\n                            {{'cancel' | i18n}}\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/accounts/verify-recover-delete.component.ts":
/*!*************************************************************!*\
  !*** ./src/app/accounts/verify-recover-delete.component.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var verifyDeleteRecoverRequest_1 = __webpack_require__(/*! jslib/models/request/verifyDeleteRecoverRequest */ "./jslib/src/models/request/verifyDeleteRecoverRequest.ts");
var VerifyRecoverDeleteComponent = /** @class */ (function () {
    function VerifyRecoverDeleteComponent(router, apiService, analytics, toasterService, i18nService, route) {
        this.router = router;
        this.apiService = apiService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.route = route;
    }
    VerifyRecoverDeleteComponent.prototype.ngOnInit = function () {
        var _this = this;
        var fired = false;
        this.route.queryParams.subscribe(function (qParams) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (fired) {
                    return [2 /*return*/];
                }
                fired = true;
                if (qParams.userId != null && qParams.token != null && qParams.email != null) {
                    this.userId = qParams.userId;
                    this.token = qParams.token;
                    this.email = qParams.email;
                }
                else {
                    this.router.navigate(['/']);
                }
                return [2 /*return*/];
            });
        }); });
    };
    VerifyRecoverDeleteComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        request = new verifyDeleteRecoverRequest_1.VerifyDeleteRecoverRequest(this.userId, this.token);
                        this.formPromise = this.apiService.postAccountRecoverDeleteToken(request);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Recovered Delete' });
                        this.toasterService.popAsync('success', this.i18nService.t('accountDeleted'), this.i18nService.t('accountDeletedDesc'));
                        this.router.navigate(['/']);
                        return [3 /*break*/, 3];
                    case 2:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    VerifyRecoverDeleteComponent = __decorate([
        core_1.Component({
            selector: 'app-verify-recover-delete',
            template: __webpack_require__(/*! ./verify-recover-delete.component.html */ "./src/app/accounts/verify-recover-delete.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.Router, api_service_1.ApiService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            i18n_service_1.I18nService, router_1.ActivatedRoute])
    ], VerifyRecoverDeleteComponent);
    return VerifyRecoverDeleteComponent;
}());
exports.VerifyRecoverDeleteComponent = VerifyRecoverDeleteComponent;


/***/ }),

/***/ "./src/app/app-routing.module.ts":
/*!***************************************!*\
  !*** ./src/app/app-routing.module.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var frontend_layout_component_1 = __webpack_require__(/*! ./layouts/frontend-layout.component */ "./src/app/layouts/frontend-layout.component.ts");
var organization_layout_component_1 = __webpack_require__(/*! ./layouts/organization-layout.component */ "./src/app/layouts/organization-layout.component.ts");
var user_layout_component_1 = __webpack_require__(/*! ./layouts/user-layout.component */ "./src/app/layouts/user-layout.component.ts");
var accept_organization_component_1 = __webpack_require__(/*! ./accounts/accept-organization.component */ "./src/app/accounts/accept-organization.component.ts");
var hint_component_1 = __webpack_require__(/*! ./accounts/hint.component */ "./src/app/accounts/hint.component.ts");
var lock_component_1 = __webpack_require__(/*! ./accounts/lock.component */ "./src/app/accounts/lock.component.ts");
var login_component_1 = __webpack_require__(/*! ./accounts/login.component */ "./src/app/accounts/login.component.ts");
var recover_delete_component_1 = __webpack_require__(/*! ./accounts/recover-delete.component */ "./src/app/accounts/recover-delete.component.ts");
var recover_two_factor_component_1 = __webpack_require__(/*! ./accounts/recover-two-factor.component */ "./src/app/accounts/recover-two-factor.component.ts");
var register_component_1 = __webpack_require__(/*! ./accounts/register.component */ "./src/app/accounts/register.component.ts");
var two_factor_component_1 = __webpack_require__(/*! ./accounts/two-factor.component */ "./src/app/accounts/two-factor.component.ts");
var verify_email_token_component_1 = __webpack_require__(/*! ./accounts/verify-email-token.component */ "./src/app/accounts/verify-email-token.component.ts");
var verify_recover_delete_component_1 = __webpack_require__(/*! ./accounts/verify-recover-delete.component */ "./src/app/accounts/verify-recover-delete.component.ts");
var collections_component_1 = __webpack_require__(/*! ./organizations/manage/collections.component */ "./src/app/organizations/manage/collections.component.ts");
var events_component_1 = __webpack_require__(/*! ./organizations/manage/events.component */ "./src/app/organizations/manage/events.component.ts");
var groups_component_1 = __webpack_require__(/*! ./organizations/manage/groups.component */ "./src/app/organizations/manage/groups.component.ts");
var manage_component_1 = __webpack_require__(/*! ./organizations/manage/manage.component */ "./src/app/organizations/manage/manage.component.ts");
var people_component_1 = __webpack_require__(/*! ./organizations/manage/people.component */ "./src/app/organizations/manage/people.component.ts");
var account_component_1 = __webpack_require__(/*! ./organizations/settings/account.component */ "./src/app/organizations/settings/account.component.ts");
var organization_billing_component_1 = __webpack_require__(/*! ./organizations/settings/organization-billing.component */ "./src/app/organizations/settings/organization-billing.component.ts");
var settings_component_1 = __webpack_require__(/*! ./organizations/settings/settings.component */ "./src/app/organizations/settings/settings.component.ts");
var two_factor_setup_component_1 = __webpack_require__(/*! ./organizations/settings/two-factor-setup.component */ "./src/app/organizations/settings/two-factor-setup.component.ts");
var export_component_1 = __webpack_require__(/*! ./organizations/tools/export.component */ "./src/app/organizations/tools/export.component.ts");
var import_component_1 = __webpack_require__(/*! ./organizations/tools/import.component */ "./src/app/organizations/tools/import.component.ts");
var tools_component_1 = __webpack_require__(/*! ./organizations/tools/tools.component */ "./src/app/organizations/tools/tools.component.ts");
var vault_component_1 = __webpack_require__(/*! ./organizations/vault/vault.component */ "./src/app/organizations/vault/vault.component.ts");
var account_component_2 = __webpack_require__(/*! ./settings/account.component */ "./src/app/settings/account.component.ts");
var create_organization_component_1 = __webpack_require__(/*! ./settings/create-organization.component */ "./src/app/settings/create-organization.component.ts");
var domain_rules_component_1 = __webpack_require__(/*! ./settings/domain-rules.component */ "./src/app/settings/domain-rules.component.ts");
var options_component_1 = __webpack_require__(/*! ./settings/options.component */ "./src/app/settings/options.component.ts");
var organizations_component_1 = __webpack_require__(/*! ./settings/organizations.component */ "./src/app/settings/organizations.component.ts");
var premium_component_1 = __webpack_require__(/*! ./settings/premium.component */ "./src/app/settings/premium.component.ts");
var settings_component_2 = __webpack_require__(/*! ./settings/settings.component */ "./src/app/settings/settings.component.ts");
var two_factor_setup_component_2 = __webpack_require__(/*! ./settings/two-factor-setup.component */ "./src/app/settings/two-factor-setup.component.ts");
var user_billing_component_1 = __webpack_require__(/*! ./settings/user-billing.component */ "./src/app/settings/user-billing.component.ts");
var breach_report_component_1 = __webpack_require__(/*! ./tools/breach-report.component */ "./src/app/tools/breach-report.component.ts");
var export_component_2 = __webpack_require__(/*! ./tools/export.component */ "./src/app/tools/export.component.ts");
var import_component_2 = __webpack_require__(/*! ./tools/import.component */ "./src/app/tools/import.component.ts");
var password_generator_component_1 = __webpack_require__(/*! ./tools/password-generator.component */ "./src/app/tools/password-generator.component.ts");
var tools_component_2 = __webpack_require__(/*! ./tools/tools.component */ "./src/app/tools/tools.component.ts");
var vault_component_2 = __webpack_require__(/*! ./vault/vault.component */ "./src/app/vault/vault.component.ts");
var organization_guard_service_1 = __webpack_require__(/*! ./services/organization-guard.service */ "./src/app/services/organization-guard.service.ts");
var organization_type_guard_service_1 = __webpack_require__(/*! ./services/organization-type-guard.service */ "./src/app/services/organization-type-guard.service.ts");
var unauth_guard_service_1 = __webpack_require__(/*! ./services/unauth-guard.service */ "./src/app/services/unauth-guard.service.ts");
var auth_guard_service_1 = __webpack_require__(/*! jslib/angular/services/auth-guard.service */ "./jslib/src/angular/services/auth-guard.service.ts");
var organizationUserType_1 = __webpack_require__(/*! jslib/enums/organizationUserType */ "./jslib/src/enums/organizationUserType.ts");
var routes = [
    {
        path: '',
        component: frontend_layout_component_1.FrontendLayoutComponent,
        children: [
            { path: '', pathMatch: 'full', component: login_component_1.LoginComponent, canActivate: [unauth_guard_service_1.UnauthGuardService] },
            { path: '2fa', component: two_factor_component_1.TwoFactorComponent, canActivate: [unauth_guard_service_1.UnauthGuardService] },
            {
                path: 'register', component: register_component_1.RegisterComponent,
                canActivate: [unauth_guard_service_1.UnauthGuardService],
                data: { titleId: 'createAccount' },
            },
            {
                path: 'hint', component: hint_component_1.HintComponent,
                canActivate: [unauth_guard_service_1.UnauthGuardService],
                data: { titleId: 'passwordHint' },
            },
            { path: 'lock', component: lock_component_1.LockComponent },
            { path: 'verify-email', component: verify_email_token_component_1.VerifyEmailTokenComponent },
            {
                path: 'accept-organization',
                component: accept_organization_component_1.AcceptOrganizationComponent,
                data: { titleId: 'joinOrganization' },
            },
            { path: 'recover', pathMatch: 'full', redirectTo: 'recover-2fa' },
            {
                path: 'recover-2fa',
                component: recover_two_factor_component_1.RecoverTwoFactorComponent,
                canActivate: [unauth_guard_service_1.UnauthGuardService],
                data: { titleId: 'recoverAccountTwoStep' },
            },
            {
                path: 'recover-delete',
                component: recover_delete_component_1.RecoverDeleteComponent,
                canActivate: [unauth_guard_service_1.UnauthGuardService],
                data: { titleId: 'deleteAccount' },
            },
            {
                path: 'verify-recover-delete',
                component: verify_recover_delete_component_1.VerifyRecoverDeleteComponent,
                canActivate: [unauth_guard_service_1.UnauthGuardService],
                data: { titleId: 'deleteAccount' },
            },
        ],
    },
    {
        path: '',
        component: user_layout_component_1.UserLayoutComponent,
        canActivate: [auth_guard_service_1.AuthGuardService],
        children: [
            { path: 'vault', component: vault_component_2.VaultComponent, data: { titleId: 'myVault' } },
            {
                path: 'settings',
                component: settings_component_2.SettingsComponent,
                children: [
                    { path: '', pathMatch: 'full', redirectTo: 'account' },
                    { path: 'account', component: account_component_2.AccountComponent, data: { titleId: 'myAccount' } },
                    { path: 'options', component: options_component_1.OptionsComponent, data: { titleId: 'options' } },
                    { path: 'domain-rules', component: domain_rules_component_1.DomainRulesComponent, data: { titleId: 'domainRules' } },
                    { path: 'two-factor', component: two_factor_setup_component_2.TwoFactorSetupComponent, data: { titleId: 'twoStepLogin' } },
                    { path: 'premium', component: premium_component_1.PremiumComponent, data: { titleId: 'goPremium' } },
                    { path: 'billing', component: user_billing_component_1.UserBillingComponent, data: { titleId: 'billingAndLicensing' } },
                    { path: 'organizations', component: organizations_component_1.OrganizationsComponent, data: { titleId: 'organizations' } },
                    {
                        path: 'create-organization',
                        component: create_organization_component_1.CreateOrganizationComponent,
                        data: { titleId: 'newOrganization' },
                    },
                ],
            },
            {
                path: 'tools',
                component: tools_component_2.ToolsComponent,
                canActivate: [auth_guard_service_1.AuthGuardService],
                children: [
                    { path: '', pathMatch: 'full', redirectTo: 'generator' },
                    { path: 'import', component: import_component_2.ImportComponent, data: { titleId: 'importData' } },
                    { path: 'export', component: export_component_2.ExportComponent, data: { titleId: 'exportVault' } },
                    {
                        path: 'generator',
                        component: password_generator_component_1.PasswordGeneratorComponent,
                        data: { titleId: 'passwordGenerator' },
                    },
                    { path: 'breach-report', component: breach_report_component_1.BreachReportComponent, data: { titleId: 'dataBreachReport' } },
                ],
            },
        ],
    },
    {
        path: 'organizations/:organizationId',
        component: organization_layout_component_1.OrganizationLayoutComponent,
        canActivate: [auth_guard_service_1.AuthGuardService, organization_guard_service_1.OrganizationGuardService],
        children: [
            { path: '', pathMatch: 'full', redirectTo: 'vault' },
            { path: 'vault', component: vault_component_1.VaultComponent, data: { titleId: 'vault' } },
            {
                path: 'tools',
                component: tools_component_1.ToolsComponent,
                canActivate: [organization_type_guard_service_1.OrganizationTypeGuardService],
                data: { allowedTypes: [organizationUserType_1.OrganizationUserType.Owner, organizationUserType_1.OrganizationUserType.Admin] },
                children: [
                    { path: '', pathMatch: 'full', redirectTo: 'import' },
                    { path: 'import', component: import_component_1.ImportComponent, data: { titleId: 'importData' } },
                    { path: 'export', component: export_component_1.ExportComponent, data: { titleId: 'exportVault' } },
                ],
            },
            {
                path: 'manage',
                component: manage_component_1.ManageComponent,
                canActivate: [organization_type_guard_service_1.OrganizationTypeGuardService],
                data: { allowedTypes: [organizationUserType_1.OrganizationUserType.Owner, organizationUserType_1.OrganizationUserType.Admin] },
                children: [
                    { path: '', pathMatch: 'full', redirectTo: 'people' },
                    { path: 'collections', component: collections_component_1.CollectionsComponent, data: { titleId: 'collections' } },
                    { path: 'events', component: events_component_1.EventsComponent, data: { titleId: 'eventLogs' } },
                    { path: 'groups', component: groups_component_1.GroupsComponent, data: { titleId: 'groups' } },
                    { path: 'people', component: people_component_1.PeopleComponent, data: { titleId: 'people' } },
                ],
            },
            {
                path: 'settings',
                component: settings_component_1.SettingsComponent,
                canActivate: [organization_type_guard_service_1.OrganizationTypeGuardService],
                data: { allowedTypes: [organizationUserType_1.OrganizationUserType.Owner] },
                children: [
                    { path: '', pathMatch: 'full', redirectTo: 'account' },
                    { path: 'account', component: account_component_1.AccountComponent, data: { titleId: 'myOrganization' } },
                    { path: 'two-factor', component: two_factor_setup_component_1.TwoFactorSetupComponent, data: { titleId: 'twoStepLogin' } },
                    {
                        path: 'billing',
                        component: organization_billing_component_1.OrganizationBillingComponent,
                        data: { titleId: 'billingAndLicensing' },
                    },
                ],
            },
        ],
    },
    { path: '**', redirectTo: '' },
];
var AppRoutingModule = /** @class */ (function () {
    function AppRoutingModule() {
    }
    AppRoutingModule = __decorate([
        core_1.NgModule({
            imports: [router_1.RouterModule.forRoot(routes, {
                    useHash: true,
                })],
            exports: [router_1.RouterModule],
        })
    ], AppRoutingModule);
    return AppRoutingModule;
}());
exports.AppRoutingModule = AppRoutingModule;


/***/ }),

/***/ "./src/app/app.component.html":
/*!************************************!*\
  !*** ./src/app/app.component.html ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<toaster-container [toasterconfig]=\"toasterConfig\"></toaster-container>\n<router-outlet></router-outlet>\n";

/***/ }),

/***/ "./src/app/app.component.ts":
/*!**********************************!*\
  !*** ./src/app/app.component.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var jq = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
var _swal = __webpack_require__(/*! sweetalert */ "./node_modules/sweetalert/dist/sweetalert.min.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var ga_1 = __webpack_require__(/*! angulartics2/ga */ "./node_modules/angulartics2/ga/ga.es5.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var broadcaster_service_1 = __webpack_require__(/*! jslib/angular/services/broadcaster.service */ "./jslib/src/angular/services/broadcaster.service.ts");
var storage_service_1 = __webpack_require__(/*! jslib/abstractions/storage.service */ "./jslib/src/abstractions/storage.service.ts");
var auth_service_1 = __webpack_require__(/*! jslib/abstractions/auth.service */ "./jslib/src/abstractions/auth.service.ts");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var folder_service_1 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var lock_service_1 = __webpack_require__(/*! jslib/abstractions/lock.service */ "./jslib/src/abstractions/lock.service.ts");
var passwordGeneration_service_1 = __webpack_require__(/*! jslib/abstractions/passwordGeneration.service */ "./jslib/src/abstractions/passwordGeneration.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var settings_service_1 = __webpack_require__(/*! jslib/abstractions/settings.service */ "./jslib/src/abstractions/settings.service.ts");
var sync_service_1 = __webpack_require__(/*! jslib/abstractions/sync.service */ "./jslib/src/abstractions/sync.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var constants_service_1 = __webpack_require__(/*! jslib/services/constants.service */ "./jslib/src/services/constants.service.ts");
var router_service_1 = __webpack_require__(/*! ./services/router.service */ "./src/app/services/router.service.ts");
var BroadcasterSubscriptionId = 'AppComponent';
// Hack due to Angular 5.2 bug
var swal = _swal;
var AppComponent = /** @class */ (function () {
    function AppComponent(angulartics2GoogleAnalytics, broadcasterService, userService, tokenService, folderService, settingsService, syncService, passwordGenerationService, cipherService, authService, router, analytics, toasterService, i18nService, platformUtilsService, ngZone, lockService, storageService, cryptoService, collectionService, routerService) {
        this.angulartics2GoogleAnalytics = angulartics2GoogleAnalytics;
        this.broadcasterService = broadcasterService;
        this.userService = userService;
        this.tokenService = tokenService;
        this.folderService = folderService;
        this.settingsService = settingsService;
        this.syncService = syncService;
        this.passwordGenerationService = passwordGenerationService;
        this.cipherService = cipherService;
        this.authService = authService;
        this.router = router;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.platformUtilsService = platformUtilsService;
        this.ngZone = ngZone;
        this.lockService = lockService;
        this.storageService = storageService;
        this.cryptoService = cryptoService;
        this.collectionService = collectionService;
        this.routerService = routerService;
        this.toasterConfig = new angular2_toaster_1.ToasterConfig({
            showCloseButton: true,
            mouseoverTimerStop: true,
            animation: 'flyRight',
            limit: 5,
        });
        this.lastActivity = null;
    }
    AppComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            window.onmousemove = function () { return _this.recordActivity(); };
            window.onmousedown = function () { return _this.recordActivity(); };
            window.ontouchstart = function () { return _this.recordActivity(); };
            window.onclick = function () { return _this.recordActivity(); };
            window.onscroll = function () { return _this.recordActivity(); };
            window.onkeypress = function () { return _this.recordActivity(); };
        });
        this.broadcasterService.subscribe(BroadcasterSubscriptionId, function (message) { return __awaiter(_this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                this.ngZone.run(function () { return __awaiter(_this, void 0, void 0, function () {
                    var _a, upgradeConfirmed, premiumConfirmed;
                    return __generator(this, function (_b) {
                        switch (_b.label) {
                            case 0:
                                _a = message.command;
                                switch (_a) {
                                    case 'loggedIn': return [3 /*break*/, 1];
                                    case 'unlocked': return [3 /*break*/, 1];
                                    case 'loggedOut': return [3 /*break*/, 1];
                                    case 'logout': return [3 /*break*/, 2];
                                    case 'lockVault': return [3 /*break*/, 3];
                                    case 'locked': return [3 /*break*/, 5];
                                    case 'syncStarted': return [3 /*break*/, 6];
                                    case 'syncCompleted': return [3 /*break*/, 7];
                                    case 'upgradeOrganization': return [3 /*break*/, 8];
                                    case 'premiumRequired': return [3 /*break*/, 10];
                                }
                                return [3 /*break*/, 12];
                            case 1: return [3 /*break*/, 13];
                            case 2:
                                this.logOut(!!message.expired);
                                return [3 /*break*/, 13];
                            case 3: return [4 /*yield*/, this.lockService.lock()];
                            case 4:
                                _b.sent();
                                return [3 /*break*/, 13];
                            case 5:
                                this.router.navigate(['lock']);
                                return [3 /*break*/, 13];
                            case 6: return [3 /*break*/, 13];
                            case 7: return [3 /*break*/, 13];
                            case 8: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('upgradeOrganizationDesc'), this.i18nService.t('upgradeOrganization'), this.i18nService.t('upgradeOrganization'), this.i18nService.t('cancel'))];
                            case 9:
                                upgradeConfirmed = _b.sent();
                                if (upgradeConfirmed) {
                                    this.router.navigate(['organizations', message.organizationId, 'settings', 'billing']);
                                }
                                return [3 /*break*/, 13];
                            case 10: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('premiumRequiredDesc'), this.i18nService.t('premiumRequired'), this.i18nService.t('learnMore'), this.i18nService.t('cancel'))];
                            case 11:
                                premiumConfirmed = _b.sent();
                                if (premiumConfirmed) {
                                    this.router.navigate(['settings/premium']);
                                }
                                return [3 /*break*/, 13];
                            case 12: return [3 /*break*/, 13];
                            case 13: return [2 /*return*/];
                        }
                    });
                }); });
                return [2 /*return*/];
            });
        }); });
        this.router.events.subscribe(function (event) {
            if (event instanceof router_1.NavigationEnd) {
                var modals = Array.from(document.querySelectorAll('.modal'));
                for (var _i = 0, modals_1 = modals; _i < modals_1.length; _i++) {
                    var modal = modals_1[_i];
                    jq(modal).modal('hide');
                }
                if (document.querySelector('.swal-modal') != null) {
                    swal.close(undefined);
                }
            }
        });
    };
    AppComponent.prototype.ngOnDestroy = function () {
        this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);
    };
    AppComponent.prototype.logOut = function (expired) {
        return __awaiter(this, void 0, void 0, function () {
            var userId;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getUserId()];
                    case 1:
                        userId = _a.sent();
                        return [4 /*yield*/, Promise.all([
                                this.syncService.setLastSync(new Date(0)),
                                this.tokenService.clearToken(),
                                this.cryptoService.clearKeys(),
                                this.userService.clear(),
                                this.settingsService.clear(userId),
                                this.cipherService.clear(userId),
                                this.folderService.clear(userId),
                                this.collectionService.clear(userId),
                                this.passwordGenerationService.clear(),
                            ])];
                    case 2:
                        _a.sent();
                        this.authService.logOut(function () { return __awaiter(_this, void 0, void 0, function () {
                            return __generator(this, function (_a) {
                                this.analytics.eventTrack.next({ action: 'Logged Out' });
                                if (expired) {
                                    this.toasterService.popAsync('warning', this.i18nService.t('loggedOut'), this.i18nService.t('loginExpired'));
                                }
                                this.router.navigate(['/']);
                                return [2 /*return*/];
                            });
                        }); });
                        return [2 /*return*/];
                }
            });
        });
    };
    AppComponent.prototype.recordActivity = function () {
        return __awaiter(this, void 0, void 0, function () {
            var now;
            return __generator(this, function (_a) {
                now = (new Date()).getTime();
                if (this.lastActivity != null && now - this.lastActivity < 250) {
                    return [2 /*return*/];
                }
                this.lastActivity = now;
                this.storageService.save(constants_service_1.ConstantsService.lastActiveKey, now);
                return [2 /*return*/];
            });
        });
    };
    AppComponent = __decorate([
        core_1.Component({
            selector: 'app-root',
            template: __webpack_require__(/*! ./app.component.html */ "./src/app/app.component.html"),
        }),
        __metadata("design:paramtypes", [ga_1.Angulartics2GoogleAnalytics,
            broadcaster_service_1.BroadcasterService, user_service_1.UserService,
            token_service_1.TokenService, folder_service_1.FolderService,
            settings_service_1.SettingsService, sync_service_1.SyncService,
            passwordGeneration_service_1.PasswordGenerationService, cipher_service_1.CipherService,
            auth_service_1.AuthService, router_1.Router, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            platformUtils_service_1.PlatformUtilsService, core_1.NgZone,
            lock_service_1.LockService, storage_service_1.StorageService,
            crypto_service_1.CryptoService, collection_service_1.CollectionService,
            router_service_1.RouterService])
    ], AppComponent);
    return AppComponent;
}());
exports.AppComponent = AppComponent;


/***/ }),

/***/ "./src/app/app.module.ts":
/*!*******************************!*\
  !*** ./src/app/app.module.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
__webpack_require__(/*! core-js */ "./node_modules/core-js/index.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var ga_1 = __webpack_require__(/*! angulartics2/ga */ "./node_modules/angulartics2/ga/ga.es5.js");
var app_routing_module_1 = __webpack_require__(/*! ./app-routing.module */ "./src/app/app-routing.module.ts");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var forms_1 = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/esm5/forms.js");
var platform_browser_1 = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/esm5/platform-browser.js");
var animations_1 = __webpack_require__(/*! @angular/platform-browser/animations */ "./node_modules/@angular/platform-browser/esm5/animations.js");
var services_module_1 = __webpack_require__(/*! ./services/services.module */ "./src/app/services/services.module.ts");
var app_component_1 = __webpack_require__(/*! ./app.component */ "./src/app/app.component.ts");
var modal_component_1 = __webpack_require__(/*! ./modal.component */ "./src/app/modal.component.ts");
var avatar_component_1 = __webpack_require__(/*! ./components/avatar.component */ "./src/app/components/avatar.component.ts");
var callout_component_1 = __webpack_require__(/*! ./components/callout.component */ "./src/app/components/callout.component.ts");
var footer_component_1 = __webpack_require__(/*! ./layouts/footer.component */ "./src/app/layouts/footer.component.ts");
var frontend_layout_component_1 = __webpack_require__(/*! ./layouts/frontend-layout.component */ "./src/app/layouts/frontend-layout.component.ts");
var navbar_component_1 = __webpack_require__(/*! ./layouts/navbar.component */ "./src/app/layouts/navbar.component.ts");
var organization_layout_component_1 = __webpack_require__(/*! ./layouts/organization-layout.component */ "./src/app/layouts/organization-layout.component.ts");
var user_layout_component_1 = __webpack_require__(/*! ./layouts/user-layout.component */ "./src/app/layouts/user-layout.component.ts");
var accept_organization_component_1 = __webpack_require__(/*! ./accounts/accept-organization.component */ "./src/app/accounts/accept-organization.component.ts");
var hint_component_1 = __webpack_require__(/*! ./accounts/hint.component */ "./src/app/accounts/hint.component.ts");
var lock_component_1 = __webpack_require__(/*! ./accounts/lock.component */ "./src/app/accounts/lock.component.ts");
var login_component_1 = __webpack_require__(/*! ./accounts/login.component */ "./src/app/accounts/login.component.ts");
var recover_delete_component_1 = __webpack_require__(/*! ./accounts/recover-delete.component */ "./src/app/accounts/recover-delete.component.ts");
var recover_two_factor_component_1 = __webpack_require__(/*! ./accounts/recover-two-factor.component */ "./src/app/accounts/recover-two-factor.component.ts");
var register_component_1 = __webpack_require__(/*! ./accounts/register.component */ "./src/app/accounts/register.component.ts");
var two_factor_options_component_1 = __webpack_require__(/*! ./accounts/two-factor-options.component */ "./src/app/accounts/two-factor-options.component.ts");
var two_factor_component_1 = __webpack_require__(/*! ./accounts/two-factor.component */ "./src/app/accounts/two-factor.component.ts");
var verify_email_token_component_1 = __webpack_require__(/*! ./accounts/verify-email-token.component */ "./src/app/accounts/verify-email-token.component.ts");
var verify_recover_delete_component_1 = __webpack_require__(/*! ./accounts/verify-recover-delete.component */ "./src/app/accounts/verify-recover-delete.component.ts");
var collection_add_edit_component_1 = __webpack_require__(/*! ./organizations/manage/collection-add-edit.component */ "./src/app/organizations/manage/collection-add-edit.component.ts");
var collections_component_1 = __webpack_require__(/*! ./organizations/manage/collections.component */ "./src/app/organizations/manage/collections.component.ts");
var entity_events_component_1 = __webpack_require__(/*! ./organizations/manage/entity-events.component */ "./src/app/organizations/manage/entity-events.component.ts");
var entity_users_component_1 = __webpack_require__(/*! ./organizations/manage/entity-users.component */ "./src/app/organizations/manage/entity-users.component.ts");
var events_component_1 = __webpack_require__(/*! ./organizations/manage/events.component */ "./src/app/organizations/manage/events.component.ts");
var group_add_edit_component_1 = __webpack_require__(/*! ./organizations/manage/group-add-edit.component */ "./src/app/organizations/manage/group-add-edit.component.ts");
var groups_component_1 = __webpack_require__(/*! ./organizations/manage/groups.component */ "./src/app/organizations/manage/groups.component.ts");
var manage_component_1 = __webpack_require__(/*! ./organizations/manage/manage.component */ "./src/app/organizations/manage/manage.component.ts");
var people_component_1 = __webpack_require__(/*! ./organizations/manage/people.component */ "./src/app/organizations/manage/people.component.ts");
var user_add_edit_component_1 = __webpack_require__(/*! ./organizations/manage/user-add-edit.component */ "./src/app/organizations/manage/user-add-edit.component.ts");
var user_groups_component_1 = __webpack_require__(/*! ./organizations/manage/user-groups.component */ "./src/app/organizations/manage/user-groups.component.ts");
var account_component_1 = __webpack_require__(/*! ./organizations/settings/account.component */ "./src/app/organizations/settings/account.component.ts");
var adjust_seats_component_1 = __webpack_require__(/*! ./organizations/settings/adjust-seats.component */ "./src/app/organizations/settings/adjust-seats.component.ts");
var delete_organization_component_1 = __webpack_require__(/*! ./organizations/settings/delete-organization.component */ "./src/app/organizations/settings/delete-organization.component.ts");
var organization_billing_component_1 = __webpack_require__(/*! ./organizations/settings/organization-billing.component */ "./src/app/organizations/settings/organization-billing.component.ts");
var settings_component_1 = __webpack_require__(/*! ./organizations/settings/settings.component */ "./src/app/organizations/settings/settings.component.ts");
var two_factor_setup_component_1 = __webpack_require__(/*! ./organizations/settings/two-factor-setup.component */ "./src/app/organizations/settings/two-factor-setup.component.ts");
var export_component_1 = __webpack_require__(/*! ./organizations/tools/export.component */ "./src/app/organizations/tools/export.component.ts");
var import_component_1 = __webpack_require__(/*! ./organizations/tools/import.component */ "./src/app/organizations/tools/import.component.ts");
var tools_component_1 = __webpack_require__(/*! ./organizations/tools/tools.component */ "./src/app/organizations/tools/tools.component.ts");
var add_edit_component_1 = __webpack_require__(/*! ./organizations/vault/add-edit.component */ "./src/app/organizations/vault/add-edit.component.ts");
var attachments_component_1 = __webpack_require__(/*! ./organizations/vault/attachments.component */ "./src/app/organizations/vault/attachments.component.ts");
var ciphers_component_1 = __webpack_require__(/*! ./organizations/vault/ciphers.component */ "./src/app/organizations/vault/ciphers.component.ts");
var collections_component_2 = __webpack_require__(/*! ./organizations/vault/collections.component */ "./src/app/organizations/vault/collections.component.ts");
var groupings_component_1 = __webpack_require__(/*! ./organizations/vault/groupings.component */ "./src/app/organizations/vault/groupings.component.ts");
var vault_component_1 = __webpack_require__(/*! ./organizations/vault/vault.component */ "./src/app/organizations/vault/vault.component.ts");
var account_component_2 = __webpack_require__(/*! ./settings/account.component */ "./src/app/settings/account.component.ts");
var adjust_payment_component_1 = __webpack_require__(/*! ./settings/adjust-payment.component */ "./src/app/settings/adjust-payment.component.ts");
var adjust_storage_component_1 = __webpack_require__(/*! ./settings/adjust-storage.component */ "./src/app/settings/adjust-storage.component.ts");
var change_email_component_1 = __webpack_require__(/*! ./settings/change-email.component */ "./src/app/settings/change-email.component.ts");
var change_password_component_1 = __webpack_require__(/*! ./settings/change-password.component */ "./src/app/settings/change-password.component.ts");
var create_organization_component_1 = __webpack_require__(/*! ./settings/create-organization.component */ "./src/app/settings/create-organization.component.ts");
var deauthorize_sessions_component_1 = __webpack_require__(/*! ./settings/deauthorize-sessions.component */ "./src/app/settings/deauthorize-sessions.component.ts");
var delete_account_component_1 = __webpack_require__(/*! ./settings/delete-account.component */ "./src/app/settings/delete-account.component.ts");
var domain_rules_component_1 = __webpack_require__(/*! ./settings/domain-rules.component */ "./src/app/settings/domain-rules.component.ts");
var options_component_1 = __webpack_require__(/*! ./settings/options.component */ "./src/app/settings/options.component.ts");
var organizations_component_1 = __webpack_require__(/*! ./settings/organizations.component */ "./src/app/settings/organizations.component.ts");
var payment_component_1 = __webpack_require__(/*! ./settings/payment.component */ "./src/app/settings/payment.component.ts");
var premium_component_1 = __webpack_require__(/*! ./settings/premium.component */ "./src/app/settings/premium.component.ts");
var profile_component_1 = __webpack_require__(/*! ./settings/profile.component */ "./src/app/settings/profile.component.ts");
var purge_vault_component_1 = __webpack_require__(/*! ./settings/purge-vault.component */ "./src/app/settings/purge-vault.component.ts");
var settings_component_2 = __webpack_require__(/*! ./settings/settings.component */ "./src/app/settings/settings.component.ts");
var two_factor_authenticator_component_1 = __webpack_require__(/*! ./settings/two-factor-authenticator.component */ "./src/app/settings/two-factor-authenticator.component.ts");
var two_factor_duo_component_1 = __webpack_require__(/*! ./settings/two-factor-duo.component */ "./src/app/settings/two-factor-duo.component.ts");
var two_factor_email_component_1 = __webpack_require__(/*! ./settings/two-factor-email.component */ "./src/app/settings/two-factor-email.component.ts");
var two_factor_recovery_component_1 = __webpack_require__(/*! ./settings/two-factor-recovery.component */ "./src/app/settings/two-factor-recovery.component.ts");
var two_factor_setup_component_2 = __webpack_require__(/*! ./settings/two-factor-setup.component */ "./src/app/settings/two-factor-setup.component.ts");
var two_factor_u2f_component_1 = __webpack_require__(/*! ./settings/two-factor-u2f.component */ "./src/app/settings/two-factor-u2f.component.ts");
var two_factor_verify_component_1 = __webpack_require__(/*! ./settings/two-factor-verify.component */ "./src/app/settings/two-factor-verify.component.ts");
var two_factor_yubikey_component_1 = __webpack_require__(/*! ./settings/two-factor-yubikey.component */ "./src/app/settings/two-factor-yubikey.component.ts");
var update_key_component_1 = __webpack_require__(/*! ./settings/update-key.component */ "./src/app/settings/update-key.component.ts");
var update_license_component_1 = __webpack_require__(/*! ./settings/update-license.component */ "./src/app/settings/update-license.component.ts");
var user_billing_component_1 = __webpack_require__(/*! ./settings/user-billing.component */ "./src/app/settings/user-billing.component.ts");
var verify_email_component_1 = __webpack_require__(/*! ./settings/verify-email.component */ "./src/app/settings/verify-email.component.ts");
var breach_report_component_1 = __webpack_require__(/*! ./tools/breach-report.component */ "./src/app/tools/breach-report.component.ts");
var export_component_2 = __webpack_require__(/*! ./tools/export.component */ "./src/app/tools/export.component.ts");
var import_component_2 = __webpack_require__(/*! ./tools/import.component */ "./src/app/tools/import.component.ts");
var password_generator_history_component_1 = __webpack_require__(/*! ./tools/password-generator-history.component */ "./src/app/tools/password-generator-history.component.ts");
var password_generator_component_1 = __webpack_require__(/*! ./tools/password-generator.component */ "./src/app/tools/password-generator.component.ts");
var tools_component_2 = __webpack_require__(/*! ./tools/tools.component */ "./src/app/tools/tools.component.ts");
var add_edit_component_2 = __webpack_require__(/*! ./vault/add-edit.component */ "./src/app/vault/add-edit.component.ts");
var attachments_component_2 = __webpack_require__(/*! ./vault/attachments.component */ "./src/app/vault/attachments.component.ts");
var bulk_delete_component_1 = __webpack_require__(/*! ./vault/bulk-delete.component */ "./src/app/vault/bulk-delete.component.ts");
var bulk_move_component_1 = __webpack_require__(/*! ./vault/bulk-move.component */ "./src/app/vault/bulk-move.component.ts");
var bulk_share_component_1 = __webpack_require__(/*! ./vault/bulk-share.component */ "./src/app/vault/bulk-share.component.ts");
var ciphers_component_2 = __webpack_require__(/*! ./vault/ciphers.component */ "./src/app/vault/ciphers.component.ts");
var collections_component_3 = __webpack_require__(/*! ./vault/collections.component */ "./src/app/vault/collections.component.ts");
var folder_add_edit_component_1 = __webpack_require__(/*! ./vault/folder-add-edit.component */ "./src/app/vault/folder-add-edit.component.ts");
var groupings_component_2 = __webpack_require__(/*! ./vault/groupings.component */ "./src/app/vault/groupings.component.ts");
var share_component_1 = __webpack_require__(/*! ./vault/share.component */ "./src/app/vault/share.component.ts");
var vault_component_2 = __webpack_require__(/*! ./vault/vault.component */ "./src/app/vault/vault.component.ts");
var icon_component_1 = __webpack_require__(/*! jslib/angular/components/icon.component */ "./jslib/src/angular/components/icon.component.ts");
var api_action_directive_1 = __webpack_require__(/*! jslib/angular/directives/api-action.directive */ "./jslib/src/angular/directives/api-action.directive.ts");
var autofocus_directive_1 = __webpack_require__(/*! jslib/angular/directives/autofocus.directive */ "./jslib/src/angular/directives/autofocus.directive.ts");
var blur_click_directive_1 = __webpack_require__(/*! jslib/angular/directives/blur-click.directive */ "./jslib/src/angular/directives/blur-click.directive.ts");
var box_row_directive_1 = __webpack_require__(/*! jslib/angular/directives/box-row.directive */ "./jslib/src/angular/directives/box-row.directive.ts");
var fallback_src_directive_1 = __webpack_require__(/*! jslib/angular/directives/fallback-src.directive */ "./jslib/src/angular/directives/fallback-src.directive.ts");
var input_verbatim_directive_1 = __webpack_require__(/*! jslib/angular/directives/input-verbatim.directive */ "./jslib/src/angular/directives/input-verbatim.directive.ts");
var stop_click_directive_1 = __webpack_require__(/*! jslib/angular/directives/stop-click.directive */ "./jslib/src/angular/directives/stop-click.directive.ts");
var stop_prop_directive_1 = __webpack_require__(/*! jslib/angular/directives/stop-prop.directive */ "./jslib/src/angular/directives/stop-prop.directive.ts");
var true_false_value_directive_1 = __webpack_require__(/*! jslib/angular/directives/true-false-value.directive */ "./jslib/src/angular/directives/true-false-value.directive.ts");
var i18n_pipe_1 = __webpack_require__(/*! jslib/angular/pipes/i18n.pipe */ "./jslib/src/angular/pipes/i18n.pipe.ts");
var search_ciphers_pipe_1 = __webpack_require__(/*! jslib/angular/pipes/search-ciphers.pipe */ "./jslib/src/angular/pipes/search-ciphers.pipe.ts");
var search_pipe_1 = __webpack_require__(/*! jslib/angular/pipes/search.pipe */ "./jslib/src/angular/pipes/search.pipe.ts");
var common_1 = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/esm5/common.js");
var da_1 = __webpack_require__(/*! @angular/common/locales/da */ "./node_modules/@angular/common/locales/da.js");
var sk_1 = __webpack_require__(/*! @angular/common/locales/sk */ "./node_modules/@angular/common/locales/sk.js");
common_1.registerLocaleData(da_1.default, 'da');
common_1.registerLocaleData(sk_1.default, 'sk');
var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        core_1.NgModule({
            imports: [
                platform_browser_1.BrowserModule,
                animations_1.BrowserAnimationsModule,
                forms_1.FormsModule,
                app_routing_module_1.AppRoutingModule,
                services_module_1.ServicesModule,
                angulartics2_1.Angulartics2Module.forRoot([ga_1.Angulartics2GoogleAnalytics], {
                    pageTracking: {
                        clearQueryParams: true,
                    },
                }),
                angular2_toaster_1.ToasterModule,
            ],
            declarations: [
                accept_organization_component_1.AcceptOrganizationComponent,
                account_component_2.AccountComponent,
                add_edit_component_2.AddEditComponent,
                adjust_payment_component_1.AdjustPaymentComponent,
                adjust_seats_component_1.AdjustSeatsComponent,
                adjust_storage_component_1.AdjustStorageComponent,
                api_action_directive_1.ApiActionDirective,
                app_component_1.AppComponent,
                attachments_component_2.AttachmentsComponent,
                autofocus_directive_1.AutofocusDirective,
                avatar_component_1.AvatarComponent,
                blur_click_directive_1.BlurClickDirective,
                box_row_directive_1.BoxRowDirective,
                breach_report_component_1.BreachReportComponent,
                bulk_delete_component_1.BulkDeleteComponent,
                bulk_move_component_1.BulkMoveComponent,
                bulk_share_component_1.BulkShareComponent,
                callout_component_1.CalloutComponent,
                change_email_component_1.ChangeEmailComponent,
                change_password_component_1.ChangePasswordComponent,
                ciphers_component_2.CiphersComponent,
                collections_component_3.CollectionsComponent,
                create_organization_component_1.CreateOrganizationComponent,
                deauthorize_sessions_component_1.DeauthorizeSessionsComponent,
                delete_account_component_1.DeleteAccountComponent,
                delete_organization_component_1.DeleteOrganizationComponent,
                domain_rules_component_1.DomainRulesComponent,
                export_component_2.ExportComponent,
                fallback_src_directive_1.FallbackSrcDirective,
                folder_add_edit_component_1.FolderAddEditComponent,
                footer_component_1.FooterComponent,
                frontend_layout_component_1.FrontendLayoutComponent,
                groupings_component_2.GroupingsComponent,
                hint_component_1.HintComponent,
                icon_component_1.IconComponent,
                i18n_pipe_1.I18nPipe,
                import_component_2.ImportComponent,
                input_verbatim_directive_1.InputVerbatimDirective,
                lock_component_1.LockComponent,
                login_component_1.LoginComponent,
                modal_component_1.ModalComponent,
                navbar_component_1.NavbarComponent,
                options_component_1.OptionsComponent,
                account_component_1.AccountComponent,
                add_edit_component_1.AddEditComponent,
                organization_billing_component_1.OrganizationBillingComponent,
                attachments_component_1.AttachmentsComponent,
                ciphers_component_1.CiphersComponent,
                collection_add_edit_component_1.CollectionAddEditComponent,
                collections_component_2.CollectionsComponent,
                entity_events_component_1.EntityEventsComponent,
                entity_users_component_1.EntityUsersComponent,
                events_component_1.EventsComponent,
                export_component_1.ExportComponent,
                import_component_1.ImportComponent,
                group_add_edit_component_1.GroupAddEditComponent,
                groupings_component_1.GroupingsComponent,
                groups_component_1.GroupsComponent,
                collections_component_1.CollectionsComponent,
                manage_component_1.ManageComponent,
                people_component_1.PeopleComponent,
                settings_component_1.SettingsComponent,
                tools_component_1.ToolsComponent,
                two_factor_setup_component_1.TwoFactorSetupComponent,
                user_add_edit_component_1.UserAddEditComponent,
                user_groups_component_1.UserGroupsComponent,
                organizations_component_1.OrganizationsComponent,
                organization_layout_component_1.OrganizationLayoutComponent,
                vault_component_1.VaultComponent,
                password_generator_component_1.PasswordGeneratorComponent,
                password_generator_history_component_1.PasswordGeneratorHistoryComponent,
                payment_component_1.PaymentComponent,
                premium_component_1.PremiumComponent,
                profile_component_1.ProfileComponent,
                purge_vault_component_1.PurgeVaultComponent,
                recover_delete_component_1.RecoverDeleteComponent,
                recover_two_factor_component_1.RecoverTwoFactorComponent,
                register_component_1.RegisterComponent,
                search_ciphers_pipe_1.SearchCiphersPipe,
                search_pipe_1.SearchPipe,
                settings_component_2.SettingsComponent,
                share_component_1.ShareComponent,
                stop_click_directive_1.StopClickDirective,
                stop_prop_directive_1.StopPropDirective,
                tools_component_2.ToolsComponent,
                true_false_value_directive_1.TrueFalseValueDirective,
                two_factor_authenticator_component_1.TwoFactorAuthenticatorComponent,
                two_factor_component_1.TwoFactorComponent,
                two_factor_duo_component_1.TwoFactorDuoComponent,
                two_factor_email_component_1.TwoFactorEmailComponent,
                two_factor_options_component_1.TwoFactorOptionsComponent,
                two_factor_recovery_component_1.TwoFactorRecoveryComponent,
                two_factor_setup_component_2.TwoFactorSetupComponent,
                two_factor_u2f_component_1.TwoFactorU2fComponent,
                two_factor_verify_component_1.TwoFactorVerifyComponent,
                two_factor_yubikey_component_1.TwoFactorYubiKeyComponent,
                update_key_component_1.UpdateKeyComponent,
                update_license_component_1.UpdateLicenseComponent,
                user_billing_component_1.UserBillingComponent,
                user_layout_component_1.UserLayoutComponent,
                vault_component_2.VaultComponent,
                verify_email_component_1.VerifyEmailComponent,
                verify_email_token_component_1.VerifyEmailTokenComponent,
                verify_recover_delete_component_1.VerifyRecoverDeleteComponent,
            ],
            entryComponents: [
                add_edit_component_2.AddEditComponent,
                attachments_component_2.AttachmentsComponent,
                bulk_delete_component_1.BulkDeleteComponent,
                bulk_move_component_1.BulkMoveComponent,
                bulk_share_component_1.BulkShareComponent,
                collections_component_3.CollectionsComponent,
                deauthorize_sessions_component_1.DeauthorizeSessionsComponent,
                delete_account_component_1.DeleteAccountComponent,
                delete_organization_component_1.DeleteOrganizationComponent,
                folder_add_edit_component_1.FolderAddEditComponent,
                modal_component_1.ModalComponent,
                add_edit_component_1.AddEditComponent,
                attachments_component_1.AttachmentsComponent,
                collection_add_edit_component_1.CollectionAddEditComponent,
                collections_component_2.CollectionsComponent,
                entity_events_component_1.EntityEventsComponent,
                entity_users_component_1.EntityUsersComponent,
                group_add_edit_component_1.GroupAddEditComponent,
                user_add_edit_component_1.UserAddEditComponent,
                user_groups_component_1.UserGroupsComponent,
                password_generator_history_component_1.PasswordGeneratorHistoryComponent,
                purge_vault_component_1.PurgeVaultComponent,
                share_component_1.ShareComponent,
                two_factor_authenticator_component_1.TwoFactorAuthenticatorComponent,
                two_factor_duo_component_1.TwoFactorDuoComponent,
                two_factor_email_component_1.TwoFactorEmailComponent,
                two_factor_options_component_1.TwoFactorOptionsComponent,
                two_factor_recovery_component_1.TwoFactorRecoveryComponent,
                two_factor_u2f_component_1.TwoFactorU2fComponent,
                two_factor_yubikey_component_1.TwoFactorYubiKeyComponent,
                update_key_component_1.UpdateKeyComponent,
            ],
            providers: [],
            bootstrap: [app_component_1.AppComponent],
        })
    ], AppModule);
    return AppModule;
}());
exports.AppModule = AppModule;


/***/ }),

/***/ "./src/app/components/avatar.component.ts":
/*!************************************************!*\
  !*** ./src/app/components/avatar.component.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var platform_browser_1 = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/esm5/platform-browser.js");
var AvatarComponent = /** @class */ (function () {
    function AvatarComponent(sanitizer) {
        this.sanitizer = sanitizer;
        this.width = 45;
        this.height = 45;
        this.charCount = 2;
        this.textColor = '#ffffff';
        this.fontSize = 20;
        this.fontWeight = 300;
        this.dynamic = false;
        this.circle = false;
    }
    AvatarComponent.prototype.ngOnInit = function () {
        if (!this.dynamic) {
            this.generate();
        }
    };
    AvatarComponent.prototype.ngOnChanges = function () {
        if (this.dynamic) {
            this.generate();
        }
    };
    AvatarComponent.prototype.generate = function () {
        var chars = null;
        var upperData = this.data.toUpperCase();
        if (this.charCount > 1) {
            chars = this.getFirstLetters(upperData, this.charCount);
        }
        if (chars == null) {
            chars = upperData.substr(0, this.charCount);
        }
        var charObj = this.getCharText(chars);
        var color = this.stringToColor(upperData);
        var svg = this.getSvg(this.width, this.height, color);
        svg.appendChild(charObj);
        var html = window.document.createElement('div').appendChild(svg).outerHTML;
        var svgHtml = window.btoa(unescape(encodeURIComponent(html)));
        this.src = 'data:image/svg+xml;base64,' + svgHtml;
    };
    AvatarComponent.prototype.stringToColor = function (str) {
        var hash = 0;
        for (var i = 0; i < str.length; i++) {
            // tslint:disable-next-line
            hash = str.charCodeAt(i) + ((hash << 5) - hash);
        }
        var color = '#';
        for (var i = 0; i < 3; i++) {
            // tslint:disable-next-line
            var value = (hash >> (i * 8)) & 0xFF;
            color += ('00' + value.toString(16)).substr(-2);
        }
        return color;
    };
    AvatarComponent.prototype.getFirstLetters = function (data, count) {
        var parts = data.split(' ');
        if (parts.length > 1) {
            var text = '';
            for (var i = 0; i < count; i++) {
                text += parts[i].substr(0, 1);
            }
            return text;
        }
        return null;
    };
    AvatarComponent.prototype.getSvg = function (width, height, color) {
        var svgTag = window.document.createElement('svg');
        svgTag.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
        svgTag.setAttribute('pointer-events', 'none');
        svgTag.setAttribute('width', width.toString());
        svgTag.setAttribute('height', height.toString());
        svgTag.style.backgroundColor = color;
        svgTag.style.width = width + 'px';
        svgTag.style.height = height + 'px';
        return svgTag;
    };
    AvatarComponent.prototype.getCharText = function (character) {
        var textTag = window.document.createElement('text');
        textTag.setAttribute('text-anchor', 'middle');
        textTag.setAttribute('y', '50%');
        textTag.setAttribute('x', '50%');
        textTag.setAttribute('dy', '0.35em');
        textTag.setAttribute('pointer-events', 'auto');
        textTag.setAttribute('fill', this.textColor);
        textTag.setAttribute('font-family', '"Open Sans","Helvetica Neue",Helvetica,Arial,' +
            'sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"');
        textTag.textContent = character;
        textTag.style.fontWeight = this.fontWeight.toString();
        textTag.style.fontSize = this.fontSize + 'px';
        return textTag;
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], AvatarComponent.prototype, "data", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AvatarComponent.prototype, "width", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AvatarComponent.prototype, "height", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AvatarComponent.prototype, "charCount", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AvatarComponent.prototype, "textColor", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AvatarComponent.prototype, "fontSize", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AvatarComponent.prototype, "fontWeight", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AvatarComponent.prototype, "dynamic", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AvatarComponent.prototype, "circle", void 0);
    AvatarComponent = __decorate([
        core_1.Component({
            selector: 'app-avatar',
            template: '<img [src]="sanitizer.bypassSecurityTrustResourceUrl(src)" title="{{data}}" ' +
                '[ngClass]="{\'rounded-circle\': circle}">',
        }),
        __metadata("design:paramtypes", [platform_browser_1.DomSanitizer])
    ], AvatarComponent);
    return AvatarComponent;
}());
exports.AvatarComponent = AvatarComponent;


/***/ }),

/***/ "./src/app/components/callout.component.html":
/*!***************************************************!*\
  !*** ./src/app/components/callout.component.html ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"callout callout-{{calloutStyle}}\" role=\"alert\">\n    <h3 class=\"callout-heading\" *ngIf=\"title\">\n        <i class=\"fa {{icon}}\" *ngIf=\"icon\"></i>\n        {{title}}\n    </h3>\n    <ng-content></ng-content>\n</div>\n";

/***/ }),

/***/ "./src/app/components/callout.component.ts":
/*!*************************************************!*\
  !*** ./src/app/components/callout.component.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var CalloutComponent = /** @class */ (function () {
    function CalloutComponent(i18nService) {
        this.i18nService = i18nService;
        this.type = 'info';
    }
    CalloutComponent.prototype.ngOnInit = function () {
        this.calloutStyle = this.type;
        if (this.type === 'warning' || this.type === 'danger') {
            if (this.type === 'danger') {
                this.calloutStyle = 'danger';
            }
            if (this.title === undefined) {
                this.title = this.i18nService.t('warning');
            }
            if (this.icon === undefined) {
                this.icon = 'fa-warning';
            }
        }
        else if (this.type === 'error') {
            this.calloutStyle = 'danger';
            if (this.title === undefined) {
                this.title = this.i18nService.t('error');
            }
            if (this.icon === undefined) {
                this.icon = 'fa-bolt';
            }
        }
        else if (this.type === 'tip') {
            this.calloutStyle = 'success';
            if (this.title === undefined) {
                this.title = this.i18nService.t('tip');
            }
            if (this.icon === undefined) {
                this.icon = 'fa-lightbulb-o';
            }
        }
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], CalloutComponent.prototype, "type", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], CalloutComponent.prototype, "icon", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], CalloutComponent.prototype, "title", void 0);
    CalloutComponent = __decorate([
        core_1.Component({
            selector: 'app-callout',
            template: __webpack_require__(/*! ./callout.component.html */ "./src/app/components/callout.component.html"),
        }),
        __metadata("design:paramtypes", [i18n_service_1.I18nService])
    ], CalloutComponent);
    return CalloutComponent;
}());
exports.CalloutComponent = CalloutComponent;


/***/ }),

/***/ "./src/app/layouts/footer.component.html":
/*!***********************************************!*\
  !*** ./src/app/layouts/footer.component.html ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"container footer text-muted\">\n    <div class=\"row\">\n        <div class=\"col\">\n            &copy; {{year}}, 8bit Solutions LLC\n        </div>\n        <div class=\"col text-center\"></div>\n        <div class=\"col text-right\">\n            {{'versionNumber' | i18n : version}}\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/layouts/footer.component.ts":
/*!*********************************************!*\
  !*** ./src/app/layouts/footer.component.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var FooterComponent = /** @class */ (function () {
    function FooterComponent(platformUtilsService) {
        this.platformUtilsService = platformUtilsService;
        this.year = '2015';
    }
    FooterComponent.prototype.ngOnInit = function () {
        this.year = new Date().getFullYear().toString();
        this.version = this.platformUtilsService.getApplicationVersion();
    };
    FooterComponent = __decorate([
        core_1.Component({
            selector: 'app-footer',
            template: __webpack_require__(/*! ./footer.component.html */ "./src/app/layouts/footer.component.html"),
        }),
        __metadata("design:paramtypes", [platformUtils_service_1.PlatformUtilsService])
    ], FooterComponent);
    return FooterComponent;
}());
exports.FooterComponent = FooterComponent;


/***/ }),

/***/ "./src/app/layouts/frontend-layout.component.html":
/*!********************************************************!*\
  !*** ./src/app/layouts/frontend-layout.component.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<router-outlet></router-outlet>\n<div class=\"container my-5 text-muted text-center\">\n    &copy; 2018, 8bit Solutions LLC\n    <br> {{'versionNumber' | i18n : version}}\n</div>\n";

/***/ }),

/***/ "./src/app/layouts/frontend-layout.component.ts":
/*!******************************************************!*\
  !*** ./src/app/layouts/frontend-layout.component.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var FrontendLayoutComponent = /** @class */ (function () {
    function FrontendLayoutComponent(platformUtilsService) {
        this.platformUtilsService = platformUtilsService;
    }
    FrontendLayoutComponent.prototype.ngOnInit = function () {
        this.version = this.platformUtilsService.getApplicationVersion();
        document.body.classList.add('layout_frontend');
    };
    FrontendLayoutComponent.prototype.ngOnDestroy = function () {
        document.body.classList.remove('layout_frontend');
    };
    FrontendLayoutComponent = __decorate([
        core_1.Component({
            selector: 'app-frontend-layout',
            template: __webpack_require__(/*! ./frontend-layout.component.html */ "./src/app/layouts/frontend-layout.component.html"),
        }),
        __metadata("design:paramtypes", [platformUtils_service_1.PlatformUtilsService])
    ], FrontendLayoutComponent);
    return FrontendLayoutComponent;
}());
exports.FrontendLayoutComponent = FrontendLayoutComponent;


/***/ }),

/***/ "./src/app/layouts/navbar.component.html":
/*!***********************************************!*\
  !*** ./src/app/layouts/navbar.component.html ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<nav class=\"navbar navbar-expand navbar-dark bg-primary\" [ngClass]=\"{'bg-secondary-alt': selfHosted}\">\n    <div class=\"container\">\n        <a class=\"navbar-brand\" routerLink=\"/\" title=\"{{'pageTitle' | i18n : 'Bitwarden'}}\">\n            <i class=\"fa fa-shield\"></i>\n        </a>\n        <div class=\"collapse navbar-collapse\">\n            <ul class=\"navbar-nav\">\n                <li class=\"nav-item\" routerLinkActive=\"active\">\n                    <a class=\"nav-link\" routerLink=\"/vault\">{{'myVault' | i18n}}</a>\n                </li>\n                <li class=\"nav-item\" routerLinkActive=\"active\">\n                    <a class=\"nav-link\" routerLink=\"/tools\">{{'tools' | i18n}}</a>\n                </li>\n                <li class=\"nav-item\" routerLinkActive=\"active\">\n                    <a class=\"nav-link\" routerLink=\"/settings\">{{'settings' | i18n}}</a>\n                </li>\n            </ul>\n        </div>\n        <ul class=\"navbar-nav flex-row ml-md-auto d-none d-md-flex\">\n            <li class=\"nav-item dropdown\">\n                <a class=\"nav-item nav-link dropdown-toggle\" href=\"#\" id=\"nav-profile\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                    <i class=\"fa fa-user-circle fa-lg\"></i>\n                </a>\n                <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"nav-profile\">\n                    <div class=\"dropdown-item-text d-flex align-items-center\" *ngIf=\"name\" appStopProp>\n                        <app-avatar [data]=\"name\" width=\"25\" height=\"25\" fontSize=\"14\" [circle]=\"true\"></app-avatar>\n                        <div class=\"ml-2 overflow-hidden\">\n                            {{'loggedInAs' | i18n}}\n                            <small class=\"text-muted\">{{name}}</small>\n                        </div>\n                    </div>\n                    <div class=\"dropdown-divider\"></div>\n                    <a class=\"dropdown-item\" href=\"#\" routerLink=\"/settings/account\">\n                        <i class=\"fa fa-fw fa-user\"></i>\n                        {{'myAccount' | i18n}}\n                    </a>\n                    <a class=\"dropdown-item\" href=\"https://help.bitwarden.com\" target=\"_blank\" rel=\"noopener\">\n                        <i class=\"fa fa-fw fa-question-circle\"></i>\n                        {{'getHelp' | i18n}}\n                    </a>\n                    <a class=\"dropdown-item\" href=\"https://bitwarden.com#download\" target=\"_blank\" rel=\"noopener\">\n                        <i class=\"fa fa-fw fa-download\"></i>\n                        {{'getApps' | i18n}}\n                    </a>\n                    <div class=\"dropdown-divider\"></div>\n                    <button type=\"button\" class=\"dropdown-item\" (click)=\"lock()\">\n                        <i class=\"fa fa-fw fa-lock\"></i>\n                        {{'lockNow' | i18n}}\n                    </button>\n                    <button type=\"button\" class=\"dropdown-item\" (click)=\"logOut()\">\n                        <i class=\"fa fa-fw fa-sign-out\"></i>\n                        {{'logOut' | i18n}}\n                    </button>\n                </div>\n            </li>\n        </ul>\n    </div>\n</nav>\n";

/***/ }),

/***/ "./src/app/layouts/navbar.component.ts":
/*!*********************************************!*\
  !*** ./src/app/layouts/navbar.component.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var NavbarComponent = /** @class */ (function () {
    function NavbarComponent(messagingService, platformUtilsService, tokenService) {
        this.messagingService = messagingService;
        this.platformUtilsService = platformUtilsService;
        this.tokenService = tokenService;
        this.selfHosted = false;
        this.selfHosted = this.platformUtilsService.isSelfHost();
    }
    NavbarComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.tokenService.getName()];
                    case 1:
                        _a.name = _c.sent();
                        if (!(this.name == null || this.name.trim() === '')) return [3 /*break*/, 3];
                        _b = this;
                        return [4 /*yield*/, this.tokenService.getEmail()];
                    case 2:
                        _b.name = _c.sent();
                        _c.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    NavbarComponent.prototype.lock = function () {
        this.messagingService.send('lockVault');
    };
    NavbarComponent.prototype.logOut = function () {
        this.messagingService.send('logout');
    };
    NavbarComponent = __decorate([
        core_1.Component({
            selector: 'app-navbar',
            template: __webpack_require__(/*! ./navbar.component.html */ "./src/app/layouts/navbar.component.html"),
        }),
        __metadata("design:paramtypes", [messaging_service_1.MessagingService, platformUtils_service_1.PlatformUtilsService,
            token_service_1.TokenService])
    ], NavbarComponent);
    return NavbarComponent;
}());
exports.NavbarComponent = NavbarComponent;


/***/ }),

/***/ "./src/app/layouts/organization-layout.component.html":
/*!************************************************************!*\
  !*** ./src/app/layouts/organization-layout.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<app-navbar></app-navbar>\n<div class=\"org-nav\" *ngIf=\"organization\">\n    <div class=\"container d-flex flex-column\">\n        <div class=\"my-auto d-flex align-items-center pl-1\">\n            <app-avatar [data]=\"organization.name\" [width]=\"45\" [height]=\"45\" [circle]=\"true\"></app-avatar>\n            <div class=\"org-name ml-3\">\n                <span>{{organization.name}}</span>\n                <small class=\"text-muted\">{{'organization' | i18n}}</small>\n            </div>\n        </div>\n        <ul class=\"nav nav-tabs\" *ngIf=\"organization.isAdmin\">\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" routerLink=\"vault\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-lock\"></i>\n                    {{'vault' | i18n}}\n                </a>\n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" routerLink=\"manage\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-sliders\"></i>\n                    {{'manage' | i18n}}\n                </a>\n            </li>\n            <li class=\"nav-item\">\n                <a class=\"nav-link\" routerLink=\"tools\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-wrench\"></i>\n                    {{'tools' | i18n}}\n                </a>\n            </li>\n            <li class=\"nav-item\" *ngIf=\"organization.isOwner\">\n                <a class=\"nav-link\" routerLink=\"settings\" routerLinkActive=\"active\">\n                    <i class=\"fa fa-cogs\"></i>\n                    {{'settings' | i18n}}\n                </a>\n            </li>\n        </ul>\n    </div>\n</div>\n<router-outlet></router-outlet>\n<app-footer></app-footer>\n";

/***/ }),

/***/ "./src/app/layouts/organization-layout.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/layouts/organization-layout.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var OrganizationLayoutComponent = /** @class */ (function () {
    function OrganizationLayoutComponent(route, userService) {
        this.route = route;
        this.userService = userService;
    }
    OrganizationLayoutComponent.prototype.ngOnInit = function () {
        var _this = this;
        document.body.classList.remove('layout_frontend');
        this.route.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.organizationId = params.organizationId;
                        return [4 /*yield*/, this.load()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
    };
    OrganizationLayoutComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.userService.getOrganization(this.organizationId)];
                    case 1:
                        _a.organization = _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    OrganizationLayoutComponent = __decorate([
        core_1.Component({
            selector: 'app-organization-layout',
            template: __webpack_require__(/*! ./organization-layout.component.html */ "./src/app/layouts/organization-layout.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.ActivatedRoute, user_service_1.UserService])
    ], OrganizationLayoutComponent);
    return OrganizationLayoutComponent;
}());
exports.OrganizationLayoutComponent = OrganizationLayoutComponent;


/***/ }),

/***/ "./src/app/layouts/user-layout.component.html":
/*!****************************************************!*\
  !*** ./src/app/layouts/user-layout.component.html ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<app-navbar></app-navbar>\n<router-outlet></router-outlet>\n<app-footer></app-footer>\n";

/***/ }),

/***/ "./src/app/layouts/user-layout.component.ts":
/*!**************************************************!*\
  !*** ./src/app/layouts/user-layout.component.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var UserLayoutComponent = /** @class */ (function () {
    function UserLayoutComponent() {
    }
    UserLayoutComponent.prototype.ngOnInit = function () {
        document.body.classList.remove('layout_frontend');
    };
    UserLayoutComponent = __decorate([
        core_1.Component({
            selector: 'app-user-layout',
            template: __webpack_require__(/*! ./user-layout.component.html */ "./src/app/layouts/user-layout.component.html"),
        })
    ], UserLayoutComponent);
    return UserLayoutComponent;
}());
exports.UserLayoutComponent = UserLayoutComponent;


/***/ }),

/***/ "./src/app/main.ts":
/*!*************************!*\
  !*** ./src/app/main.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var platform_browser_dynamic_1 = __webpack_require__(/*! @angular/platform-browser-dynamic */ "./node_modules/@angular/platform-browser-dynamic/esm5/platform-browser-dynamic.js");
__webpack_require__(/*! bootstrap */ "./node_modules/bootstrap/dist/js/bootstrap.js");
__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
__webpack_require__(/*! popper.js */ "./node_modules/popper.js/dist/esm/popper.js");
// tslint:disable-next-line
__webpack_require__(/*! ../scss/styles.scss */ "./src/scss/styles.scss");
var app_module_1 = __webpack_require__(/*! ./app.module */ "./src/app/app.module.ts");
if (false) {}
platform_browser_dynamic_1.platformBrowserDynamic().bootstrapModule(app_module_1.AppModule);


/***/ }),

/***/ "./src/app/modal.component.ts":
/*!************************************!*\
  !*** ./src/app/modal.component.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var jq = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var modal_component_1 = __webpack_require__(/*! jslib/angular/components/modal.component */ "./jslib/src/angular/components/modal.component.ts");
var ModalComponent = /** @class */ (function (_super) {
    __extends(ModalComponent, _super);
    function ModalComponent(componentFactoryResolver) {
        var _this = _super.call(this, componentFactoryResolver) || this;
        _this.el = null;
        return _this;
    }
    ModalComponent.prototype.ngOnDestroy = function () { };
    ModalComponent.prototype.show = function (type, parentContainer, fade) {
        var _this = this;
        if (fade === void 0) { fade = true; }
        this.parentContainer = parentContainer;
        this.fade = fade;
        var factory = this.componentFactoryResolver.resolveComponentFactory(type);
        var componentRef = this.container.createComponent(factory);
        var modals = Array.from(document.querySelectorAll('.modal'));
        if (modals.length > 0) {
            this.el = jq(modals[0]);
            this.el.modal('show');
            this.el.on('show.bs.modal', function () {
                _this.onShow.emit();
            });
            this.el.on('shown.bs.modal', function () {
                _this.onShown.emit();
                _this.el.find('*[appAutoFocus]').focus();
            });
            this.el.on('hide.bs.modal', function () {
                _this.onClose.emit();
            });
            this.el.on('hidden.bs.modal', function () {
                _this.onClosed.emit();
                if (_this.parentContainer != null) {
                    _this.parentContainer.clear();
                }
            });
        }
        return componentRef.instance;
    };
    ModalComponent.prototype.close = function () {
        if (this.el != null) {
            this.el.modal('hide');
        }
    };
    ModalComponent = __decorate([
        core_1.Component({
            selector: 'app-modal',
            template: "<ng-template #container></ng-template>",
        }),
        __metadata("design:paramtypes", [core_1.ComponentFactoryResolver])
    ], ModalComponent);
    return ModalComponent;
}(modal_component_1.ModalComponent));
exports.ModalComponent = ModalComponent;


/***/ }),

/***/ "./src/app/organizations/manage/collection-add-edit.component.html":
/*!*************************************************************************!*\
  !*** ./src/app/organizations/manage/collection-add-edit.component.html ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{title}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"loading\">\n                <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"!loading\">\n                <div class=\"form-group\">\n                    <label for=\"name\">{{'name' | i18n}}</label>\n                    <input id=\"name\" class=\"form-control\" type=\"text\" name=\"Name\" [(ngModel)]=\"name\" required>\n                </div>\n                <h3 class=\"mt-4 d-flex mb-0\">\n                    {{'groupAccess' | i18n}}\n                    <div class=\"ml-auto\" *ngIf=\"groups && groups.length\">\n                        <button type=\"button\" (click)=\"selectAll(true)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'selectAll' | i18n}}\n                        </button>\n                        <button type=\"button\" (click)=\"selectAll(false)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'unselectAll' | i18n}}\n                        </button>\n                    </div>\n                </h3>\n                <div *ngIf=\"!groups || !groups.length\">\n                    {{'noGroupsInList' | i18n}}\n                </div>\n                <table class=\"table table-hover table-list mb-0\" *ngIf=\"groups && groups.length\">\n                    <thead>\n                        <tr>\n                            <th>&nbsp;</th>\n                            <th>{{'name' | i18n}}</th>\n                            <th width=\"100\" class=\"text-center\">{{'readOnly' | i18n}}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr *ngFor=\"let g of groups; let i = index\">\n                            <td class=\"table-list-checkbox\" (click)=\"check(g)\">\n                                <input type=\"checkbox\" [(ngModel)]=\"g.checked\" name=\"Groups[{{i}}].Checked\" [disabled]=\"g.accessAll\">\n                            </td>\n                            <td (click)=\"check(g)\">\n                                <span appStopProp>\n                                    {{g.name}}\n                                    <i class=\"fa fa-th text-muted fa-fw\" *ngIf=\"g.accessAll\" title=\"This group can access all items\"></i>\n                                </span>\n                            </td>\n                            <td class=\"text-center\">\n                                <input type=\"checkbox\" [(ngModel)]=\"g.readOnly\" name=\"Groups[{{i}}].ReadOnly\" [disabled]=\"!g.checked || g.accessAll\">\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'save' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'cancel' | i18n}}</button>\n                <div class=\"ml-auto\">\n                    <button #deleteBtn type=\"button\" (click)=\"delete()\" class=\"btn btn-outline-danger\" title=\"{{'delete' | i18n}}\" *ngIf=\"editMode\"\n                        [disabled]=\"deleteBtn.loading\" [appApiAction]=\"deletePromise\">\n                        <i class=\"fa fa-trash-o fa-lg fa-fw\" [hidden]=\"deleteBtn.loading\"></i>\n                        <i class=\"fa fa-spinner fa-spin fa-lg fa-fw\" [hidden]=\"!deleteBtn.loading\" title=\"{{'loading' | i18n}}\"></i>\n                    </button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/organizations/manage/collection-add-edit.component.ts":
/*!***********************************************************************!*\
  !*** ./src/app/organizations/manage/collection-add-edit.component.ts ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var cipherString_1 = __webpack_require__(/*! jslib/models/domain/cipherString */ "./jslib/src/models/domain/cipherString.ts");
var collectionRequest_1 = __webpack_require__(/*! jslib/models/request/collectionRequest */ "./jslib/src/models/request/collectionRequest.ts");
var selectionReadOnlyRequest_1 = __webpack_require__(/*! jslib/models/request/selectionReadOnlyRequest */ "./jslib/src/models/request/selectionReadOnlyRequest.ts");
var utils_1 = __webpack_require__(/*! jslib/misc/utils */ "./jslib/src/misc/utils.ts");
var CollectionAddEditComponent = /** @class */ (function () {
    function CollectionAddEditComponent(apiService, i18nService, analytics, toasterService, platformUtilsService, cryptoService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.platformUtilsService = platformUtilsService;
        this.cryptoService = cryptoService;
        this.onSavedCollection = new core_1.EventEmitter();
        this.onDeletedCollection = new core_1.EventEmitter();
        this.loading = true;
        this.editMode = false;
        this.groups = [];
    }
    CollectionAddEditComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var groupsResponse, _a, collection, _b, _c;
            var _this = this;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        this.editMode = this.loading = this.collectionId != null;
                        return [4 /*yield*/, this.apiService.getGroups(this.organizationId)];
                    case 1:
                        groupsResponse = _d.sent();
                        this.groups = groupsResponse.data.map(function (r) { return r; }).sort(utils_1.Utils.getSortFunction(this.i18nService, 'name'));
                        _a = this;
                        return [4 /*yield*/, this.cryptoService.getOrgKey(this.organizationId)];
                    case 2:
                        _a.orgKey = _d.sent();
                        if (!this.editMode) return [3 /*break*/, 8];
                        this.editMode = true;
                        this.title = this.i18nService.t('editCollection');
                        _d.label = 3;
                    case 3:
                        _d.trys.push([3, 6, , 7]);
                        return [4 /*yield*/, this.apiService.getCollectionDetails(this.organizationId, this.collectionId)];
                    case 4:
                        collection = _d.sent();
                        _b = this;
                        return [4 /*yield*/, this.cryptoService.decryptToUtf8(new cipherString_1.CipherString(collection.name), this.orgKey)];
                    case 5:
                        _b.name = _d.sent();
                        if (collection.groups != null && this.groups != null) {
                            collection.groups.forEach(function (s) {
                                var group = _this.groups.filter(function (g) { return !g.accessAll && g.id === s.id; });
                                if (group != null && group.length > 0) {
                                    group[0].checked = true;
                                    group[0].readOnly = s.readOnly;
                                }
                            });
                        }
                        return [3 /*break*/, 7];
                    case 6:
                        _c = _d.sent();
                        return [3 /*break*/, 7];
                    case 7: return [3 /*break*/, 9];
                    case 8:
                        this.title = this.i18nService.t('addCollection');
                        _d.label = 9;
                    case 9:
                        this.groups.forEach(function (g) {
                            if (g.accessAll) {
                                g.checked = true;
                            }
                        });
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    CollectionAddEditComponent.prototype.check = function (g, select) {
        if (g.accessAll) {
            return;
        }
        g.checked = select == null ? !g.checked : select;
        if (!g.checked) {
            g.readOnly = false;
        }
    };
    CollectionAddEditComponent.prototype.selectAll = function (select) {
        var _this = this;
        this.groups.forEach(function (g) { return _this.check(g, select); });
    };
    CollectionAddEditComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        request = new collectionRequest_1.CollectionRequest();
                        _a = request;
                        return [4 /*yield*/, this.cryptoService.encrypt(this.name, this.orgKey)];
                    case 1:
                        _a.name = (_c.sent()).encryptedString;
                        request.groups = this.groups.filter(function (g) { return g.checked && !g.accessAll; })
                            .map(function (g) { return new selectionReadOnlyRequest_1.SelectionReadOnlyRequest(g.id, !!g.readOnly); });
                        _c.label = 2;
                    case 2:
                        _c.trys.push([2, 4, , 5]);
                        if (this.editMode) {
                            this.formPromise = this.apiService.putCollection(this.organizationId, this.collectionId, request);
                        }
                        else {
                            this.formPromise = this.apiService.postCollection(this.organizationId, request);
                        }
                        return [4 /*yield*/, this.formPromise];
                    case 3:
                        _c.sent();
                        this.analytics.eventTrack.next({ action: this.editMode ? 'Edited Collection' : 'Created Collection' });
                        this.toasterService.popAsync('success', null, this.i18nService.t(this.editMode ? 'editedCollectionId' : 'createdCollectionId', this.name));
                        this.onSavedCollection.emit();
                        return [3 /*break*/, 5];
                    case 4:
                        _b = _c.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    CollectionAddEditComponent.prototype.delete = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!this.editMode) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('deleteCollectionConfirmation'), this.name, this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.deletePromise = this.apiService.deleteCollection(this.organizationId, this.collectionId);
                        return [4 /*yield*/, this.deletePromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted Collection' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('deletedCollectionId', this.name));
                        this.onDeletedCollection.emit();
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], CollectionAddEditComponent.prototype, "collectionId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], CollectionAddEditComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CollectionAddEditComponent.prototype, "onSavedCollection", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CollectionAddEditComponent.prototype, "onDeletedCollection", void 0);
    CollectionAddEditComponent = __decorate([
        core_1.Component({
            selector: 'app-collection-add-edit',
            template: __webpack_require__(/*! ./collection-add-edit.component.html */ "./src/app/organizations/manage/collection-add-edit.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            platformUtils_service_1.PlatformUtilsService, crypto_service_1.CryptoService])
    ], CollectionAddEditComponent);
    return CollectionAddEditComponent;
}());
exports.CollectionAddEditComponent = CollectionAddEditComponent;


/***/ }),

/***/ "./src/app/organizations/manage/collections.component.html":
/*!*****************************************************************!*\
  !*** ./src/app/organizations/manage/collections.component.html ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header d-flex\">\n    <h1>{{'collections' | i18n}}</h1>\n    <div class=\"ml-auto d-flex\">\n        <div>\n            <label class=\"sr-only\" for=\"search\">{{'search' | i18n}}</label>\n            <input type=\"search\" class=\"form-control form-control-sm\" id=\"search\" placeholder=\"{{'search' | i18n}}\" [(ngModel)]=\"searchText\">\n        </div>\n        <button type=\"button\" class=\"btn btn-sm btn-outline-primary ml-3\" (click)=\"add()\">\n            <i class=\"fa fa-plus fa-fw\"></i>\n            {{'newCollection' | i18n}}\n        </button>\n    </div>\n</div>\n<i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"loading\"></i>\n<ng-container *ngIf=\"!loading && (collections | search:searchText:'name':'id') as searchedCollections\">\n    <p *ngIf=\"!searchedCollections.length\">{{'noCollectionsInList' | i18n}}</p>\n    <table class=\"table table-hover table-list\" *ngIf=\"searchedCollections.length\">\n        <tbody>\n            <tr *ngFor=\"let c of searchedCollections\">\n                <td>\n                    <a href=\"#\" appStopClick (click)=\"edit(c)\">{{c.name}}</a>\n                </td>\n                <td class=\"table-list-options\">\n                    <div class=\"dropdown\" appListDropdown>\n                        <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                            <i class=\"fa fa-cog fa-lg\"></i>\n                        </button>\n                        <div class=\"dropdown-menu dropdown-menu-right\">\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"users(c)\">\n                                <i class=\"fa fa-fw fa-users\"></i>\n                                {{'users' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item text-danger\" href=\"#\" appStopClick (click)=\"delete(c)\">\n                                <i class=\"fa fa-fw fa-trash-o\"></i>\n                                {{'delete' | i18n}}\n                            </a>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</ng-container>\n<ng-template #addEdit></ng-template>\n<ng-template #usersTemplate></ng-template>\n";

/***/ }),

/***/ "./src/app/organizations/manage/collections.component.ts":
/*!***************************************************************!*\
  !*** ./src/app/organizations/manage/collections.component.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var collectionData_1 = __webpack_require__(/*! jslib/models/data/collectionData */ "./jslib/src/models/data/collectionData.ts");
var collection_1 = __webpack_require__(/*! jslib/models/domain/collection */ "./jslib/src/models/domain/collection.ts");
var modal_component_1 = __webpack_require__(/*! ../../modal.component */ "./src/app/modal.component.ts");
var collection_add_edit_component_1 = __webpack_require__(/*! ./collection-add-edit.component */ "./src/app/organizations/manage/collection-add-edit.component.ts");
var entity_users_component_1 = __webpack_require__(/*! ./entity-users.component */ "./src/app/organizations/manage/entity-users.component.ts");
var CollectionsComponent = /** @class */ (function () {
    function CollectionsComponent(apiService, route, collectionService, componentFactoryResolver, analytics, toasterService, i18nService, platformUtilsService) {
        this.apiService = apiService;
        this.route = route;
        this.collectionService = collectionService;
        this.componentFactoryResolver = componentFactoryResolver;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.platformUtilsService = platformUtilsService;
        this.loading = true;
        this.modal = null;
    }
    CollectionsComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                this.route.parent.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
                    var _this = this;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this.organizationId = params.organizationId;
                                return [4 /*yield*/, this.load()];
                            case 1:
                                _a.sent();
                                this.route.queryParams.subscribe(function (qParams) { return __awaiter(_this, void 0, void 0, function () {
                                    return __generator(this, function (_a) {
                                        this.searchText = qParams.search;
                                        return [2 /*return*/];
                                    });
                                }); });
                                return [2 /*return*/];
                        }
                    });
                }); });
                return [2 /*return*/];
            });
        });
    };
    CollectionsComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response, collections, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.apiService.getCollections(this.organizationId)];
                    case 1:
                        response = _b.sent();
                        collections = response.data.map(function (r) {
                            return new collection_1.Collection(new collectionData_1.CollectionData(r));
                        });
                        _a = this;
                        return [4 /*yield*/, this.collectionService.decryptMany(collections)];
                    case 2:
                        _a.collections = _b.sent();
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    CollectionsComponent.prototype.edit = function (collection) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.addEditModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(collection_add_edit_component_1.CollectionAddEditComponent, this.addEditModalRef);
        childComponent.organizationId = this.organizationId;
        childComponent.collectionId = collection != null ? collection.id : null;
        childComponent.onSavedCollection.subscribe(function () {
            _this.modal.close();
            _this.load();
        });
        childComponent.onDeletedCollection.subscribe(function () {
            _this.modal.close();
            _this.removeCollection(collection);
        });
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
    };
    CollectionsComponent.prototype.add = function () {
        this.edit(null);
    };
    CollectionsComponent.prototype.delete = function (collection) {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('deleteCollectionConfirmation'), collection.name, this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        return [4 /*yield*/, this.apiService.deleteCollection(this.organizationId, collection.id)];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted Collection' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('deletedCollectionId', collection.name));
                        this.removeCollection(collection);
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    CollectionsComponent.prototype.users = function (collection) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.usersModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(entity_users_component_1.EntityUsersComponent, this.usersModalRef);
        childComponent.organizationId = this.organizationId;
        childComponent.entity = 'collection';
        childComponent.entityId = collection.id;
        childComponent.entityName = collection.name;
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
    };
    CollectionsComponent.prototype.removeCollection = function (collection) {
        var index = this.collections.indexOf(collection);
        if (index > -1) {
            this.collections.splice(index, 1);
        }
    };
    __decorate([
        core_1.ViewChild('addEdit', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], CollectionsComponent.prototype, "addEditModalRef", void 0);
    __decorate([
        core_1.ViewChild('usersTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], CollectionsComponent.prototype, "usersModalRef", void 0);
    CollectionsComponent = __decorate([
        core_1.Component({
            selector: 'app-org-manage-collections',
            template: __webpack_require__(/*! ./collections.component.html */ "./src/app/organizations/manage/collections.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, router_1.ActivatedRoute,
            collection_service_1.CollectionService, core_1.ComponentFactoryResolver,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            i18n_service_1.I18nService, platformUtils_service_1.PlatformUtilsService])
    ], CollectionsComponent);
    return CollectionsComponent;
}());
exports.CollectionsComponent = CollectionsComponent;


/***/ }),

/***/ "./src/app/organizations/manage/entity-events.component.html":
/*!*******************************************************************!*\
  !*** ./src/app/organizations/manage/entity-events.component.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog modal-lg\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'eventLogs' | i18n}}\n                    <small class=\"text-muted\" *ngIf=\"name\">{{name}}</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"!loaded\">\n                <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"loaded\">\n                <div class=\"d-flex\">\n                    <div class=\"form-inline\">\n                        <label class=\"sr-only\" for=\"start\">{{'startDate' | i18n}}</label>\n                        <input type=\"datetime-local\" class=\"form-control form-control-sm\" id=\"start\" placeholder=\"{{'startDate' | i18n}}\" [(ngModel)]=\"start\"\n                            placeholder=\"YYYY-MM-DDTHH:MM\">\n                        <span class=\"mx-2\">-</span>\n                        <label class=\"sr-only\" for=\"end\">{{'endDate' | i18n}}</label>\n                        <input type=\"datetime-local\" class=\"form-control form-control-sm\" id=\"end\" placeholder=\"{{'endDate' | i18n}}\" [(ngModel)]=\"end\"\n                            placeholder=\"YYYY-MM-DDTHH:MM\">\n                    </div>\n                    <button #refreshBtn [appApiAction]=\"refreshPromise\" type=\"button\" class=\"btn btn-sm btn-outline-primary ml-3\" (click)=\"loadEvents(true)\"\n                        [disabled]=\"loaded && refreshBtn.loading\">\n                        <i class=\"fa fa-refresh fa-fw\" [ngClass]=\"{'fa-spin': loaded && refreshBtn.loading}\"></i>\n                        {{'refresh' | i18n}}\n                    </button>\n                </div>\n                <hr>\n                <div *ngIf=\"!events || !events.length\">\n                    {{'noEventsInList' | i18n}}\n                </div>\n                <table class=\"table table-hover mb-0\" *ngIf=\"events && events.length\">\n                    <thead>\n                        <tr>\n                            <th class=\"border-top-0\" width=\"210\">{{'timestamp' | i18n}}</th>\n                            <th class=\"border-top-0\" width=\"40\">\n                                <span class=\"sr-only\">{{'device' | i18n}}</span>\n                            </th>\n                            <th class=\"border-top-0\" width=\"150\" *ngIf=\"showUser\">{{'user' | i18n}}</th>\n                            <th class=\"border-top-0\">{{'event' | i18n}}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr *ngFor=\"let e of events\">\n                            <td>{{e.date | date:'medium'}}</td>\n                            <td>\n                                <i class=\"text-muted fa fa-lg {{e.appIcon}}\" title=\"{{e.appName}}, {{e.ip}}\"></i>\n                            </td>\n                            <td *ngIf=\"showUser\">\n                                <span title=\"{{e.userEmail}}\">{{e.userName}}</span>\n                            </td>\n                            <td [innerHTML]=\"e.message\"></td>\n                        </tr>\n                    </tbody>\n                </table>\n                <button #moreBtn [appApiAction]=\"morePromise\" type=\"button\" class=\"btn btn-block btn-link btn-submit\" (click)=\"loadEvents(false)\"\n                    [disabled]=\"loaded && moreBtn.loading\" *ngIf=\"continuationToken\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'loadMore' | i18n}}</span>\n                </button>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n            </div>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/organizations/manage/entity-events.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/organizations/manage/entity-events.component.ts ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var event_service_1 = __webpack_require__(/*! ../../services/event.service */ "./src/app/services/event.service.ts");
var EntityEventsComponent = /** @class */ (function () {
    function EntityEventsComponent(apiService, i18nService, eventService, toasterService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.eventService = eventService;
        this.toasterService = toasterService;
        this.showUser = false;
        this.loading = true;
        this.loaded = false;
        this.orgUsersUserIdMap = new Map();
        this.orgUsersIdMap = new Map();
    }
    EntityEventsComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var defaultDates;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        defaultDates = this.eventService.getDefaultDateFilters();
                        this.start = defaultDates[0];
                        this.end = defaultDates[1];
                        return [4 /*yield*/, this.load()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    EntityEventsComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.showUser) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.apiService.getOrganizationUsers(this.organizationId)];
                    case 1:
                        response = _a.sent();
                        response.data.forEach(function (u) {
                            var name = u.name == null || u.name.trim() === '' ? u.email : u.name;
                            _this.orgUsersIdMap.set(u.id, { name: name, email: u.email });
                            _this.orgUsersUserIdMap.set(u.userId, { name: name, email: u.email });
                        });
                        _a.label = 2;
                    case 2: return [4 /*yield*/, this.loadEvents(true)];
                    case 3:
                        _a.sent();
                        this.loaded = true;
                        return [2 /*return*/];
                }
            });
        });
    };
    EntityEventsComponent.prototype.loadEvents = function (clearExisting) {
        return __awaiter(this, void 0, void 0, function () {
            var dates, response, promise, _a, events;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.refreshPromise != null || this.morePromise != null) {
                            return [2 /*return*/];
                        }
                        dates = null;
                        try {
                            dates = this.eventService.formatDateFilters(this.start, this.end);
                        }
                        catch (e) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('invalidDateRange'));
                            return [2 /*return*/];
                        }
                        this.loading = true;
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        promise = void 0;
                        if (this.entity === 'user') {
                            promise = this.apiService.getEventsOrganizationUser(this.organizationId, this.entityId, dates[0], dates[1], clearExisting ? null : this.continuationToken);
                        }
                        else {
                            promise = this.apiService.getEventsCipher(this.entityId, dates[0], dates[1], clearExisting ? null : this.continuationToken);
                        }
                        if (clearExisting) {
                            this.refreshPromise = promise;
                        }
                        else {
                            this.morePromise = promise;
                        }
                        return [4 /*yield*/, promise];
                    case 2:
                        response = _b.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4:
                        this.continuationToken = response.continuationToken;
                        events = response.data.map(function (r) {
                            var userId = r.actingUserId == null ? r.userId : r.actingUserId;
                            var eventInfo = _this.eventService.getEventInfo(r);
                            var user = _this.showUser && userId != null && _this.orgUsersUserIdMap.has(userId) ?
                                _this.orgUsersUserIdMap.get(userId) : null;
                            return {
                                message: eventInfo.message,
                                appIcon: eventInfo.appIcon,
                                appName: eventInfo.appName,
                                userId: userId,
                                userName: user != null ? user.name : _this.showUser ? _this.i18nService.t('unknown') : null,
                                userEmail: user != null ? user.email : _this.showUser ? '' : null,
                                date: r.date,
                                ip: r.ipAddress,
                                type: r.type,
                            };
                        });
                        if (!clearExisting && this.events != null && this.events.length > 0) {
                            this.events = this.events.concat(events);
                        }
                        else {
                            this.events = events;
                        }
                        this.loading = false;
                        this.morePromise = null;
                        this.refreshPromise = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], EntityEventsComponent.prototype, "name", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], EntityEventsComponent.prototype, "entity", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], EntityEventsComponent.prototype, "entityId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], EntityEventsComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], EntityEventsComponent.prototype, "showUser", void 0);
    EntityEventsComponent = __decorate([
        core_1.Component({
            selector: 'app-entity-events',
            template: __webpack_require__(/*! ./entity-events.component.html */ "./src/app/organizations/manage/entity-events.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            event_service_1.EventService, angular2_toaster_1.ToasterService])
    ], EntityEventsComponent);
    return EntityEventsComponent;
}());
exports.EntityEventsComponent = EntityEventsComponent;


/***/ }),

/***/ "./src/app/organizations/manage/entity-users.component.html":
/*!******************************************************************!*\
  !*** ./src/app/organizations/manage/entity-users.component.html ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog modal-lg\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'userAccess' | i18n}}\n                    <small>{{entityName}}</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"loading\">\n                <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"!loading\">\n                <ng-container *ngIf=\"!users || !users.length\">\n                    {{'noUsersInList' | i18n}}\n                </ng-container>\n                <table class=\"table table-hover table-list mb-0\" *ngIf=\"users && users.length\">\n                    <tbody>\n                        <tr *ngFor=\"let u of users\">\n                            <td width=\"30\">\n                                <app-avatar [data]=\"u.name || u.email\" width=\"25\" height=\"25\" [circle]=\"true\" [fontSize]=\"14\"></app-avatar>\n                            </td>\n                            <td>\n                                {{u.email}}\n                                <span class=\"badge badge-secondary\" *ngIf=\"u.status === organizationUserStatusType.Invited\">{{'invited' | i18n}}</span>\n                                <span class=\"badge badge-warning\" *ngIf=\"u.status === organizationUserStatusType.Accepted\">{{'accepted' | i18n}}</span>\n                                <small class=\"text-muted d-block\" *ngIf=\"u.name\">{{u.name}}</small>\n                            </td>\n                            <td *ngIf=\"entity === 'collection'\">\n                                <i class=\"fa fa-th\" *ngIf=\"u.accessAll\" title=\"{{'userAccessAllItems' | i18n}}\"></i>\n                                <i class=\"fa fa-eye\" *ngIf=\"u.readOnly\" title=\"{{'readOnly' | i18n}}\"></i>\n                            </td>\n                            <td>\n                                <span *ngIf=\"u.type === organizationUserType.Owner\">{{'owner' | i18n}}</span>\n                                <span *ngIf=\"u.type === organizationUserType.Admin\">{{'admin' | i18n}}</span>\n                                <span *ngIf=\"u.type === organizationUserType.User\">{{'user' | i18n}}</span>\n                            </td>\n                            <td class=\"table-list-options wider\">\n                                <button type=\"button\" class=\"btn btn-sm btn-outline-danger btn-submit\" (click)=\"remove(u)\" #removeBtn [disabled]=\"removeBtn.loading\"\n                                    [appApiAction]=\"actionPromise\" *ngIf=\"entity !== 'collection' || !u.accessAll\">\n                                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                                    <span>{{'remove' | i18n}}</span>\n                                </button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n            </div>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/organizations/manage/entity-users.component.ts":
/*!****************************************************************!*\
  !*** ./src/app/organizations/manage/entity-users.component.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var organizationUserStatusType_1 = __webpack_require__(/*! jslib/enums/organizationUserStatusType */ "./jslib/src/enums/organizationUserStatusType.ts");
var organizationUserType_1 = __webpack_require__(/*! jslib/enums/organizationUserType */ "./jslib/src/enums/organizationUserType.ts");
var utils_1 = __webpack_require__(/*! jslib/misc/utils */ "./jslib/src/misc/utils.ts");
var EntityUsersComponent = /** @class */ (function () {
    function EntityUsersComponent(apiService, i18nService, analytics, toasterService, platformUtilsService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.platformUtilsService = platformUtilsService;
        this.onRemovedUser = new core_1.EventEmitter();
        this.organizationUserType = organizationUserType_1.OrganizationUserType;
        this.organizationUserStatusType = organizationUserStatusType_1.OrganizationUserStatusType;
        this.loading = true;
        this.users = [];
    }
    EntityUsersComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.loadUsers()];
                    case 1:
                        _a.sent();
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    EntityUsersComponent.prototype.loadUsers = function () {
        return __awaiter(this, void 0, void 0, function () {
            var users, response, response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        users = [];
                        if (!(this.entity === 'group')) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.apiService.getGroupUsers(this.organizationId, this.entityId)];
                    case 1:
                        response = _a.sent();
                        users = response.data.map(function (r) { return r; });
                        return [3 /*break*/, 4];
                    case 2:
                        if (!(this.entity === 'collection')) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.apiService.getCollectionUsers(this.organizationId, this.entityId)];
                    case 3:
                        response = _a.sent();
                        users = response.data.map(function (r) { return r; });
                        _a.label = 4;
                    case 4:
                        users.sort(utils_1.Utils.getSortFunction(this.i18nService, 'email'));
                        this.users = users;
                        return [2 /*return*/];
                }
            });
        });
    };
    EntityUsersComponent.prototype.remove = function (user) {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, index, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.actionPromise != null || (this.entity === 'collection' && user.accessAll)) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('removeUserConfirmation'), user.email, this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 7, , 8]);
                        if (!(this.entity === 'group')) return [3 /*break*/, 4];
                        this.actionPromise = this.apiService.deleteGroupUser(this.organizationId, this.entityId, user.organizationUserId);
                        return [4 /*yield*/, this.actionPromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Removed User From Group' });
                        return [3 /*break*/, 6];
                    case 4:
                        if (!(this.entity === 'collection')) return [3 /*break*/, 6];
                        this.actionPromise = this.apiService.deleteCollectionUser(this.organizationId, this.entityId, user.organizationUserId);
                        return [4 /*yield*/, this.actionPromise];
                    case 5:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Removed User From Collection' });
                        _b.label = 6;
                    case 6:
                        this.toasterService.popAsync('success', null, this.i18nService.t('removedUserId', user.email));
                        this.onRemovedUser.emit();
                        index = this.users.indexOf(user);
                        if (index > -1) {
                            this.users.splice(index, 1);
                        }
                        return [3 /*break*/, 8];
                    case 7:
                        _a = _b.sent();
                        return [3 /*break*/, 8];
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], EntityUsersComponent.prototype, "entity", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], EntityUsersComponent.prototype, "entityId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], EntityUsersComponent.prototype, "entityName", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], EntityUsersComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], EntityUsersComponent.prototype, "onRemovedUser", void 0);
    EntityUsersComponent = __decorate([
        core_1.Component({
            selector: 'app-entity-users',
            template: __webpack_require__(/*! ./entity-users.component.html */ "./src/app/organizations/manage/entity-users.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            platformUtils_service_1.PlatformUtilsService])
    ], EntityUsersComponent);
    return EntityUsersComponent;
}());
exports.EntityUsersComponent = EntityUsersComponent;


/***/ }),

/***/ "./src/app/organizations/manage/events.component.html":
/*!************************************************************!*\
  !*** ./src/app/organizations/manage/events.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header d-flex\">\n    <h1>{{'eventLogs' | i18n}}</h1>\n    <div class=\"ml-auto d-flex\">\n        <div class=\"form-inline\">\n            <label class=\"sr-only\" for=\"start\">{{'startDate' | i18n}}</label>\n            <input type=\"datetime-local\" class=\"form-control form-control-sm\" id=\"start\" placeholder=\"{{'startDate' | i18n}}\" [(ngModel)]=\"start\"\n                placeholder=\"YYYY-MM-DDTHH:MM\">\n            <span class=\"mx-2\">-</span>\n            <label class=\"sr-only\" for=\"end\">{{'endDate' | i18n}}</label>\n            <input type=\"datetime-local\" class=\"form-control form-control-sm\" id=\"end\" placeholder=\"{{'endDate' | i18n}}\" [(ngModel)]=\"end\"\n                placeholder=\"YYYY-MM-DDTHH:MM\">\n        </div>\n        <button #refreshBtn [appApiAction]=\"refreshPromise\" type=\"button\" class=\"btn btn-sm btn-outline-primary ml-3\" (click)=\"loadEvents(true)\"\n            [disabled]=\"loaded && refreshBtn.loading\">\n            <i class=\"fa fa-refresh fa-fw\" [ngClass]=\"{'fa-spin': loaded && refreshBtn.loading}\"></i>\n            {{'refresh' | i18n}}\n        </button>\n    </div>\n</div>\n<i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"!loaded\" title=\"{{'loading' | i18n}}\"></i>\n<ng-container *ngIf=\"loaded\">\n    <p *ngIf=\"!events || !events.length\">{{'noEventsInList' | i18n}}</p>\n    <table class=\"table table-hover\" *ngIf=\"events && events.length\">\n        <thead>\n            <tr>\n                <th class=\"border-top-0\" width=\"210\">{{'timestamp' | i18n}}</th>\n                <th class=\"border-top-0\" width=\"40\">\n                    <span class=\"sr-only\">{{'device' | i18n}}</span>\n                </th>\n                <th class=\"border-top-0\" width=\"150\">{{'user' | i18n}}</th>\n                <th class=\"border-top-0\">{{'event' | i18n}}</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr *ngFor=\"let e of events\">\n                <td>{{e.date | date:'medium'}}</td>\n                <td>\n                    <i class=\"text-muted fa fa-lg {{e.appIcon}}\" title=\"{{e.appName}}, {{e.ip}}\"></i>\n                </td>\n                <td>\n                    <span title=\"{{e.userEmail}}\">{{e.userName}}</span>\n                </td>\n                <td [innerHTML]=\"e.message\"></td>\n            </tr>\n        </tbody>\n    </table>\n    <button #moreBtn [appApiAction]=\"morePromise\" type=\"button\" class=\"btn btn-block btn-link btn-submit\" (click)=\"loadEvents(false)\"\n        [disabled]=\"loaded && moreBtn.loading\" *ngIf=\"continuationToken\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'loadMore' | i18n}}</span>\n    </button>\n</ng-container>\n";

/***/ }),

/***/ "./src/app/organizations/manage/events.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/organizations/manage/events.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var event_service_1 = __webpack_require__(/*! ../../services/event.service */ "./src/app/services/event.service.ts");
var EventsComponent = /** @class */ (function () {
    function EventsComponent(apiService, route, eventService, i18nService, toasterService, userService, router) {
        this.apiService = apiService;
        this.route = route;
        this.eventService = eventService;
        this.i18nService = i18nService;
        this.toasterService = toasterService;
        this.userService = userService;
        this.router = router;
        this.loading = true;
        this.loaded = false;
        this.orgUsersUserIdMap = new Map();
        this.orgUsersIdMap = new Map();
    }
    EventsComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                this.route.parent.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
                    var organization, defaultDates;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this.organizationId = params.organizationId;
                                return [4 /*yield*/, this.userService.getOrganization(this.organizationId)];
                            case 1:
                                organization = _a.sent();
                                if (organization == null || !organization.useEvents) {
                                    this.router.navigate(['/organizations', this.organizationId]);
                                    return [2 /*return*/];
                                }
                                defaultDates = this.eventService.getDefaultDateFilters();
                                this.start = defaultDates[0];
                                this.end = defaultDates[1];
                                return [4 /*yield*/, this.load()];
                            case 2:
                                _a.sent();
                                return [2 /*return*/];
                        }
                    });
                }); });
                return [2 /*return*/];
            });
        });
    };
    EventsComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.apiService.getOrganizationUsers(this.organizationId)];
                    case 1:
                        response = _a.sent();
                        response.data.forEach(function (u) {
                            var name = u.name == null || u.name.trim() === '' ? u.email : u.name;
                            _this.orgUsersIdMap.set(u.id, { name: name, email: u.email });
                            _this.orgUsersUserIdMap.set(u.userId, { name: name, email: u.email });
                        });
                        return [4 /*yield*/, this.loadEvents(true)];
                    case 2:
                        _a.sent();
                        this.loaded = true;
                        return [2 /*return*/];
                }
            });
        });
    };
    EventsComponent.prototype.loadEvents = function (clearExisting) {
        return __awaiter(this, void 0, void 0, function () {
            var dates, response, promise, _a, events;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.refreshPromise != null || this.morePromise != null) {
                            return [2 /*return*/];
                        }
                        dates = null;
                        try {
                            dates = this.eventService.formatDateFilters(this.start, this.end);
                        }
                        catch (e) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('invalidDateRange'));
                            return [2 /*return*/];
                        }
                        this.loading = true;
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        promise = this.apiService.getEventsOrganization(this.organizationId, dates[0], dates[1], clearExisting ? null : this.continuationToken);
                        if (clearExisting) {
                            this.refreshPromise = promise;
                        }
                        else {
                            this.morePromise = promise;
                        }
                        return [4 /*yield*/, promise];
                    case 2:
                        response = _b.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4:
                        this.continuationToken = response.continuationToken;
                        events = response.data.map(function (r) {
                            var userId = r.actingUserId == null ? r.userId : r.actingUserId;
                            var eventInfo = _this.eventService.getEventInfo(r);
                            var user = userId != null && _this.orgUsersUserIdMap.has(userId) ?
                                _this.orgUsersUserIdMap.get(userId) : null;
                            return {
                                message: eventInfo.message,
                                appIcon: eventInfo.appIcon,
                                appName: eventInfo.appName,
                                userId: userId,
                                userName: user != null ? user.name : _this.i18nService.t('unknown'),
                                userEmail: user != null ? user.email : '',
                                date: r.date,
                                ip: r.ipAddress,
                                type: r.type,
                            };
                        });
                        if (!clearExisting && this.events != null && this.events.length > 0) {
                            this.events = this.events.concat(events);
                        }
                        else {
                            this.events = events;
                        }
                        this.loading = false;
                        this.morePromise = null;
                        this.refreshPromise = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    EventsComponent = __decorate([
        core_1.Component({
            selector: 'app-org-events',
            template: __webpack_require__(/*! ./events.component.html */ "./src/app/organizations/manage/events.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, router_1.ActivatedRoute,
            event_service_1.EventService, i18n_service_1.I18nService,
            angular2_toaster_1.ToasterService, user_service_1.UserService,
            router_1.Router])
    ], EventsComponent);
    return EventsComponent;
}());
exports.EventsComponent = EventsComponent;


/***/ }),

/***/ "./src/app/organizations/manage/group-add-edit.component.html":
/*!********************************************************************!*\
  !*** ./src/app/organizations/manage/group-add-edit.component.html ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{title}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"loading\">\n                <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"!loading\">\n                <div class=\"form-group\">\n                    <label for=\"name\">{{'name' | i18n}}</label>\n                    <input id=\"name\" class=\"form-control\" type=\"text\" name=\"Name\" [(ngModel)]=\"name\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"externalId\">{{'externalId' | i18n}}</label>\n                    <input id=\"externalId\" class=\"form-control\" type=\"text\" name=\"ExternalId\" [(ngModel)]=\"externalId\">\n                    <small class=\"form-text text-muted\">{{'externalIdGroupDesc' | i18n}}</small>\n                </div>\n                <h3 class=\"mt-4 d-flex\">\n                    <div class=\"mb-2\">\n                        {{'accessControl' | i18n}}\n                    </div>\n                    <div class=\"ml-auto\" *ngIf=\"access === 'selected' && collections && collections.length\">\n                        <button type=\"button\" (click)=\"selectAll(true)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'selectAll' | i18n}}\n                        </button>\n                        <button type=\"button\" (click)=\"selectAll(false)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'unselectAll' | i18n}}\n                        </button>\n                    </div>\n                </h3>\n                <div class=\"form-group\" [ngClass]=\"{'mb-0': access !== 'selected'}\">\n                    <div class=\"form-check\">\n                        <input class=\"form-check-input\" type=\"radio\" name=\"access\" id=\"accessAll\" value=\"all\" [(ngModel)]=\"access\">\n                        <label class=\"form-check-label\" for=\"accessAll\">\n                            {{'groupAccessAllItems' | i18n}}\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <input class=\"form-check-input\" type=\"radio\" name=\"access\" id=\"accessSelected\" value=\"selected\" [(ngModel)]=\"access\">\n                        <label class=\"form-check-label\" for=\"accessSelected\">\n                            {{'groupAccessSelectedCollections' | i18n}}\n                        </label>\n                    </div>\n                </div>\n                <ng-container *ngIf=\"access === 'selected'\">\n                    <div *ngIf=\"!collections || !collections.length\">\n                        {{'noCollectionsInList' | i18n}}\n                    </div>\n                    <table class=\"table table-hover table-list mb-0\" *ngIf=\"collections && collections.length\">\n                        <thead>\n                            <tr>\n                                <th>&nbsp;</th>\n                                <th>{{'name' | i18n}}</th>\n                                <th width=\"100\" class=\"text-center\">{{'readOnly' | i18n}}</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr *ngFor=\"let c of collections; let i = index\">\n                                <td class=\"table-list-checkbox\" (click)=\"check(c)\">\n                                    <input type=\"checkbox\" [(ngModel)]=\"c.checked\" name=\"Collection[{{i}}].Checked\">\n                                </td>\n                                <td (click)=\"check(c)\">\n                                    <span appStopProp>{{c.name}}</span>\n                                </td>\n                                <td class=\"text-center\">\n                                    <input type=\"checkbox\" [(ngModel)]=\"c.readOnly\" name=\"Collection[{{i}}].ReadOnly\" [disabled]=\"!c.checked\">\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </ng-container>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'save' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'cancel' | i18n}}</button>\n                <div class=\"ml-auto\">\n                    <button #deleteBtn type=\"button\" (click)=\"delete()\" class=\"btn btn-outline-danger\" title=\"{{'delete' | i18n}}\" *ngIf=\"editMode\"\n                        [disabled]=\"deleteBtn.loading\" [appApiAction]=\"deletePromise\">\n                        <i class=\"fa fa-trash-o fa-lg fa-fw\" [hidden]=\"deleteBtn.loading\"></i>\n                        <i class=\"fa fa-spinner fa-spin fa-lg fa-fw\" [hidden]=\"!deleteBtn.loading\" title=\"{{'loading' | i18n}}\"></i>\n                    </button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/organizations/manage/group-add-edit.component.ts":
/*!******************************************************************!*\
  !*** ./src/app/organizations/manage/group-add-edit.component.ts ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var collectionData_1 = __webpack_require__(/*! jslib/models/data/collectionData */ "./jslib/src/models/data/collectionData.ts");
var collection_1 = __webpack_require__(/*! jslib/models/domain/collection */ "./jslib/src/models/domain/collection.ts");
var groupRequest_1 = __webpack_require__(/*! jslib/models/request/groupRequest */ "./jslib/src/models/request/groupRequest.ts");
var selectionReadOnlyRequest_1 = __webpack_require__(/*! jslib/models/request/selectionReadOnlyRequest */ "./jslib/src/models/request/selectionReadOnlyRequest.ts");
var GroupAddEditComponent = /** @class */ (function () {
    function GroupAddEditComponent(apiService, i18nService, analytics, toasterService, collectionService, platformUtilsService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.collectionService = collectionService;
        this.platformUtilsService = platformUtilsService;
        this.onSavedGroup = new core_1.EventEmitter();
        this.onDeletedGroup = new core_1.EventEmitter();
        this.loading = true;
        this.editMode = false;
        this.access = 'selected';
        this.collections = [];
    }
    GroupAddEditComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var group, _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.editMode = this.loading = this.groupId != null;
                        return [4 /*yield*/, this.loadCollections()];
                    case 1:
                        _b.sent();
                        if (!this.editMode) return [3 /*break*/, 6];
                        this.editMode = true;
                        this.title = this.i18nService.t('editGroup');
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        return [4 /*yield*/, this.apiService.getGroupDetails(this.organizationId, this.groupId)];
                    case 3:
                        group = _b.sent();
                        this.access = group.accessAll ? 'all' : 'selected';
                        this.name = group.name;
                        this.externalId = group.externalId;
                        if (group.collections != null && this.collections != null) {
                            group.collections.forEach(function (s) {
                                var collection = _this.collections.filter(function (c) { return c.id === s.id; });
                                if (collection != null && collection.length > 0) {
                                    collection[0].checked = true;
                                    collection[0].readOnly = s.readOnly;
                                }
                            });
                        }
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [3 /*break*/, 7];
                    case 6:
                        this.title = this.i18nService.t('addGroup');
                        _b.label = 7;
                    case 7:
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    GroupAddEditComponent.prototype.loadCollections = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response, collections, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.apiService.getCollections(this.organizationId)];
                    case 1:
                        response = _b.sent();
                        collections = response.data.map(function (r) {
                            return new collection_1.Collection(new collectionData_1.CollectionData(r));
                        });
                        _a = this;
                        return [4 /*yield*/, this.collectionService.decryptMany(collections)];
                    case 2:
                        _a.collections = _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    GroupAddEditComponent.prototype.check = function (c, select) {
        c.checked = select == null ? !c.checked : select;
        if (!c.checked) {
            c.readOnly = false;
        }
    };
    GroupAddEditComponent.prototype.selectAll = function (select) {
        var _this = this;
        this.collections.forEach(function (c) { return _this.check(c, select); });
    };
    GroupAddEditComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        request = new groupRequest_1.GroupRequest();
                        request.name = this.name;
                        request.externalId = this.externalId;
                        request.accessAll = this.access === 'all';
                        if (!request.accessAll) {
                            request.collections = this.collections.filter(function (c) { return c.checked; })
                                .map(function (c) { return new selectionReadOnlyRequest_1.SelectionReadOnlyRequest(c.id, !!c.readOnly); });
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        if (this.editMode) {
                            this.formPromise = this.apiService.putGroup(this.organizationId, this.groupId, request);
                        }
                        else {
                            this.formPromise = this.apiService.postGroup(this.organizationId, request);
                        }
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: this.editMode ? 'Edited Group' : 'Created Group' });
                        this.toasterService.popAsync('success', null, this.i18nService.t(this.editMode ? 'editedGroupId' : 'createdGroupId', this.name));
                        this.onSavedGroup.emit();
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    GroupAddEditComponent.prototype.delete = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!this.editMode) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('deleteGroupConfirmation'), this.name, this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.deletePromise = this.apiService.deleteGroup(this.organizationId, this.groupId);
                        return [4 /*yield*/, this.deletePromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted Group' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('deletedGroupId', this.name));
                        this.onDeletedGroup.emit();
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], GroupAddEditComponent.prototype, "groupId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], GroupAddEditComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], GroupAddEditComponent.prototype, "onSavedGroup", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], GroupAddEditComponent.prototype, "onDeletedGroup", void 0);
    GroupAddEditComponent = __decorate([
        core_1.Component({
            selector: 'app-group-add-edit',
            template: __webpack_require__(/*! ./group-add-edit.component.html */ "./src/app/organizations/manage/group-add-edit.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            collection_service_1.CollectionService, platformUtils_service_1.PlatformUtilsService])
    ], GroupAddEditComponent);
    return GroupAddEditComponent;
}());
exports.GroupAddEditComponent = GroupAddEditComponent;


/***/ }),

/***/ "./src/app/organizations/manage/groups.component.html":
/*!************************************************************!*\
  !*** ./src/app/organizations/manage/groups.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header d-flex\">\n    <h1>{{'groups' | i18n}}</h1>\n    <div class=\"ml-auto d-flex\">\n        <div>\n            <label class=\"sr-only\" for=\"search\">{{'search' | i18n}}</label>\n            <input type=\"search\" class=\"form-control form-control-sm\" id=\"search\" placeholder=\"{{'search' | i18n}}\" [(ngModel)]=\"searchText\">\n        </div>\n        <button type=\"button\" class=\"btn btn-sm btn-outline-primary ml-3\" (click)=\"add()\">\n            <i class=\"fa fa-plus fa-fw\"></i>\n            {{'newGroup' | i18n}}\n        </button>\n    </div>\n</div>\n<i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"loading\" title=\"{{'loading' | i18n}}\"></i>\n<ng-container *ngIf=\"!loading && (groups | search:searchText:'name':'id') as searchedGroups\">\n    <p *ngIf=\"!searchedGroups.length\">{{'noGroupsInList' | i18n}}</p>\n    <table class=\"table table-hover table-list\" *ngIf=\"searchedGroups.length\">\n        <tbody>\n            <tr *ngFor=\"let g of searchedGroups\">\n                <td>\n                    <a href=\"#\" appStopClick (click)=\"edit(g)\">{{g.name}}</a>\n                </td>\n                <td class=\"table-list-options\">\n                    <div class=\"dropdown\" appListDropdown>\n                        <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                            <i class=\"fa fa-cog fa-lg\"></i>\n                        </button>\n                        <div class=\"dropdown-menu dropdown-menu-right\">\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"users(g)\">\n                                <i class=\"fa fa-fw fa-users\"></i>\n                                {{'users' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item text-danger\" href=\"#\" appStopClick (click)=\"delete(g)\">\n                                <i class=\"fa fa-fw fa-trash-o\"></i>\n                                {{'delete' | i18n}}\n                            </a>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</ng-container>\n<ng-template #addEdit></ng-template>\n<ng-template #usersTemplate></ng-template>\n";

/***/ }),

/***/ "./src/app/organizations/manage/groups.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/organizations/manage/groups.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var utils_1 = __webpack_require__(/*! jslib/misc/utils */ "./jslib/src/misc/utils.ts");
var modal_component_1 = __webpack_require__(/*! ../../modal.component */ "./src/app/modal.component.ts");
var entity_users_component_1 = __webpack_require__(/*! ./entity-users.component */ "./src/app/organizations/manage/entity-users.component.ts");
var group_add_edit_component_1 = __webpack_require__(/*! ./group-add-edit.component */ "./src/app/organizations/manage/group-add-edit.component.ts");
var GroupsComponent = /** @class */ (function () {
    function GroupsComponent(apiService, route, i18nService, componentFactoryResolver, analytics, toasterService, platformUtilsService, userService, router) {
        this.apiService = apiService;
        this.route = route;
        this.i18nService = i18nService;
        this.componentFactoryResolver = componentFactoryResolver;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.platformUtilsService = platformUtilsService;
        this.userService = userService;
        this.router = router;
        this.loading = true;
        this.modal = null;
    }
    GroupsComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                this.route.parent.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
                    var organization;
                    var _this = this;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this.organizationId = params.organizationId;
                                return [4 /*yield*/, this.userService.getOrganization(this.organizationId)];
                            case 1:
                                organization = _a.sent();
                                if (organization == null || !organization.useGroups) {
                                    this.router.navigate(['/organizations', this.organizationId]);
                                    return [2 /*return*/];
                                }
                                return [4 /*yield*/, this.load()];
                            case 2:
                                _a.sent();
                                this.route.queryParams.subscribe(function (qParams) { return __awaiter(_this, void 0, void 0, function () {
                                    return __generator(this, function (_a) {
                                        this.searchText = qParams.search;
                                        return [2 /*return*/];
                                    });
                                }); });
                                return [2 /*return*/];
                        }
                    });
                }); });
                return [2 /*return*/];
            });
        });
    };
    GroupsComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response, groups;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.apiService.getGroups(this.organizationId)];
                    case 1:
                        response = _a.sent();
                        groups = response.data != null && response.data.length > 0 ? response.data : [];
                        groups.sort(utils_1.Utils.getSortFunction(this.i18nService, 'name'));
                        this.groups = groups;
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    GroupsComponent.prototype.edit = function (group) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.addEditModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(group_add_edit_component_1.GroupAddEditComponent, this.addEditModalRef);
        childComponent.organizationId = this.organizationId;
        childComponent.groupId = group != null ? group.id : null;
        childComponent.onSavedGroup.subscribe(function () {
            _this.modal.close();
            _this.load();
        });
        childComponent.onDeletedGroup.subscribe(function () {
            _this.modal.close();
            _this.removeGroup(group);
        });
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
    };
    GroupsComponent.prototype.add = function () {
        this.edit(null);
    };
    GroupsComponent.prototype.delete = function (group) {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('deleteGroupConfirmation'), group.name, this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        return [4 /*yield*/, this.apiService.deleteGroup(this.organizationId, group.id)];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted Group' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('deletedGroupId', group.name));
                        this.removeGroup(group);
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    GroupsComponent.prototype.users = function (group) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.usersModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(entity_users_component_1.EntityUsersComponent, this.usersModalRef);
        childComponent.organizationId = this.organizationId;
        childComponent.entity = 'group';
        childComponent.entityId = group.id;
        childComponent.entityName = group.name;
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
    };
    GroupsComponent.prototype.removeGroup = function (group) {
        var index = this.groups.indexOf(group);
        if (index > -1) {
            this.groups.splice(index, 1);
        }
    };
    __decorate([
        core_1.ViewChild('addEdit', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], GroupsComponent.prototype, "addEditModalRef", void 0);
    __decorate([
        core_1.ViewChild('usersTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], GroupsComponent.prototype, "usersModalRef", void 0);
    GroupsComponent = __decorate([
        core_1.Component({
            selector: 'app-org-groups',
            template: __webpack_require__(/*! ./groups.component.html */ "./src/app/organizations/manage/groups.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, router_1.ActivatedRoute,
            i18n_service_1.I18nService, core_1.ComponentFactoryResolver,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            platformUtils_service_1.PlatformUtilsService, user_service_1.UserService,
            router_1.Router])
    ], GroupsComponent);
    return GroupsComponent;
}());
exports.GroupsComponent = GroupsComponent;


/***/ }),

/***/ "./src/app/organizations/manage/manage.component.html":
/*!************************************************************!*\
  !*** ./src/app/organizations/manage/manage.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"container page-content\">\n    <div class=\"row\">\n        <div class=\"col-3\">\n            <div class=\"card\">\n                <div class=\"card-header\">{{'manage' | i18n}}</div>\n                <div class=\"list-group list-group-flush\">\n                    <a routerLink=\"people\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'people' | i18n}}\n                    </a>\n                    <a routerLink=\"collections\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'collections' | i18n}}\n                    </a>\n                    <a routerLink=\"groups\" class=\"list-group-item\" routerLinkActive=\"active\" *ngIf=\"accessGroups\">\n                        {{'groups' | i18n}}\n                    </a>\n                    <a routerLink=\"events\" class=\"list-group-item\" routerLinkActive=\"active\" *ngIf=\"accessEvents\">\n                        {{'eventLogs' | i18n}}\n                    </a>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-9\">\n            <router-outlet></router-outlet>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/organizations/manage/manage.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/organizations/manage/manage.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var ManageComponent = /** @class */ (function () {
    function ManageComponent(route, userService) {
        this.route = route;
        this.userService = userService;
        this.accessGroups = false;
        this.accessEvents = false;
    }
    ManageComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
            var organization;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getOrganization(params.organizationId)];
                    case 1:
                        organization = _a.sent();
                        this.accessEvents = organization.useEvents;
                        this.accessGroups = organization.useGroups;
                        return [2 /*return*/];
                }
            });
        }); });
    };
    ManageComponent = __decorate([
        core_1.Component({
            selector: 'app-org-manage',
            template: __webpack_require__(/*! ./manage.component.html */ "./src/app/organizations/manage/manage.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.ActivatedRoute, user_service_1.UserService])
    ], ManageComponent);
    return ManageComponent;
}());
exports.ManageComponent = ManageComponent;


/***/ }),

/***/ "./src/app/organizations/manage/people.component.html":
/*!************************************************************!*\
  !*** ./src/app/organizations/manage/people.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header d-flex\">\n    <h1>{{'people' | i18n}}</h1>\n    <div class=\"ml-auto d-flex\">\n        <div class=\"btn-group btn-group-sm\" role=\"group\">\n            <button type=\"button\" class=\"btn btn-outline-secondary\" [ngClass]=\"{active: status == null}\" (click)=\"filter(null)\">\n                {{'all' | i18n}}\n            </button>\n            <button type=\"button\" class=\"btn btn-outline-secondary\" [ngClass]=\"{active: status == organizationUserStatusType.Invited}\"\n                (click)=\"filter(organizationUserStatusType.Invited)\">\n                {{'invited' | i18n}}\n                <span class=\"badge badge-pill badge-info\" *ngIf=\"invitedCount\">{{invitedCount}}</span>\n            </button>\n            <button type=\"button\" class=\"btn btn-outline-secondary\" [ngClass]=\"{active: status == organizationUserStatusType.Accepted}\"\n                (click)=\"filter(organizationUserStatusType.Accepted)\">\n                {{'accepted' | i18n}}\n                <span class=\"badge badge-pill badge-warning\" *ngIf=\"acceptedCount\">{{acceptedCount}}</span>\n            </button>\n        </div>\n        <div class=\"ml-3\">\n            <label class=\"sr-only\" for=\"search\">{{'search' | i18n}}</label>\n            <input type=\"search\" class=\"form-control form-control-sm\" id=\"search\" placeholder=\"{{'search' | i18n}}\" [(ngModel)]=\"searchText\">\n        </div>\n        <button type=\"button\" class=\"btn btn-sm btn-outline-primary ml-3\" (click)=\"invite()\">\n            <i class=\"fa fa-plus fa-fw\"></i>\n            {{'inviteUser' | i18n}}\n        </button>\n    </div>\n</div>\n<i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"loading\" title=\"{{'loading' | i18n}}\"></i>\n<ng-container *ngIf=\"!loading && (users | search:searchText:'name':'email':'id') as searchedUsers\">\n    <p *ngIf=\"!searchedUsers.length\">{{'noUsersInList' | i18n}}</p>\n    <table class=\"table table-hover table-list\" *ngIf=\"searchedUsers.length\">\n        <tbody>\n            <tr *ngFor=\"let u of searchedUsers\">\n                <td width=\"30\">\n                    <app-avatar [data]=\"u.name || u.email\" width=\"25\" height=\"25\" [circle]=\"true\" [fontSize]=\"14\"></app-avatar>\n                </td>\n                <td>\n                    <a href=\"#\" appStopClick (click)=\"edit(u)\">{{u.email}}</a>\n                    <span class=\"badge badge-secondary\" *ngIf=\"u.status === organizationUserStatusType.Invited\">{{'invited' | i18n}}</span>\n                    <span class=\"badge badge-warning\" *ngIf=\"u.status === organizationUserStatusType.Accepted\">{{'accepted' | i18n}}</span>\n                    <small class=\"text-muted d-block\" *ngIf=\"u.name\">{{u.name}}</small>\n                </td>\n                <td>\n                    <span *ngIf=\"u.type === organizationUserType.Owner\">{{'owner' | i18n}}</span>\n                    <span *ngIf=\"u.type === organizationUserType.Admin\">{{'admin' | i18n}}</span>\n                    <span *ngIf=\"u.type === organizationUserType.User\">{{'user' | i18n}}</span>\n                </td>\n                <td class=\"table-list-options\">\n                    <div class=\"dropdown\" appListDropdown>\n                        <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                            <i class=\"fa fa-cog fa-lg\"></i>\n                        </button>\n                        <div class=\"dropdown-menu dropdown-menu-right\">\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"reinvite(u)\" *ngIf=\"u.status === organizationUserStatusType.Invited\">\n                                <i class=\"fa fa-fw fa-envelope-o\"></i>\n                                {{'resendInvitation' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item text-success\" href=\"#\" appStopClick (click)=\"confirm(u)\" *ngIf=\"u.status === organizationUserStatusType.Accepted\">\n                                <i class=\"fa fa-fw fa-check\"></i>\n                                {{'confirm' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"groups(u)\" *ngIf=\"accessGroups\">\n                                <i class=\"fa fa-fw fa-sitemap\"></i>\n                                {{'groups' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"events(u)\" *ngIf=\"accessEvents && u.status === organizationUserStatusType.Confirmed\">\n                                <i class=\"fa fa-fw fa-file-text-o\"></i>\n                                {{'eventLogs' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item text-danger\" href=\"#\" appStopClick (click)=\"remove(u)\">\n                                <i class=\"fa fa-fw fa-remove\"></i>\n                                {{'remove' | i18n}}\n                            </a>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</ng-container>\n<ng-template #addEdit></ng-template>\n<ng-template #groupsTemplate></ng-template>\n<ng-template #eventsTemplate></ng-template>\n";

/***/ }),

/***/ "./src/app/organizations/manage/people.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/organizations/manage/people.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var organizationUserConfirmRequest_1 = __webpack_require__(/*! jslib/models/request/organizationUserConfirmRequest */ "./jslib/src/models/request/organizationUserConfirmRequest.ts");
var organizationUserStatusType_1 = __webpack_require__(/*! jslib/enums/organizationUserStatusType */ "./jslib/src/enums/organizationUserStatusType.ts");
var organizationUserType_1 = __webpack_require__(/*! jslib/enums/organizationUserType */ "./jslib/src/enums/organizationUserType.ts");
var utils_1 = __webpack_require__(/*! jslib/misc/utils */ "./jslib/src/misc/utils.ts");
var modal_component_1 = __webpack_require__(/*! ../../modal.component */ "./src/app/modal.component.ts");
var entity_events_component_1 = __webpack_require__(/*! ./entity-events.component */ "./src/app/organizations/manage/entity-events.component.ts");
var user_add_edit_component_1 = __webpack_require__(/*! ./user-add-edit.component */ "./src/app/organizations/manage/user-add-edit.component.ts");
var user_groups_component_1 = __webpack_require__(/*! ./user-groups.component */ "./src/app/organizations/manage/user-groups.component.ts");
var PeopleComponent = /** @class */ (function () {
    function PeopleComponent(apiService, route, i18nService, componentFactoryResolver, platformUtilsService, analytics, toasterService, cryptoService, userService) {
        this.apiService = apiService;
        this.route = route;
        this.i18nService = i18nService;
        this.componentFactoryResolver = componentFactoryResolver;
        this.platformUtilsService = platformUtilsService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.userService = userService;
        this.loading = true;
        this.status = null;
        this.statusMap = new Map();
        this.organizationUserType = organizationUserType_1.OrganizationUserType;
        this.organizationUserStatusType = organizationUserStatusType_1.OrganizationUserStatusType;
        this.accessEvents = false;
        this.accessGroups = false;
        this.modal = null;
    }
    PeopleComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                this.route.parent.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
                    var organization;
                    var _this = this;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this.organizationId = params.organizationId;
                                return [4 /*yield*/, this.userService.getOrganization(this.organizationId)];
                            case 1:
                                organization = _a.sent();
                                this.accessEvents = organization.useEvents;
                                this.accessGroups = organization.useGroups;
                                return [4 /*yield*/, this.load()];
                            case 2:
                                _a.sent();
                                this.route.queryParams.subscribe(function (qParams) { return __awaiter(_this, void 0, void 0, function () {
                                    var user;
                                    return __generator(this, function (_a) {
                                        this.searchText = qParams.search;
                                        if (qParams.viewEvents != null) {
                                            user = this.users.filter(function (u) { return u.id === qParams.viewEvents; });
                                            if (user.length > 0 && user[0].status === organizationUserStatusType_1.OrganizationUserStatusType.Confirmed) {
                                                this.events(user[0]);
                                            }
                                        }
                                        return [2 /*return*/];
                                    });
                                }); });
                                return [2 /*return*/];
                        }
                    });
                }); });
                return [2 /*return*/];
            });
        });
    };
    PeopleComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.apiService.getOrganizationUsers(this.organizationId)];
                    case 1:
                        response = _a.sent();
                        this.statusMap.clear();
                        this.allUsers = response.data != null && response.data.length > 0 ? response.data : [];
                        this.allUsers.sort(utils_1.Utils.getSortFunction(this.i18nService, 'email'));
                        this.allUsers.forEach(function (u) {
                            if (!_this.statusMap.has(u.status)) {
                                _this.statusMap.set(u.status, [u]);
                            }
                            else {
                                _this.statusMap.get(u.status).push(u);
                            }
                        });
                        this.filter(this.status);
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    PeopleComponent.prototype.filter = function (status) {
        this.status = status;
        if (this.status != null) {
            this.users = this.statusMap.get(this.status);
        }
        else {
            this.users = this.allUsers;
        }
    };
    Object.defineProperty(PeopleComponent.prototype, "invitedCount", {
        get: function () {
            return this.statusMap.has(organizationUserStatusType_1.OrganizationUserStatusType.Invited) ?
                this.statusMap.get(organizationUserStatusType_1.OrganizationUserStatusType.Invited).length : 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PeopleComponent.prototype, "acceptedCount", {
        get: function () {
            return this.statusMap.has(organizationUserStatusType_1.OrganizationUserStatusType.Accepted) ?
                this.statusMap.get(organizationUserStatusType_1.OrganizationUserStatusType.Accepted).length : 0;
        },
        enumerable: true,
        configurable: true
    });
    PeopleComponent.prototype.edit = function (user) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.addEditModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(user_add_edit_component_1.UserAddEditComponent, this.addEditModalRef);
        childComponent.name = user != null ? user.name || user.email : null;
        childComponent.organizationId = this.organizationId;
        childComponent.organizationUserId = user != null ? user.id : null;
        childComponent.onSavedUser.subscribe(function () {
            _this.modal.close();
            _this.load();
        });
        childComponent.onDeletedUser.subscribe(function () {
            _this.modal.close();
            _this.removeUser(user);
        });
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
    };
    PeopleComponent.prototype.invite = function () {
        this.edit(null);
    };
    PeopleComponent.prototype.groups = function (user) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.groupsModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(user_groups_component_1.UserGroupsComponent, this.groupsModalRef);
        childComponent.name = user != null ? user.name || user.email : null;
        childComponent.organizationId = this.organizationId;
        childComponent.organizationUserId = user != null ? user.id : null;
        childComponent.onSavedUser.subscribe(function () {
            _this.modal.close();
        });
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
    };
    PeopleComponent.prototype.remove = function (user) {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('removeUserConfirmation'), user.name || user.email, this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        return [4 /*yield*/, this.apiService.deleteOrganizationUser(this.organizationId, user.id)];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted User' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('removedUserId', user.name || user.email));
                        this.removeUser(user);
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    PeopleComponent.prototype.reinvite = function (user) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.actionPromise != null) {
                            return [2 /*return*/];
                        }
                        this.actionPromise = this.apiService.postOrganizationUserReinvite(this.organizationId, user.id);
                        return [4 /*yield*/, this.actionPromise];
                    case 1:
                        _a.sent();
                        this.analytics.eventTrack.next({ action: 'Reinvited User' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('hasBeenReinvited', user.name || user.email));
                        this.actionPromise = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    PeopleComponent.prototype.confirm = function (user) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.actionPromise != null) {
                            return [2 /*return*/];
                        }
                        this.actionPromise = this.doConfirmation(user);
                        return [4 /*yield*/, this.actionPromise];
                    case 1:
                        _a.sent();
                        user.status = organizationUserStatusType_1.OrganizationUserStatusType.Confirmed;
                        this.analytics.eventTrack.next({ action: 'Confirmed User' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('hasBeenConfirmed', user.name || user.email));
                        this.actionPromise = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    PeopleComponent.prototype.events = function (user) {
        return __awaiter(this, void 0, void 0, function () {
            var factory, childComponent;
            var _this = this;
            return __generator(this, function (_a) {
                if (this.modal != null) {
                    this.modal.close();
                }
                factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
                this.modal = this.eventsModalRef.createComponent(factory).instance;
                childComponent = this.modal.show(entity_events_component_1.EntityEventsComponent, this.eventsModalRef);
                childComponent.name = user.name || user.email;
                childComponent.organizationId = this.organizationId;
                childComponent.entityId = user.id;
                childComponent.showUser = false;
                childComponent.entity = 'user';
                this.modal.onClosed.subscribe(function () {
                    _this.modal = null;
                });
                return [2 /*return*/];
            });
        });
    };
    PeopleComponent.prototype.doConfirmation = function (user) {
        return __awaiter(this, void 0, void 0, function () {
            var orgKey, publicKeyResponse, publicKey, key, request;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.cryptoService.getOrgKey(this.organizationId)];
                    case 1:
                        orgKey = _a.sent();
                        return [4 /*yield*/, this.apiService.getUserPublicKey(user.userId)];
                    case 2:
                        publicKeyResponse = _a.sent();
                        publicKey = utils_1.Utils.fromB64ToArray(publicKeyResponse.publicKey);
                        return [4 /*yield*/, this.cryptoService.rsaEncrypt(orgKey.key, publicKey.buffer)];
                    case 3:
                        key = _a.sent();
                        request = new organizationUserConfirmRequest_1.OrganizationUserConfirmRequest();
                        request.key = key.encryptedString;
                        return [4 /*yield*/, this.apiService.postOrganizationUserConfirm(this.organizationId, user.id, request)];
                    case 4:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    PeopleComponent.prototype.removeUser = function (user) {
        var index = this.users.indexOf(user);
        if (index > -1) {
            this.users.splice(index, 1);
        }
    };
    __decorate([
        core_1.ViewChild('addEdit', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], PeopleComponent.prototype, "addEditModalRef", void 0);
    __decorate([
        core_1.ViewChild('groupsTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], PeopleComponent.prototype, "groupsModalRef", void 0);
    __decorate([
        core_1.ViewChild('eventsTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], PeopleComponent.prototype, "eventsModalRef", void 0);
    PeopleComponent = __decorate([
        core_1.Component({
            selector: 'app-org-people',
            template: __webpack_require__(/*! ./people.component.html */ "./src/app/organizations/manage/people.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, router_1.ActivatedRoute,
            i18n_service_1.I18nService, core_1.ComponentFactoryResolver,
            platformUtils_service_1.PlatformUtilsService, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, crypto_service_1.CryptoService,
            user_service_1.UserService])
    ], PeopleComponent);
    return PeopleComponent;
}());
exports.PeopleComponent = PeopleComponent;


/***/ }),

/***/ "./src/app/organizations/manage/user-add-edit.component.html":
/*!*******************************************************************!*\
  !*** ./src/app/organizations/manage/user-add-edit.component.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\" [ngClass]=\"{'modal-lg': !editMode}\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{title}}\n                    <small class=\"text-muted\" *ngIf=\"name\">{{name}}</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"loading\">\n                <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"!loading\">\n                <ng-container *ngIf=\"!editMode\">\n                    <p>{{'inviteUserDesc' | i18n}}</p>\n                    <div class=\"form-group mb-4\">\n                        <label for=\"emails\">{{'email' | i18n}}</label>\n                        <input id=\"emails\" class=\"form-control\" type=\"text\" name=\"Emails\" [(ngModel)]=\"emails\" required>\n                        <small class=\"text-muted\">{{'inviteMultipleEmailDesc' | i18n : '20'}}</small>\n                    </div>\n                </ng-container>\n                <h3>{{'userType' | i18n}}</h3>\n                <div class=\"form-check mt-2 form-check-block\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"userType\" id=\"userTypeUser\" [value]=\"organizationUserType.User\" [(ngModel)]=\"type\">\n                    <label class=\"form-check-label\" for=\"userTypeUser\">\n                        {{'user' | i18n}}\n                        <small>{{'userDesc' | i18n}}</small>\n                    </label>\n                </div>\n                <div class=\"form-check mt-2 form-check-block\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"userType\" id=\"userTypeAdmin\" [value]=\"organizationUserType.Admin\" [(ngModel)]=\"type\">\n                    <label class=\"form-check-label\" for=\"userTypeAdmin\">\n                        {{'admin' | i18n}}\n                        <small>{{'adminDesc' | i18n}}</small>\n                    </label>\n                </div>\n                <div class=\"form-check mt-2 form-check-block\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"userType\" id=\"userTypeOwner\" [value]=\"organizationUserType.Owner\" [(ngModel)]=\"type\">\n                    <label class=\"form-check-label\" for=\"userTypeOwner\">\n                        {{'owner' | i18n}}\n                        <small>{{'ownerDesc' | i18n}}</small>\n                    </label>\n                </div>\n                <h3 class=\"mt-4 d-flex\">\n                    <div class=\"mb-2\">\n                        {{'accessControl' | i18n}}\n                    </div>\n                    <div class=\"ml-auto\" *ngIf=\"access === 'selected' && collections && collections.length\">\n                        <button type=\"button\" (click)=\"selectAll(true)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'selectAll' | i18n}}\n                        </button>\n                        <button type=\"button\" (click)=\"selectAll(false)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'unselectAll' | i18n}}\n                        </button>\n                    </div>\n                </h3>\n                <div class=\"form-group\" [ngClass]=\"{'mb-0': access !== 'selected'}\">\n                    <div class=\"form-check\">\n                        <input class=\"form-check-input\" type=\"radio\" name=\"access\" id=\"accessAll\" value=\"all\" [(ngModel)]=\"access\">\n                        <label class=\"form-check-label\" for=\"accessAll\">\n                            {{'userAccessAllItems' | i18n}}\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <input class=\"form-check-input\" type=\"radio\" name=\"access\" id=\"accessSelected\" value=\"selected\" [(ngModel)]=\"access\">\n                        <label class=\"form-check-label\" for=\"accessSelected\">\n                            {{'userAccessSelectedCollections' | i18n}}\n                        </label>\n                    </div>\n                </div>\n                <ng-container *ngIf=\"access === 'selected'\">\n                    <div *ngIf=\"!collections || !collections.length\">\n                        {{'noCollectionsInList' | i18n}}\n                    </div>\n                    <table class=\"table table-hover table-list mb-0\" *ngIf=\"collections && collections.length\">\n                        <thead>\n                            <tr>\n                                <th>&nbsp;</th>\n                                <th>{{'name' | i18n}}</th>\n                                <th width=\"100\" class=\"text-center\">{{'readOnly' | i18n}}</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr *ngFor=\"let c of collections; let i = index\">\n                                <td class=\"table-list-checkbox\" (click)=\"check(c)\">\n                                    <input type=\"checkbox\" [(ngModel)]=\"c.checked\" name=\"Collection[{{i}}].Checked\">\n                                </td>\n                                <td (click)=\"check(c)\">\n                                    <span appStopProp>{{c.name}}</span>\n                                </td>\n                                <td class=\"text-center\">\n                                    <input type=\"checkbox\" [(ngModel)]=\"c.readOnly\" name=\"Collection[{{i}}].ReadOnly\" [disabled]=\"!c.checked\">\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </ng-container>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'save' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'cancel' | i18n}}</button>\n                <div class=\"ml-auto\">\n                    <button #deleteBtn type=\"button\" (click)=\"delete()\" class=\"btn btn-outline-danger\" title=\"{{'delete' | i18n}}\" *ngIf=\"editMode\"\n                        [disabled]=\"deleteBtn.loading\" [appApiAction]=\"deletePromise\">\n                        <i class=\"fa fa-trash-o fa-lg fa-fw\" [hidden]=\"deleteBtn.loading\"></i>\n                        <i class=\"fa fa-spinner fa-spin fa-lg fa-fw\" [hidden]=\"!deleteBtn.loading\" title=\"{{'loading' | i18n}}\"></i>\n                    </button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/organizations/manage/user-add-edit.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/organizations/manage/user-add-edit.component.ts ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var collectionData_1 = __webpack_require__(/*! jslib/models/data/collectionData */ "./jslib/src/models/data/collectionData.ts");
var collection_1 = __webpack_require__(/*! jslib/models/domain/collection */ "./jslib/src/models/domain/collection.ts");
var organizationUserInviteRequest_1 = __webpack_require__(/*! jslib/models/request/organizationUserInviteRequest */ "./jslib/src/models/request/organizationUserInviteRequest.ts");
var organizationUserUpdateRequest_1 = __webpack_require__(/*! jslib/models/request/organizationUserUpdateRequest */ "./jslib/src/models/request/organizationUserUpdateRequest.ts");
var selectionReadOnlyRequest_1 = __webpack_require__(/*! jslib/models/request/selectionReadOnlyRequest */ "./jslib/src/models/request/selectionReadOnlyRequest.ts");
var organizationUserType_1 = __webpack_require__(/*! jslib/enums/organizationUserType */ "./jslib/src/enums/organizationUserType.ts");
var UserAddEditComponent = /** @class */ (function () {
    function UserAddEditComponent(apiService, i18nService, analytics, toasterService, collectionService, platformUtilsService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.collectionService = collectionService;
        this.platformUtilsService = platformUtilsService;
        this.onSavedUser = new core_1.EventEmitter();
        this.onDeletedUser = new core_1.EventEmitter();
        this.loading = true;
        this.editMode = false;
        this.type = organizationUserType_1.OrganizationUserType.User;
        this.access = 'selected';
        this.collections = [];
        this.organizationUserType = organizationUserType_1.OrganizationUserType;
    }
    UserAddEditComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var user, _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.editMode = this.loading = this.organizationUserId != null;
                        return [4 /*yield*/, this.loadCollections()];
                    case 1:
                        _b.sent();
                        if (!this.editMode) return [3 /*break*/, 6];
                        this.editMode = true;
                        this.title = this.i18nService.t('editUser');
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        return [4 /*yield*/, this.apiService.getOrganizationUser(this.organizationId, this.organizationUserId)];
                    case 3:
                        user = _b.sent();
                        this.access = user.accessAll ? 'all' : 'selected';
                        this.type = user.type;
                        if (user.collections != null && this.collections != null) {
                            user.collections.forEach(function (s) {
                                var collection = _this.collections.filter(function (c) { return c.id === s.id; });
                                if (collection != null && collection.length > 0) {
                                    collection[0].checked = true;
                                    collection[0].readOnly = s.readOnly;
                                }
                            });
                        }
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [3 /*break*/, 7];
                    case 6:
                        this.title = this.i18nService.t('inviteUser');
                        _b.label = 7;
                    case 7:
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    UserAddEditComponent.prototype.loadCollections = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response, collections, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.apiService.getCollections(this.organizationId)];
                    case 1:
                        response = _b.sent();
                        collections = response.data.map(function (r) {
                            return new collection_1.Collection(new collectionData_1.CollectionData(r));
                        });
                        _a = this;
                        return [4 /*yield*/, this.collectionService.decryptMany(collections)];
                    case 2:
                        _a.collections = _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserAddEditComponent.prototype.check = function (c, select) {
        c.checked = select == null ? !c.checked : select;
        if (!c.checked) {
            c.readOnly = false;
        }
    };
    UserAddEditComponent.prototype.selectAll = function (select) {
        var _this = this;
        this.collections.forEach(function (c) { return _this.check(c, select); });
    };
    UserAddEditComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var collections, request, request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        collections = null;
                        if (this.access !== 'all') {
                            collections = this.collections.filter(function (c) { return c.checked; })
                                .map(function (c) { return new selectionReadOnlyRequest_1.SelectionReadOnlyRequest(c.id, !!c.readOnly); });
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        if (this.editMode) {
                            request = new organizationUserUpdateRequest_1.OrganizationUserUpdateRequest();
                            request.accessAll = this.access === 'all';
                            request.type = this.type;
                            request.collections = collections;
                            this.formPromise = this.apiService.putOrganizationUser(this.organizationId, this.organizationUserId, request);
                        }
                        else {
                            request = new organizationUserInviteRequest_1.OrganizationUserInviteRequest();
                            request.emails = this.emails.trim().split(/\s*,\s*/);
                            request.accessAll = this.access === 'all';
                            request.type = this.type;
                            request.collections = collections;
                            this.formPromise = this.apiService.postOrganizationUserInvite(this.organizationId, request);
                        }
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: this.editMode ? 'Edited User' : 'Invited User' });
                        this.toasterService.popAsync('success', null, this.i18nService.t(this.editMode ? 'editedUserId' : 'invitedUsers', this.name));
                        this.onSavedUser.emit();
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    UserAddEditComponent.prototype.delete = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!this.editMode) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('removeUserConfirmation'), this.name, this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.deletePromise = this.apiService.deleteOrganizationUser(this.organizationId, this.organizationUserId);
                        return [4 /*yield*/, this.deletePromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted User' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('removedUserId', this.name));
                        this.onDeletedUser.emit();
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], UserAddEditComponent.prototype, "name", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], UserAddEditComponent.prototype, "organizationUserId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], UserAddEditComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], UserAddEditComponent.prototype, "onSavedUser", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], UserAddEditComponent.prototype, "onDeletedUser", void 0);
    UserAddEditComponent = __decorate([
        core_1.Component({
            selector: 'app-user-add-edit',
            template: __webpack_require__(/*! ./user-add-edit.component.html */ "./src/app/organizations/manage/user-add-edit.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            collection_service_1.CollectionService, platformUtils_service_1.PlatformUtilsService])
    ], UserAddEditComponent);
    return UserAddEditComponent;
}());
exports.UserAddEditComponent = UserAddEditComponent;


/***/ }),

/***/ "./src/app/organizations/manage/user-groups.component.html":
/*!*****************************************************************!*\
  !*** ./src/app/organizations/manage/user-groups.component.html ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'groupAccess' | i18n}}\n                    <small class=\"text-muted\" *ngIf=\"name\">{{name}}</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"loading\">\n                <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"!loading\">\n                <p>{{'groupAccessUserDesc' | i18n}}</p>\n                <div *ngIf=\"!groups || !groups.length\">\n                    {{'noGroupsInList' | i18n}}\n                </div>\n                <table class=\"table table-hover table-list mb-0\" *ngIf=\"groups && groups.length\">\n                    <tbody>\n                        <tr *ngFor=\"let g of groups; let i = index\">\n                            <td class=\"table-list-checkbox\" (click)=\"check(g)\">\n                                <input type=\"checkbox\" [(ngModel)]=\"g.checked\" name=\"Groups[{{i}}].Checked\">\n                            </td>\n                            <td (click)=\"check(g)\">\n                                <span appStopProp>{{g.name}}</span>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'save' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'cancel' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/organizations/manage/user-groups.component.ts":
/*!***************************************************************!*\
  !*** ./src/app/organizations/manage/user-groups.component.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var organizationUserUpdateGroupsRequest_1 = __webpack_require__(/*! jslib/models/request/organizationUserUpdateGroupsRequest */ "./jslib/src/models/request/organizationUserUpdateGroupsRequest.ts");
var utils_1 = __webpack_require__(/*! jslib/misc/utils */ "./jslib/src/misc/utils.ts");
var UserGroupsComponent = /** @class */ (function () {
    function UserGroupsComponent(apiService, i18nService, analytics, toasterService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.onSavedUser = new core_1.EventEmitter();
        this.loading = true;
        this.groups = [];
    }
    UserGroupsComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var groupsResponse, groups, userGroups, _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.apiService.getGroups(this.organizationId)];
                    case 1:
                        groupsResponse = _b.sent();
                        groups = groupsResponse.data.map(function (r) { return r; });
                        groups.sort(utils_1.Utils.getSortFunction(this.i18nService, 'name'));
                        this.groups = groups;
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        return [4 /*yield*/, this.apiService.getOrganizationUserGroups(this.organizationId, this.organizationUserId)];
                    case 3:
                        userGroups = _b.sent();
                        if (userGroups != null && this.groups != null) {
                            userGroups.forEach(function (ug) {
                                var group = _this.groups.filter(function (g) { return g.id === ug; });
                                if (group != null && group.length > 0) {
                                    group[0].checked = true;
                                }
                            });
                        }
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5:
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    UserGroupsComponent.prototype.check = function (g, select) {
        g.checked = select == null ? !g.checked : select;
        if (!g.checked) {
            g.readOnly = false;
        }
    };
    UserGroupsComponent.prototype.selectAll = function (select) {
        var _this = this;
        this.groups.forEach(function (g) { return _this.check(g, select); });
    };
    UserGroupsComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        request = new organizationUserUpdateGroupsRequest_1.OrganizationUserUpdateGroupsRequest();
                        request.groupIds = this.groups.filter(function (g) { return g.checked; }).map(function (g) { return g.id; });
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        this.formPromise = this.apiService.putOrganizationUserGroups(this.organizationId, this.organizationUserId, request);
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Edited User Groups' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('editedGroupsForUser', this.name));
                        this.onSavedUser.emit();
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], UserGroupsComponent.prototype, "name", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], UserGroupsComponent.prototype, "organizationUserId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], UserGroupsComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], UserGroupsComponent.prototype, "onSavedUser", void 0);
    UserGroupsComponent = __decorate([
        core_1.Component({
            selector: 'app-user-groups',
            template: __webpack_require__(/*! ./user-groups.component.html */ "./src/app/organizations/manage/user-groups.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService])
    ], UserGroupsComponent);
    return UserGroupsComponent;
}());
exports.UserGroupsComponent = UserGroupsComponent;


/***/ }),

/***/ "./src/app/organizations/settings/account.component.html":
/*!***************************************************************!*\
  !*** ./src/app/organizations/settings/account.component.html ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>{{'myOrganization' | i18n}}</h1>\n</div>\n<div *ngIf=\"loading\">\n    <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n</div>\n<form *ngIf=\"org && !loading\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"row\">\n        <div class=\"col-6\">\n            <div class=\"form-group\">\n                <label for=\"name\">{{'organizationName' | i18n}}</label>\n                <input id=\"name\" class=\"form-control\" type=\"text\" name=\"Name\" [(ngModel)]=\"org.name\">\n            </div>\n            <div class=\"form-group\">\n                <label for=\"billingEmail\">{{'billingEmail' | i18n}}</label>\n                <input id=\"billingEmail\" class=\"form-control\" type=\"text\" name=\"BillingEmail\" [(ngModel)]=\"org.billingEmail\">\n            </div>\n            <div class=\"form-group\">\n                <label for=\"businessName\">{{'businessName' | i18n}}</label>\n                <input id=\"businessName\" class=\"form-control\" type=\"text\" name=\"BusinessName\" [(ngModel)]=\"org.businessName\">\n            </div>\n        </div>\n        <div class=\"col-6\">\n            <app-avatar data=\"{{org.name}}\" dynamic=\"true\" width=\"75\" height=\"75\" fontSize=\"35\"></app-avatar>\n        </div>\n    </div>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'save' | i18n}}</span>\n    </button>\n</form>\n<div class=\"secondary-header border-0 mb-0\">\n    <h1>{{'taxInformation' | i18n}}</h1>\n</div>\n<div class=\"mb-3\" *ngIf=\"org && (org.businessAddress1 || org.businessTaxNumber)\">\n    <div>{{org.businessAddress1}}</div>\n    <div>{{org.businessAddress2}}</div>\n    <div>{{org.businessAddress3}}</div>\n    <div>{{org.businessCountry}}</div>\n    <div>{{org.businessTaxNumber}}</div>\n</div>\n<p>{{'taxInformationDesc' | i18n}}</p>\n<a href=\"https://bitwarden.com/contact/\" target=\"_blank\" rel=\"noopener\" class=\"btn btn-outline-secondary\">\n    {{'contactSupport' | i18n}}\n</a>\n<div class=\"secondary-header text-danger border-0 mb-0\">\n    <h1>{{'dangerZone' | i18n}}</h1>\n</div>\n<div class=\"card border-danger\">\n    <div class=\"card-body\">\n        <p>{{'dangerZoneDesc' | i18n}}</p>\n        <button type=\"button\" class=\"btn btn-outline-danger\" (click)=\"deleteOrganization()\">{{'deleteOrganization' | i18n}}</button>\n    </div>\n</div>\n<ng-template #deleteOrganizationTemplate></ng-template>\n";

/***/ }),

/***/ "./src/app/organizations/settings/account.component.ts":
/*!*************************************************************!*\
  !*** ./src/app/organizations/settings/account.component.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var sync_service_1 = __webpack_require__(/*! jslib/abstractions/sync.service */ "./jslib/src/abstractions/sync.service.ts");
var organizationUpdateRequest_1 = __webpack_require__(/*! jslib/models/request/organizationUpdateRequest */ "./jslib/src/models/request/organizationUpdateRequest.ts");
var modal_component_1 = __webpack_require__(/*! ../../modal.component */ "./src/app/modal.component.ts");
var delete_organization_component_1 = __webpack_require__(/*! ./delete-organization.component */ "./src/app/organizations/settings/delete-organization.component.ts");
var AccountComponent = /** @class */ (function () {
    function AccountComponent(componentFactoryResolver, apiService, i18nService, analytics, toasterService, route, syncService) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.route = route;
        this.syncService = syncService;
        this.loading = true;
        this.modal = null;
    }
    AccountComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                this.route.parent.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
                    var _a, _b;
                    return __generator(this, function (_c) {
                        switch (_c.label) {
                            case 0:
                                this.organizationId = params.organizationId;
                                _c.label = 1;
                            case 1:
                                _c.trys.push([1, 3, , 4]);
                                _a = this;
                                return [4 /*yield*/, this.apiService.getOrganization(this.organizationId)];
                            case 2:
                                _a.org = _c.sent();
                                return [3 /*break*/, 4];
                            case 3:
                                _b = _c.sent();
                                return [3 /*break*/, 4];
                            case 4: return [2 /*return*/];
                        }
                    });
                }); });
                this.loading = false;
                return [2 /*return*/];
            });
        });
    };
    AccountComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        request = new organizationUpdateRequest_1.OrganizationUpdateRequest();
                        request.name = this.org.name;
                        request.businessName = this.org.businessName;
                        request.billingEmail = this.org.billingEmail;
                        this.formPromise = this.apiService.putOrganization(this.organizationId, request).then(function () {
                            return _this.syncService.fullSync(true);
                        });
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Updated Organization Settings' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('organizationUpdated'));
                        return [3 /*break*/, 3];
                    case 2:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    AccountComponent.prototype.deleteOrganization = function () {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.deleteModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(delete_organization_component_1.DeleteOrganizationComponent, this.deleteModalRef);
        childComponent.organizationId = this.organizationId;
        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.modal = null;
                return [2 /*return*/];
            });
        }); });
    };
    __decorate([
        core_1.ViewChild('deleteOrganizationTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], AccountComponent.prototype, "deleteModalRef", void 0);
    AccountComponent = __decorate([
        core_1.Component({
            selector: 'app-org-account',
            template: __webpack_require__(/*! ./account.component.html */ "./src/app/organizations/settings/account.component.html"),
        }),
        __metadata("design:paramtypes", [core_1.ComponentFactoryResolver,
            api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            router_1.ActivatedRoute, sync_service_1.SyncService])
    ], AccountComponent);
    return AccountComponent;
}());
exports.AccountComponent = AccountComponent;


/***/ }),

/***/ "./src/app/organizations/settings/adjust-seats.component.html":
/*!********************************************************************!*\
  !*** ./src/app/organizations/settings/adjust-seats.component.html ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form class=\"card\" (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"card-body\">\n        <h3 class=\"card-body-header\">{{(add ? 'addSeats' : 'removeSeats') | i18n}}</h3>\n        <div class=\"row\">\n            <div class=\"form-group col-6\">\n                <label for=\"seatAdjustment\">{{(add ? 'seatsToAdd' : 'seatsToRemove') | i18n}}</label>\n                <input id=\"seatAdjustment\" class=\"form-control\" type=\"number\" name=\"SeatAdjustment\" [(ngModel)]=\"seatAdjustment\" min=\"0\"\n                    step=\"1\" required>\n            </div>\n        </div>\n        <div *ngIf=\"add\" class=\"mb-3\">\n            <strong>{{'total' | i18n}}:</strong> {{seatAdjustment || 0}} &times; {{seatPrice | currency:'$'}} = {{adjustedSeatTotal\n            | currency:'$'}} /{{interval | i18n}}\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n            <span>{{'submit' | i18n}}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"cancel()\">\n            {{'cancel' | i18n}}\n        </button>\n        <small class=\"d-block text-muted mt-3\">\n            {{(add ? 'seatsAddNote' : 'seatsRemoveNote') | i18n}}\n        </small>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/organizations/settings/adjust-seats.component.ts":
/*!******************************************************************!*\
  !*** ./src/app/organizations/settings/adjust-seats.component.ts ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var seatRequest_1 = __webpack_require__(/*! jslib/models/request/seatRequest */ "./jslib/src/models/request/seatRequest.ts");
var AdjustSeatsComponent = /** @class */ (function () {
    function AdjustSeatsComponent(apiService, i18nService, analytics, toasterService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.seatPrice = 0;
        this.add = true;
        this.interval = 'year';
        this.onAdjusted = new core_1.EventEmitter();
        this.onCanceled = new core_1.EventEmitter();
        this.seatAdjustment = 0;
    }
    AdjustSeatsComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        request = new seatRequest_1.SeatRequest();
                        request.seatAdjustment = this.seatAdjustment;
                        if (!this.add) {
                            request.seatAdjustment *= -1;
                        }
                        this.formPromise = this.apiService.postOrganizationSeat(this.organizationId, request);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: this.add ? 'Added Seats' : 'Removed Seats' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('adjustedSeats', request.seatAdjustment.toString()));
                        this.onAdjusted.emit(this.seatAdjustment);
                        return [3 /*break*/, 3];
                    case 2:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    AdjustSeatsComponent.prototype.cancel = function () {
        this.onCanceled.emit();
    };
    Object.defineProperty(AdjustSeatsComponent.prototype, "adjustedSeatTotal", {
        get: function () {
            return this.seatAdjustment * this.seatAdjustment;
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AdjustSeatsComponent.prototype, "seatPrice", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AdjustSeatsComponent.prototype, "add", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], AdjustSeatsComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AdjustSeatsComponent.prototype, "interval", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AdjustSeatsComponent.prototype, "onAdjusted", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AdjustSeatsComponent.prototype, "onCanceled", void 0);
    AdjustSeatsComponent = __decorate([
        core_1.Component({
            selector: 'app-adjust-seats',
            template: __webpack_require__(/*! ./adjust-seats.component.html */ "./src/app/organizations/settings/adjust-seats.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService])
    ], AdjustSeatsComponent);
    return AdjustSeatsComponent;
}());
exports.AdjustSeatsComponent = AdjustSeatsComponent;


/***/ }),

/***/ "./src/app/organizations/settings/delete-organization.component.html":
/*!***************************************************************************!*\
  !*** ./src/app/organizations/settings/delete-organization.component.html ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{'deleteOrganization' | i18n}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <p>{{'deleteOrganizationDesc' | i18n}}</p>\n                <app-callout type=\"warning\">{{'deleteOrganizationWarning' | i18n}}</app-callout>\n                <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n                <input id=\"masterPassword\" type=\"password\" name=\"MasterPasswordHash\" class=\"form-control\" [(ngModel)]=\"masterPassword\" required\n                    appAutofocus appInputVerbatim>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-danger btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'deleteOrganization' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/organizations/settings/delete-organization.component.ts":
/*!*************************************************************************!*\
  !*** ./src/app/organizations/settings/delete-organization.component.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var passwordVerificationRequest_1 = __webpack_require__(/*! jslib/models/request/passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var DeleteOrganizationComponent = /** @class */ (function () {
    function DeleteOrganizationComponent(apiService, i18nService, analytics, toasterService, cryptoService, router) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.router = router;
    }
    DeleteOrganizationComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (this.masterPassword == null || this.masterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassRequired'));
                            return [2 /*return*/];
                        }
                        request = new passwordVerificationRequest_1.PasswordVerificationRequest();
                        _a = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, null)];
                    case 1:
                        _a.masterPasswordHash = _c.sent();
                        _c.label = 2;
                    case 2:
                        _c.trys.push([2, 4, , 5]);
                        this.formPromise = this.apiService.deleteOrganization(this.organizationId, request);
                        return [4 /*yield*/, this.formPromise];
                    case 3:
                        _c.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted Organization' });
                        this.toasterService.popAsync('success', this.i18nService.t('organizationDeleted'), this.i18nService.t('organizationDeletedDesc'));
                        this.router.navigate(['/']);
                        return [3 /*break*/, 5];
                    case 4:
                        _b = _c.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    DeleteOrganizationComponent = __decorate([
        core_1.Component({
            selector: 'app-delete-organization',
            template: __webpack_require__(/*! ./delete-organization.component.html */ "./src/app/organizations/settings/delete-organization.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            crypto_service_1.CryptoService, router_1.Router])
    ], DeleteOrganizationComponent);
    return DeleteOrganizationComponent;
}());
exports.DeleteOrganizationComponent = DeleteOrganizationComponent;


/***/ }),

/***/ "./src/app/organizations/settings/organization-billing.component.html":
/*!****************************************************************************!*\
  !*** ./src/app/organizations/settings/organization-billing.component.html ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>\n        {{'billingAndLicensing' | i18n}}\n        <small>\n            <i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"firstLoaded && loading\" title=\"{{'loading' | i18n}}\"></i>\n        </small>\n    </h1>\n</div>\n<i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"!firstLoaded && loading\" title=\"{{'loading' | i18n}}\"></i>\n<ng-container *ngIf=\"billing\">\n    <app-callout type=\"warning\" title=\"{{'canceled' | i18n}}\" *ngIf=\"subscription && subscription.cancelled\">{{'subscriptionCanceled' | i18n}}</app-callout>\n    <app-callout type=\"warning\" title=\"{{'pendingCancellation' | i18n}}\" *ngIf=\"subscriptionMarkedForCancel\">\n        <p>{{'subscriptionPendingCanceled' | i18n}}</p>\n        <button #reinstateBtn type=\"button\" class=\"btn btn-outline-secondary btn-submit\" (click)=\"reinstate()\" [appApiAction]=\"reinstatePromise\"\n            [disabled]=\"reinstateBtn.loading\">\n            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n            <span>{{'reinstateSubscription' | i18n}}</span>\n        </button>\n    </app-callout>\n    <dl *ngIf=\"selfHosted\">\n        <dt>{{'billingPlan' | i18n}}</dt>\n        <dd>{{billing.plan}}</dd>\n        <dt>{{'expiration' | i18n}}</dt>\n        <dd *ngIf=\"billing.expiration\">{{billing.expiration | date:'mediumDate'}}</dd>\n        <dd *ngIf=\"!billing.expiration\">{{'neverExpires' | i18n}}</dd>\n    </dl>\n    <div class=\"row\" *ngIf=\"!selfHosted\">\n        <div class=\"col-4\">\n            <dl>\n                <dt>{{'billingPlan' | i18n}}</dt>\n                <dd>{{billing.plan}}</dd>\n                <ng-container *ngIf=\"subscription\">\n                    <dt>{{'status' | i18n}}</dt>\n                    <dd>\n                        <span class=\"text-capitalize\">{{subscription.status || '-'}}</span>\n                        <span class=\"badge badge-warning\" *ngIf=\"subscriptionMarkedForCancel\">{{'pendingCancellation' | i18n}}</span>\n                    </dd>\n                    <dt>{{'nextCharge' | i18n}}</dt>\n                    <dd>{{nextInvoice ? ((nextInvoice.date | date: 'mediumDate') + ', ' + (nextInvoice.amount | currency:'$'))\n                        : '-'}}\n                    </dd>\n                </ng-container>\n            </dl>\n        </div>\n        <div class=\"col-8\" *ngIf=\"subscription\">\n            <strong class=\"d-block mb-1\">{{'details' | i18n}}</strong>\n            <table class=\"table\">\n                <tbody>\n                    <tr *ngFor=\"let i of subscription.items\">\n                        <td>\n                            {{i.name}} {{i.quantity > 1 ? '&times;' + i.quantity : ''}} @ {{i.amount | currency:'$'}}\n                        </td>\n                        <td>\n                            {{(i.quantity * i.amount) | currency:'$'}} /{{i.interval | i18n}}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n    <ng-container *ngIf=\"selfHosted\">\n        <div>\n            <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"updateLicense()\">\n                {{'updateLicense' | i18n}}\n            </button>\n            <a href=\"https://vault.bitwarden.com\" target=\"_blank\" rel=\"noopener\" class=\"btn btn-outline-secondary\">\n                {{'manageSubscription' | i18n}}\n            </a>\n        </div>\n        <div class=\"card mt-3\" *ngIf=\"showUpdateLicense\">\n            <div class=\"card-body\">\n                <h3 class=\"card-body-header\">{{'updateLicense' | i18n}}</h3>\n                <app-update-license [organizationId]=\"organizationId\" (onUpdated)=\"closeUpdateLicense(true)\" (onCanceled)=\"closeUpdateLicense(false)\"></app-update-license>\n            </div>\n        </div>\n    </ng-container>\n    <ng-container *ngIf=\"!selfHosted\">\n        <div class=\"d-flex\">\n            <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"changePlan()\">\n                {{'changeBillingPlan' | i18n}}\n            </button>\n            <button type=\"button\" class=\"btn btn-outline-secondary btn-submit ml-1\" #licenseBtn [appApiAction]=\"licensePromise\" [disabled]=\"licenseBtn.loading\"\n                (click)=\"downloadLicense()\" *ngIf=\"canDownloadLicense\">\n                <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                <span>{{'downloadLicense' | i18n}}</span>\n            </button>\n            <button #cancelBtn type=\"button\" class=\"btn btn-outline-danger btn-submit ml-auto\" (click)=\"cancel()\" [appApiAction]=\"cancelPromise\"\n                [disabled]=\"cancelBtn.loading\" *ngIf=\"subscription && !subscription.cancelled && !subscriptionMarkedForCancel\">\n                <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                <span>{{'cancelSubscription' | i18n}}</span>\n            </button>\n        </div>\n        <h2 class=\"spaced-header\">{{'userSeats' | i18n}}</h2>\n        <p>{{'subscriptionUserSeats' | i18n : billing.seats}}</p>\n        <ng-container *ngIf=\"subscription && canAdjustSeats\">\n            <div class=\"mt-3\">\n                <div class=\"d-flex\" *ngIf=\"!showAdjustSeats\">\n                    <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"adjustSeats(true)\">\n                        {{'addSeats' | i18n}}\n                    </button>\n                    <button type=\"button\" class=\"btn btn-outline-secondary ml-1\" (click)=\"adjustSeats(false)\">\n                        {{'removeSeats' | i18n}}\n                    </button>\n                </div>\n                <app-adjust-seats [seatPrice]=\"seatPrice\" [add]=\"adjustSeatsAdd\" [organizationId]=\"organizationId\" [interval]=\"billingInterval\"\n                    (onAdjusted)=\"closeSeats(true)\" (onCanceled)=\"closeSeats(false)\" *ngIf=\"showAdjustSeats\"></app-adjust-seats>\n            </div>\n        </ng-container>\n        <h2 class=\"spaced-header\">{{'storage' | i18n}}</h2>\n        <p>{{'subscriptionStorage' | i18n : billing.maxStorageGb || 0 : billing.storageName || '0 MB'}}</p>\n        <div class=\"progress\">\n            <div class=\"progress-bar bg-success\" role=\"progressbar\" [ngStyle]=\"{width: storageProgressWidth + '%' }\" [attr.aria-valuenow]=\"storagePercentage\"\n                aria-valuemin=\"0\" aria-valuemax=\"100\">{{(storagePercentage / 100) | percent}}</div>\n        </div>\n        <ng-container *ngIf=\"subscription && !subscription.cancelled && !subscriptionMarkedForCancel && paymentSource\">\n            <div class=\"mt-3\">\n                <div class=\"d-flex\" *ngIf=\"!showAdjustStorage\">\n                    <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"adjustStorage(true)\">\n                        {{'addStorage' | i18n}}\n                    </button>\n                    <button type=\"button\" class=\"btn btn-outline-secondary ml-1\" (click)=\"adjustStorage(false)\">\n                        {{'removeStorage' | i18n}}\n                    </button>\n                </div>\n                <app-adjust-storage [storageGbPrice]=\"storageGbPrice\" [add]=\"adjustStorageAdd\" [organizationId]=\"organizationId\" [interval]=\"billingInterval\"\n                    (onAdjusted)=\"closeStorage(true)\" (onCanceled)=\"closeStorage(false)\" *ngIf=\"showAdjustStorage\"></app-adjust-storage>\n            </div>\n        </ng-container>\n        <h2 class=\"spaced-header\">{{'paymentMethod' | i18n}}</h2>\n        <p *ngIf=\"!paymentSource\">{{'noPaymentMethod' | i18n}}</p>\n        <ng-container *ngIf=\"paymentSource\">\n            <app-callout type=\"warning\" title=\"{{'verifyBankAccount' | i18n}}\" *ngIf=\"paymentSource.type === paymentMethodType.BankAccount && paymentSource.needsVerification\">\n                <p>{{'verifyBankAccountDesc' | i18n}} {{'verifyBankAccountFailureWarning' | i18n}}</p>\n                <form #verifyForm class=\"form-inline\" (ngSubmit)=\"verifyBank()\" [appApiAction]=\"verifyBankPromise\" ngNativeValidate>\n                    <label class=\"sr-only\" for=\"verifyAmount1\">{{'amount' | i18n : '1'}}</label>\n                    <div class=\"input-group mr-2\">\n                        <div class=\"input-group-prepend\">\n                            <div class=\"input-group-text\">$0.</div>\n                        </div>\n                        <input type=\"number\" class=\"form-control\" id=\"verifyAmount1\" placeholder=\"xx\" name=\"Amount1\" [(ngModel)]=\"verifyAmount1\"\n                            min=\"1\" max=\"99\" step=\"1\" required>\n                    </div>\n                    <label class=\"sr-only\" for=\"verifyAmount2\">{{'amount' | i18n : '2'}}</label>\n                    <div class=\"input-group mr-2\">\n                        <div class=\"input-group-prepend\">\n                            <div class=\"input-group-text\">$0.</div>\n                        </div>\n                        <input type=\"number\" class=\"form-control\" id=\"verifyAmount2\" placeholder=\"xx\" name=\"Amount2\" [(ngModel)]=\"verifyAmount2\"\n                            min=\"1\" max=\"99\" step=\"1\" required>\n                    </div>\n                    <button type=\"submit\" class=\"btn btn-outline-primary btn-submit\" [disabled]=\"verifyForm.loading\">\n                        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        <span>{{'verifyBankAccount' | i18n}}</span>\n                    </button>\n                </form>\n            </app-callout>\n            <p>\n                <i class=\"fa fa-fw\" [ngClass]=\"{'fa-credit-card': paymentSource.type === paymentMethodType.Card,\n                'fa-university': paymentSource.type === paymentMethodType.BankAccount, \n                'fa-paypal text-primary': paymentSource.type === paymentMethodType.PayPal}\"></i>\n                {{paymentSource.description}}\n            </p>\n        </ng-container>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"changePayment()\" *ngIf=\"!showAdjustPayment\">\n            {{(paymentSource ? 'changePaymentMethod' : 'addPaymentMethod') | i18n}}\n        </button>\n        <app-adjust-payment [currentType]=\"paymentSource != null ? paymentSource.type : null\" [organizationId]=\"organizationId\" (onAdjusted)=\"closePayment(true)\"\n            (onCanceled)=\"closePayment(false)\" *ngIf=\"showAdjustPayment\">\n        </app-adjust-payment>\n        <h2 class=\"spaced-header\">{{'charges' | i18n}}</h2>\n        <p *ngIf=\"!charges || !charges.length\">{{'noCharges' | i18n}}</p>\n        <table class=\"table mb-2\" *ngIf=\"charges && charges.length\">\n            <tbody>\n                <tr *ngFor=\"let c of charges\">\n                    <td>\n                        <a href=\"#\" appStopClick (click)=\"viewInvoice(c)\" title=\"{{'invoice' | i18n}}\">\n                            <i class=\"fa fa-file-pdf-o\"></i>\n                        </a>\n                    </td>\n                    <td>{{c.createdDate | date:'mediumDate'}}</td>\n                    <td>{{c.paymentSource ? c.paymentSource.description : '-'}}</td>\n                    <td class=\"text-capitalize\">{{c.status}}</td>\n                    <td [ngClass]=\"{'text-strike':c.refunded}\" title=\"{{(c.refunded ? 'refunded' : '') | i18n}}\">{{c.amount | currency:'$'}}</td>\n                </tr>\n            </tbody>\n        </table>\n        <small class=\"text-muted\">* {{'chargesStatement' | i18n : 'BITWARDEN'}}</small>\n    </ng-container>\n</ng-container>\n";

/***/ }),

/***/ "./src/app/organizations/settings/organization-billing.component.ts":
/*!**************************************************************************!*\
  !*** ./src/app/organizations/settings/organization-billing.component.ts ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var verifyBankRequest_1 = __webpack_require__(/*! jslib/models/request/verifyBankRequest */ "./jslib/src/models/request/verifyBankRequest.ts");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var paymentMethodType_1 = __webpack_require__(/*! jslib/enums/paymentMethodType */ "./jslib/src/enums/paymentMethodType.ts");
var planType_1 = __webpack_require__(/*! jslib/enums/planType */ "./jslib/src/enums/planType.ts");
var OrganizationBillingComponent = /** @class */ (function () {
    function OrganizationBillingComponent(tokenService, apiService, platformUtilsService, i18nService, analytics, toasterService, route) {
        this.tokenService = tokenService;
        this.apiService = apiService;
        this.platformUtilsService = platformUtilsService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.route = route;
        this.loading = false;
        this.firstLoaded = false;
        this.adjustSeatsAdd = true;
        this.showAdjustSeats = false;
        this.adjustStorageAdd = true;
        this.showAdjustStorage = false;
        this.showAdjustPayment = false;
        this.showUpdateLicense = false;
        this.paymentMethodType = paymentMethodType_1.PaymentMethodType;
        this.selfHosted = false;
        this.selfHosted = platformUtilsService.isSelfHost();
    }
    OrganizationBillingComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                this.route.parent.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this.organizationId = params.organizationId;
                                return [4 /*yield*/, this.load()];
                            case 1:
                                _a.sent();
                                this.firstLoaded = true;
                                return [2 /*return*/];
                        }
                    });
                }); });
                return [2 /*return*/];
            });
        });
    };
    OrganizationBillingComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.loading) {
                            return [2 /*return*/];
                        }
                        this.loading = true;
                        _a = this;
                        return [4 /*yield*/, this.apiService.getOrganizationBilling(this.organizationId)];
                    case 1:
                        _a.billing = _b.sent();
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    OrganizationBillingComponent.prototype.reinstate = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.loading) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('reinstateConfirmation'), this.i18nService.t('reinstateSubscription'), this.i18nService.t('yes'), this.i18nService.t('cancel'))];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.reinstatePromise = this.apiService.postOrganizationReinstate(this.organizationId);
                        return [4 /*yield*/, this.reinstatePromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Reinstated Plan' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('reinstated'));
                        this.load();
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    OrganizationBillingComponent.prototype.cancel = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.loading) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('cancelConfirmation'), this.i18nService.t('cancelSubscription'), this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.cancelPromise = this.apiService.postOrganizationCancel(this.organizationId);
                        return [4 /*yield*/, this.cancelPromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Canceled Plan' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('canceledSubscription'));
                        this.load();
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    OrganizationBillingComponent.prototype.changePlan = function () {
        return __awaiter(this, void 0, void 0, function () {
            var contactSupport;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('changeBillingPlanDesc'), this.i18nService.t('changeBillingPlan'), this.i18nService.t('contactSupport'), this.i18nService.t('close'))];
                    case 1:
                        contactSupport = _a.sent();
                        if (contactSupport) {
                            this.platformUtilsService.launchUri('https://bitwarden.com/contact');
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    OrganizationBillingComponent.prototype.downloadLicense = function () {
        return __awaiter(this, void 0, void 0, function () {
            var installationId, license, licenseString, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.loading) {
                            return [2 /*return*/];
                        }
                        installationId = window.prompt(this.i18nService.t('enterInstallationId'));
                        if (installationId == null || installationId === '') {
                            return [2 /*return*/];
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        this.licensePromise = this.apiService.getOrganizationLicense(this.organizationId, installationId);
                        return [4 /*yield*/, this.licensePromise];
                    case 2:
                        license = _b.sent();
                        licenseString = JSON.stringify(license, null, 2);
                        this.platformUtilsService.saveFile(window, licenseString, null, 'bitwarden_organization_license.json');
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    OrganizationBillingComponent.prototype.updateLicense = function () {
        if (this.loading) {
            return;
        }
        this.showUpdateLicense = true;
    };
    OrganizationBillingComponent.prototype.verifyBank = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.loading) {
                            return [2 /*return*/];
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        request = new verifyBankRequest_1.VerifyBankRequest();
                        request.amount1 = this.verifyAmount1;
                        request.amount2 = this.verifyAmount2;
                        this.verifyBankPromise = this.apiService.postOrganizationVerifyBank(this.organizationId, request);
                        return [4 /*yield*/, this.verifyBankPromise];
                    case 2:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Verified Bank Account' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('verifiedBankAccount'));
                        this.load();
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    OrganizationBillingComponent.prototype.closeUpdateLicense = function (load) {
        this.showUpdateLicense = false;
        if (load) {
            this.load();
        }
    };
    OrganizationBillingComponent.prototype.adjustSeats = function (add) {
        this.adjustSeatsAdd = add;
        this.showAdjustSeats = true;
    };
    OrganizationBillingComponent.prototype.closeSeats = function (load) {
        this.showAdjustSeats = false;
        if (load) {
            this.load();
        }
    };
    OrganizationBillingComponent.prototype.adjustStorage = function (add) {
        this.adjustStorageAdd = add;
        this.showAdjustStorage = true;
    };
    OrganizationBillingComponent.prototype.closeStorage = function (load) {
        this.showAdjustStorage = false;
        if (load) {
            this.load();
        }
    };
    OrganizationBillingComponent.prototype.changePayment = function () {
        this.showAdjustPayment = true;
    };
    OrganizationBillingComponent.prototype.closePayment = function (load) {
        this.showAdjustPayment = false;
        if (load) {
            this.load();
        }
    };
    OrganizationBillingComponent.prototype.viewInvoice = function (charge) {
        return __awaiter(this, void 0, void 0, function () {
            var token, url;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.tokenService.getToken()];
                    case 1:
                        token = _a.sent();
                        url = this.apiService.apiBaseUrl + '/organizations/' + this.organizationId +
                            '/billing-invoice/' + charge.invoiceId + '?access_token=' + token;
                        this.platformUtilsService.launchUri(url);
                        return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(OrganizationBillingComponent.prototype, "subscriptionMarkedForCancel", {
        get: function () {
            return this.subscription != null && !this.subscription.cancelled && this.subscription.cancelAtEndDate;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "subscription", {
        get: function () {
            return this.billing != null ? this.billing.subscription : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "nextInvoice", {
        get: function () {
            return this.billing != null ? this.billing.upcomingInvoice : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "paymentSource", {
        get: function () {
            return this.billing != null ? this.billing.paymentSource : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "charges", {
        get: function () {
            return this.billing != null ? this.billing.charges : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "storagePercentage", {
        get: function () {
            return this.billing != null && this.billing.maxStorageGb ?
                +(100 * (this.billing.storageGb / this.billing.maxStorageGb)).toFixed(2) : 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "storageProgressWidth", {
        get: function () {
            return this.storagePercentage < 5 ? 5 : 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "billingInterval", {
        get: function () {
            var monthly = this.billing.planType === planType_1.PlanType.EnterpriseMonthly ||
                this.billing.planType === planType_1.PlanType.TeamsMonthly;
            return monthly ? 'month' : 'year';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "storageGbPrice", {
        get: function () {
            return this.billingInterval === 'month' ? 0.5 : 4;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "seatPrice", {
        get: function () {
            switch (this.billing.planType) {
                case planType_1.PlanType.EnterpriseMonthly:
                    return 4;
                case planType_1.PlanType.EnterpriseAnnually:
                    return 3;
                case planType_1.PlanType.TeamsMonthly:
                    return 2.5;
                case planType_1.PlanType.TeamsAnnually:
                    return 2;
                default:
                    return 0;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "canAdjustSeats", {
        get: function () {
            return this.billing.planType === planType_1.PlanType.EnterpriseMonthly ||
                this.billing.planType === planType_1.PlanType.EnterpriseAnnually ||
                this.billing.planType === planType_1.PlanType.TeamsMonthly || this.billing.planType === planType_1.PlanType.TeamsAnnually;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrganizationBillingComponent.prototype, "canDownloadLicense", {
        get: function () {
            return (this.billing.planType !== planType_1.PlanType.Free && this.subscription == null) ||
                (this.subscription != null && !this.subscription.cancelled);
        },
        enumerable: true,
        configurable: true
    });
    OrganizationBillingComponent = __decorate([
        core_1.Component({
            selector: 'app-org-billing',
            template: __webpack_require__(/*! ./organization-billing.component.html */ "./src/app/organizations/settings/organization-billing.component.html"),
        }),
        __metadata("design:paramtypes", [token_service_1.TokenService, api_service_1.ApiService,
            platformUtils_service_1.PlatformUtilsService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            router_1.ActivatedRoute])
    ], OrganizationBillingComponent);
    return OrganizationBillingComponent;
}());
exports.OrganizationBillingComponent = OrganizationBillingComponent;


/***/ }),

/***/ "./src/app/organizations/settings/settings.component.html":
/*!****************************************************************!*\
  !*** ./src/app/organizations/settings/settings.component.html ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"container page-content\">\n    <div class=\"row\">\n        <div class=\"col-3\">\n            <div class=\"card\">\n                <div class=\"card-header\">{{'settings' | i18n}}</div>\n                <div class=\"list-group list-group-flush\">\n                    <a routerLink=\"account\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'myOrganization' | i18n}}\n                    </a>\n                    <a routerLink=\"billing\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'billingAndLicensing' | i18n}}\n                    </a>\n                    <a routerLink=\"two-factor\" class=\"list-group-item\" routerLinkActive=\"active\" *ngIf=\"access2fa\">\n                        {{'twoStepLogin' | i18n}}\n                    </a>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-9\">\n            <router-outlet></router-outlet>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/organizations/settings/settings.component.ts":
/*!**************************************************************!*\
  !*** ./src/app/organizations/settings/settings.component.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var SettingsComponent = /** @class */ (function () {
    function SettingsComponent(route, userService) {
        this.route = route;
        this.userService = userService;
        this.access2fa = false;
    }
    SettingsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
            var organization;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getOrganization(params.organizationId)];
                    case 1:
                        organization = _a.sent();
                        this.access2fa = organization.use2fa;
                        return [2 /*return*/];
                }
            });
        }); });
    };
    SettingsComponent = __decorate([
        core_1.Component({
            selector: 'app-org-settings',
            template: __webpack_require__(/*! ./settings.component.html */ "./src/app/organizations/settings/settings.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.ActivatedRoute, user_service_1.UserService])
    ], SettingsComponent);
    return SettingsComponent;
}());
exports.SettingsComponent = SettingsComponent;


/***/ }),

/***/ "./src/app/organizations/settings/two-factor-setup.component.ts":
/*!**********************************************************************!*\
  !*** ./src/app/organizations/settings/two-factor-setup.component.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var twoFactorProviderType_1 = __webpack_require__(/*! jslib/enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var two_factor_duo_component_1 = __webpack_require__(/*! ../../settings/two-factor-duo.component */ "./src/app/settings/two-factor-duo.component.ts");
var two_factor_setup_component_1 = __webpack_require__(/*! ../../settings/two-factor-setup.component */ "./src/app/settings/two-factor-setup.component.ts");
var TwoFactorSetupComponent = /** @class */ (function (_super) {
    __extends(TwoFactorSetupComponent, _super);
    function TwoFactorSetupComponent(apiService, tokenService, componentFactoryResolver, messagingService, route) {
        var _this = _super.call(this, apiService, tokenService, componentFactoryResolver, messagingService) || this;
        _this.route = route;
        return _this;
    }
    TwoFactorSetupComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                this.route.parent.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this.organizationId = params.organizationId;
                                return [4 /*yield*/, _super.prototype.ngOnInit.call(this)];
                            case 1:
                                _a.sent();
                                return [2 /*return*/];
                        }
                    });
                }); });
                return [2 /*return*/];
            });
        });
    };
    TwoFactorSetupComponent.prototype.manage = function (type) {
        var _this = this;
        switch (type) {
            case twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo:
                var duoComp = this.openModal(this.duoModalRef, two_factor_duo_component_1.TwoFactorDuoComponent);
                duoComp.type = twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo;
                duoComp.organizationId = this.organizationId;
                duoComp.onUpdated.subscribe(function (enabled) {
                    _this.updateStatus(enabled, twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo);
                });
                break;
            default:
                break;
        }
    };
    TwoFactorSetupComponent.prototype.getTwoFactorProviders = function () {
        return this.apiService.getTwoFactorOrganizationProviders(this.organizationId);
    };
    TwoFactorSetupComponent.prototype.filterProvider = function (type) {
        return type !== twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo;
    };
    TwoFactorSetupComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor-setup',
            template: __webpack_require__(/*! ../../settings/two-factor-setup.component.html */ "./src/app/settings/two-factor-setup.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, token_service_1.TokenService,
            core_1.ComponentFactoryResolver, messaging_service_1.MessagingService,
            router_1.ActivatedRoute])
    ], TwoFactorSetupComponent);
    return TwoFactorSetupComponent;
}(two_factor_setup_component_1.TwoFactorSetupComponent));
exports.TwoFactorSetupComponent = TwoFactorSetupComponent;


/***/ }),

/***/ "./src/app/organizations/tools/export.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/organizations/tools/export.component.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var export_service_1 = __webpack_require__(/*! jslib/abstractions/export.service */ "./jslib/src/abstractions/export.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var export_component_1 = __webpack_require__(/*! ../../tools/export.component */ "./src/app/tools/export.component.ts");
var ExportComponent = /** @class */ (function (_super) {
    __extends(ExportComponent, _super);
    function ExportComponent(analytics, toasterService, cryptoService, userService, i18nService, platformUtilsService, exportService, route) {
        var _this = _super.call(this, analytics, toasterService, cryptoService, userService, i18nService, platformUtilsService, exportService) || this;
        _this.route = route;
        return _this;
    }
    ExportComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.parent.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.organizationId = params.organizationId;
                return [2 /*return*/];
            });
        }); });
    };
    ExportComponent.prototype.getExportData = function () {
        return this.exportService.getOrganizationExport(this.organizationId, 'csv');
    };
    ExportComponent.prototype.getFileName = function () {
        return _super.prototype.getFileName.call(this, 'org');
    };
    ExportComponent = __decorate([
        core_1.Component({
            selector: 'app-org-export',
            template: __webpack_require__(/*! ../../tools/export.component.html */ "./src/app/tools/export.component.html"),
        }),
        __metadata("design:paramtypes", [angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            crypto_service_1.CryptoService, user_service_1.UserService,
            i18n_service_1.I18nService, platformUtils_service_1.PlatformUtilsService,
            export_service_1.ExportService, router_1.ActivatedRoute])
    ], ExportComponent);
    return ExportComponent;
}(export_component_1.ExportComponent));
exports.ExportComponent = ExportComponent;


/***/ }),

/***/ "./src/app/organizations/tools/import.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/organizations/tools/import.component.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var folder_service_1 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var cipherRequest_1 = __webpack_require__(/*! jslib/models/request/cipherRequest */ "./jslib/src/models/request/cipherRequest.ts");
var collectionRequest_1 = __webpack_require__(/*! jslib/models/request/collectionRequest */ "./jslib/src/models/request/collectionRequest.ts");
var importOrganizationCiphersRequest_1 = __webpack_require__(/*! jslib/models/request/importOrganizationCiphersRequest */ "./jslib/src/models/request/importOrganizationCiphersRequest.ts");
var kvpRequest_1 = __webpack_require__(/*! jslib/models/request/kvpRequest */ "./jslib/src/models/request/kvpRequest.ts");
var import_component_1 = __webpack_require__(/*! ../../tools/import.component */ "./src/app/tools/import.component.ts");
var ImportComponent = /** @class */ (function (_super) {
    __extends(ImportComponent, _super);
    function ImportComponent(i18nService, analytics, toasterService, cipherService, folderService, apiService, router, collectionService, route) {
        var _this = _super.call(this, i18nService, analytics, toasterService, cipherService, folderService, apiService, router) || this;
        _this.collectionService = collectionService;
        _this.route = route;
        return _this;
    }
    ImportComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.parent.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.organizationId = params.organizationId;
                this.successNavigate = ['organizations', this.organizationId, 'vault'];
                _super.prototype.ngOnInit.call(this);
                return [2 /*return*/];
            });
        }); });
    };
    ImportComponent.prototype.postImport = function (importResult) {
        return __awaiter(this, void 0, void 0, function () {
            var request, i, c, i, c;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        request = new importOrganizationCiphersRequest_1.ImportOrganizationCiphersRequest();
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < importResult.ciphers.length)) return [3 /*break*/, 4];
                        importResult.ciphers[i].organizationId = this.organizationId;
                        return [4 /*yield*/, this.cipherService.encrypt(importResult.ciphers[i])];
                    case 2:
                        c = _a.sent();
                        request.ciphers.push(new cipherRequest_1.CipherRequest(c));
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4:
                        if (!(importResult.collections != null)) return [3 /*break*/, 8];
                        i = 0;
                        _a.label = 5;
                    case 5:
                        if (!(i < importResult.collections.length)) return [3 /*break*/, 8];
                        importResult.collections[i].organizationId = this.organizationId;
                        return [4 /*yield*/, this.collectionService.encrypt(importResult.collections[i])];
                    case 6:
                        c = _a.sent();
                        request.collections.push(new collectionRequest_1.CollectionRequest(c));
                        _a.label = 7;
                    case 7:
                        i++;
                        return [3 /*break*/, 5];
                    case 8:
                        if (importResult.collectionRelationships != null) {
                            importResult.collectionRelationships.forEach(function (r) {
                                return request.collectionRelationships.push(new kvpRequest_1.KvpRequest(r[0], r[1]));
                            });
                        }
                        return [4 /*yield*/, this.apiService.postImportOrganizationCiphers(this.organizationId, request)];
                    case 9: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    ImportComponent.prototype.getImporter = function () {
        var importer = _super.prototype.getImporter.call(this);
        if (importer != null) {
            importer.organization = true;
        }
        return importer;
    };
    ImportComponent = __decorate([
        core_1.Component({
            selector: 'app-org-import',
            template: __webpack_require__(/*! ../../tools/import.component.html */ "./src/app/tools/import.component.html"),
        }),
        __metadata("design:paramtypes", [i18n_service_1.I18nService, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, cipher_service_1.CipherService,
            folder_service_1.FolderService, api_service_1.ApiService,
            router_1.Router, collection_service_1.CollectionService,
            router_1.ActivatedRoute])
    ], ImportComponent);
    return ImportComponent;
}(import_component_1.ImportComponent));
exports.ImportComponent = ImportComponent;


/***/ }),

/***/ "./src/app/organizations/tools/tools.component.html":
/*!**********************************************************!*\
  !*** ./src/app/organizations/tools/tools.component.html ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"container page-content\">\n    <div class=\"row\">\n        <div class=\"col-3\">\n            <div class=\"card\">\n                <div class=\"card-header\">{{'tools' | i18n}}</div>\n                <div class=\"list-group list-group-flush\">\n                    <a routerLink=\"import\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'importData' | i18n}}\n                    </a>\n                    <a routerLink=\"export\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'exportVault' | i18n}}\n                    </a>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-9\">\n            <router-outlet></router-outlet>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/organizations/tools/tools.component.ts":
/*!********************************************************!*\
  !*** ./src/app/organizations/tools/tools.component.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var ToolsComponent = /** @class */ (function () {
    function ToolsComponent() {
    }
    ToolsComponent = __decorate([
        core_1.Component({
            selector: 'app-org-tools',
            template: __webpack_require__(/*! ./tools.component.html */ "./src/app/organizations/tools/tools.component.html"),
        })
    ], ToolsComponent);
    return ToolsComponent;
}());
exports.ToolsComponent = ToolsComponent;


/***/ }),

/***/ "./src/app/organizations/vault/add-edit.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/organizations/vault/add-edit.component.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var audit_service_1 = __webpack_require__(/*! jslib/abstractions/audit.service */ "./jslib/src/abstractions/audit.service.ts");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var folder_service_1 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var passwordGeneration_service_1 = __webpack_require__(/*! jslib/abstractions/passwordGeneration.service */ "./jslib/src/abstractions/passwordGeneration.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var state_service_1 = __webpack_require__(/*! jslib/abstractions/state.service */ "./jslib/src/abstractions/state.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var totp_service_1 = __webpack_require__(/*! jslib/abstractions/totp.service */ "./jslib/src/abstractions/totp.service.ts");
var cipherData_1 = __webpack_require__(/*! jslib/models/data/cipherData */ "./jslib/src/models/data/cipherData.ts");
var cipher_1 = __webpack_require__(/*! jslib/models/domain/cipher */ "./jslib/src/models/domain/cipher.ts");
var cipherRequest_1 = __webpack_require__(/*! jslib/models/request/cipherRequest */ "./jslib/src/models/request/cipherRequest.ts");
var add_edit_component_1 = __webpack_require__(/*! ../../vault/add-edit.component */ "./src/app/vault/add-edit.component.ts");
var AddEditComponent = /** @class */ (function (_super) {
    __extends(AddEditComponent, _super);
    function AddEditComponent(cipherService, folderService, i18nService, platformUtilsService, analytics, toasterService, auditService, stateService, tokenService, totpService, passwordGenerationService, apiService, messagingService) {
        var _this = _super.call(this, cipherService, folderService, i18nService, platformUtilsService, analytics, toasterService, auditService, stateService, tokenService, totpService, passwordGenerationService, messagingService) || this;
        _this.apiService = apiService;
        return _this;
    }
    AddEditComponent.prototype.loadCipher = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!this.organization.isAdmin) return [3 /*break*/, 2];
                        return [4 /*yield*/, _super.prototype.loadCipher.call(this)];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: return [4 /*yield*/, this.apiService.getCipherAdmin(this.cipherId)];
                    case 3:
                        response = _a.sent();
                        return [2 /*return*/, new cipher_1.Cipher(new cipherData_1.CipherData(response))];
                }
            });
        });
    };
    AddEditComponent.prototype.encryptCipher = function () {
        if (!this.editMode) {
            this.cipher.organizationId = this.organization.id;
        }
        return _super.prototype.encryptCipher.call(this);
    };
    AddEditComponent.prototype.saveCipher = function (cipher) {
        return __awaiter(this, void 0, void 0, function () {
            var request;
            return __generator(this, function (_a) {
                if (!this.organization.isAdmin) {
                    return [2 /*return*/, _super.prototype.saveCipher.call(this, cipher)];
                }
                request = new cipherRequest_1.CipherRequest(cipher);
                if (this.editMode) {
                    return [2 /*return*/, this.apiService.putCipherAdmin(this.cipherId, request)];
                }
                else {
                    return [2 /*return*/, this.apiService.postCipherAdmin(request)];
                }
                return [2 /*return*/];
            });
        });
    };
    AddEditComponent.prototype.deleteCipher = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (!this.organization.isAdmin) {
                    return [2 /*return*/, _super.prototype.deleteCipher.call(this)];
                }
                return [2 /*return*/, this.apiService.deleteCipherAdmin(this.cipherId)];
            });
        });
    };
    AddEditComponent = __decorate([
        core_1.Component({
            selector: 'app-org-vault-add-edit',
            template: __webpack_require__(/*! ../../vault/add-edit.component.html */ "./src/app/vault/add-edit.component.html"),
        }),
        __metadata("design:paramtypes", [cipher_service_1.CipherService, folder_service_1.FolderService,
            i18n_service_1.I18nService, platformUtils_service_1.PlatformUtilsService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            audit_service_1.AuditService, state_service_1.StateService,
            token_service_1.TokenService, totp_service_1.TotpService,
            passwordGeneration_service_1.PasswordGenerationService, api_service_1.ApiService,
            messaging_service_1.MessagingService])
    ], AddEditComponent);
    return AddEditComponent;
}(add_edit_component_1.AddEditComponent));
exports.AddEditComponent = AddEditComponent;


/***/ }),

/***/ "./src/app/organizations/vault/attachments.component.ts":
/*!**************************************************************!*\
  !*** ./src/app/organizations/vault/attachments.component.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var cipherData_1 = __webpack_require__(/*! jslib/models/data/cipherData */ "./jslib/src/models/data/cipherData.ts");
var cipher_1 = __webpack_require__(/*! jslib/models/domain/cipher */ "./jslib/src/models/domain/cipher.ts");
var attachments_component_1 = __webpack_require__(/*! ../../vault/attachments.component */ "./src/app/vault/attachments.component.ts");
var AttachmentsComponent = /** @class */ (function (_super) {
    __extends(AttachmentsComponent, _super);
    function AttachmentsComponent(cipherService, analytics, toasterService, i18nService, cryptoService, tokenService, platformUtilsService, apiService) {
        var _this = _super.call(this, cipherService, analytics, toasterService, i18nService, cryptoService, tokenService, platformUtilsService) || this;
        _this.apiService = apiService;
        return _this;
    }
    AttachmentsComponent.prototype.loadCipher = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!this.organization.isAdmin) return [3 /*break*/, 2];
                        return [4 /*yield*/, _super.prototype.loadCipher.call(this)];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: return [4 /*yield*/, this.apiService.getCipherAdmin(this.cipherId)];
                    case 3:
                        response = _a.sent();
                        return [2 /*return*/, new cipher_1.Cipher(new cipherData_1.CipherData(response))];
                }
            });
        });
    };
    AttachmentsComponent.prototype.saveCipherAttachment = function (file) {
        return this.cipherService.saveAttachmentWithServer(this.cipherDomain, file, this.organization.isAdmin);
    };
    AttachmentsComponent.prototype.deleteCipherAttachment = function (attachmentId) {
        if (!this.organization.isAdmin) {
            return _super.prototype.deleteCipherAttachment.call(this, attachmentId);
        }
        return this.apiService.deleteCipherAttachmentAdmin(this.cipherId, attachmentId);
    };
    AttachmentsComponent = __decorate([
        core_1.Component({
            selector: 'app-org-vault-attachments',
            template: __webpack_require__(/*! ../../vault/attachments.component.html */ "./src/app/vault/attachments.component.html"),
        }),
        __metadata("design:paramtypes", [cipher_service_1.CipherService, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            crypto_service_1.CryptoService, token_service_1.TokenService,
            platformUtils_service_1.PlatformUtilsService, api_service_1.ApiService])
    ], AttachmentsComponent);
    return AttachmentsComponent;
}(attachments_component_1.AttachmentsComponent));
exports.AttachmentsComponent = AttachmentsComponent;


/***/ }),

/***/ "./src/app/organizations/vault/ciphers.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/organizations/vault/ciphers.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var cipherData_1 = __webpack_require__(/*! jslib/models/data/cipherData */ "./jslib/src/models/data/cipherData.ts");
var cipher_1 = __webpack_require__(/*! jslib/models/domain/cipher */ "./jslib/src/models/domain/cipher.ts");
var ciphers_component_1 = __webpack_require__(/*! ../../vault/ciphers.component */ "./src/app/vault/ciphers.component.ts");
var CiphersComponent = /** @class */ (function (_super) {
    __extends(CiphersComponent, _super);
    function CiphersComponent(cipherService, analytics, toasterService, i18nService, platformUtilsService, apiService) {
        var _this = _super.call(this, cipherService, analytics, toasterService, i18nService, platformUtilsService) || this;
        _this.apiService = apiService;
        _this.onEventsClicked = new core_1.EventEmitter();
        _this.accessEvents = false;
        return _this;
    }
    CiphersComponent.prototype.load = function (filter) {
        if (filter === void 0) { filter = null; }
        return __awaiter(this, void 0, void 0, function () {
            var ciphers, decCiphers_1, promises_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!this.organization.isAdmin) return [3 /*break*/, 2];
                        return [4 /*yield*/, _super.prototype.load.call(this)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                    case 2:
                        this.accessEvents = this.organization.useEvents;
                        return [4 /*yield*/, this.apiService.getCiphersOrganization(this.organization.id)];
                    case 3:
                        ciphers = _a.sent();
                        if (!(ciphers != null && ciphers.data != null && ciphers.data.length)) return [3 /*break*/, 5];
                        decCiphers_1 = [];
                        promises_1 = [];
                        ciphers.data.forEach(function (r) {
                            var data = new cipherData_1.CipherData(r);
                            var cipher = new cipher_1.Cipher(data);
                            promises_1.push(cipher.decrypt().then(function (c) { return decCiphers_1.push(c); }));
                        });
                        return [4 /*yield*/, Promise.all(promises_1)];
                    case 4:
                        _a.sent();
                        decCiphers_1.sort(this.cipherService.getLocaleSortingFunction());
                        this.allCiphers = decCiphers_1;
                        return [3 /*break*/, 6];
                    case 5:
                        this.allCiphers = [];
                        _a.label = 6;
                    case 6:
                        this.applyFilter(filter);
                        this.loaded = true;
                        return [2 /*return*/];
                }
            });
        });
    };
    CiphersComponent.prototype.applyFilter = function (filter) {
        var _this = this;
        if (filter === void 0) { filter = null; }
        if (this.organization.isAdmin) {
            _super.prototype.applyFilter.call(this, filter);
        }
        else {
            var f = function (c) { return c.organizationId === _this.organization.id && (filter == null || filter(c)); };
            _super.prototype.applyFilter.call(this, f);
        }
    };
    CiphersComponent.prototype.checkCipher = function (c) {
        // do nothing
    };
    CiphersComponent.prototype.events = function (c) {
        this.onEventsClicked.emit(c);
    };
    CiphersComponent.prototype.deleteCipher = function (id) {
        if (!this.organization.isAdmin) {
            return _super.prototype.deleteCipher.call(this, id);
        }
        return this.apiService.deleteCipherAdmin(id);
    };
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CiphersComponent.prototype, "onEventsClicked", void 0);
    CiphersComponent = __decorate([
        core_1.Component({
            selector: 'app-org-vault-ciphers',
            template: __webpack_require__(/*! ../../vault/ciphers.component.html */ "./src/app/vault/ciphers.component.html"),
        }),
        __metadata("design:paramtypes", [cipher_service_1.CipherService, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            platformUtils_service_1.PlatformUtilsService, api_service_1.ApiService])
    ], CiphersComponent);
    return CiphersComponent;
}(ciphers_component_1.CiphersComponent));
exports.CiphersComponent = CiphersComponent;


/***/ }),

/***/ "./src/app/organizations/vault/collections.component.ts":
/*!**************************************************************!*\
  !*** ./src/app/organizations/vault/collections.component.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var cipherData_1 = __webpack_require__(/*! jslib/models/data/cipherData */ "./jslib/src/models/data/cipherData.ts");
var cipher_1 = __webpack_require__(/*! jslib/models/domain/cipher */ "./jslib/src/models/domain/cipher.ts");
var cipherCollectionsRequest_1 = __webpack_require__(/*! jslib/models/request/cipherCollectionsRequest */ "./jslib/src/models/request/cipherCollectionsRequest.ts");
var collections_component_1 = __webpack_require__(/*! ../../vault/collections.component */ "./src/app/vault/collections.component.ts");
var CollectionsComponent = /** @class */ (function (_super) {
    __extends(CollectionsComponent, _super);
    function CollectionsComponent(collectionService, analytics, toasterService, i18nService, cipherService, apiService) {
        var _this = _super.call(this, collectionService, analytics, toasterService, i18nService, cipherService) || this;
        _this.apiService = apiService;
        return _this;
    }
    CollectionsComponent.prototype.loadCipher = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!this.organization.isAdmin) return [3 /*break*/, 2];
                        return [4 /*yield*/, _super.prototype.loadCipher.call(this)];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: return [4 /*yield*/, this.apiService.getCipherAdmin(this.cipherId)];
                    case 3:
                        response = _a.sent();
                        return [2 /*return*/, new cipher_1.Cipher(new cipherData_1.CipherData(response))];
                }
            });
        });
    };
    CollectionsComponent.prototype.loadCipherCollections = function () {
        if (!this.organization.isAdmin) {
            return _super.prototype.loadCipherCollections.call(this);
        }
        return this.collectionIds;
    };
    CollectionsComponent.prototype.loadCollections = function () {
        if (!this.organization.isAdmin) {
            return _super.prototype.loadCollections.call(this);
        }
        return Promise.resolve(this.collections);
    };
    CollectionsComponent.prototype.saveCollections = function () {
        if (this.organization.isAdmin) {
            var request = new cipherCollectionsRequest_1.CipherCollectionsRequest(this.cipherDomain.collectionIds);
            return this.apiService.putCipherCollectionsAdmin(this.cipherId, request);
        }
        else {
            return _super.prototype.saveCollections.call(this);
        }
    };
    CollectionsComponent = __decorate([
        core_1.Component({
            selector: 'app-org-vault-collections',
            template: __webpack_require__(/*! ../../vault/collections.component.html */ "./src/app/vault/collections.component.html"),
        }),
        __metadata("design:paramtypes", [collection_service_1.CollectionService, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            cipher_service_1.CipherService, api_service_1.ApiService])
    ], CollectionsComponent);
    return CollectionsComponent;
}(collections_component_1.CollectionsComponent));
exports.CollectionsComponent = CollectionsComponent;


/***/ }),

/***/ "./src/app/organizations/vault/groupings.component.ts":
/*!************************************************************!*\
  !*** ./src/app/organizations/vault/groupings.component.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var folder_service_1 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var collectionData_1 = __webpack_require__(/*! jslib/models/data/collectionData */ "./jslib/src/models/data/collectionData.ts");
var collection_1 = __webpack_require__(/*! jslib/models/domain/collection */ "./jslib/src/models/domain/collection.ts");
var collectionView_1 = __webpack_require__(/*! jslib/models/view/collectionView */ "./jslib/src/models/view/collectionView.ts");
var groupings_component_1 = __webpack_require__(/*! ../../vault/groupings.component */ "./src/app/vault/groupings.component.ts");
var GroupingsComponent = /** @class */ (function (_super) {
    __extends(GroupingsComponent, _super);
    function GroupingsComponent(collectionService, folderService, apiService, i18nService) {
        var _this = _super.call(this, collectionService, folderService) || this;
        _this.apiService = apiService;
        _this.i18nService = i18nService;
        return _this;
    }
    GroupingsComponent.prototype.loadCollections = function () {
        return __awaiter(this, void 0, void 0, function () {
            var collections, collectionDomains, _a, unassignedCollection;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!!this.organization.isAdmin) return [3 /*break*/, 2];
                        return [4 /*yield*/, _super.prototype.loadCollections.call(this, this.organization.id)];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                    case 2: return [4 /*yield*/, this.apiService.getCollections(this.organization.id)];
                    case 3:
                        collections = _b.sent();
                        if (!(collections != null && collections.data != null && collections.data.length)) return [3 /*break*/, 5];
                        collectionDomains = collections.data.map(function (r) {
                            return new collection_1.Collection(new collectionData_1.CollectionData(r));
                        });
                        _a = this;
                        return [4 /*yield*/, this.collectionService.decryptMany(collectionDomains)];
                    case 4:
                        _a.collections = _b.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.collections = [];
                        _b.label = 6;
                    case 6:
                        unassignedCollection = new collectionView_1.CollectionView();
                        unassignedCollection.name = this.i18nService.t('unassigned');
                        unassignedCollection.id = 'unassigned';
                        unassignedCollection.organizationId = this.organization.id;
                        unassignedCollection.readOnly = true;
                        this.collections.push(unassignedCollection);
                        return [2 /*return*/];
                }
            });
        });
    };
    GroupingsComponent = __decorate([
        core_1.Component({
            selector: 'app-org-vault-groupings',
            template: __webpack_require__(/*! ../../vault/groupings.component.html */ "./src/app/vault/groupings.component.html"),
        }),
        __metadata("design:paramtypes", [collection_service_1.CollectionService, folder_service_1.FolderService,
            api_service_1.ApiService, i18n_service_1.I18nService])
    ], GroupingsComponent);
    return GroupingsComponent;
}(groupings_component_1.GroupingsComponent));
exports.GroupingsComponent = GroupingsComponent;


/***/ }),

/***/ "./src/app/organizations/vault/vault.component.html":
/*!**********************************************************!*\
  !*** ./src/app/organizations/vault/vault.component.html ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"container page-content\">\n    <div class=\"row\">\n        <div class=\"col-3\">\n            <app-org-vault-groupings [showFolders]=\"false\" [showFavorites]=\"false\" (onAllClicked)=\"clearGroupingFilters()\" (onCipherTypeClicked)=\"filterCipherType($event)\"\n                (onCollectionClicked)=\"filterCollection($event.id)\" (onSearchTextChanged)=\"filterSearchText($event)\">\n            </app-org-vault-groupings>\n        </div>\n        <div class=\"col-9\">\n            <div class=\"page-header d-flex\">\n                <h1>\n                    {{'vault' | i18n}}\n                    <small #actionSpinner [appApiAction]=\"ciphersComponent.actionPromise\">\n                        <i *ngIf=\"actionSpinner.loading\" class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n                    </small>\n                </h1>\n                <button type=\"button\" class=\"btn btn-outline-primary btn-sm ml-auto\" (click)=\"addCipher()\" *ngIf=\"showAdd\">\n                    <i class=\"fa fa-plus fa-fw\"></i>{{'addItem' | i18n}}\n                </button>\n            </div>\n            <app-org-vault-ciphers (onCipherClicked)=\"editCipher($event)\" (onAttachmentsClicked)=\"editCipherAttachments($event)\" (onAddCipher)=\"addCipher()\"\n                (onCollectionsClicked)=\"editCipherCollections($event)\" (onEventsClicked)=\"viewEvents($event)\">\n            </app-org-vault-ciphers>\n        </div>\n    </div>\n</div>\n<ng-template #attachments></ng-template>\n<ng-template #cipherAddEdit></ng-template>\n<ng-template #collections></ng-template>\n<ng-template #eventsTemplate></ng-template>\n";

/***/ }),

/***/ "./src/app/organizations/vault/vault.component.ts":
/*!********************************************************!*\
  !*** ./src/app/organizations/vault/vault.component.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/esm5/common.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var sync_service_1 = __webpack_require__(/*! jslib/abstractions/sync.service */ "./jslib/src/abstractions/sync.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var modal_component_1 = __webpack_require__(/*! ../../modal.component */ "./src/app/modal.component.ts");
var entity_events_component_1 = __webpack_require__(/*! ../manage/entity-events.component */ "./src/app/organizations/manage/entity-events.component.ts");
var add_edit_component_1 = __webpack_require__(/*! ./add-edit.component */ "./src/app/organizations/vault/add-edit.component.ts");
var attachments_component_1 = __webpack_require__(/*! ./attachments.component */ "./src/app/organizations/vault/attachments.component.ts");
var ciphers_component_1 = __webpack_require__(/*! ./ciphers.component */ "./src/app/organizations/vault/ciphers.component.ts");
var collections_component_1 = __webpack_require__(/*! ./collections.component */ "./src/app/organizations/vault/collections.component.ts");
var groupings_component_1 = __webpack_require__(/*! ./groupings.component */ "./src/app/organizations/vault/groupings.component.ts");
var VaultComponent = /** @class */ (function () {
    function VaultComponent(route, userService, location, router, syncService, i18nService, componentFactoryResolver, messagingService) {
        this.route = route;
        this.userService = userService;
        this.location = location;
        this.router = router;
        this.syncService = syncService;
        this.i18nService = i18nService;
        this.componentFactoryResolver = componentFactoryResolver;
        this.messagingService = messagingService;
        this.showAdd = true;
        this.modal = null;
    }
    VaultComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.parent.params.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
            var _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.userService.getOrganization(params.organizationId)];
                    case 1:
                        _a.organization = _b.sent();
                        this.showAdd = this.organization.isAdmin;
                        this.groupingsComponent.organization = this.organization;
                        this.ciphersComponent.organization = this.organization;
                        this.route.queryParams.subscribe(function (qParams) { return __awaiter(_this, void 0, void 0, function () {
                            var t, cipher;
                            return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        if (!!this.organization.isAdmin) return [3 /*break*/, 2];
                                        return [4 /*yield*/, this.syncService.fullSync(false)];
                                    case 1:
                                        _a.sent();
                                        _a.label = 2;
                                    case 2: return [4 /*yield*/, this.groupingsComponent.load()];
                                    case 3:
                                        _a.sent();
                                        if (!(qParams == null)) return [3 /*break*/, 5];
                                        this.groupingsComponent.selectedAll = true;
                                        return [4 /*yield*/, this.ciphersComponent.load()];
                                    case 4:
                                        _a.sent();
                                        return [3 /*break*/, 11];
                                    case 5:
                                        if (!qParams.type) return [3 /*break*/, 7];
                                        t = parseInt(qParams.type, null);
                                        this.groupingsComponent.selectedType = t;
                                        return [4 /*yield*/, this.filterCipherType(t, true)];
                                    case 6:
                                        _a.sent();
                                        return [3 /*break*/, 11];
                                    case 7:
                                        if (!qParams.collectionId) return [3 /*break*/, 9];
                                        this.groupingsComponent.selectedCollectionId = qParams.collectionId;
                                        return [4 /*yield*/, this.filterCollection(qParams.collectionId, true)];
                                    case 8:
                                        _a.sent();
                                        return [3 /*break*/, 11];
                                    case 9:
                                        this.groupingsComponent.selectedAll = true;
                                        return [4 /*yield*/, this.ciphersComponent.load()];
                                    case 10:
                                        _a.sent();
                                        _a.label = 11;
                                    case 11:
                                        this.ciphersComponent.searchText = this.groupingsComponent.searchText = qParams.search;
                                        if (qParams.viewEvents != null) {
                                            cipher = this.ciphersComponent.ciphers.filter(function (c) { return c.id === qParams.viewEvents; });
                                            if (cipher.length > 0) {
                                                this.viewEvents(cipher[0]);
                                            }
                                        }
                                        return [2 /*return*/];
                                }
                            });
                        }); });
                        return [2 /*return*/];
                }
            });
        }); });
    };
    VaultComponent.prototype.clearGroupingFilters = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.ciphersComponent.showAddNew = true;
                        this.groupingsComponent.searchPlaceholder = this.i18nService.t('searchVault');
                        return [4 /*yield*/, this.ciphersComponent.applyFilter()];
                    case 1:
                        _a.sent();
                        this.clearFilters();
                        this.go();
                        return [2 /*return*/];
                }
            });
        });
    };
    VaultComponent.prototype.filterCipherType = function (type, load) {
        if (load === void 0) { load = false; }
        return __awaiter(this, void 0, void 0, function () {
            var filter;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.ciphersComponent.showAddNew = true;
                        this.groupingsComponent.searchPlaceholder = this.i18nService.t('searchType');
                        filter = function (c) { return c.type === type; };
                        if (!load) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.ciphersComponent.load(filter)];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.ciphersComponent.applyFilter(filter)];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4:
                        this.clearFilters();
                        this.type = type;
                        this.go();
                        return [2 /*return*/];
                }
            });
        });
    };
    VaultComponent.prototype.filterCollection = function (collectionId, load) {
        if (load === void 0) { load = false; }
        return __awaiter(this, void 0, void 0, function () {
            var filter;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.ciphersComponent.showAddNew = false;
                        this.groupingsComponent.searchPlaceholder = this.i18nService.t('searchCollection');
                        filter = function (c) {
                            if (collectionId === 'unassigned') {
                                return c.collectionIds == null || c.collectionIds.length === 0;
                            }
                            else {
                                return c.collectionIds.indexOf(collectionId) > -1;
                            }
                        };
                        if (!load) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.ciphersComponent.load(filter)];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.ciphersComponent.applyFilter(filter)];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4:
                        this.clearFilters();
                        this.collectionId = collectionId;
                        this.go();
                        return [2 /*return*/];
                }
            });
        });
    };
    VaultComponent.prototype.filterSearchText = function (searchText) {
        this.ciphersComponent.searchText = searchText;
    };
    VaultComponent.prototype.editCipherAttachments = function (cipher) {
        var _this = this;
        if (this.organization.maxStorageGb == null || this.organization.maxStorageGb === 0) {
            this.messagingService.send('upgradeOrganization', { organizationId: cipher.organizationId });
            return;
        }
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.attachmentsModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(attachments_component_1.AttachmentsComponent, this.attachmentsModalRef);
        childComponent.organization = this.organization;
        childComponent.cipherId = cipher.id;
        var madeAttachmentChanges = false;
        childComponent.onUploadedAttachment.subscribe(function () { return madeAttachmentChanges = true; });
        childComponent.onDeletedAttachment.subscribe(function () { return madeAttachmentChanges = true; });
        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal = null;
                        if (!madeAttachmentChanges) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        madeAttachmentChanges = false;
                        return [2 /*return*/];
                }
            });
        }); });
    };
    VaultComponent.prototype.editCipherCollections = function (cipher) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.collectionsModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(collections_component_1.CollectionsComponent, this.collectionsModalRef);
        if (this.organization.isAdmin) {
            childComponent.collectionIds = cipher.collectionIds;
            childComponent.collections = this.groupingsComponent.collections.filter(function (c) { return !c.readOnly; });
        }
        childComponent.organization = this.organization;
        childComponent.cipherId = cipher.id;
        childComponent.onSavedCollections.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal.close();
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.modal = null;
                return [2 /*return*/];
            });
        }); });
    };
    VaultComponent.prototype.addCipher = function () {
        var component = this.editCipher(null);
        component.type = this.type;
    };
    VaultComponent.prototype.editCipher = function (cipher) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.cipherAddEditModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(add_edit_component_1.AddEditComponent, this.cipherAddEditModalRef);
        childComponent.organization = this.organization;
        childComponent.cipherId = cipher == null ? null : cipher.id;
        childComponent.onSavedCipher.subscribe(function (c) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal.close();
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        childComponent.onDeletedCipher.subscribe(function (c) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal.close();
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
        return childComponent;
    };
    VaultComponent.prototype.viewEvents = function (cipher) {
        return __awaiter(this, void 0, void 0, function () {
            var factory, childComponent;
            var _this = this;
            return __generator(this, function (_a) {
                if (this.modal != null) {
                    this.modal.close();
                }
                factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
                this.modal = this.eventsModalRef.createComponent(factory).instance;
                childComponent = this.modal.show(entity_events_component_1.EntityEventsComponent, this.eventsModalRef);
                childComponent.name = cipher.name;
                childComponent.organizationId = this.organization.id;
                childComponent.entityId = cipher.id;
                childComponent.showUser = true;
                childComponent.entity = 'cipher';
                this.modal.onClosed.subscribe(function () {
                    _this.modal = null;
                });
                return [2 /*return*/];
            });
        });
    };
    VaultComponent.prototype.clearFilters = function () {
        this.collectionId = null;
        this.type = null;
    };
    VaultComponent.prototype.go = function (queryParams) {
        if (queryParams === void 0) { queryParams = null; }
        if (queryParams == null) {
            queryParams = {
                type: this.type,
                collectionId: this.collectionId,
            };
        }
        var url = this.router.createUrlTree(['organizations', this.organization.id, 'vault'], { queryParams: queryParams }).toString();
        this.location.go(url);
    };
    __decorate([
        core_1.ViewChild(groupings_component_1.GroupingsComponent),
        __metadata("design:type", groupings_component_1.GroupingsComponent)
    ], VaultComponent.prototype, "groupingsComponent", void 0);
    __decorate([
        core_1.ViewChild(ciphers_component_1.CiphersComponent),
        __metadata("design:type", ciphers_component_1.CiphersComponent)
    ], VaultComponent.prototype, "ciphersComponent", void 0);
    __decorate([
        core_1.ViewChild('attachments', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "attachmentsModalRef", void 0);
    __decorate([
        core_1.ViewChild('cipherAddEdit', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "cipherAddEditModalRef", void 0);
    __decorate([
        core_1.ViewChild('collections', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "collectionsModalRef", void 0);
    __decorate([
        core_1.ViewChild('eventsTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "eventsModalRef", void 0);
    VaultComponent = __decorate([
        core_1.Component({
            selector: 'app-org-vault',
            template: __webpack_require__(/*! ./vault.component.html */ "./src/app/organizations/vault/vault.component.html"),
        }),
        __metadata("design:paramtypes", [router_1.ActivatedRoute, user_service_1.UserService,
            common_1.Location, router_1.Router,
            sync_service_1.SyncService, i18n_service_1.I18nService,
            core_1.ComponentFactoryResolver, messaging_service_1.MessagingService])
    ], VaultComponent);
    return VaultComponent;
}());
exports.VaultComponent = VaultComponent;


/***/ }),

/***/ "./src/app/services/event.service.ts":
/*!*******************************************!*\
  !*** ./src/app/services/event.service.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var deviceType_1 = __webpack_require__(/*! jslib/enums/deviceType */ "./jslib/src/enums/deviceType.ts");
var eventType_1 = __webpack_require__(/*! jslib/enums/eventType */ "./jslib/src/enums/eventType.ts");
var EventService = /** @class */ (function () {
    function EventService(i18nService) {
        this.i18nService = i18nService;
    }
    EventService.prototype.getDefaultDateFilters = function () {
        var d = new Date();
        var end = new Date(d.getFullYear(), d.getMonth(), d.getDate(), 23, 59);
        d.setDate(d.getDate() - 30);
        var start = new Date(d.getFullYear(), d.getMonth(), d.getDate(), 0, 0);
        return [this.toDateTimeLocalString(start), this.toDateTimeLocalString(end)];
    };
    EventService.prototype.formatDateFilters = function (filterStart, filterEnd) {
        var start = new Date(filterStart);
        var end = new Date(filterEnd + ':59.999');
        if (isNaN(start.getTime()) || isNaN(end.getTime()) || end < start) {
            throw new Error('Invalid date range.');
        }
        return [start.toISOString(), end.toISOString()];
    };
    EventService.prototype.getEventInfo = function (ev, options) {
        if (options === void 0) { options = new EventOptions(); }
        var appInfo = this.getAppInfo(ev.deviceType);
        return {
            message: this.getEventMessage(ev, options),
            appIcon: appInfo[0],
            appName: appInfo[1],
        };
    };
    EventService.prototype.getEventMessage = function (ev, options) {
        var msg = '';
        switch (ev.type) {
            // User
            case eventType_1.EventType.User_LoggedIn:
                msg = this.i18nService.t('loggedIn');
                break;
            case eventType_1.EventType.User_ChangedPassword:
                msg = this.i18nService.t('changedPassword');
                break;
            case eventType_1.EventType.User_Enabled2fa:
                msg = this.i18nService.t('enabled2fa');
                break;
            case eventType_1.EventType.User_Disabled2fa:
                msg = this.i18nService.t('disabled2fa');
                break;
            case eventType_1.EventType.User_Recovered2fa:
                msg = this.i18nService.t('recovered2fa');
                break;
            case eventType_1.EventType.User_FailedLogIn:
                msg = this.i18nService.t('failedLogin');
                break;
            case eventType_1.EventType.User_FailedLogIn2fa:
                msg = this.i18nService.t('failedLogin2fa');
                break;
            // Cipher
            case eventType_1.EventType.Cipher_Created:
                msg = this.i18nService.t('createdItemId', this.formatCipherId(ev, options));
                break;
            case eventType_1.EventType.Cipher_Updated:
                msg = this.i18nService.t('editedItemId', this.formatCipherId(ev, options));
                break;
            case eventType_1.EventType.Cipher_Deleted:
                msg = this.i18nService.t('deletedItemId', this.formatCipherId(ev, options));
                break;
            case eventType_1.EventType.Cipher_AttachmentCreated:
                msg = this.i18nService.t('createdAttachmentForItem', this.formatCipherId(ev, options));
                break;
            case eventType_1.EventType.Cipher_AttachmentDeleted:
                msg = this.i18nService.t('deletedAttachmentForItem', this.formatCipherId(ev, options));
                break;
            case eventType_1.EventType.Cipher_Shared:
                msg = this.i18nService.t('sharedItemId', this.formatCipherId(ev, options));
                break;
            case eventType_1.EventType.Cipher_UpdatedCollections:
                msg = this.i18nService.t('editedCollectionsForItem', this.formatCipherId(ev, options));
                break;
            // Collection
            case eventType_1.EventType.Collection_Created:
                msg = this.i18nService.t('createdCollectionId', this.formatCollectionId(ev));
                break;
            case eventType_1.EventType.Collection_Updated:
                msg = this.i18nService.t('editedCollectionId', this.formatCollectionId(ev));
                break;
            case eventType_1.EventType.Collection_Deleted:
                msg = this.i18nService.t('deletedCollectionId', this.formatCollectionId(ev));
                break;
            // Group
            case eventType_1.EventType.Group_Created:
                msg = this.i18nService.t('createdGroupId', this.formatGroupId(ev));
                break;
            case eventType_1.EventType.Group_Updated:
                msg = this.i18nService.t('editedGroupId', this.formatGroupId(ev));
                break;
            case eventType_1.EventType.Group_Deleted:
                msg = this.i18nService.t('deletedGroupId', this.formatGroupId(ev));
                break;
            // Org user
            case eventType_1.EventType.OrganizationUser_Invited:
                msg = this.i18nService.t('invitedUserId', this.formatOrgUserId(ev));
                break;
            case eventType_1.EventType.OrganizationUser_Confirmed:
                msg = this.i18nService.t('confirmedUserId', this.formatOrgUserId(ev));
                break;
            case eventType_1.EventType.OrganizationUser_Updated:
                msg = this.i18nService.t('editedUserId', this.formatOrgUserId(ev));
                break;
            case eventType_1.EventType.OrganizationUser_Removed:
                msg = this.i18nService.t('removedUserId', this.formatOrgUserId(ev));
                break;
            case eventType_1.EventType.OrganizationUser_UpdatedGroups:
                msg = this.i18nService.t('editedGroupsForUser', this.formatOrgUserId(ev));
                break;
            // Org
            case eventType_1.EventType.Organization_Updated:
                msg = this.i18nService.t('editedOrgSettings');
                break;
            default:
                break;
        }
        return msg === '' ? null : msg;
    };
    EventService.prototype.getAppInfo = function (deviceType) {
        switch (deviceType) {
            case deviceType_1.DeviceType.Android:
                return ['fa-android', this.i18nService.t('mobile') + ' - Android'];
            case deviceType_1.DeviceType.iOS:
                return ['fa-apple', this.i18nService.t('mobile') + ' - iOS'];
            case deviceType_1.DeviceType.UWP:
                return ['fa-windows', this.i18nService.t('mobile') + ' - Windows'];
            case deviceType_1.DeviceType.ChromeExtension:
                return ['fa-chrome', this.i18nService.t('extension') + ' - Chrome'];
            case deviceType_1.DeviceType.FirefoxExtension:
                return ['fa-firefox', this.i18nService.t('extension') + ' - Firefox'];
            case deviceType_1.DeviceType.OperaExtension:
                return ['fa-opera', this.i18nService.t('extension') + ' - Opera'];
            case deviceType_1.DeviceType.EdgeExtension:
                return ['fa-edge', this.i18nService.t('extension') + ' - Edge'];
            case deviceType_1.DeviceType.VivaldiExtension:
                return ['fa-puzzle-piece', this.i18nService.t('extension') + ' - Vivaldi'];
            case deviceType_1.DeviceType.SafariExtension:
                return ['fa-safari', this.i18nService.t('extension') + ' - Safari'];
            case deviceType_1.DeviceType.WindowsDesktop:
                return ['fa-windows', this.i18nService.t('desktop') + ' - Windows'];
            case deviceType_1.DeviceType.MacOsDesktop:
                return ['fa-apple', this.i18nService.t('desktop') + ' - macOS'];
            case deviceType_1.DeviceType.LinuxDesktop:
                return ['fa-linux', this.i18nService.t('desktop') + ' - Linux'];
            case deviceType_1.DeviceType.ChromeBrowser:
                return ['fa-globe', this.i18nService.t('webVault') + ' - Chrome'];
            case deviceType_1.DeviceType.FirefoxBrowser:
                return ['fa-globe', this.i18nService.t('webVault') + ' - Firefox'];
            case deviceType_1.DeviceType.OperaBrowser:
                return ['fa-globe', this.i18nService.t('webVault') + ' - Opera'];
            case deviceType_1.DeviceType.SafariBrowser:
                return ['fa-globe', this.i18nService.t('webVault') + ' - Safari'];
            case deviceType_1.DeviceType.VivaldiBrowser:
                return ['fa-globe', this.i18nService.t('webVault') + ' - Vivaldi'];
            case deviceType_1.DeviceType.EdgeBrowser:
                return ['fa-globe', this.i18nService.t('webVault') + ' - Edge'];
            case deviceType_1.DeviceType.IEBrowser:
                return ['fa-globe', this.i18nService.t('webVault') + ' - IE'];
            case deviceType_1.DeviceType.UnknownBrowser:
                return ['fa-globe', this.i18nService.t('webVault') + ' - ' + this.i18nService.t('unknown')];
            default:
                return ['fa-globe', this.i18nService.t('unknown')];
        }
    };
    EventService.prototype.formatCipherId = function (ev, options) {
        var shortId = this.getShortId(ev.cipherId);
        if (ev.organizationId == null || !options.cipherInfo) {
            return '<code>' + shortId + '</code>';
        }
        var a = this.makeAnchor(shortId);
        a.setAttribute('href', '#/organizations/' + ev.organizationId + '/vault?search=' + shortId +
            '&viewEvents=' + ev.cipherId);
        return a.outerHTML;
    };
    EventService.prototype.formatGroupId = function (ev) {
        var shortId = this.getShortId(ev.groupId);
        var a = this.makeAnchor(shortId);
        a.setAttribute('href', '#/organizations/' + ev.organizationId + '/manage/groups?search=' + shortId);
        return a.outerHTML;
    };
    EventService.prototype.formatCollectionId = function (ev) {
        var shortId = this.getShortId(ev.collectionId);
        var a = this.makeAnchor(shortId);
        a.setAttribute('href', '#/organizations/' + ev.organizationId + '/manage/collections?search=' + shortId);
        return a.outerHTML;
    };
    EventService.prototype.formatOrgUserId = function (ev) {
        var shortId = this.getShortId(ev.organizationUserId);
        var a = this.makeAnchor(shortId);
        a.setAttribute('href', '#/organizations/' + ev.organizationId + '/manage/people?search=' + shortId +
            '&viewEvents=' + ev.organizationUserId);
        return a.outerHTML;
    };
    EventService.prototype.makeAnchor = function (shortId) {
        var a = document.createElement('a');
        a.title = this.i18nService.t('view');
        a.innerHTML = '<code>' + shortId + '</code>';
        return a;
    };
    EventService.prototype.getShortId = function (id) {
        return id.substring(0, 8);
    };
    EventService.prototype.toDateTimeLocalString = function (date) {
        return date.getFullYear() +
            '-' + this.pad(date.getMonth() + 1) +
            '-' + this.pad(date.getDate()) +
            'T' + this.pad(date.getHours()) +
            ':' + this.pad(date.getMinutes());
    };
    EventService.prototype.pad = function (num) {
        var norm = Math.floor(Math.abs(num));
        return (norm < 10 ? '0' : '') + norm;
    };
    EventService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [i18n_service_1.I18nService])
    ], EventService);
    return EventService;
}());
exports.EventService = EventService;
var EventInfo = /** @class */ (function () {
    function EventInfo() {
    }
    return EventInfo;
}());
exports.EventInfo = EventInfo;
var EventOptions = /** @class */ (function () {
    function EventOptions() {
        this.cipherInfo = true;
    }
    return EventOptions;
}());
exports.EventOptions = EventOptions;


/***/ }),

/***/ "./src/app/services/organization-guard.service.ts":
/*!********************************************************!*\
  !*** ./src/app/services/organization-guard.service.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var OrganizationGuardService = /** @class */ (function () {
    function OrganizationGuardService(userService, router) {
        this.userService = userService;
        this.router = router;
    }
    OrganizationGuardService.prototype.canActivate = function (route) {
        return __awaiter(this, void 0, void 0, function () {
            var org;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getOrganization(route.params.organizationId)];
                    case 1:
                        org = _a.sent();
                        if (org == null) {
                            this.router.navigate(['/']);
                            return [2 /*return*/, false];
                        }
                        return [2 /*return*/, true];
                }
            });
        });
    };
    OrganizationGuardService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [user_service_1.UserService, router_1.Router])
    ], OrganizationGuardService);
    return OrganizationGuardService;
}());
exports.OrganizationGuardService = OrganizationGuardService;


/***/ }),

/***/ "./src/app/services/organization-type-guard.service.ts":
/*!*************************************************************!*\
  !*** ./src/app/services/organization-type-guard.service.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var OrganizationTypeGuardService = /** @class */ (function () {
    function OrganizationTypeGuardService(userService, router) {
        this.userService = userService;
        this.router = router;
    }
    OrganizationTypeGuardService.prototype.canActivate = function (route) {
        return __awaiter(this, void 0, void 0, function () {
            var org, allowedTypes;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getOrganization(route.parent.params.organizationId)];
                    case 1:
                        org = _a.sent();
                        allowedTypes = route.data == null ? null : route.data.allowedTypes;
                        if (allowedTypes == null || allowedTypes.indexOf(org.type) === -1) {
                            this.router.navigate(['/organizations', org.id]);
                            return [2 /*return*/, false];
                        }
                        return [2 /*return*/, true];
                }
            });
        });
    };
    OrganizationTypeGuardService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [user_service_1.UserService, router_1.Router])
    ], OrganizationTypeGuardService);
    return OrganizationTypeGuardService;
}());
exports.OrganizationTypeGuardService = OrganizationTypeGuardService;


/***/ }),

/***/ "./src/app/services/router.service.ts":
/*!********************************************!*\
  !*** ./src/app/services/router.service.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var platform_browser_1 = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/esm5/platform-browser.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var RouterService = /** @class */ (function () {
    function RouterService(router, activatedRoute, titleService, i18nService) {
        var _this = this;
        this.router = router;
        this.activatedRoute = activatedRoute;
        this.titleService = titleService;
        this.i18nService = i18nService;
        this.previousUrl = undefined;
        this.currentUrl = undefined;
        this.currentUrl = this.router.url;
        router.events.subscribe(function (event) {
            if (event instanceof router_1.NavigationEnd) {
                _this.previousUrl = _this.currentUrl;
                _this.currentUrl = event.url;
                var title = i18nService.t('pageTitle', 'Bitwarden');
                var titleId = null;
                var rawTitle = null;
                var child = _this.activatedRoute.firstChild;
                while (child != null) {
                    if (child.firstChild != null) {
                        child = child.firstChild;
                    }
                    else if (child.snapshot.data != null && child.snapshot.data.title != null) {
                        rawTitle = child.snapshot.data.title;
                        break;
                    }
                    else if (child.snapshot.data != null && child.snapshot.data.titleId != null) {
                        titleId = child.snapshot.data.titleId;
                        break;
                    }
                    else {
                        titleId = null;
                        rawTitle = null;
                        break;
                    }
                }
                if (titleId != null || rawTitle != null) {
                    var newTitle = rawTitle != null ? rawTitle : i18nService.t(titleId);
                    if (newTitle != null && newTitle !== '') {
                        title = (newTitle + ' | ' + title);
                    }
                }
                _this.titleService.setTitle(title);
            }
        });
    }
    RouterService.prototype.getPreviousUrl = function () {
        return this.previousUrl;
    };
    RouterService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [router_1.Router, router_1.ActivatedRoute,
            platform_browser_1.Title, i18n_service_1.I18nService])
    ], RouterService);
    return RouterService;
}());
exports.RouterService = RouterService;


/***/ }),

/***/ "./src/app/services/services.module.ts":
/*!*********************************************!*\
  !*** ./src/app/services/services.module.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var _this = this;
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var broadcasterMessaging_service_1 = __webpack_require__(/*! ../../services/broadcasterMessaging.service */ "./src/services/broadcasterMessaging.service.ts");
var htmlStorage_service_1 = __webpack_require__(/*! ../../services/htmlStorage.service */ "./src/services/htmlStorage.service.ts");
var i18n_service_1 = __webpack_require__(/*! ../../services/i18n.service */ "./src/services/i18n.service.ts");
var memoryStorage_service_1 = __webpack_require__(/*! ../../services/memoryStorage.service */ "./src/services/memoryStorage.service.ts");
var webPlatformUtils_service_1 = __webpack_require__(/*! ../../services/webPlatformUtils.service */ "./src/services/webPlatformUtils.service.ts");
var event_service_1 = __webpack_require__(/*! ./event.service */ "./src/app/services/event.service.ts");
var organization_guard_service_1 = __webpack_require__(/*! ./organization-guard.service */ "./src/app/services/organization-guard.service.ts");
var organization_type_guard_service_1 = __webpack_require__(/*! ./organization-type-guard.service */ "./src/app/services/organization-type-guard.service.ts");
var router_service_1 = __webpack_require__(/*! ./router.service */ "./src/app/services/router.service.ts");
var unauth_guard_service_1 = __webpack_require__(/*! ./unauth-guard.service */ "./src/app/services/unauth-guard.service.ts");
var auth_guard_service_1 = __webpack_require__(/*! jslib/angular/services/auth-guard.service */ "./jslib/src/angular/services/auth-guard.service.ts");
var broadcaster_service_1 = __webpack_require__(/*! jslib/angular/services/broadcaster.service */ "./jslib/src/angular/services/broadcaster.service.ts");
var validation_service_1 = __webpack_require__(/*! jslib/angular/services/validation.service */ "./jslib/src/angular/services/validation.service.ts");
var analytics_1 = __webpack_require__(/*! jslib/misc/analytics */ "./jslib/src/misc/analytics.ts");
var api_service_1 = __webpack_require__(/*! jslib/services/api.service */ "./jslib/src/services/api.service.ts");
var appId_service_1 = __webpack_require__(/*! jslib/services/appId.service */ "./jslib/src/services/appId.service.ts");
var audit_service_1 = __webpack_require__(/*! jslib/services/audit.service */ "./jslib/src/services/audit.service.ts");
var auth_service_1 = __webpack_require__(/*! jslib/services/auth.service */ "./jslib/src/services/auth.service.ts");
var cipher_service_1 = __webpack_require__(/*! jslib/services/cipher.service */ "./jslib/src/services/cipher.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/services/collection.service */ "./jslib/src/services/collection.service.ts");
var constants_service_1 = __webpack_require__(/*! jslib/services/constants.service */ "./jslib/src/services/constants.service.ts");
var container_service_1 = __webpack_require__(/*! jslib/services/container.service */ "./jslib/src/services/container.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/services/crypto.service */ "./jslib/src/services/crypto.service.ts");
var environment_service_1 = __webpack_require__(/*! jslib/services/environment.service */ "./jslib/src/services/environment.service.ts");
var export_service_1 = __webpack_require__(/*! jslib/services/export.service */ "./jslib/src/services/export.service.ts");
var folder_service_1 = __webpack_require__(/*! jslib/services/folder.service */ "./jslib/src/services/folder.service.ts");
var lock_service_1 = __webpack_require__(/*! jslib/services/lock.service */ "./jslib/src/services/lock.service.ts");
var passwordGeneration_service_1 = __webpack_require__(/*! jslib/services/passwordGeneration.service */ "./jslib/src/services/passwordGeneration.service.ts");
var settings_service_1 = __webpack_require__(/*! jslib/services/settings.service */ "./jslib/src/services/settings.service.ts");
var state_service_1 = __webpack_require__(/*! jslib/services/state.service */ "./jslib/src/services/state.service.ts");
var sync_service_1 = __webpack_require__(/*! jslib/services/sync.service */ "./jslib/src/services/sync.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/services/token.service */ "./jslib/src/services/token.service.ts");
var totp_service_1 = __webpack_require__(/*! jslib/services/totp.service */ "./jslib/src/services/totp.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/services/user.service */ "./jslib/src/services/user.service.ts");
var webCryptoFunction_service_1 = __webpack_require__(/*! jslib/services/webCryptoFunction.service */ "./jslib/src/services/webCryptoFunction.service.ts");
var api_service_2 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var audit_service_2 = __webpack_require__(/*! jslib/abstractions/audit.service */ "./jslib/src/abstractions/audit.service.ts");
var auth_service_2 = __webpack_require__(/*! jslib/abstractions/auth.service */ "./jslib/src/abstractions/auth.service.ts");
var cipher_service_2 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var collection_service_2 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var crypto_service_2 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var environment_service_2 = __webpack_require__(/*! jslib/abstractions/environment.service */ "./jslib/src/abstractions/environment.service.ts");
var export_service_2 = __webpack_require__(/*! jslib/abstractions/export.service */ "./jslib/src/abstractions/export.service.ts");
var folder_service_2 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var i18n_service_2 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var lock_service_2 = __webpack_require__(/*! jslib/abstractions/lock.service */ "./jslib/src/abstractions/lock.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var passwordGeneration_service_2 = __webpack_require__(/*! jslib/abstractions/passwordGeneration.service */ "./jslib/src/abstractions/passwordGeneration.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var settings_service_2 = __webpack_require__(/*! jslib/abstractions/settings.service */ "./jslib/src/abstractions/settings.service.ts");
var state_service_2 = __webpack_require__(/*! jslib/abstractions/state.service */ "./jslib/src/abstractions/state.service.ts");
var storage_service_1 = __webpack_require__(/*! jslib/abstractions/storage.service */ "./jslib/src/abstractions/storage.service.ts");
var sync_service_2 = __webpack_require__(/*! jslib/abstractions/sync.service */ "./jslib/src/abstractions/sync.service.ts");
var token_service_2 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var totp_service_2 = __webpack_require__(/*! jslib/abstractions/totp.service */ "./jslib/src/abstractions/totp.service.ts");
var user_service_2 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var i18nService = new i18n_service_1.I18nService(window.navigator.language, 'locales');
var stateService = new state_service_1.StateService();
var broadcasterService = new broadcaster_service_1.BroadcasterService();
var messagingService = new broadcasterMessaging_service_1.BroadcasterMessagingService(broadcasterService);
var platformUtilsService = new webPlatformUtils_service_1.WebPlatformUtilsService(i18nService);
var storageService = new htmlStorage_service_1.HtmlStorageService(platformUtilsService);
var secureStorageService = new memoryStorage_service_1.MemoryStorageService();
var cryptoFunctionService = new webCryptoFunction_service_1.WebCryptoFunctionService(window, platformUtilsService);
var cryptoService = new crypto_service_1.CryptoService(storageService, platformUtilsService.isDev() ? storageService : secureStorageService, cryptoFunctionService);
var tokenService = new token_service_1.TokenService(storageService);
var appIdService = new appId_service_1.AppIdService(storageService);
var apiService = new api_service_1.ApiService(tokenService, platformUtilsService, function (expired) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {
    return [2 /*return*/, messagingService.send('logout', { expired: expired })];
}); }); });
var environmentService = new environment_service_1.EnvironmentService(apiService, storageService);
var userService = new user_service_1.UserService(tokenService, storageService);
var settingsService = new settings_service_1.SettingsService(userService, storageService);
var cipherService = new cipher_service_1.CipherService(cryptoService, userService, settingsService, apiService, storageService, i18nService, platformUtilsService);
var folderService = new folder_service_1.FolderService(cryptoService, userService, apiService, storageService, i18nService, cipherService);
var collectionService = new collection_service_1.CollectionService(cryptoService, userService, storageService, i18nService);
var lockService = new lock_service_1.LockService(cipherService, folderService, collectionService, cryptoService, platformUtilsService, storageService, messagingService, null);
var syncService = new sync_service_1.SyncService(userService, apiService, settingsService, folderService, cipherService, cryptoService, collectionService, storageService, messagingService, function (expired) { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {
    return [2 /*return*/, messagingService.send('logout', { expired: expired })];
}); }); });
var passwordGenerationService = new passwordGeneration_service_1.PasswordGenerationService(cryptoService, storageService);
var totpService = new totp_service_1.TotpService(storageService, cryptoFunctionService);
var containerService = new container_service_1.ContainerService(cryptoService, platformUtilsService);
var authService = new auth_service_1.AuthService(cryptoService, apiService, userService, tokenService, appIdService, i18nService, platformUtilsService, messagingService);
var exportService = new export_service_1.ExportService(folderService, cipherService, apiService);
var auditService = new audit_service_1.AuditService(cryptoFunctionService, apiService);
var analytics = new analytics_1.Analytics(window, function () { return platformUtilsService.isDev() || platformUtilsService.isSelfHost(); }, platformUtilsService, storageService, appIdService);
containerService.attachToWindow(window);
function initFactory() {
    var _this = this;
    return function () { return __awaiter(_this, void 0, void 0, function () {
        var isDev, locale, htmlEl, theme, _a, _b, _c;
        return __generator(this, function (_d) {
            switch (_d.label) {
                case 0: return [4 /*yield*/, storageService.init()];
                case 1:
                    _d.sent();
                    isDev = platformUtilsService.isDev();
                    if (!isDev && platformUtilsService.isSelfHost()) {
                        environmentService.baseUrl = window.location.origin;
                    }
                    return [4 /*yield*/, apiService.setUrls({
                            base: window.location.origin,
                            api: "https://sescy7k390.execute-api.us-east-1.amazonaws.com/prod",
                            identity: "https://sescy7k390.execute-api.us-east-1.amazonaws.com/prod",
                        })];
                case 2:
                    _d.sent();
                    lockService.init(true);
                    return [4 /*yield*/, storageService.get(constants_service_1.ConstantsService.localeKey)];
                case 3:
                    locale = _d.sent();
                    return [4 /*yield*/, i18nService.init(locale)];
                case 4:
                    _d.sent();
                    return [4 /*yield*/, authService.init()];
                case 5:
                    _d.sent();
                    htmlEl = window.document.documentElement;
                    htmlEl.classList.add('locale_' + i18nService.translationLocale);
                    return [4 /*yield*/, storageService.get(constants_service_1.ConstantsService.themeKey)];
                case 6:
                    theme = _d.sent();
                    if (theme == null) {
                        theme = 'light';
                    }
                    htmlEl.classList.add('theme_' + theme);
                    _b = (_a = stateService).save;
                    _c = [constants_service_1.ConstantsService.disableFaviconKey];
                    return [4 /*yield*/, storageService.get(constants_service_1.ConstantsService.disableFaviconKey)];
                case 7:
                    _b.apply(_a, _c.concat([_d.sent()]));
                    return [2 /*return*/];
            }
        });
    }); };
}
exports.initFactory = initFactory;
var ServicesModule = /** @class */ (function () {
    function ServicesModule() {
    }
    ServicesModule = __decorate([
        core_1.NgModule({
            imports: [
                angular2_toaster_1.ToasterModule,
            ],
            declarations: [],
            providers: [
                validation_service_1.ValidationService,
                auth_guard_service_1.AuthGuardService,
                organization_guard_service_1.OrganizationGuardService,
                organization_type_guard_service_1.OrganizationTypeGuardService,
                unauth_guard_service_1.UnauthGuardService,
                router_service_1.RouterService,
                event_service_1.EventService,
                { provide: audit_service_2.AuditService, useValue: auditService },
                { provide: auth_service_2.AuthService, useValue: authService },
                { provide: cipher_service_2.CipherService, useValue: cipherService },
                { provide: folder_service_2.FolderService, useValue: folderService },
                { provide: collection_service_2.CollectionService, useValue: collectionService },
                { provide: environment_service_2.EnvironmentService, useValue: environmentService },
                { provide: totp_service_2.TotpService, useValue: totpService },
                { provide: token_service_2.TokenService, useValue: tokenService },
                { provide: i18n_service_2.I18nService, useValue: i18nService },
                { provide: crypto_service_2.CryptoService, useValue: cryptoService },
                { provide: platformUtils_service_1.PlatformUtilsService, useValue: platformUtilsService },
                { provide: passwordGeneration_service_2.PasswordGenerationService, useValue: passwordGenerationService },
                { provide: api_service_2.ApiService, useValue: apiService },
                { provide: sync_service_2.SyncService, useValue: syncService },
                { provide: user_service_2.UserService, useValue: userService },
                { provide: messaging_service_1.MessagingService, useValue: messagingService },
                { provide: broadcaster_service_1.BroadcasterService, useValue: broadcasterService },
                { provide: settings_service_2.SettingsService, useValue: settingsService },
                { provide: lock_service_2.LockService, useValue: lockService },
                { provide: storage_service_1.StorageService, useValue: storageService },
                { provide: state_service_2.StateService, useValue: stateService },
                { provide: export_service_2.ExportService, useValue: exportService },
                {
                    provide: core_1.APP_INITIALIZER,
                    useFactory: initFactory,
                    deps: [],
                    multi: true,
                },
                {
                    provide: core_1.LOCALE_ID,
                    useFactory: function () { return i18nService.translationLocale; },
                    deps: [],
                },
            ],
        })
    ], ServicesModule);
    return ServicesModule;
}());
exports.ServicesModule = ServicesModule;


/***/ }),

/***/ "./src/app/services/unauth-guard.service.ts":
/*!**************************************************!*\
  !*** ./src/app/services/unauth-guard.service.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var UnauthGuardService = /** @class */ (function () {
    function UnauthGuardService(cryptoService, userService, router) {
        this.cryptoService = cryptoService;
        this.userService = userService;
        this.router = router;
    }
    UnauthGuardService.prototype.canActivate = function () {
        return __awaiter(this, void 0, void 0, function () {
            var isAuthed, hasKey;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.isAuthenticated()];
                    case 1:
                        isAuthed = _a.sent();
                        if (!isAuthed) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.cryptoService.hasKey()];
                    case 2:
                        hasKey = _a.sent();
                        if (!hasKey) {
                            this.router.navigate(['lock']);
                        }
                        else {
                            this.router.navigate(['vault']);
                        }
                        return [2 /*return*/, false];
                    case 3: return [2 /*return*/, true];
                }
            });
        });
    };
    UnauthGuardService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [crypto_service_1.CryptoService, user_service_1.UserService,
            router_1.Router])
    ], UnauthGuardService);
    return UnauthGuardService;
}());
exports.UnauthGuardService = UnauthGuardService;


/***/ }),

/***/ "./src/app/settings/account.component.html":
/*!*************************************************!*\
  !*** ./src/app/settings/account.component.html ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>{{'myAccount' | i18n}}</h1>\n</div>\n<app-profile></app-profile>\n<div class=\"secondary-header\">\n    <h1>{{'changeEmail' | i18n}}</h1>\n</div>\n<app-change-email></app-change-email>\n<div class=\"secondary-header\">\n    <h1>{{'changeMasterPassword' | i18n}}</h1>\n</div>\n<app-change-password></app-change-password>\n<div class=\"secondary-header text-danger border-0 mb-0\">\n    <h1>{{'dangerZone' | i18n}}</h1>\n</div>\n<div class=\"card border-danger\">\n    <div class=\"card-body\">\n        <p>{{'dangerZoneDesc' | i18n}}</p>\n        <button type=\"button\" class=\"btn btn-outline-danger\" (click)=\"deauthorizeSessions()\">{{'deauthorizeSessions' | i18n}}</button>\n        <button type=\"button\" class=\"btn btn-outline-danger\" (click)=\"purgeVault()\">{{'purgeVault' | i18n}}</button>\n        <button type=\"button\" class=\"btn btn-outline-danger\" (click)=\"deleteAccount()\">{{'deleteAccount' | i18n}}</button>\n    </div>\n</div>\n<ng-template #deauthorizeSessionsTemplate></ng-template>\n<ng-template #purgeVaultTemplate></ng-template>\n<ng-template #deleteAccountTemplate></ng-template>\n";

/***/ }),

/***/ "./src/app/settings/account.component.ts":
/*!***********************************************!*\
  !*** ./src/app/settings/account.component.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var modal_component_1 = __webpack_require__(/*! ../modal.component */ "./src/app/modal.component.ts");
var deauthorize_sessions_component_1 = __webpack_require__(/*! ./deauthorize-sessions.component */ "./src/app/settings/deauthorize-sessions.component.ts");
var delete_account_component_1 = __webpack_require__(/*! ./delete-account.component */ "./src/app/settings/delete-account.component.ts");
var purge_vault_component_1 = __webpack_require__(/*! ./purge-vault.component */ "./src/app/settings/purge-vault.component.ts");
var AccountComponent = /** @class */ (function () {
    function AccountComponent(componentFactoryResolver) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.modal = null;
    }
    AccountComponent.prototype.deauthorizeSessions = function () {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.deauthModalRef.createComponent(factory).instance;
        this.modal.show(deauthorize_sessions_component_1.DeauthorizeSessionsComponent, this.deauthModalRef);
        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.modal = null;
                return [2 /*return*/];
            });
        }); });
    };
    AccountComponent.prototype.purgeVault = function () {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.purgeModalRef.createComponent(factory).instance;
        this.modal.show(purge_vault_component_1.PurgeVaultComponent, this.purgeModalRef);
        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.modal = null;
                return [2 /*return*/];
            });
        }); });
    };
    AccountComponent.prototype.deleteAccount = function () {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.deleteModalRef.createComponent(factory).instance;
        this.modal.show(delete_account_component_1.DeleteAccountComponent, this.deleteModalRef);
        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.modal = null;
                return [2 /*return*/];
            });
        }); });
    };
    __decorate([
        core_1.ViewChild('deauthorizeSessionsTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], AccountComponent.prototype, "deauthModalRef", void 0);
    __decorate([
        core_1.ViewChild('purgeVaultTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], AccountComponent.prototype, "purgeModalRef", void 0);
    __decorate([
        core_1.ViewChild('deleteAccountTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], AccountComponent.prototype, "deleteModalRef", void 0);
    AccountComponent = __decorate([
        core_1.Component({
            selector: 'app-account',
            template: __webpack_require__(/*! ./account.component.html */ "./src/app/settings/account.component.html"),
        }),
        __metadata("design:paramtypes", [core_1.ComponentFactoryResolver])
    ], AccountComponent);
    return AccountComponent;
}());
exports.AccountComponent = AccountComponent;


/***/ }),

/***/ "./src/app/settings/adjust-payment.component.html":
/*!********************************************************!*\
  !*** ./src/app/settings/adjust-payment.component.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<app-callout title=\"{{'contactSupport' | i18n}}\" icon=\"fa-info-circle\" *ngIf=\"!canChange\">\n    <p>{{'contactSupportPaymentMethod' | i18n}}</p>\n    <a href=\"https://bitwarden.com/contact/\" target=\"_blank\" rel=\"noopener\" class=\"btn btn-outline-secondary\">\n        {{'contactSupport' | i18n}}\n    </a>\n    <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"cancel()\">\n        {{'close' | i18n}}\n    </button>\n</app-callout>\n<form #form class=\"card\" (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate *ngIf=\"canChange\">\n    <div class=\"card-body\">\n        <h3 class=\"card-body-header\">{{(currentType != null ? 'changePaymentMethod' : 'addPaymentMethod') | i18n}}</h3>\n        <app-payment [showOptions]=\"organizationId\" [hidePaypal]=\"true\" [hideBank]=\"!organizationId\"></app-payment>\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n            <span>{{'submit' | i18n}}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"cancel()\">\n            {{'cancel' | i18n}}\n        </button>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/adjust-payment.component.ts":
/*!******************************************************!*\
  !*** ./src/app/settings/adjust-payment.component.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var paymentRequest_1 = __webpack_require__(/*! jslib/models/request/paymentRequest */ "./jslib/src/models/request/paymentRequest.ts");
var paymentMethodType_1 = __webpack_require__(/*! jslib/enums/paymentMethodType */ "./jslib/src/enums/paymentMethodType.ts");
var payment_component_1 = __webpack_require__(/*! ./payment.component */ "./src/app/settings/payment.component.ts");
var AdjustPaymentComponent = /** @class */ (function () {
    function AdjustPaymentComponent(apiService, i18nService, analytics, toasterService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.onAdjusted = new core_1.EventEmitter();
        this.onCanceled = new core_1.EventEmitter();
        this.paymentMethodType = paymentMethodType_1.PaymentMethodType;
    }
    AdjustPaymentComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request_1, _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        request_1 = new paymentRequest_1.PaymentRequest();
                        this.formPromise = this.paymentComponent.createPaymentToken().then(function (token) {
                            request_1.paymentToken = token;
                            if (_this.organizationId == null) {
                                return _this.apiService.postAccountPayment(request_1);
                            }
                            else {
                                return _this.apiService.postOrganizationPayment(_this.organizationId, request_1);
                            }
                        });
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _b.sent();
                        this.analytics.eventTrack.next({
                            action: this.currentType == null ? 'Added Payment Method' : 'Changed Payment Method',
                        });
                        this.toasterService.popAsync('success', null, this.i18nService.t('updatedPaymentMethod'));
                        this.onAdjusted.emit();
                        return [3 /*break*/, 3];
                    case 2:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    AdjustPaymentComponent.prototype.cancel = function () {
        this.onCanceled.emit();
    };
    Object.defineProperty(AdjustPaymentComponent.prototype, "canChange", {
        get: function () {
            return this.currentType == null || this.currentType === paymentMethodType_1.PaymentMethodType.Card || this.organizationId != null;
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        core_1.ViewChild(payment_component_1.PaymentComponent),
        __metadata("design:type", payment_component_1.PaymentComponent)
    ], AdjustPaymentComponent.prototype, "paymentComponent", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Number)
    ], AdjustPaymentComponent.prototype, "currentType", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], AdjustPaymentComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AdjustPaymentComponent.prototype, "onAdjusted", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AdjustPaymentComponent.prototype, "onCanceled", void 0);
    AdjustPaymentComponent = __decorate([
        core_1.Component({
            selector: 'app-adjust-payment',
            template: __webpack_require__(/*! ./adjust-payment.component.html */ "./src/app/settings/adjust-payment.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService])
    ], AdjustPaymentComponent);
    return AdjustPaymentComponent;
}());
exports.AdjustPaymentComponent = AdjustPaymentComponent;


/***/ }),

/***/ "./src/app/settings/adjust-storage.component.html":
/*!********************************************************!*\
  !*** ./src/app/settings/adjust-storage.component.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form class=\"card\" (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"card-body\">\n        <h3 class=\"card-body-header\">{{(add ? 'addStorage' : 'removeStorage') | i18n}}</h3>\n        <div class=\"row\">\n            <div class=\"form-group col-6\">\n                <label for=\"storageAdjustment\">{{(add ? 'gbStorageAdd' : 'gbStorageRemove') | i18n}}</label>\n                <input id=\"storageAdjustment\" class=\"form-control\" type=\"number\" name=\"StroageGbAdjustment\" [(ngModel)]=\"storageAdjustment\"\n                    min=\"0\" max=\"99\" step=\"1\" required>\n            </div>\n        </div>\n        <div *ngIf=\"add\" class=\"mb-3\">\n            <strong>{{'total' | i18n}}:</strong> {{storageAdjustment || 0}} GB &times; {{storageGbPrice | currency:'$'}} = {{adjustedStorageTotal\n            | currency:'$'}} /{{interval | i18n}}\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n            <span>{{'submit' | i18n}}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"cancel()\">\n            {{'cancel' | i18n}}\n        </button>\n        <small class=\"d-block text-muted mt-3\">\n            {{(add ? 'storageAddNote' : 'storageRemoveNote') | i18n}}\n        </small>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/adjust-storage.component.ts":
/*!******************************************************!*\
  !*** ./src/app/settings/adjust-storage.component.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var storageRequest_1 = __webpack_require__(/*! jslib/models/request/storageRequest */ "./jslib/src/models/request/storageRequest.ts");
var AdjustStorageComponent = /** @class */ (function () {
    function AdjustStorageComponent(apiService, i18nService, analytics, toasterService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.storageGbPrice = 0;
        this.add = true;
        this.interval = 'year';
        this.onAdjusted = new core_1.EventEmitter();
        this.onCanceled = new core_1.EventEmitter();
        this.storageAdjustment = 0;
    }
    AdjustStorageComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        request = new storageRequest_1.StorageRequest();
                        request.storageGbAdjustment = this.storageAdjustment;
                        if (!this.add) {
                            request.storageGbAdjustment *= -1;
                        }
                        if (this.organizationId == null) {
                            this.formPromise = this.apiService.postAccountStorage(request);
                        }
                        else {
                            this.formPromise = this.apiService.postOrganizationStorage(this.organizationId, request);
                        }
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: this.add ? 'Added Storage' : 'Removed Storage' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('adjustedStorage', request.storageGbAdjustment.toString()));
                        this.onAdjusted.emit(this.storageAdjustment);
                        return [3 /*break*/, 3];
                    case 2:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    AdjustStorageComponent.prototype.cancel = function () {
        this.onCanceled.emit();
    };
    Object.defineProperty(AdjustStorageComponent.prototype, "adjustedStorageTotal", {
        get: function () {
            return this.storageGbPrice * this.storageAdjustment;
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AdjustStorageComponent.prototype, "storageGbPrice", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AdjustStorageComponent.prototype, "add", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], AdjustStorageComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], AdjustStorageComponent.prototype, "interval", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AdjustStorageComponent.prototype, "onAdjusted", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], AdjustStorageComponent.prototype, "onCanceled", void 0);
    AdjustStorageComponent = __decorate([
        core_1.Component({
            selector: 'app-adjust-storage',
            template: __webpack_require__(/*! ./adjust-storage.component.html */ "./src/app/settings/adjust-storage.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService])
    ], AdjustStorageComponent);
    return AdjustStorageComponent;
}());
exports.AdjustStorageComponent = AdjustStorageComponent;


/***/ }),

/***/ "./src/app/settings/change-email.component.html":
/*!******************************************************!*\
  !*** ./src/app/settings/change-email.component.html ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"row\">\n        <div class=\"col-6\">\n            <div class=\"form-group\">\n                <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n                <input id=\"masterPassword\" type=\"password\" name=\"MasterPasswordHash\" class=\"form-control\" [(ngModel)]=\"masterPassword\" required\n                    [readonly]=\"tokenSent\" appInputVerbatim>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"newEmail\">{{'newEmail' | i18n}}</label>\n                <input id=\"newEmail\" class=\"form-control\" type=\"text\" name=\"NewEmail\" [(ngModel)]=\"newEmail\" required [readonly]=\"tokenSent\"\n                    inputmode=\"email\" appInputVerbatim=\"false\">\n            </div>\n        </div>\n    </div>\n    <ng-container *ngIf=\"tokenSent\">\n        <hr>\n        <p>{{'changeEmailDesc' | i18n : newEmail}}</p>\n        <app-callout type=\"warning\">{{'loggedOutWarning' | i18n}}</app-callout>\n        <div class=\"row\">\n            <div class=\"col-6\">\n                <div class=\"form-group\">\n                    <label for=\"token\">{{'code' | i18n}}</label>\n                    <input id=\"token\" class=\"form-control\" type=\"text\" name=\"Token\" [(ngModel)]=\"token\" required appInputVerbatim>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span *ngIf=\"!tokenSent\">{{'continue' | i18n}}</span>\n        <span *ngIf=\"tokenSent\">{{'changeEmail' | i18n}}</span>\n    </button>\n    <button type=\"button\" class=\"btn btn-outline-secondary\" *ngIf=\"tokenSent\" (click)=\"reset()\">\n        {{'cancel' | i18n}}\n    </button>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/change-email.component.ts":
/*!****************************************************!*\
  !*** ./src/app/settings/change-email.component.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var emailRequest_1 = __webpack_require__(/*! jslib/models/request/emailRequest */ "./jslib/src/models/request/emailRequest.ts");
var emailTokenRequest_1 = __webpack_require__(/*! jslib/models/request/emailTokenRequest */ "./jslib/src/models/request/emailTokenRequest.ts");
var ChangeEmailComponent = /** @class */ (function () {
    function ChangeEmailComponent(apiService, i18nService, analytics, toasterService, cryptoService, messagingService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.messagingService = messagingService;
        this.tokenSent = false;
    }
    ChangeEmailComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var hasEncKey, request, _a, _b, request, _c, newKey, _d, encKey, newEncKey, _e;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0: return [4 /*yield*/, this.cryptoService.hasEncKey()];
                    case 1:
                        hasEncKey = _f.sent();
                        if (!hasEncKey) {
                            this.toasterService.popAsync('error', null, this.i18nService.t('updateKey'));
                            return [2 /*return*/];
                        }
                        this.newEmail = this.newEmail.toLowerCase();
                        if (!!this.tokenSent) return [3 /*break*/, 7];
                        request = new emailTokenRequest_1.EmailTokenRequest();
                        request.newEmail = this.newEmail;
                        _a = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, null)];
                    case 2:
                        _a.masterPasswordHash = _f.sent();
                        _f.label = 3;
                    case 3:
                        _f.trys.push([3, 5, , 6]);
                        this.formPromise = this.apiService.postEmailToken(request);
                        return [4 /*yield*/, this.formPromise];
                    case 4:
                        _f.sent();
                        this.tokenSent = true;
                        return [3 /*break*/, 6];
                    case 5:
                        _b = _f.sent();
                        return [3 /*break*/, 6];
                    case 6: return [3 /*break*/, 16];
                    case 7:
                        request = new emailRequest_1.EmailRequest();
                        request.token = this.token;
                        request.newEmail = this.newEmail;
                        _c = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, null)];
                    case 8:
                        _c.masterPasswordHash = _f.sent();
                        return [4 /*yield*/, this.cryptoService.makeKey(this.masterPassword, this.newEmail)];
                    case 9:
                        newKey = _f.sent();
                        _d = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, newKey)];
                    case 10:
                        _d.newMasterPasswordHash = _f.sent();
                        return [4 /*yield*/, this.cryptoService.getEncKey()];
                    case 11:
                        encKey = _f.sent();
                        return [4 /*yield*/, this.cryptoService.encrypt(encKey.key, newKey)];
                    case 12:
                        newEncKey = _f.sent();
                        request.key = newEncKey.encryptedString;
                        _f.label = 13;
                    case 13:
                        _f.trys.push([13, 15, , 16]);
                        this.formPromise = this.apiService.postEmail(request);
                        return [4 /*yield*/, this.formPromise];
                    case 14:
                        _f.sent();
                        this.reset();
                        this.analytics.eventTrack.next({ action: 'Changed Email' });
                        this.toasterService.popAsync('success', this.i18nService.t('emailChanged'), this.i18nService.t('logBackIn'));
                        this.messagingService.send('logout');
                        return [3 /*break*/, 16];
                    case 15:
                        _e = _f.sent();
                        return [3 /*break*/, 16];
                    case 16: return [2 /*return*/];
                }
            });
        });
    };
    ChangeEmailComponent.prototype.reset = function () {
        this.token = this.newEmail = this.masterPassword = null;
        this.tokenSent = false;
    };
    ChangeEmailComponent = __decorate([
        core_1.Component({
            selector: 'app-change-email',
            template: __webpack_require__(/*! ./change-email.component.html */ "./src/app/settings/change-email.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            crypto_service_1.CryptoService, messaging_service_1.MessagingService])
    ], ChangeEmailComponent);
    return ChangeEmailComponent;
}());
exports.ChangeEmailComponent = ChangeEmailComponent;


/***/ }),

/***/ "./src/app/settings/change-password.component.html":
/*!*********************************************************!*\
  !*** ./src/app/settings/change-password.component.html ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<app-callout type=\"warning\">{{'loggedOutWarning' | i18n}}</app-callout>\n<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"row\">\n        <div class=\"col-6\">\n            <div class=\"form-group\">\n                <label for=\"currentMasterPassword\">{{'currentMasterPass' | i18n}}</label>\n                <input id=\"currentMasterPassword\" type=\"password\" name=\"MasterPasswordHash\" class=\"form-control\" [(ngModel)]=\"currentMasterPassword\"\n                    required appInputVerbatim>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"newMasterPassword\">{{'newMasterPass' | i18n}}</label>\n                <input id=\"newMasterPassword\" type=\"password\" name=\"NewMasterPasswordHash\" class=\"form-control\" [(ngModel)]=\"newMasterPassword\"\n                    required appInputVerbatim>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"confirmNewMasterPassword\">{{'confirmNewMasterPass' | i18n}}</label>\n                <input id=\"confirmNewMasterPassword\" type=\"password\" name=\"ConfirmNewMasterPasswordHash\" class=\"form-control\" [(ngModel)]=\"confirmNewMasterPassword\"\n                    required appInputVerbatim>\n            </div>\n        </div>\n    </div>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'changeMasterPassword' | i18n}}</span>\n    </button>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/change-password.component.ts":
/*!*******************************************************!*\
  !*** ./src/app/settings/change-password.component.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var passwordRequest_1 = __webpack_require__(/*! jslib/models/request/passwordRequest */ "./jslib/src/models/request/passwordRequest.ts");
var ChangePasswordComponent = /** @class */ (function () {
    function ChangePasswordComponent(apiService, i18nService, analytics, toasterService, cryptoService, messagingService, userService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.messagingService = messagingService;
        this.userService = userService;
    }
    ChangePasswordComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var hasEncKey, request, _a, email, newKey, _b, encKey, newEncKey, _c;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0: return [4 /*yield*/, this.cryptoService.hasEncKey()];
                    case 1:
                        hasEncKey = _d.sent();
                        if (!hasEncKey) {
                            this.toasterService.popAsync('error', null, this.i18nService.t('updateKey'));
                            return [2 /*return*/];
                        }
                        if (this.currentMasterPassword == null || this.currentMasterPassword === '' ||
                            this.newMasterPassword == null || this.newMasterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassRequired'));
                            return [2 /*return*/];
                        }
                        if (this.newMasterPassword.length < 8) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassLength'));
                            return [2 /*return*/];
                        }
                        if (this.newMasterPassword !== this.confirmNewMasterPassword) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassDoesntMatch'));
                            return [2 /*return*/];
                        }
                        request = new passwordRequest_1.PasswordRequest();
                        _a = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.currentMasterPassword, null)];
                    case 2:
                        _a.masterPasswordHash = _d.sent();
                        return [4 /*yield*/, this.userService.getEmail()];
                    case 3:
                        email = _d.sent();
                        return [4 /*yield*/, this.cryptoService.makeKey(this.newMasterPassword, email)];
                    case 4:
                        newKey = _d.sent();
                        _b = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.newMasterPassword, newKey)];
                    case 5:
                        _b.newMasterPasswordHash = _d.sent();
                        return [4 /*yield*/, this.cryptoService.getEncKey()];
                    case 6:
                        encKey = _d.sent();
                        return [4 /*yield*/, this.cryptoService.encrypt(encKey.key, newKey)];
                    case 7:
                        newEncKey = _d.sent();
                        request.key = newEncKey.encryptedString;
                        _d.label = 8;
                    case 8:
                        _d.trys.push([8, 10, , 11]);
                        this.formPromise = this.apiService.postPassword(request);
                        return [4 /*yield*/, this.formPromise];
                    case 9:
                        _d.sent();
                        this.analytics.eventTrack.next({ action: 'Changed Password' });
                        this.toasterService.popAsync('success', this.i18nService.t('masterPasswordChanged'), this.i18nService.t('logBackIn'));
                        this.messagingService.send('logout');
                        return [3 /*break*/, 11];
                    case 10:
                        _c = _d.sent();
                        return [3 /*break*/, 11];
                    case 11: return [2 /*return*/];
                }
            });
        });
    };
    ChangePasswordComponent = __decorate([
        core_1.Component({
            selector: 'app-change-password',
            template: __webpack_require__(/*! ./change-password.component.html */ "./src/app/settings/change-password.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            crypto_service_1.CryptoService, messaging_service_1.MessagingService,
            user_service_1.UserService])
    ], ChangePasswordComponent);
    return ChangePasswordComponent;
}());
exports.ChangePasswordComponent = ChangePasswordComponent;


/***/ }),

/***/ "./src/app/settings/create-organization.component.html":
/*!*************************************************************!*\
  !*** ./src/app/settings/create-organization.component.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>{{'newOrganization' | i18n}}</h1>\n</div>\n<p>{{'newOrganizationDesc' | i18n}}</p>\n<ng-container *ngIf=\"selfHosted\">\n    <p>{{'uploadLicenseFileOrg' | i18n}}</p>\n    <form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n        <div class=\"form-group\">\n            <label for=\"file\">{{'licenseFile' | i18n}}</label>\n            <input type=\"file\" id=\"file\" class=\"form-control-file\" name=\"file\" required>\n            <small class=\"form-text text-muted\">{{'licenseFileDesc' | i18n : 'bitwarden_organization_license.json'}}</small>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n            <span>{{'submit' | i18n}}</span>\n        </button>\n    </form>\n</ng-container>\n<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate *ngIf=\"!selfHosted\">\n    <h2 class=\"mt-5\">{{'generalInformation' | i18n}}</h2>\n    <div class=\"row\">\n        <div class=\"form-group col-6\">\n            <label for=\"name\">{{'organizationName' | i18n}}</label>\n            <input id=\"name\" class=\"form-control\" type=\"text\" name=\"Name\" [(ngModel)]=\"name\" required>\n        </div>\n        <div class=\"form-group col-6\">\n            <label for=\"billingEmail\">{{'billingEmail' | i18n}}</label>\n            <input id=\"billingEmail\" class=\"form-control\" type=\"text\" name=\"BillingEmail\" [(ngModel)]=\"billingEmail\" required>\n        </div>\n    </div>\n    <div class=\"form-group form-check\">\n        <input id=\"ownedBusiness\" class=\"form-check-input\" type=\"checkbox\" name=\"OwnedBusiness\" [(ngModel)]=\"ownedBusiness\" (change)=\"changedOwnedBusiness()\">\n        <label for=\"ownedBusiness\" class=\"form-check-label\">{{'accountOwnedBusiness' | i18n}}</label>\n    </div>\n    <div class=\"row\" *ngIf=\"ownedBusiness\">\n        <div class=\"form-group col-6\">\n            <label for=\"businessName\">{{'businessName' | i18n}}</label>\n            <input id=\"businessName\" class=\"form-control\" type=\"text\" name=\"BusinessName\" [(ngModel)]=\"businessName\">\n        </div>\n    </div>\n    <h2 class=\"mt-5\">{{'chooseYourPlan' | i18n}}</h2>\n    <div class=\"form-check form-check-block\" *ngIf=\"!ownedBusiness\">\n        <input class=\"form-check-input\" type=\"radio\" name=\"PlanType\" id=\"planFree\" value=\"free\" [(ngModel)]=\"plan\" (change)=\"changedPlan()\">\n        <label class=\"form-check-label\" for=\"planFree\">\n            {{'planNameFree' | i18n}}\n            <small class=\"mb-1\">{{'planDescFree' | i18n : '1'}}</small>\n            <small>• {{'limitedUsers' | i18n : '2'}}</small>\n            <small>• {{'limitedCollections' | i18n : '2'}}</small>\n            <span>{{'freeForever' | i18n}}</span>\n        </label>\n    </div>\n    <div class=\"form-check form-check-block\" *ngIf=\"!ownedBusiness\">\n        <input class=\"form-check-input\" type=\"radio\" name=\"PlanType\" id=\"planFamilies\" value=\"families\" [(ngModel)]=\"plan\" (change)=\"changedPlan()\">\n        <label class=\"form-check-label\" for=\"planFamilies\">\n            {{'planNameFamilies' | i18n}}\n            <small class=\"mb-1\">{{'planDescFamilies' | i18n}}</small>\n            <small>• {{'addShareLimitedUsers' | i18n : '5'}}</small>\n            <small>• {{'createUnlimitedCollections' | i18n}}</small>\n            <small>• {{'gbEncryptedFileStorage' | i18n : '1 GB'}}</small>\n            <small>• {{'onPremHostingOptional' | i18n}}</small>\n            <small>• {{'priorityCustomerSupport' | i18n}}</small>\n            <small>• {{'xDayFreeTrial' | i18n : '7'}}</small>\n            <span>{{1 | currency:'$'}} /{{'month' | i18n}}, {{'includesXUsers' | i18n : 5}}</span>\n        </label>\n    </div>\n    <div class=\"form-check form-check-block\">\n        <input class=\"form-check-input\" type=\"radio\" name=\"PlanType\" id=\"planTeams\" value=\"teams\" [(ngModel)]=\"plan\" (change)=\"changedPlan()\">\n        <label class=\"form-check-label\" for=\"planTeams\">\n            {{'planNameTeams' | i18n}}\n            <small class=\"mb-1\">{{'planDescTeams' | i18n}}</small>\n            <small>• {{'addShareUnlimitedUsers' | i18n}}</small>\n            <small>• {{'createUnlimitedCollections' | i18n}}</small>\n            <small>• {{'gbEncryptedFileStorage' | i18n : '1 GB'}}</small>\n            <small>• {{'priorityCustomerSupport' | i18n}}</small>\n            <small>• {{'xDayFreeTrial' | i18n : '7'}}</small>\n            <span>{{5 | currency:'$'}} /{{'month' | i18n}}, {{'includesXUsers' | i18n : 5}}, {{('additionalUsers' | i18n).toLowerCase()}}\n                {{2 | currency:'$'}} /{{'month' | i18n}}</span>\n        </label>\n    </div>\n    <div class=\"form-check form-check-block\">\n        <input class=\"form-check-input\" type=\"radio\" name=\"PlanType\" id=\"planEnterprise\" value=\"enterprise\" [(ngModel)]=\"plan\" (change)=\"changedPlan()\">\n        <label class=\"form-check-label\" for=\"planEnterprise\">\n            {{'planNameEnterprise' | i18n}}\n            <small class=\"mb-1\">{{'planDescEnterprise' | i18n}}</small>\n            <small>• {{'addShareUnlimitedUsers' | i18n}}</small>\n            <small>• {{'createUnlimitedCollections' | i18n}}</small>\n            <small>• {{'gbEncryptedFileStorage' | i18n : '1 GB'}}</small>\n            <small>• {{'controlAccessWithGroups' | i18n}}</small>\n            <small>• {{'trackAuditLogs' | i18n}}</small>\n            <small>• {{'syncUsersFromDirectory' | i18n}}</small>\n            <small>• {{'onPremHostingOptional' | i18n}}</small>\n            <small>• {{'priorityCustomerSupport' | i18n}}</small>\n            <small>• {{'xDayFreeTrial' | i18n : '7'}}</small>\n            <span>{{'costPerUser' | i18n : (3 | currency:'$')}} /{{'month' | i18n}}</span>\n        </label>\n    </div>\n    <ng-container *ngIf=\"!plans[plan].noPayment\">\n        <ng-container *ngIf=\"!plans[plan].noAdditionalSeats && !plans[plan].baseSeats\">\n            <h2 class=\"mt-5\">{{'users' | i18n}}</h2>\n            <div class=\"row\">\n                <div class=\"col-6\">\n                    <label for=\"additionalSeats\">{{'userSeats' | i18n}}</label>\n                    <input id=\"additionalSeats\" class=\"form-control\" type=\"number\" name=\"AdditionalSeats\" [(ngModel)]=\"additionalSeats\" min=\"1\"\n                        max=\"100000\" placeholder=\"{{'userSeatsDesc' | i18n}}\" required>\n                    <small class=\"text-muted form-text\">{{'userSeatsHowManyDesc' | i18n}}</small>\n                </div>\n            </div>\n        </ng-container>\n        <h2 class=\"mt-5\">{{'addons' | i18n}}</h2>\n        <div class=\"row\" *ngIf=\"!plans[plan].noAdditionalSeats && plans[plan].baseSeats\">\n            <div class=\"form-group col-6\">\n                <label for=\"additionalSeats\">{{'additionalUserSeats' | i18n}}</label>\n                <input id=\"additionalSeats\" class=\"form-control\" type=\"number\" name=\"AdditionalSeats\" [(ngModel)]=\"additionalSeats\" min=\"0\"\n                    max=\"100000\" placeholder=\"{{'userSeatsDesc' | i18n}}\">\n                <small class=\"text-muted form-text\">{{'userSeatsAdditionalDesc' | i18n : plans[plan].baseSeats : (plans[plan].seatPrice | currency:'$')}}</small>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"form-group col-6\">\n                <label for=\"additionalStorage\">{{'additionalStorageGb' | i18n}}</label>\n                <input id=\"additionalStorage\" class=\"form-control\" type=\"number\" name=\"AdditionalStorageGb\" [(ngModel)]=\"additionalStorage\"\n                    min=\"0\" max=\"99\" step=\"1\" placeholder=\"{{'additionalStorageGbDesc' | i18n}}\">\n                <small class=\"text-muted form-text\">{{'additionalStorageDesc' | i18n : '1 GB' : (storageGb.price | currency:'$')}}</small>\n            </div>\n        </div>\n        <h2 class=\"spaced-header\">{{'summary' | i18n}}</h2>\n        <div class=\"form-check form-check-block\">\n            <input class=\"form-check-input\" type=\"radio\" name=\"BillingInterval\" id=\"intervalAnnually\" value=\"year\" [(ngModel)]=\"interval\">\n            <label class=\"form-check-label\" for=\"intervalAnnually\">\n                {{'annually' | i18n}}\n                <small *ngIf=\"plans[plan].annualBasePrice\">\n                    {{'basePrice' | i18n}}: {{plans[plan].basePrice | currency:'$'}} &times;12 {{'monthAbbr' | i18n}} = {{baseTotal(true) | currency:'$'}}\n                    /{{'year' | i18n}}\n                </small>\n                <small *ngIf=\"!plans[plan].noAdditionalSeats\">\n                    <span *ngIf=\"plans[plan].baseSeats\">{{'additionalUsers' | i18n}}:</span>\n                    <span *ngIf=\"!plans[plan].baseSeats\">{{'users' | i18n}}:</span>\n                    {{additionalSeats || 0}} &times; {{plans[plan].seatPrice | currency:'$'}} &times;12 {{'monthAbbr' | i18n}} = {{seatTotal(true)\n                    | currency:'$'}} /{{'year' | i18n}}\n                </small>\n                <small>\n                    {{'additionalStorageGb' | i18n}}: {{additionalStorage || 0}} &times; {{storageGb.price | currency:'$'}} &times;12 {{'monthAbbr'\n                    | i18n}} = {{additionalStorageTotal(true) | currency:'$'}} /{{'year' | i18n}}\n                </small>\n            </label>\n        </div>\n        <div class=\"form-check form-check-block\" *ngIf=\"plans[plan].monthlySeatPrice\">\n            <input class=\"form-check-input\" type=\"radio\" name=\"BillingInterval\" id=\"intervalMonthly\" value=\"month\" [(ngModel)]=\"interval\">\n            <label class=\"form-check-label\" for=\"intervalMonthly\">\n                {{'monthly' | i18n}}\n                <small *ngIf=\"plans[plan].monthlyBasePrice\">\n                    {{'basePrice' | i18n}}: {{baseTotal(false) | currency:'$'}} /{{'month' | i18n}}\n                </small>\n                <small *ngIf=\"!plans[plan].noAdditionalSeats\">\n                    <span *ngIf=\"plans[plan].baseSeats\">{{'additionalUsers' | i18n}}:</span>\n                    <span *ngIf=\"!plans[plan].baseSeats\">{{'users' | i18n}}:</span>\n                    {{additionalSeats || 0}} &times; {{plans[plan].monthlySeatPrice | currency:'$'}} = {{seatTotal(false) | currency:'$'}} /{{'month'\n                    | i18n}}\n                </small>\n                <small>\n                    {{'additionalStorageGb' | i18n}}: {{additionalStorage || 0}} &times; {{storageGb.monthlyPrice | currency:'$'}} = {{additionalStorageTotal(false)\n                    | currency:'$'}} /{{'month' | i18n}}\n                </small>\n            </label>\n        </div>\n        <hr class=\"my-3\">\n        <div class=\"text-lg\">\n            <strong>{{'total' | i18n}}:</strong> {{total | currency:'USD $'}} /{{interval | i18n}}\n        </div>\n        <small class=\"text-muted font-italic\">{{'paymentChargedWithTrial' | i18n : (interval | i18n) }}</small>\n        <h2 class=\"spaced-header mb-4\">{{'paymentInformation' | i18n}}</h2>\n        <app-payment [hidePaypal]=\"true\"></app-payment>\n    </ng-container>\n    <div [ngClass]=\"{'mt-4': plans[plan].noPayment}\">\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n            <span>{{'submit' | i18n}}</span>\n        </button>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/create-organization.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/settings/create-organization.component.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var sync_service_1 = __webpack_require__(/*! jslib/abstractions/sync.service */ "./jslib/src/abstractions/sync.service.ts");
var payment_component_1 = __webpack_require__(/*! ./payment.component */ "./src/app/settings/payment.component.ts");
var planType_1 = __webpack_require__(/*! jslib/enums/planType */ "./jslib/src/enums/planType.ts");
var organizationCreateRequest_1 = __webpack_require__(/*! jslib/models/request/organizationCreateRequest */ "./jslib/src/models/request/organizationCreateRequest.ts");
var CreateOrganizationComponent = /** @class */ (function () {
    function CreateOrganizationComponent(apiService, i18nService, analytics, toasterService, platformUtilsService, cryptoService, router, syncService, route) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.router = router;
        this.syncService = syncService;
        this.route = route;
        this.selfHosted = false;
        this.ownedBusiness = false;
        this.storageGbPriceMonthly = 0.33;
        this.additionalStorage = 0;
        this.additionalSeats = 0;
        this.plan = 'free';
        this.interval = 'year';
        this.storageGb = {
            price: 0.33,
            monthlyPrice: 0.50,
            yearlyPrice: 4,
        };
        this.plans = {
            free: {
                basePrice: 0,
                noAdditionalSeats: true,
                noPayment: true,
            },
            families: {
                basePrice: 1,
                annualBasePrice: 12,
                baseSeats: 5,
                noAdditionalSeats: true,
                annualPlanType: planType_1.PlanType.FamiliesAnnually,
            },
            teams: {
                basePrice: 5,
                annualBasePrice: 60,
                monthlyBasePrice: 8,
                baseSeats: 5,
                seatPrice: 2,
                annualSeatPrice: 24,
                monthlySeatPrice: 2.5,
                monthPlanType: planType_1.PlanType.TeamsMonthly,
                annualPlanType: planType_1.PlanType.TeamsAnnually,
            },
            enterprise: {
                seatPrice: 3,
                annualSeatPrice: 36,
                monthlySeatPrice: 4,
                monthPlanType: planType_1.PlanType.EnterpriseMonthly,
                annualPlanType: planType_1.PlanType.EnterpriseAnnually,
            },
        };
        this.selfHosted = platformUtilsService.isSelfHost();
    }
    CreateOrganizationComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.queryParams.subscribe(function (qParams) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (qParams.plan === 'families' || qParams.plan === 'teams' || qParams.plan === 'enterprise') {
                    this.plan = qParams.plan;
                }
                return [2 /*return*/];
            });
        }); });
    };
    CreateOrganizationComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var files, fileEl, key, collectionCt, _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        files = null;
                        if (this.selfHosted) {
                            fileEl = document.getElementById('file');
                            files = fileEl.files;
                            if (files == null || files.length === 0) {
                                this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('selectFile'));
                                return [2 /*return*/];
                            }
                        }
                        key = null;
                        collectionCt = null;
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        this.formPromise = this.cryptoService.makeShareKey().then(function (shareKey) {
                            key = shareKey[0].encryptedString;
                            return _this.cryptoService.encrypt(_this.i18nService.t('defaultCollection'), shareKey[1]);
                        }).then(function (collection) {
                            collectionCt = collection.encryptedString;
                            if (_this.selfHosted || _this.plan === 'free') {
                                return null;
                            }
                            else {
                                return _this.paymentComponent.createPaymentToken();
                            }
                        }).then(function (token) {
                            if (_this.selfHosted) {
                                var fd = new FormData();
                                fd.append('license', files[0]);
                                fd.append('key', key);
                                fd.append('collectionName', collectionCt);
                                return _this.apiService.postOrganizationLicense(fd);
                            }
                            else {
                                var request = new organizationCreateRequest_1.OrganizationCreateRequest();
                                request.key = key;
                                request.collectionName = collectionCt;
                                request.name = _this.name;
                                request.billingEmail = _this.billingEmail;
                                if (_this.plan === 'free') {
                                    request.planType = planType_1.PlanType.Free;
                                }
                                else {
                                    request.paymentToken = token;
                                    request.businessName = _this.ownedBusiness ? _this.businessName : null;
                                    request.additionalSeats = _this.additionalSeats;
                                    request.additionalStorageGb = _this.additionalStorage;
                                    request.country = _this.paymentComponent.getCountry();
                                    if (_this.interval === 'month') {
                                        request.planType = _this.plans[_this.plan].monthPlanType;
                                    }
                                    else {
                                        request.planType = _this.plans[_this.plan].annualPlanType;
                                    }
                                }
                                return _this.apiService.postOrganization(request);
                            }
                        }).then(function (response) {
                            return _this.finalize(response.id);
                        });
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _b.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    CreateOrganizationComponent.prototype.finalize = function (orgId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all([
                            this.apiService.refreshIdentityToken(),
                            this.syncService.fullSync(true),
                        ])];
                    case 1:
                        _a.sent();
                        this.analytics.eventTrack.next({ action: 'Created Organization' });
                        this.toasterService.popAsync('success', this.i18nService.t('organizationCreated'), this.i18nService.t('organizationReadyToGo'));
                        this.router.navigate(['/organizations/' + orgId]);
                        return [2 /*return*/];
                }
            });
        });
    };
    CreateOrganizationComponent.prototype.changedPlan = function () {
        if (this.plans[this.plan].monthPlanType == null) {
            this.interval = 'year';
        }
        if (this.plans[this.plan].noAdditionalSeats) {
            this.additionalSeats = 0;
        }
        else if (!this.additionalSeats && !this.plans[this.plan].baseSeats &&
            !this.plans[this.plan].noAdditionalSeats) {
            this.additionalSeats = 1;
        }
    };
    CreateOrganizationComponent.prototype.changedOwnedBusiness = function () {
        if (!this.ownedBusiness || this.plan === 'teams' || this.plan === 'enterprise') {
            return;
        }
        this.plan = 'teams';
    };
    CreateOrganizationComponent.prototype.additionalStorageTotal = function (annual) {
        if (annual) {
            return (this.additionalStorage || 0) * this.storageGb.yearlyPrice;
        }
        else {
            return (this.additionalStorage || 0) * this.storageGb.monthlyPrice;
        }
    };
    CreateOrganizationComponent.prototype.seatTotal = function (annual) {
        if (this.plans[this.plan].noAdditionalSeats) {
            return 0;
        }
        if (annual) {
            return this.plans[this.plan].annualSeatPrice * (this.additionalSeats || 0);
        }
        else {
            return this.plans[this.plan].monthlySeatPrice * (this.additionalSeats || 0);
        }
    };
    CreateOrganizationComponent.prototype.baseTotal = function (annual) {
        if (annual) {
            return (this.plans[this.plan].annualBasePrice || 0);
        }
        else {
            return (this.plans[this.plan].monthlyBasePrice || 0);
        }
    };
    Object.defineProperty(CreateOrganizationComponent.prototype, "total", {
        get: function () {
            var annual = this.interval === 'year';
            return this.baseTotal(annual) + this.seatTotal(annual) + this.additionalStorageTotal(annual);
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        core_1.ViewChild(payment_component_1.PaymentComponent),
        __metadata("design:type", payment_component_1.PaymentComponent)
    ], CreateOrganizationComponent.prototype, "paymentComponent", void 0);
    CreateOrganizationComponent = __decorate([
        core_1.Component({
            selector: 'app-create-organization',
            template: __webpack_require__(/*! ./create-organization.component.html */ "./src/app/settings/create-organization.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            platformUtils_service_1.PlatformUtilsService, crypto_service_1.CryptoService,
            router_1.Router, sync_service_1.SyncService,
            router_1.ActivatedRoute])
    ], CreateOrganizationComponent);
    return CreateOrganizationComponent;
}());
exports.CreateOrganizationComponent = CreateOrganizationComponent;


/***/ }),

/***/ "./src/app/settings/deauthorize-sessions.component.html":
/*!**************************************************************!*\
  !*** ./src/app/settings/deauthorize-sessions.component.html ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{'deauthorizeSessions' | i18n}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <p>{{'deauthorizeSessionsDesc' | i18n}}</p>\n                <app-callout type=\"warning\">{{'deauthorizeSessionsWarning' | i18n}}</app-callout>\n                <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n                <input id=\"masterPassword\" type=\"password\" name=\"MasterPasswordHash\" class=\"form-control\" [(ngModel)]=\"masterPassword\" required\n                    appAutoFocus appInputVerbatim>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-danger btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'deauthorizeSessions' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/deauthorize-sessions.component.ts":
/*!************************************************************!*\
  !*** ./src/app/settings/deauthorize-sessions.component.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var passwordVerificationRequest_1 = __webpack_require__(/*! jslib/models/request/passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var DeauthorizeSessionsComponent = /** @class */ (function () {
    function DeauthorizeSessionsComponent(apiService, i18nService, analytics, toasterService, cryptoService, messagingService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.messagingService = messagingService;
    }
    DeauthorizeSessionsComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (this.masterPassword == null || this.masterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassRequired'));
                            return [2 /*return*/];
                        }
                        request = new passwordVerificationRequest_1.PasswordVerificationRequest();
                        _a = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, null)];
                    case 1:
                        _a.masterPasswordHash = _c.sent();
                        _c.label = 2;
                    case 2:
                        _c.trys.push([2, 4, , 5]);
                        this.formPromise = this.apiService.postSecurityStamp(request);
                        return [4 /*yield*/, this.formPromise];
                    case 3:
                        _c.sent();
                        this.analytics.eventTrack.next({ action: 'Deauthorized Sessions' });
                        this.toasterService.popAsync('success', this.i18nService.t('sessionsDeauthorized'), this.i18nService.t('logBackIn'));
                        this.messagingService.send('logout');
                        return [3 /*break*/, 5];
                    case 4:
                        _b = _c.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    DeauthorizeSessionsComponent = __decorate([
        core_1.Component({
            selector: 'app-deauthorize-sessions',
            template: __webpack_require__(/*! ./deauthorize-sessions.component.html */ "./src/app/settings/deauthorize-sessions.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            crypto_service_1.CryptoService, messaging_service_1.MessagingService])
    ], DeauthorizeSessionsComponent);
    return DeauthorizeSessionsComponent;
}());
exports.DeauthorizeSessionsComponent = DeauthorizeSessionsComponent;


/***/ }),

/***/ "./src/app/settings/delete-account.component.html":
/*!********************************************************!*\
  !*** ./src/app/settings/delete-account.component.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{'deleteAccount' | i18n}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <p>{{'deleteAccountDesc' | i18n}}</p>\n                <app-callout type=\"warning\">{{'deleteAccountWarning' | i18n}}</app-callout>\n                <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n                <input id=\"masterPassword\" type=\"password\" name=\"MasterPasswordHash\" class=\"form-control\" [(ngModel)]=\"masterPassword\" required\n                    appAutofocus appInputVerbatim>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-danger btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'deleteAccount' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/delete-account.component.ts":
/*!******************************************************!*\
  !*** ./src/app/settings/delete-account.component.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var passwordVerificationRequest_1 = __webpack_require__(/*! jslib/models/request/passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var DeleteAccountComponent = /** @class */ (function () {
    function DeleteAccountComponent(apiService, i18nService, analytics, toasterService, cryptoService, messagingService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.messagingService = messagingService;
    }
    DeleteAccountComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (this.masterPassword == null || this.masterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassRequired'));
                            return [2 /*return*/];
                        }
                        request = new passwordVerificationRequest_1.PasswordVerificationRequest();
                        _a = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, null)];
                    case 1:
                        _a.masterPasswordHash = _c.sent();
                        _c.label = 2;
                    case 2:
                        _c.trys.push([2, 4, , 5]);
                        this.formPromise = this.apiService.deleteAccount(request);
                        return [4 /*yield*/, this.formPromise];
                    case 3:
                        _c.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted Account' });
                        this.toasterService.popAsync('success', this.i18nService.t('accountDeleted'), this.i18nService.t('accountDeletedDesc'));
                        this.messagingService.send('logout');
                        return [3 /*break*/, 5];
                    case 4:
                        _b = _c.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    DeleteAccountComponent = __decorate([
        core_1.Component({
            selector: 'app-delete-account',
            template: __webpack_require__(/*! ./delete-account.component.html */ "./src/app/settings/delete-account.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            crypto_service_1.CryptoService, messaging_service_1.MessagingService])
    ], DeleteAccountComponent);
    return DeleteAccountComponent;
}());
exports.DeleteAccountComponent = DeleteAccountComponent;


/***/ }),

/***/ "./src/app/settings/domain-rules.component.html":
/*!******************************************************!*\
  !*** ./src/app/settings/domain-rules.component.html ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>{{'domainRules' | i18n}}</h1>\n</div>\n<p>{{'domainRulesDesc' | i18n}}</p>\n<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <h2>{{'customEqDomains' | i18n}}</h2>\n    <p *ngIf=\"loading\">\n        <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n    </p>\n    <ng-container *ngIf=\"!loading\">\n        <div class=\"form-group d-flex\" *ngFor=\"let d of custom; let i = index; trackBy: indexTrackBy\">\n            <div class=\"flex-fill\">\n                <label for=\"customDomain_{{i}}\" class=\"sr-only\">{{'customDomainX' | i18n : (i + 1)}}</label>\n                <textarea class=\"form-control\" name=\"CustomDomain[{{i}}]\" id=\"customDomain_{{i}}\" [(ngModel)]=\"custom[i]\" placeholder=\"{{'ex' | i18n}} google.com, gmail.com\"\n                    required></textarea>\n            </div>\n            <button type=\"button\" class=\"btn btn-link text-danger ml-2\" (click)=\"remove(i)\" title=\"{{'remove' | i18n}}\">\n                <i class=\"fa fa-minus-circle fa-lg\"></i>\n            </button>\n        </div>\n        <button type=\"button\" (click)=\"add()\" class=\"btn btn-outline-secondary btn-sm mb-2\">\n            <i class=\"fa fa-plus fa-fw\"></i> {{'newCustomDomain' | i18n}}\n        </button>\n        <small class=\"text-muted d-block mb-3\">{{'newCustomDomainDesc' | i18n}}</small>\n    </ng-container>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'save' | i18n}}</span>\n    </button>\n    <h2 class=\"spaced-header\">{{'globalEqDomains' | i18n}}</h2>\n    <p *ngIf=\"loading\">\n        <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n    </p>\n    <table class=\"table table-hover table-list\" *ngIf=\"!loading && global.length > 0\">\n        <tbody>\n            <tr *ngFor=\"let d of global\">\n                <td [ngClass]=\"{'table-list-strike': d.excluded}\">{{d.domains}}</td>\n                <td class=\"table-list-options\">\n                    <div class=\"dropdown\" appListDropdown>\n                        <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                            <i class=\"fa fa-cog fa-lg\"></i>\n                        </button>\n                        <div class=\"dropdown-menu dropdown-menu-right\">\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"toggleExcluded(d)\" *ngIf=\"!d.excluded\">\n                                <i class=\"fa fa-fw fa-close\"></i>\n                                {{'exclude' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"toggleExcluded(d)\" *ngIf=\"d.excluded\">\n                                <i class=\"fa fa-fw fa-plus\"></i>\n                                {{'include' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"customize(d)\">\n                                <i class=\"fa fa-fw fa-scissors\"></i>\n                                {{'customize' | i18n}}\n                            </a>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'save' | i18n}}</span>\n    </button>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/domain-rules.component.ts":
/*!****************************************************!*\
  !*** ./src/app/settings/domain-rules.component.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var updateDomainsRequest_1 = __webpack_require__(/*! jslib/models/request/updateDomainsRequest */ "./jslib/src/models/request/updateDomainsRequest.ts");
var DomainRulesComponent = /** @class */ (function () {
    function DomainRulesComponent(apiService, i18nService, analytics, toasterService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.loading = true;
        this.custom = [];
        this.global = [];
    }
    DomainRulesComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.apiService.getSettingsDomains()];
                    case 1:
                        response = _a.sent();
                        this.loading = false;
                        if (response.equivalentDomains != null) {
                            this.custom = response.equivalentDomains.map(function (d) { return d.join(', '); });
                        }
                        if (response.globalEquivalentDomains != null) {
                            this.global = response.globalEquivalentDomains.map(function (d) {
                                return {
                                    domains: d.domains.join(', '),
                                    excluded: d.excluded,
                                    key: d.type,
                                };
                            });
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    DomainRulesComponent.prototype.toggleExcluded = function (globalDomain) {
        globalDomain.excluded = !globalDomain.excluded;
    };
    DomainRulesComponent.prototype.customize = function (globalDomain) {
        globalDomain.excluded = true;
        this.custom.push(globalDomain.domains);
    };
    DomainRulesComponent.prototype.remove = function (index) {
        this.custom.splice(index, 1);
    };
    DomainRulesComponent.prototype.add = function () {
        this.custom.push('');
    };
    DomainRulesComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        request = new updateDomainsRequest_1.UpdateDomainsRequest();
                        request.excludedGlobalEquivalentDomains = this.global.filter(function (d) { return d.excluded; })
                            .map(function (d) { return d.key; });
                        if (request.excludedGlobalEquivalentDomains.length === 0) {
                            request.excludedGlobalEquivalentDomains = null;
                        }
                        request.equivalentDomains = this.custom.filter(function (d) { return d != null && d.trim() !== ''; })
                            .map(function (d) { return d.split(',').map(function (d2) { return d2.trim(); }); });
                        if (request.equivalentDomains.length === 0) {
                            request.equivalentDomains = null;
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        this.formPromise = this.apiService.putSettingsDomains(request);
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Saved Equivalent Domains' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('domainsUpdated'));
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    DomainRulesComponent.prototype.indexTrackBy = function (index, obj) {
        return index;
    };
    DomainRulesComponent = __decorate([
        core_1.Component({
            selector: 'app-domain-rules',
            template: __webpack_require__(/*! ./domain-rules.component.html */ "./src/app/settings/domain-rules.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService])
    ], DomainRulesComponent);
    return DomainRulesComponent;
}());
exports.DomainRulesComponent = DomainRulesComponent;


/***/ }),

/***/ "./src/app/settings/options.component.html":
/*!*************************************************!*\
  !*** ./src/app/settings/options.component.html ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>{{'options' | i18n}}</h1>\n</div>\n<p>{{'optionsDesc' | i18n}}</p>\n<form (ngSubmit)=\"submit()\" ngNativeValidate>\n    <div class=\"row\">\n        <div class=\"col-6\">\n            <div class=\"form-group\">\n                <label for=\"lockOption\">{{'lockOptions' | i18n}}</label>\n                <select id=\"lockOption\" name=\"LockOption\" [(ngModel)]=\"lockOption\" class=\"form-control\">\n                    <option *ngFor=\"let o of lockOptions\" [ngValue]=\"o.value\">{{o.name}}</option>\n                </select>\n                <small class=\"form-text text-muted\">{{'lockOptionsDesc' | i18n}}</small>\n            </div>\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-6\">\n            <div class=\"form-group\">\n                <div class=\"d-flex\">\n                    <label for=\"locale\">{{'language' | i18n}}</label>\n                    <a class=\"ml-auto\" href=\"https://help.bitwarden.com/article/localization/\" target=\"_blank\" rel=\"noopener\" title=\"{{'learnMore' | i18n}}\">\n                        <i class=\"fa fa-question-circle-o\"></i>\n                    </a>\n                </div>\n                <select id=\"locale\" name=\"Locale\" [(ngModel)]=\"locale\" class=\"form-control\">\n                    <option *ngFor=\"let o of localeOptions\" [ngValue]=\"o.value\">{{o.name}}</option>\n                </select>\n                <small class=\"form-text text-muted\">{{'languageDesc' | i18n}}</small>\n            </div>\n        </div>\n    </div>\n    <div class=\"form-group\">\n        <div class=\"form-check\">\n            <input class=\"form-check-input\" type=\"checkbox\" id=\"disableIcons\" name=\"DisableIcons\" [(ngModel)]=\"disableIcons\">\n            <label class=\"form-check-label\" for=\"disableIcons\">\n                {{'disableIcons' | i18n}}\n            </label>\n            <a href=\"https://help.bitwarden.com/article/website-icons/\" target=\"_blank\" rel=\"noopener\" title=\"{{'learnMore' | i18n}}\">\n                <i class=\"fa fa-question-circle-o\"></i>\n            </a>\n        </div>\n        <small class=\"form-text text-muted\">{{'disableIconsDesc' | i18n}}</small>\n    </div>\n    <button type=\"submit\" class=\"btn btn-primary\">\n        {{'save' | i18n}}\n    </button>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/options.component.ts":
/*!***********************************************!*\
  !*** ./src/app/settings/options.component.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var lock_service_1 = __webpack_require__(/*! jslib/abstractions/lock.service */ "./jslib/src/abstractions/lock.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var state_service_1 = __webpack_require__(/*! jslib/abstractions/state.service */ "./jslib/src/abstractions/state.service.ts");
var storage_service_1 = __webpack_require__(/*! jslib/abstractions/storage.service */ "./jslib/src/abstractions/storage.service.ts");
var constants_service_1 = __webpack_require__(/*! jslib/services/constants.service */ "./jslib/src/services/constants.service.ts");
var utils_1 = __webpack_require__(/*! jslib/misc/utils */ "./jslib/src/misc/utils.ts");
var OptionsComponent = /** @class */ (function () {
    function OptionsComponent(storageService, stateService, analytics, i18nService, toasterService, lockService, platformUtilsService) {
        this.storageService = storageService;
        this.stateService = stateService;
        this.analytics = analytics;
        this.i18nService = i18nService;
        this.toasterService = toasterService;
        this.lockService = lockService;
        this.platformUtilsService = platformUtilsService;
        this.lockOption = null;
        this.lockOptions = [
            { name: i18nService.t('oneMinute'), value: 1 },
            { name: i18nService.t('fiveMinutes'), value: 5 },
            { name: i18nService.t('fifteenMinutes'), value: 15 },
            { name: i18nService.t('thirtyMinutes'), value: 30 },
            { name: i18nService.t('oneHour'), value: 60 },
            { name: i18nService.t('fourHours'), value: 240 },
            { name: i18nService.t('onRefresh'), value: -1 },
        ];
        if (this.platformUtilsService.isDev()) {
            this.lockOptions.push({ name: i18nService.t('never'), value: null });
        }
        var localeOptions = [];
        i18nService.supportedTranslationLocales.forEach(function (locale) {
            localeOptions.push({ name: locale, value: locale });
        });
        localeOptions.sort(utils_1.Utils.getSortFunction(i18nService, 'name'));
        localeOptions.splice(0, 0, { name: i18nService.t('default'), value: null });
        this.localeOptions = localeOptions;
    }
    OptionsComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b, _c, _d;
            return __generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.storageService.get(constants_service_1.ConstantsService.lockOptionKey)];
                    case 1:
                        _a.lockOption = _e.sent();
                        _b = this;
                        return [4 /*yield*/, this.storageService.get(constants_service_1.ConstantsService.disableFaviconKey)];
                    case 2:
                        _b.disableIcons = _e.sent();
                        _c = this;
                        _d = this;
                        return [4 /*yield*/, this.storageService.get(constants_service_1.ConstantsService.localeKey)];
                    case 3:
                        _c.locale = _d.startingLocale = _e.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    OptionsComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.lockService.setLockOption(this.lockOption != null ? this.lockOption : null)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.storageService.save(constants_service_1.ConstantsService.disableFaviconKey, this.disableIcons)];
                    case 2:
                        _a.sent();
                        return [4 /*yield*/, this.stateService.save(constants_service_1.ConstantsService.disableFaviconKey, this.disableIcons)];
                    case 3:
                        _a.sent();
                        return [4 /*yield*/, this.storageService.save(constants_service_1.ConstantsService.localeKey, this.locale)];
                    case 4:
                        _a.sent();
                        this.analytics.eventTrack.next({ action: 'Saved Options' });
                        if (this.locale !== this.startingLocale) {
                            window.location.reload();
                        }
                        else {
                            this.toasterService.popAsync('success', null, this.i18nService.t('optionsUpdated'));
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    OptionsComponent = __decorate([
        core_1.Component({
            selector: 'app-options',
            template: __webpack_require__(/*! ./options.component.html */ "./src/app/settings/options.component.html"),
        }),
        __metadata("design:paramtypes", [storage_service_1.StorageService, state_service_1.StateService,
            angulartics2_1.Angulartics2, i18n_service_1.I18nService,
            angular2_toaster_1.ToasterService, lock_service_1.LockService,
            platformUtils_service_1.PlatformUtilsService])
    ], OptionsComponent);
    return OptionsComponent;
}());
exports.OptionsComponent = OptionsComponent;


/***/ }),

/***/ "./src/app/settings/organizations.component.html":
/*!*******************************************************!*\
  !*** ./src/app/settings/organizations.component.html ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ng-container *ngIf=\"vault\">\n    <p *ngIf=\"!loaded\" class=\"text-muted\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n    </p>\n    <ng-container *ngIf=\"loaded\">\n        <ul class=\"fa-ul card-ul carets\" *ngIf=\"organizations && organizations.length\">\n            <li *ngFor=\"let o of organizations\">\n                <a [routerLink]=\"['/organizations', o.id]\" class=\"text-body\">\n                    <i class=\"fa-li fa fa-caret-right\"></i> {{o.name}}\n                </a>\n            </li>\n        </ul>\n        <p *ngIf=\"!organizations || !organizations.length\">{{'noOrganizationsList' | i18n}}</p>\n    </ng-container>\n    <a href=\"#\" routerLink=\"/settings/create-organization\" class=\"btn btn-block btn-outline-primary\">\n        <i class=\"fa fa-plus fa-fw\"></i>\n        {{'newOrganization' | i18n}}\n    </a>\n</ng-container>\n<ng-container *ngIf=\"!vault\">\n    <div class=\"page-header d-flex\">\n        <h1>\n            {{'organizations' | i18n}}\n            <small [appApiAction]=\"actionPromise\" #action>\n                <i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"action.loading\" title=\"{{'loading' | i18n}}\"></i>\n            </small>\n        </h1>\n        <a href=\"#\" routerLink=\"/settings/create-organization\" class=\"btn btn-sm btn-outline-primary ml-auto\" *ngIf=\"!loaded || (organizations && organizations.length)\">\n            <i class=\"fa fa-plus fa-fw\"></i>\n            {{'newOrganization' | i18n}}\n        </a>\n    </div>\n    <i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"!loaded\" title=\"{{'loading' | i18n}}\"></i>\n    <ng-container *ngIf=\"loaded\">\n        <ng-container *ngIf=\"!organizations || !organizations.length\">\n            <p>{{'noOrganizationsList' | i18n}}</p>\n            <a href=\"#\" routerLink=\"/settings/create-organization\" class=\"btn btn-outline-primary\">\n                <i class=\"fa fa-plus fa-fw\"></i>\n                {{'newOrganization' | i18n}}\n            </a>\n        </ng-container>\n        <table class=\"table table-hover table-list\" *ngIf=\"organizations && organizations.length\">\n            <tbody>\n                <tr *ngFor=\"let o of organizations\">\n                    <td width=\"30\">\n                        <app-avatar [data]=\"o.name\" width=\"25\" height=\"25\" [circle]=\"true\" [fontSize]=\"14\"></app-avatar>\n                    </td>\n                    <td>\n                        <a href=\"#\" [routerLink]=\"['/organizations', o.id]\">{{o.name}}</a>\n                    </td>\n                    <td class=\"table-list-options\">\n                        <div class=\"dropdown\" appListDropdown>\n                            <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                <i class=\"fa fa-cog fa-lg\"></i>\n                            </button>\n                            <div class=\"dropdown-menu dropdown-menu-right\">\n                                <a class=\"dropdown-item text-danger\" href=\"#\" appStopClick (click)=\"leave(o)\">\n                                    <i class=\"fa fa-fw fa-sign-out\"></i>\n                                    {{'leave' | i18n}}\n                                </a>\n                            </div>\n                        </div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </ng-container>\n</ng-container>\n";

/***/ }),

/***/ "./src/app/settings/organizations.component.ts":
/*!*****************************************************!*\
  !*** ./src/app/settings/organizations.component.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var sync_service_1 = __webpack_require__(/*! jslib/abstractions/sync.service */ "./jslib/src/abstractions/sync.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var utils_1 = __webpack_require__(/*! jslib/misc/utils */ "./jslib/src/misc/utils.ts");
var OrganizationsComponent = /** @class */ (function () {
    function OrganizationsComponent(userService, platformUtilsService, i18nService, apiService, analytics, toasterService, syncService) {
        this.userService = userService;
        this.platformUtilsService = platformUtilsService;
        this.i18nService = i18nService;
        this.apiService = apiService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.syncService = syncService;
        this.vault = false;
        this.loaded = false;
    }
    OrganizationsComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!this.vault) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.load()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    OrganizationsComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var orgs;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getAllOrganizations()];
                    case 1:
                        orgs = _a.sent();
                        orgs.sort(utils_1.Utils.getSortFunction(this.i18nService, 'name'));
                        this.organizations = orgs;
                        this.loaded = true;
                        return [2 /*return*/];
                }
            });
        });
    };
    OrganizationsComponent.prototype.leave = function (org) {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('leaveOrganizationConfirmation'), org.name, this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 5, , 6]);
                        this.actionPromise = this.apiService.postLeaveOrganization(org.id).then(function () {
                            return _this.syncService.fullSync(true);
                        });
                        return [4 /*yield*/, this.actionPromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Left Organization' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('leftOrganization'));
                        return [4 /*yield*/, this.load()];
                    case 4:
                        _b.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        _a = _b.sent();
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], OrganizationsComponent.prototype, "vault", void 0);
    OrganizationsComponent = __decorate([
        core_1.Component({
            selector: 'app-organizations',
            template: __webpack_require__(/*! ./organizations.component.html */ "./src/app/settings/organizations.component.html"),
        }),
        __metadata("design:paramtypes", [user_service_1.UserService, platformUtils_service_1.PlatformUtilsService,
            i18n_service_1.I18nService, api_service_1.ApiService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            sync_service_1.SyncService])
    ], OrganizationsComponent);
    return OrganizationsComponent;
}());
exports.OrganizationsComponent = OrganizationsComponent;


/***/ }),

/***/ "./src/app/settings/payment.component.html":
/*!*************************************************!*\
  !*** ./src/app/settings/payment.component.html ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<div class=\"mb-4 text-lg\" *ngIf=\"showOptions\">\n    <div class=\"form-check form-check-inline mr-4\">\n        <input class=\"form-check-input\" type=\"radio\" name=\"Method\" id=\"method-card\" value=\"card\" [(ngModel)]=\"method\" (change)=\"changeMethod()\">\n        <label class=\"form-check-label\" for=\"method-card\">\n            <i class=\"fa fa-fw fa-credit-card\"></i> {{'creditCard' | i18n}}</label>\n    </div>\n    <div class=\"form-check form-check-inline mr-4\" *ngIf=\"!hideBank\">\n        <input class=\"form-check-input\" type=\"radio\" name=\"Method\" id=\"method-bank\" value=\"bank\" [(ngModel)]=\"method\" (change)=\"changeMethod()\">\n        <label class=\"form-check-label\" for=\"method-bank\">\n            <i class=\"fa fa-fw fa-university\"></i> {{'bankAccount' | i18n}}</label>\n    </div>\n    <div class=\"form-check form-check-inline\" *ngIf=\"!hidePaypal\">\n        <input class=\"form-check-input\" type=\"radio\" name=\"Method\" id=\"method-paypal\" value=\"paypal\" [(ngModel)]=\"method\" (change)=\"changeMethod()\">\n        <label class=\"form-check-label\" for=\"method-paypal\">\n            <i class=\"fa fa-fw fa-paypal\"></i> PayPal</label>\n    </div>\n</div>\n<ng-container *ngIf=\"method === 'card'\">\n    <div class=\"row\">\n        <div class=\"form-group col-5\">\n            <label for=\"card_number\">{{'number' | i18n}}</label>\n            <input id=\"card_number\" class=\"form-control\" type=\"text\" name=\"card_number\" [(ngModel)]=\"card.number\" required pattern=\"[0-9]*\"\n                autocomplete=\"cc-number\">\n        </div>\n        <div class=\"form-group col-7 d-flex align-items-end\">\n            <img src=\"" + __webpack_require__(/*! ../../images/cards.png */ "./src/images/cards.png") + "\" alt=\"Visa, MasterCard, Discover, AmEx, JCB, Diners Club, UnionPay\" width=\"323\" height=\"32\">\n        </div>\n        <div class=\"form-group col-4\">\n            <label for=\"exp_month\">{{'expirationMonth' | i18n}}</label>\n            <select id=\"exp_month\" class=\"form-control\" name=\"exp_month\" [(ngModel)]=\"card.exp_month\" required autocomplete=\"cc-exp-month\">\n                <option *ngFor=\"let o of cardExpMonthOptions\" [ngValue]=\"o.value\">{{o.name}}</option>\n            </select>\n        </div>\n        <div class=\"form-group col-4\">\n            <label for=\"exp_year\">{{'expirationYear' | i18n}}</label>\n            <select id=\"exp_year\" class=\"form-control\" name=\"exp_year\" [(ngModel)]=\"card.exp_year\" required autocomplete=\"cc-exp-year\">\n                <option *ngFor=\"let o of cardExpYearOptions\" [ngValue]=\"o.value\">{{o.name}}</option>\n            </select>\n        </div>\n        <div class=\"form-group col-4\">\n            <label for=\"cvc\" class=\"d-flex\">\n                {{'securityCode' | i18n}}\n                <a href=\"https://www.cvvnumber.com/cvv.html\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"ml-auto\" title=\"{{'learnMore' | i18n}}\">\n                    <i class=\"fa fa-question-circle-o\"></i>\n                </a>\n            </label>\n            <input id=\"cvc\" class=\"form-control\" type=\"text\" name=\"cvc\" [(ngModel)]=\"card.cvc\" required autocomplete=\"cc-csc\">\n        </div>\n        <div class=\"form-group col-5\">\n            <label for=\"address_country\">{{'country' | i18n}}</label>\n            <select id=\"address_country\" class=\"form-control\" [(ngModel)]=\"card.address_country\" required name=\"address_country\" autocomplete=\"country\">\n                <option value=\"\">-- Select --</option>\n                <option value=\"US\">United States</option>\n                <option value=\"CN\">China</option>\n                <option value=\"FR\">France</option>\n                <option value=\"DE\">Germany</option>\n                <option value=\"CA\">Canada</option>\n                <option value=\"GB\">United Kingdom</option>\n                <option value=\"AU\">Australia</option>\n                <option value=\"IN\">India</option>\n                <option value=\"-\" disabled></option>\n                <option value=\"AF\">Afghanistan</option>\n                <option value=\"AX\">Åland Islands</option>\n                <option value=\"AL\">Albania</option>\n                <option value=\"DZ\">Algeria</option>\n                <option value=\"AS\">American Samoa</option>\n                <option value=\"AD\">Andorra</option>\n                <option value=\"AO\">Angola</option>\n                <option value=\"AI\">Anguilla</option>\n                <option value=\"AQ\">Antarctica</option>\n                <option value=\"AG\">Antigua and Barbuda</option>\n                <option value=\"AR\">Argentina</option>\n                <option value=\"AM\">Armenia</option>\n                <option value=\"AW\">Aruba</option>\n                <option value=\"AT\">Austria</option>\n                <option value=\"AZ\">Azerbaijan</option>\n                <option value=\"BS\">Bahamas</option>\n                <option value=\"BH\">Bahrain</option>\n                <option value=\"BD\">Bangladesh</option>\n                <option value=\"BB\">Barbados</option>\n                <option value=\"BY\">Belarus</option>\n                <option value=\"BE\">Belgium</option>\n                <option value=\"BZ\">Belize</option>\n                <option value=\"BJ\">Benin</option>\n                <option value=\"BM\">Bermuda</option>\n                <option value=\"BT\">Bhutan</option>\n                <option value=\"BO\">Bolivia, Plurinational State of</option>\n                <option value=\"BQ\">Bonaire, Sint Eustatius and Saba</option>\n                <option value=\"BA\">Bosnia and Herzegovina</option>\n                <option value=\"BW\">Botswana</option>\n                <option value=\"BV\">Bouvet Island</option>\n                <option value=\"BR\">Brazil</option>\n                <option value=\"IO\">British Indian Ocean Territory</option>\n                <option value=\"BN\">Brunei Darussalam</option>\n                <option value=\"BG\">Bulgaria</option>\n                <option value=\"BF\">Burkina Faso</option>\n                <option value=\"BI\">Burundi</option>\n                <option value=\"KH\">Cambodia</option>\n                <option value=\"CM\">Cameroon</option>\n                <option value=\"CV\">Cape Verde</option>\n                <option value=\"KY\">Cayman Islands</option>\n                <option value=\"CF\">Central African Republic</option>\n                <option value=\"TD\">Chad</option>\n                <option value=\"CL\">Chile</option>\n                <option value=\"CX\">Christmas Island</option>\n                <option value=\"CC\">Cocos (Keeling) Islands</option>\n                <option value=\"CO\">Colombia</option>\n                <option value=\"KM\">Comoros</option>\n                <option value=\"CG\">Congo</option>\n                <option value=\"CD\">Congo, the Democratic Republic of the</option>\n                <option value=\"CK\">Cook Islands</option>\n                <option value=\"CR\">Costa Rica</option>\n                <option value=\"CI\">Côte d'Ivoire</option>\n                <option value=\"HR\">Croatia</option>\n                <option value=\"CU\">Cuba</option>\n                <option value=\"CW\">Curaçao</option>\n                <option value=\"CY\">Cyprus</option>\n                <option value=\"CZ\">Czech Republic</option>\n                <option value=\"DK\">Denmark</option>\n                <option value=\"DJ\">Djibouti</option>\n                <option value=\"DM\">Dominica</option>\n                <option value=\"DO\">Dominican Republic</option>\n                <option value=\"EC\">Ecuador</option>\n                <option value=\"EG\">Egypt</option>\n                <option value=\"SV\">El Salvador</option>\n                <option value=\"GQ\">Equatorial Guinea</option>\n                <option value=\"ER\">Eritrea</option>\n                <option value=\"EE\">Estonia</option>\n                <option value=\"ET\">Ethiopia</option>\n                <option value=\"FK\">Falkland Islands (Malvinas)</option>\n                <option value=\"FO\">Faroe Islands</option>\n                <option value=\"FJ\">Fiji</option>\n                <option value=\"FI\">Finland</option>\n                <option value=\"GF\">French Guiana</option>\n                <option value=\"PF\">French Polynesia</option>\n                <option value=\"TF\">French Southern Territories</option>\n                <option value=\"GA\">Gabon</option>\n                <option value=\"GM\">Gambia</option>\n                <option value=\"GE\">Georgia</option>\n                <option value=\"GH\">Ghana</option>\n                <option value=\"GI\">Gibraltar</option>\n                <option value=\"GR\">Greece</option>\n                <option value=\"GL\">Greenland</option>\n                <option value=\"GD\">Grenada</option>\n                <option value=\"GP\">Guadeloupe</option>\n                <option value=\"GU\">Guam</option>\n                <option value=\"GT\">Guatemala</option>\n                <option value=\"GG\">Guernsey</option>\n                <option value=\"GN\">Guinea</option>\n                <option value=\"GW\">Guinea-Bissau</option>\n                <option value=\"GY\">Guyana</option>\n                <option value=\"HT\">Haiti</option>\n                <option value=\"HM\">Heard Island and McDonald Islands</option>\n                <option value=\"VA\">Holy See (Vatican City State)</option>\n                <option value=\"HN\">Honduras</option>\n                <option value=\"HK\">Hong Kong</option>\n                <option value=\"HU\">Hungary</option>\n                <option value=\"IS\">Iceland</option>\n                <option value=\"ID\">Indonesia</option>\n                <option value=\"IR\">Iran, Islamic Republic of</option>\n                <option value=\"IQ\">Iraq</option>\n                <option value=\"IE\">Ireland</option>\n                <option value=\"IM\">Isle of Man</option>\n                <option value=\"IL\">Israel</option>\n                <option value=\"IT\">Italy</option>\n                <option value=\"JM\">Jamaica</option>\n                <option value=\"JP\">Japan</option>\n                <option value=\"JE\">Jersey</option>\n                <option value=\"JO\">Jordan</option>\n                <option value=\"KZ\">Kazakhstan</option>\n                <option value=\"KE\">Kenya</option>\n                <option value=\"KI\">Kiribati</option>\n                <option value=\"KP\">Korea, Democratic People's Republic of</option>\n                <option value=\"KR\">Korea, Republic of</option>\n                <option value=\"KW\">Kuwait</option>\n                <option value=\"KG\">Kyrgyzstan</option>\n                <option value=\"LA\">Lao People's Democratic Republic</option>\n                <option value=\"LV\">Latvia</option>\n                <option value=\"LB\">Lebanon</option>\n                <option value=\"LS\">Lesotho</option>\n                <option value=\"LR\">Liberia</option>\n                <option value=\"LY\">Libya</option>\n                <option value=\"LI\">Liechtenstein</option>\n                <option value=\"LT\">Lithuania</option>\n                <option value=\"LU\">Luxembourg</option>\n                <option value=\"MO\">Macao</option>\n                <option value=\"MK\">Macedonia, the former Yugoslav Republic of</option>\n                <option value=\"MG\">Madagascar</option>\n                <option value=\"MW\">Malawi</option>\n                <option value=\"MY\">Malaysia</option>\n                <option value=\"MV\">Maldives</option>\n                <option value=\"ML\">Mali</option>\n                <option value=\"MT\">Malta</option>\n                <option value=\"MH\">Marshall Islands</option>\n                <option value=\"MQ\">Martinique</option>\n                <option value=\"MR\">Mauritania</option>\n                <option value=\"MU\">Mauritius</option>\n                <option value=\"YT\">Mayotte</option>\n                <option value=\"MX\">Mexico</option>\n                <option value=\"FM\">Micronesia, Federated States of</option>\n                <option value=\"MD\">Moldova, Republic of</option>\n                <option value=\"MC\">Monaco</option>\n                <option value=\"MN\">Mongolia</option>\n                <option value=\"ME\">Montenegro</option>\n                <option value=\"MS\">Montserrat</option>\n                <option value=\"MA\">Morocco</option>\n                <option value=\"MZ\">Mozambique</option>\n                <option value=\"MM\">Myanmar</option>\n                <option value=\"NA\">Namibia</option>\n                <option value=\"NR\">Nauru</option>\n                <option value=\"NP\">Nepal</option>\n                <option value=\"NL\">Netherlands</option>\n                <option value=\"NC\">New Caledonia</option>\n                <option value=\"NZ\">New Zealand</option>\n                <option value=\"NI\">Nicaragua</option>\n                <option value=\"NE\">Niger</option>\n                <option value=\"NG\">Nigeria</option>\n                <option value=\"NU\">Niue</option>\n                <option value=\"NF\">Norfolk Island</option>\n                <option value=\"MP\">Northern Mariana Islands</option>\n                <option value=\"NO\">Norway</option>\n                <option value=\"OM\">Oman</option>\n                <option value=\"PK\">Pakistan</option>\n                <option value=\"PW\">Palau</option>\n                <option value=\"PS\">Palestinian Territory, Occupied</option>\n                <option value=\"PA\">Panama</option>\n                <option value=\"PG\">Papua New Guinea</option>\n                <option value=\"PY\">Paraguay</option>\n                <option value=\"PE\">Peru</option>\n                <option value=\"PH\">Philippines</option>\n                <option value=\"PN\">Pitcairn</option>\n                <option value=\"PL\">Poland</option>\n                <option value=\"PT\">Portugal</option>\n                <option value=\"PR\">Puerto Rico</option>\n                <option value=\"QA\">Qatar</option>\n                <option value=\"RE\">Réunion</option>\n                <option value=\"RO\">Romania</option>\n                <option value=\"RU\">Russian Federation</option>\n                <option value=\"RW\">Rwanda</option>\n                <option value=\"BL\">Saint Barthélemy</option>\n                <option value=\"SH\">Saint Helena, Ascension and Tristan da Cunha</option>\n                <option value=\"KN\">Saint Kitts and Nevis</option>\n                <option value=\"LC\">Saint Lucia</option>\n                <option value=\"MF\">Saint Martin (French part)</option>\n                <option value=\"PM\">Saint Pierre and Miquelon</option>\n                <option value=\"VC\">Saint Vincent and the Grenadines</option>\n                <option value=\"WS\">Samoa</option>\n                <option value=\"SM\">San Marino</option>\n                <option value=\"ST\">Sao Tome and Principe</option>\n                <option value=\"SA\">Saudi Arabia</option>\n                <option value=\"SN\">Senegal</option>\n                <option value=\"RS\">Serbia</option>\n                <option value=\"SC\">Seychelles</option>\n                <option value=\"SL\">Sierra Leone</option>\n                <option value=\"SG\">Singapore</option>\n                <option value=\"SX\">Sint Maarten (Dutch part)</option>\n                <option value=\"SK\">Slovakia</option>\n                <option value=\"SI\">Slovenia</option>\n                <option value=\"SB\">Solomon Islands</option>\n                <option value=\"SO\">Somalia</option>\n                <option value=\"ZA\">South Africa</option>\n                <option value=\"GS\">South Georgia and the South Sandwich Islands</option>\n                <option value=\"SS\">South Sudan</option>\n                <option value=\"ES\">Spain</option>\n                <option value=\"LK\">Sri Lanka</option>\n                <option value=\"SD\">Sudan</option>\n                <option value=\"SR\">Suriname</option>\n                <option value=\"SJ\">Svalbard and Jan Mayen</option>\n                <option value=\"SZ\">Swaziland</option>\n                <option value=\"SE\">Sweden</option>\n                <option value=\"CH\">Switzerland</option>\n                <option value=\"SY\">Syrian Arab Republic</option>\n                <option value=\"TW\">Taiwan, Province of China</option>\n                <option value=\"TJ\">Tajikistan</option>\n                <option value=\"TZ\">Tanzania, United Republic of</option>\n                <option value=\"TH\">Thailand</option>\n                <option value=\"TL\">Timor-Leste</option>\n                <option value=\"TG\">Togo</option>\n                <option value=\"TK\">Tokelau</option>\n                <option value=\"TO\">Tonga</option>\n                <option value=\"TT\">Trinidad and Tobago</option>\n                <option value=\"TN\">Tunisia</option>\n                <option value=\"TR\">Turkey</option>\n                <option value=\"TM\">Turkmenistan</option>\n                <option value=\"TC\">Turks and Caicos Islands</option>\n                <option value=\"TV\">Tuvalu</option>\n                <option value=\"UG\">Uganda</option>\n                <option value=\"UA\">Ukraine</option>\n                <option value=\"AE\">United Arab Emirates</option>\n                <option value=\"UM\">United States Minor Outlying Islands</option>\n                <option value=\"UY\">Uruguay</option>\n                <option value=\"UZ\">Uzbekistan</option>\n                <option value=\"VU\">Vanuatu</option>\n                <option value=\"VE\">Venezuela, Bolivarian Republic of</option>\n                <option value=\"VN\">Viet Nam</option>\n                <option value=\"VG\">Virgin Islands, British</option>\n                <option value=\"VI\">Virgin Islands, U.S.</option>\n                <option value=\"WF\">Wallis and Futuna</option>\n                <option value=\"EH\">Western Sahara</option>\n                <option value=\"YE\">Yemen</option>\n                <option value=\"ZM\">Zambia</option>\n                <option value=\"ZW\">Zimbabwe</option>\n            </select>\n        </div>\n        <div class=\"form-group col-4\">\n            <label for=\"address_zip\">{{'zipPostalCode' | i18n}}</label>\n            <input id=\"address_zip\" class=\"form-control\" type=\"text\" name=\"address_zip\" [(ngModel)]=\"card.address_zip\" required autocomplete=\"postal-code\">\n        </div>\n    </div>\n</ng-container>\n<ng-container *ngIf=\"method === 'paypal'\">\n    <div class=\"mb-3\">\n        <div id=\"bt-dropin-container\" class=\"mb-1\"></div>\n        <small class=\"text-muted\">{{'paypalClickSubmit' | i18n}}</small>\n    </div>\n</ng-container>\n<ng-container *ngIf=\"method === 'bank'\">\n    <app-callout type=\"warning\" title=\"{{'verifyBankAccount' | i18n}}\">\n        {{'verifyBankAccountInitialDesc' | i18n}} {{'verifyBankAccountFailureWarning' | i18n}}\n    </app-callout>\n    <div class=\"row\">\n        <div class=\"form-group col-6\">\n            <label for=\"routing_number\">{{'routingNumber' | i18n}}</label>\n            <input id=\"routing_number\" class=\"form-control\" type=\"text\" name=\"routing_number\" [(ngModel)]=\"bank.routing_number\" required\n                appInputVerbatim>\n        </div>\n        <div class=\"form-group col-6\">\n            <label for=\"account_number\">{{'accountNumber' | i18n}}</label>\n            <input id=\"account_number\" class=\"form-control\" type=\"text\" name=\"account_number\" [(ngModel)]=\"bank.account_number\" required\n                appInputVerbatim>\n        </div>\n        <div class=\"form-group col-6\">\n            <label for=\"account_holder_name\">{{'accountHolderName' | i18n}}</label>\n            <input id=\"account_holder_name\" class=\"form-control\" type=\"text\" name=\"account_holder_name\" [(ngModel)]=\"bank.account_holder_name\"\n                required>\n        </div>\n        <div class=\"form-group col-6\">\n            <label for=\"account_holder_type\">{{'bankAccountType' | i18n}}</label>\n            <select id=\"account_holder_type\" class=\"form-control\" name=\"account_holder_type\" [(ngModel)]=\"bank.account_holder_type\" required>\n                <option value=\"\">-- {{'select' | i18n}} --</option>\n                <option value=\"company\">{{'bankAccountTypeCompany' | i18n}}</option>\n                <option value=\"individual\">{{'bankAccountTypeIndividual' | i18n}}</option>\n            </select>\n        </div>\n    </div>\n</ng-container>\n";

/***/ }),

/***/ "./src/app/settings/payment.component.ts":
/*!***********************************************!*\
  !*** ./src/app/settings/payment.component.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var Keys = {
    stripeTest: 'pk_test_KPoCfZXu7mznb9uSCPZ2JpTD',
    stripeLive: 'pk_live_bpN0P37nMxrMQkcaHXtAybJk',
    btSandbox: 'sandbox_r72q8jq6_9pnxkwm75f87sdc2',
    btProduction: 'production_qfbsv8kc_njj2zjtyngtjmbjd',
};
var PaymentComponent = /** @class */ (function () {
    function PaymentComponent(i18nService, platformUtilsService) {
        var _this = this;
        this.platformUtilsService = platformUtilsService;
        this.showOptions = true;
        this.method = 'card';
        this.hideBank = false;
        this.hidePaypal = false;
        this.card = {
            number: null,
            exp_month: null,
            exp_year: null,
            address_country: '',
            address_zip: null,
        };
        this.bank = {
            routing_number: null,
            account_number: null,
            account_holder_name: null,
            account_holder_type: '',
            currency: 'USD',
            country: 'US',
        };
        this.btInstance = null;
        this.stripeScript = window.document.createElement('script');
        this.stripeScript.src = 'https://js.stripe.com/v2/';
        this.stripeScript.async = true;
        this.stripeScript.onload = function () {
            window.Stripe.setPublishableKey(_this.platformUtilsService.isDev() ? Keys.stripeTest : Keys.stripeLive);
        };
        this.btScript = window.document.createElement('script');
        this.btScript.src = 'https://js.braintreegateway.com/web/dropin/1.4.0/js/dropin.min.js';
        this.btScript.async = true;
        this.cardExpMonthOptions = [
            { name: '-- ' + i18nService.t('select') + ' --', value: null },
            { name: '01 - ' + i18nService.t('january'), value: '01' },
            { name: '02 - ' + i18nService.t('february'), value: '02' },
            { name: '03 - ' + i18nService.t('march'), value: '03' },
            { name: '04 - ' + i18nService.t('april'), value: '04' },
            { name: '05 - ' + i18nService.t('may'), value: '05' },
            { name: '06 - ' + i18nService.t('june'), value: '06' },
            { name: '07 - ' + i18nService.t('july'), value: '07' },
            { name: '08 - ' + i18nService.t('august'), value: '08' },
            { name: '09 - ' + i18nService.t('september'), value: '09' },
            { name: '10 - ' + i18nService.t('october'), value: '10' },
            { name: '11 - ' + i18nService.t('november'), value: '11' },
            { name: '12 - ' + i18nService.t('december'), value: '12' },
        ];
        this.cardExpYearOptions = [
            { name: '-- ' + i18nService.t('select') + ' --', value: null },
        ];
        var year = (new Date()).getFullYear();
        for (var i = year; i < (year + 15); i++) {
            this.cardExpYearOptions.push({ name: i.toString(), value: i.toString().slice(-2) });
        }
    }
    PaymentComponent.prototype.ngOnInit = function () {
        if (!this.showOptions) {
            this.hidePaypal = this.method !== 'paypal';
            this.hideBank = this.method !== 'bank';
        }
        window.document.head.appendChild(this.stripeScript);
        if (!this.hidePaypal) {
            window.document.head.appendChild(this.btScript);
        }
    };
    PaymentComponent.prototype.ngOnDestroy = function () {
        window.document.head.removeChild(this.stripeScript);
        Array.from(window.document.querySelectorAll('iframe')).forEach(function (el) {
            if (el.src != null && el.src.indexOf('stripe') > -1) {
                window.document.body.removeChild(el);
            }
        });
        if (!this.hidePaypal) {
            window.document.head.removeChild(this.btScript);
            var btStylesheet = window.document.head.querySelector('#braintree-dropin-stylesheet');
            if (btStylesheet != null) {
                window.document.head.removeChild(btStylesheet);
            }
        }
    };
    PaymentComponent.prototype.changeMethod = function () {
        var _this = this;
        if (this.method !== 'paypal') {
            this.btInstance = null;
            return;
        }
        window.setTimeout(function () {
            window.braintree.dropin.create({
                authorization: _this.platformUtilsService.isDev() ? Keys.btSandbox : Keys.btProduction,
                container: '#bt-dropin-container',
                paymentOptionPriority: ['paypal'],
                paypal: {
                    flow: 'vault',
                    buttonStyle: {
                        label: 'pay',
                        size: 'medium',
                        shape: 'pill',
                        color: 'blue',
                    },
                },
            }, function (createErr, instance) {
                if (createErr != null) {
                    // tslint:disable-next-line
                    console.error(createErr);
                    return;
                }
                _this.btInstance = instance;
            });
        }, 250);
    };
    PaymentComponent.prototype.createPaymentToken = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            if (_this.method === 'paypal') {
                _this.btInstance.requestPaymentMethod().then(function (payload) {
                    resolve(payload.nonce);
                }).catch(function (err) {
                    reject(err.message);
                });
            }
            else if (_this.method === 'card' || _this.method === 'bank') {
                var createObj = _this.method === 'card' ? window.Stripe.card :
                    window.Stripe.bankAccount;
                var sourceObj = _this.method === 'card' ? _this.card : _this.bank;
                createObj.createToken(sourceObj, function (status, response) {
                    if (status === 200 && response.id != null) {
                        resolve(response.id);
                    }
                    else if (response.error != null) {
                        reject(response.error.message);
                    }
                    else {
                        reject();
                    }
                });
            }
        });
    };
    PaymentComponent.prototype.getCountry = function () {
        return this.card.address_country;
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], PaymentComponent.prototype, "showOptions", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], PaymentComponent.prototype, "method", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], PaymentComponent.prototype, "hideBank", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], PaymentComponent.prototype, "hidePaypal", void 0);
    PaymentComponent = __decorate([
        core_1.Component({
            selector: 'app-payment',
            template: __webpack_require__(/*! ./payment.component.html */ "./src/app/settings/payment.component.html"),
        }),
        __metadata("design:paramtypes", [i18n_service_1.I18nService, platformUtils_service_1.PlatformUtilsService])
    ], PaymentComponent);
    return PaymentComponent;
}());
exports.PaymentComponent = PaymentComponent;


/***/ }),

/***/ "./src/app/settings/premium.component.html":
/*!*************************************************!*\
  !*** ./src/app/settings/premium.component.html ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>{{'goPremium' | i18n}}</h1>\n</div>\n<app-callout type=\"success\">\n    <p>{{'premiumUpgradeUnlockFeatures' | i18n}}</p>\n    <ul class=\"fa-ul\">\n        <li>\n            <i class=\"fa fa-check text-success fa-li\"></i>\n            {{'premiumSignUpStorage' | i18n}}\n        </li>\n        <li>\n            <i class=\"fa fa-check text-success fa-li\"></i>\n            {{'premiumSignUpTwoStep' | i18n}}\n        </li>\n        <li>\n            <i class=\"fa fa-check text-success fa-li\"></i>\n            {{'premiumSignUpTotp' | i18n}}\n        </li>\n        <li>\n            <i class=\"fa fa-check text-success fa-li\"></i>\n            {{'premiumSignUpSupport' | i18n}}\n        </li>\n        <li>\n            <i class=\"fa fa-check text-success fa-li\"></i>\n            {{'premiumSignUpFuture' | i18n}}\n        </li>\n    </ul>\n    <p class=\"text-lg\" [ngClass]=\"{'mb-0':!selfHosted}\">{{'premiumPrice' | i18n : (premiumPrice | currency:'$')}}</p>\n    <a href=\"https://vault.bitwarden.com/#/settings/premium\" target=\"_blank\" rel=\"noopener\" class=\"btn btn-outline-secondary\"\n        *ngIf=\"selfHosted\">\n        {{'purchasePremium' | i18n}}\n    </a>\n</app-callout>\n<ng-container *ngIf=\"selfHosted\">\n    <p>{{'uploadLicenseFilePremium' | i18n}}</p>\n    <form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n        <div class=\"form-group\">\n            <label for=\"file\">{{'licenseFile' | i18n}}</label>\n            <input type=\"file\" id=\"file\" class=\"form-control-file\" name=\"file\" required>\n            <small class=\"form-text text-muted\">{{'licenseFileDesc' | i18n : 'bitwarden_premium_license.json'}}</small>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n            <span>{{'submit' | i18n}}</span>\n        </button>\n    </form>\n</ng-container>\n<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate *ngIf=\"!selfHosted\">\n    <h2 class=\"mt-5\">{{'addons' | i18n}}</h2>\n    <div class=\"row\">\n        <div class=\"form-group col-6\">\n            <label for=\"additionalStorage\">{{'additionalStorageGb' | i18n}}</label>\n            <input id=\"additionalStorage\" class=\"form-control\" type=\"number\" name=\"AdditionalStorageGb\" [(ngModel)]=\"additionalStorage\"\n                min=\"0\" max=\"99\" step=\"1\" placeholder=\"{{'additionalStorageGbDesc' | i18n}}\">\n            <small class=\"text-muted form-text\">{{'additionalStorageDesc' | i18n : '1 GB' : (storageGbPrice | currency:'$')}}</small>\n        </div>\n    </div>\n    <h2 class=\"spaced-header\">{{'summary' | i18n}}</h2>\n    {{'premiumMembership' | i18n}}: {{premiumPrice | currency:'$'}}\n    <br> {{'additionalStorageGb' | i18n}}: {{additionalStorage || 0}} GB &times; {{storageGbPrice | currency:'$'}} = {{additionalStorageTotal\n    | currency:'$'}}\n    <hr class=\"my-3\">\n    <div class=\"text-lg\">\n        <strong>{{'total' | i18n}}:</strong> {{total | currency:'USD $'}} /{{'year' | i18n}}\n    </div>\n    <small class=\"text-muted font-italic\">{{'paymentChargedAnnually' | i18n}}</small>\n    <h2 class=\"spaced-header mb-4\">{{'paymentInformation' | i18n}}</h2>\n    <app-payment [hideBank]=\"true\"></app-payment>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'submit' | i18n}}</span>\n    </button>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/premium.component.ts":
/*!***********************************************!*\
  !*** ./src/app/settings/premium.component.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var sync_service_1 = __webpack_require__(/*! jslib/abstractions/sync.service */ "./jslib/src/abstractions/sync.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var payment_component_1 = __webpack_require__(/*! ./payment.component */ "./src/app/settings/payment.component.ts");
var PremiumComponent = /** @class */ (function () {
    function PremiumComponent(apiService, i18nService, analytics, toasterService, platformUtilsService, tokenService, router, messagingService, syncService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.tokenService = tokenService;
        this.router = router;
        this.messagingService = messagingService;
        this.syncService = syncService;
        this.selfHosted = false;
        this.premiumPrice = 10;
        this.storageGbPrice = 4;
        this.additionalStorage = 0;
        this.selfHosted = platformUtilsService.isSelfHost();
    }
    PremiumComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var premium;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.tokenService.getPremium()];
                    case 1:
                        premium = _a.sent();
                        if (premium) {
                            this.router.navigate(['/settings/billing']);
                            return [2 /*return*/];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    PremiumComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var files, fileEl, fd, _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        files = null;
                        if (this.selfHosted) {
                            fileEl = document.getElementById('file');
                            files = fileEl.files;
                            if (files == null || files.length === 0) {
                                this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('selectFile'));
                                return [2 /*return*/];
                            }
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        if (this.selfHosted) {
                            if (!this.tokenService.getEmailVerified()) {
                                this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('verifyEmailFirst'));
                                return [2 /*return*/];
                            }
                            fd = new FormData();
                            fd.append('license', files[0]);
                            this.formPromise = this.apiService.postAccountLicense(fd).then(function () {
                                return _this.finalizePremium();
                            });
                        }
                        else {
                            this.formPromise = this.paymentComponent.createPaymentToken().then(function (token) {
                                var fd = new FormData();
                                fd.append('paymentToken', token);
                                fd.append('additionalStorageGb', (_this.additionalStorage || 0).toString());
                                return _this.apiService.postPremium(fd);
                            }).then(function () {
                                return _this.finalizePremium();
                            });
                        }
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _b.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    PremiumComponent.prototype.finalizePremium = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all([
                            this.apiService.refreshIdentityToken(),
                            this.syncService.fullSync(true),
                        ])];
                    case 1:
                        _a.sent();
                        this.analytics.eventTrack.next({ action: 'Signed Up Premium' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('premiumUpdated'));
                        this.messagingService.send('purchasedPremium');
                        this.router.navigate(['/settings/billing']);
                        return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(PremiumComponent.prototype, "additionalStorageTotal", {
        get: function () {
            return this.storageGbPrice * this.additionalStorage;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PremiumComponent.prototype, "total", {
        get: function () {
            return this.additionalStorageTotal + this.premiumPrice;
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        core_1.ViewChild(payment_component_1.PaymentComponent),
        __metadata("design:type", payment_component_1.PaymentComponent)
    ], PremiumComponent.prototype, "paymentComponent", void 0);
    PremiumComponent = __decorate([
        core_1.Component({
            selector: 'app-premium',
            template: __webpack_require__(/*! ./premium.component.html */ "./src/app/settings/premium.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            platformUtils_service_1.PlatformUtilsService, token_service_1.TokenService,
            router_1.Router, messaging_service_1.MessagingService,
            sync_service_1.SyncService])
    ], PremiumComponent);
    return PremiumComponent;
}());
exports.PremiumComponent = PremiumComponent;


/***/ }),

/***/ "./src/app/settings/profile.component.html":
/*!*************************************************!*\
  !*** ./src/app/settings/profile.component.html ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngIf=\"loading\">\n    <i class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n</div>\n<form *ngIf=\"profile && !loading\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"row\">\n        <div class=\"col-6\">\n            <div class=\"form-group\">\n                <label for=\"name\">{{'name' | i18n}}</label>\n                <input id=\"name\" class=\"form-control\" type=\"text\" name=\"Name\" [(ngModel)]=\"profile.name\">\n            </div>\n            <div class=\"form-group\">\n                <label for=\"email\">{{'email' | i18n}}</label>\n                <input id=\"email\" class=\"form-control\" type=\"text\" name=\"Email\" [(ngModel)]=\"profile.email\" readonly>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"masterPasswordHint\">{{'masterPassHintLabel' | i18n}}</label>\n                <input id=\"masterPasswordHint\" class=\"form-control\" type=\"text\" name=\"MasterPasswordHint\" [(ngModel)]=\"profile.masterPasswordHint\">\n            </div>\n        </div>\n        <div class=\"col-6\">\n            <app-avatar data=\"{{profile.name || profile.email}}\" dynamic=\"true\" width=\"75\" height=\"75\" fontSize=\"35\"></app-avatar>\n        </div>\n    </div>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'save' | i18n}}</span>\n    </button>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/profile.component.ts":
/*!***********************************************!*\
  !*** ./src/app/settings/profile.component.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var updateProfileRequest_1 = __webpack_require__(/*! jslib/models/request/updateProfileRequest */ "./jslib/src/models/request/updateProfileRequest.ts");
var ProfileComponent = /** @class */ (function () {
    function ProfileComponent(apiService, i18nService, analytics, toasterService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.loading = true;
    }
    ProfileComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.apiService.getProfile()];
                    case 1:
                        _a.profile = _b.sent();
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    ProfileComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        request = new updateProfileRequest_1.UpdateProfileRequest(this.profile.name, this.profile.masterPasswordHint);
                        this.formPromise = this.apiService.putProfile(request);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Updated Profile' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('accountUpdated'));
                        return [3 /*break*/, 3];
                    case 2:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    ProfileComponent = __decorate([
        core_1.Component({
            selector: 'app-profile',
            template: __webpack_require__(/*! ./profile.component.html */ "./src/app/settings/profile.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService])
    ], ProfileComponent);
    return ProfileComponent;
}());
exports.ProfileComponent = ProfileComponent;


/***/ }),

/***/ "./src/app/settings/purge-vault.component.html":
/*!*****************************************************!*\
  !*** ./src/app/settings/purge-vault.component.html ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{'purgeVault' | i18n}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <p>{{'purgeVaultDesc' | i18n}}</p>\n                <app-callout type=\"warning\">{{'purgeVaultWarning' | i18n}}</app-callout>\n                <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n                <input id=\"masterPassword\" type=\"password\" name=\"MasterPasswordHash\" class=\"form-control\" [(ngModel)]=\"masterPassword\" required\n                    appAutofocus appInputVerbatim>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-danger btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'purgeVault' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/purge-vault.component.ts":
/*!***************************************************!*\
  !*** ./src/app/settings/purge-vault.component.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var passwordVerificationRequest_1 = __webpack_require__(/*! jslib/models/request/passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var PurgeVaultComponent = /** @class */ (function () {
    function PurgeVaultComponent(apiService, i18nService, analytics, toasterService, cryptoService, router) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.router = router;
    }
    PurgeVaultComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (this.masterPassword == null || this.masterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassRequired'));
                            return [2 /*return*/];
                        }
                        request = new passwordVerificationRequest_1.PasswordVerificationRequest();
                        _a = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, null)];
                    case 1:
                        _a.masterPasswordHash = _c.sent();
                        _c.label = 2;
                    case 2:
                        _c.trys.push([2, 4, , 5]);
                        this.formPromise = this.apiService.postPurgeCiphers(request);
                        return [4 /*yield*/, this.formPromise];
                    case 3:
                        _c.sent();
                        this.analytics.eventTrack.next({ action: 'Purged Vault' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('vaultPurged'));
                        this.router.navigate(['vault']);
                        return [3 /*break*/, 5];
                    case 4:
                        _b = _c.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    PurgeVaultComponent = __decorate([
        core_1.Component({
            selector: 'app-purge-vault',
            template: __webpack_require__(/*! ./purge-vault.component.html */ "./src/app/settings/purge-vault.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            crypto_service_1.CryptoService, router_1.Router])
    ], PurgeVaultComponent);
    return PurgeVaultComponent;
}());
exports.PurgeVaultComponent = PurgeVaultComponent;


/***/ }),

/***/ "./src/app/settings/settings.component.html":
/*!**************************************************!*\
  !*** ./src/app/settings/settings.component.html ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"container page-content\">\n    <div class=\"row\">\n        <div class=\"col-3\">\n            <div class=\"card\">\n                <div class=\"card-header\">{{'settings' | i18n}}</div>\n                <div class=\"list-group list-group-flush\">\n                    <a routerLink=\"account\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'myAccount' | i18n}}\n                    </a>\n                    <a routerLink=\"options\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'options' | i18n}}\n                    </a>\n                    <a routerLink=\"organizations\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'organizations' | i18n}}\n                    </a>\n                    <a routerLink=\"billing\" class=\"list-group-item\" routerLinkActive=\"active\" *ngIf=\"premium\">\n                        {{'billingAndLicensing' | i18n}}\n                    </a>\n                    <a routerLink=\"premium\" class=\"list-group-item\" routerLinkActive=\"active\" *ngIf=\"!premium\">\n                        {{'goPremium' | i18n}}\n                    </a>\n                    <a routerLink=\"two-factor\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'twoStepLogin' | i18n}}\n                    </a>\n                    <a routerLink=\"domain-rules\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'domainRules' | i18n}}\n                    </a>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-9\">\n            <router-outlet></router-outlet>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/settings.component.ts":
/*!************************************************!*\
  !*** ./src/app/settings/settings.component.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var broadcaster_service_1 = __webpack_require__(/*! jslib/angular/services/broadcaster.service */ "./jslib/src/angular/services/broadcaster.service.ts");
var BroadcasterSubscriptionId = 'SettingsComponent';
var SettingsComponent = /** @class */ (function () {
    function SettingsComponent(tokenService, broadcasterService, ngZone) {
        this.tokenService = tokenService;
        this.broadcasterService = broadcasterService;
        this.ngZone = ngZone;
    }
    SettingsComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.broadcasterService.subscribe(BroadcasterSubscriptionId, function (message) { return __awaiter(_this, void 0, void 0, function () {
                            var _this = this;
                            return __generator(this, function (_a) {
                                this.ngZone.run(function () { return __awaiter(_this, void 0, void 0, function () {
                                    var _a;
                                    return __generator(this, function (_b) {
                                        switch (_b.label) {
                                            case 0:
                                                _a = message.command;
                                                switch (_a) {
                                                    case 'purchasedPremium': return [3 /*break*/, 1];
                                                }
                                                return [3 /*break*/, 3];
                                            case 1: return [4 /*yield*/, this.load()];
                                            case 2:
                                                _b.sent();
                                                return [3 /*break*/, 3];
                                            case 3: return [2 /*return*/];
                                        }
                                    });
                                }); });
                                return [2 /*return*/];
                            });
                        }); });
                        return [4 /*yield*/, this.load()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    SettingsComponent.prototype.ngOnDestroy = function () {
        this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);
    };
    SettingsComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.tokenService.getPremium()];
                    case 1:
                        _a.premium = _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    SettingsComponent = __decorate([
        core_1.Component({
            selector: 'app-settings',
            template: __webpack_require__(/*! ./settings.component.html */ "./src/app/settings/settings.component.html"),
        }),
        __metadata("design:paramtypes", [token_service_1.TokenService, broadcaster_service_1.BroadcasterService,
            core_1.NgZone])
    ], SettingsComponent);
    return SettingsComponent;
}());
exports.SettingsComponent = SettingsComponent;


/***/ }),

/***/ "./src/app/settings/two-factor-authenticator.component.html":
/*!******************************************************************!*\
  !*** ./src/app/settings/two-factor-authenticator.component.html ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'twoStepLogin' | i18n}}\n                    <small>{{'authenticatorAppTitle' | i18n}}</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <app-two-factor-verify [organizationId]=\"organizationId\" [type]=\"type\" (onAuthed)=\"auth($event)\" *ngIf=\"!authed\">\n            </app-two-factor-verify>\n            <form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate *ngIf=\"authed\">\n                <div class=\"modal-body\">\n                    <ng-container *ngIf=\"!enabled\">\n                        <img src=\"" + __webpack_require__(/*! ../../images/two-factor/0.png */ "./src/images/two-factor/0.png") + "\" class=\"float-right\" alt=\"\">\n                        <p>{{'twoStepAuthenticatorDesc' | i18n}}</p>\n                        <p>\n                            <strong>1. {{'twoStepAuthenticatorDownloadApp' | i18n}}</strong>\n                        </p>\n                    </ng-container>\n                    <ng-container *ngIf=\"enabled\">\n                        <app-callout type=\"success\" title=\"{{'enabled' | i18n}}\" icon=\"fa-check-circle\">\n                            <p>{{'twoStepLoginProviderEnabled' | i18n}}</p>\n                            {{'twoStepAuthenticatorReaddDesc' | i18n}}\n                        </app-callout>\n                        <img src=\"" + __webpack_require__(/*! ../../images/two-factor/0.png */ "./src/images/two-factor/0.png") + "\" class=\"float-right\" alt=\"\">\n                        <p>{{'twoStepAuthenticatorNeedApp' | i18n}}</p>\n                    </ng-container>\n                    <ul class=\"fa-ul\">\n                        <li>\n                            <i class=\"fa-li fa fa-apple\"></i>{{'iosDevices' | i18n}}:\n                            <a href=\"https://itunes.apple.com/us/app/authy/id494168017?mt=8\" target=\"_blank\" rel=\"noopener\">Authy</a>\n                        </li>\n                        <li>\n                            <i class=\"fa-li fa fa-android\"></i>{{'androidDevices' | i18n}}:\n                            <a href=\"https://play.google.com/store/apps/details?id=com.authy.authy\" target=\"_blank\" rel=\"noopener\">Authy</a>\n                        </li>\n                        <li>\n                            <i class=\"fa-li fa fa-windows\"></i>{{'windowsDevices' | i18n}}:\n                            <a href=\"https://www.microsoft.com/p/authenticator/9wzdncrfj3rj\" target=\"_blank\" rel=\"noopener\">Microsoft Authenticator</a>\n                        </li>\n                    </ul>\n                    <p>{{'twoStepAuthenticatorAppsRecommended' | i18n}}</p>\n                    <p *ngIf=\"!enabled\">\n                        <strong>2. {{'twoStepAuthenticatorScanCode' | i18n}}</strong>\n                    </p>\n                    <hr *ngIf=\"enabled\">\n                    <p class=\"text-center\" [ngClass]=\"{'mb-0': enabled}\">\n                        <canvas id=\"qr\"></canvas><br>\n                        <code title=\"{{'key' | i18n}}\">{{key}}</code>\n                    </p>\n                    <ng-container *ngIf=\"!enabled\">\n                        <label for=\"token\">3. {{'twoStepAuthenticatorEnterCode' | i18n}}</label>\n                        <input id=\"token\" type=\"text\" name=\"Token\" class=\"form-control\" [(ngModel)]=\"token\" required appInputVerbatim>\n                    </ng-container>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        <span *ngIf=\"!enabled\">{{'enable' | i18n}}</span>\n                        <span *ngIf=\"enabled\">{{'disable' | i18n}}</span>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/two-factor-authenticator.component.ts":
/*!****************************************************************!*\
  !*** ./src/app/settings/two-factor-authenticator.component.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var updateTwoFactorAuthenticatorRequest_1 = __webpack_require__(/*! jslib/models/request/updateTwoFactorAuthenticatorRequest */ "./jslib/src/models/request/updateTwoFactorAuthenticatorRequest.ts");
var twoFactorProviderType_1 = __webpack_require__(/*! jslib/enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var two_factor_base_component_1 = __webpack_require__(/*! ./two-factor-base.component */ "./src/app/settings/two-factor-base.component.ts");
var TwoFactorAuthenticatorComponent = /** @class */ (function (_super) {
    __extends(TwoFactorAuthenticatorComponent, _super);
    function TwoFactorAuthenticatorComponent(apiService, i18nService, analytics, toasterService, userService, platformUtilsService) {
        var _this = _super.call(this, apiService, i18nService, analytics, toasterService, platformUtilsService) || this;
        _this.userService = userService;
        _this.type = twoFactorProviderType_1.TwoFactorProviderType.Authenticator;
        _this.qrScript = window.document.createElement('script');
        _this.qrScript.src = 'scripts/qrious.min.js';
        _this.qrScript.async = true;
        return _this;
    }
    TwoFactorAuthenticatorComponent.prototype.ngOnInit = function () {
        window.document.body.appendChild(this.qrScript);
    };
    TwoFactorAuthenticatorComponent.prototype.ngOnDestroy = function () {
        window.document.body.removeChild(this.qrScript);
    };
    TwoFactorAuthenticatorComponent.prototype.auth = function (authResponse) {
        _super.prototype.auth.call(this, authResponse);
        return this.processResponse(authResponse.response);
    };
    TwoFactorAuthenticatorComponent.prototype.submit = function () {
        if (this.enabled) {
            return _super.prototype.disable.call(this, this.formPromise);
        }
        else {
            return this.enable();
        }
    };
    TwoFactorAuthenticatorComponent.prototype.enable = function () {
        var _this = this;
        var request = new updateTwoFactorAuthenticatorRequest_1.UpdateTwoFactorAuthenticatorRequest();
        request.masterPasswordHash = this.masterPasswordHash;
        request.token = this.token;
        request.key = this.key;
        return _super.prototype.enable.call(this, function () { return __awaiter(_this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.formPromise = this.apiService.putTwoFactorAuthenticator(request);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, this.processResponse(response)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
    };
    TwoFactorAuthenticatorComponent.prototype.processResponse = function (response) {
        return __awaiter(this, void 0, void 0, function () {
            var email;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.token = null;
                        this.enabled = response.enabled;
                        this.key = response.key;
                        return [4 /*yield*/, this.userService.getEmail()];
                    case 1:
                        email = _a.sent();
                        window.setTimeout(function () {
                            var qr = new window.QRious({
                                element: document.getElementById('qr'),
                                value: 'otpauth://totp/Bitwarden:' + encodeURIComponent(email) +
                                    '?secret=' + encodeURIComponent(_this.key) + '&issuer=Bitwarden',
                                size: 160,
                            });
                        }, 100);
                        return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorAuthenticatorComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor-authenticator',
            template: __webpack_require__(/*! ./two-factor-authenticator.component.html */ "./src/app/settings/two-factor-authenticator.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            user_service_1.UserService, platformUtils_service_1.PlatformUtilsService])
    ], TwoFactorAuthenticatorComponent);
    return TwoFactorAuthenticatorComponent;
}(two_factor_base_component_1.TwoFactorBaseComponent));
exports.TwoFactorAuthenticatorComponent = TwoFactorAuthenticatorComponent;


/***/ }),

/***/ "./src/app/settings/two-factor-base.component.ts":
/*!*******************************************************!*\
  !*** ./src/app/settings/two-factor-base.component.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var twoFactorProviderType_1 = __webpack_require__(/*! jslib/enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var twoFactorProviderRequest_1 = __webpack_require__(/*! jslib/models/request/twoFactorProviderRequest */ "./jslib/src/models/request/twoFactorProviderRequest.ts");
var TwoFactorBaseComponent = /** @class */ (function () {
    function TwoFactorBaseComponent(apiService, i18nService, analytics, toasterService, platformUtilsService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.platformUtilsService = platformUtilsService;
        this.onUpdated = new core_1.EventEmitter();
        this.twoFactorProviderType = twoFactorProviderType_1.TwoFactorProviderType;
        this.enabled = false;
        this.authed = false;
    }
    TwoFactorBaseComponent.prototype.auth = function (authResponse) {
        this.masterPasswordHash = authResponse.masterPasswordHash;
        this.authed = true;
    };
    TwoFactorBaseComponent.prototype.enable = function (enableFunction) {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, enableFunction()];
                    case 1:
                        _b.sent();
                        this.analytics.eventTrack.next({
                            action: 'Enabled Two-step ' + twoFactorProviderType_1.TwoFactorProviderType[this.type].toString(),
                        });
                        this.onUpdated.emit(true);
                        return [3 /*break*/, 3];
                    case 2:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorBaseComponent.prototype.disable = function (promise) {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('twoStepDisableDesc'), this.i18nService.t('disable'), this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        request = new twoFactorProviderRequest_1.TwoFactorProviderRequest();
                        request.masterPasswordHash = this.masterPasswordHash;
                        request.type = this.type;
                        if (this.organizationId != null) {
                            promise = this.apiService.putTwoFactorOrganizationDisable(this.organizationId, request);
                        }
                        else {
                            promise = this.apiService.putTwoFactorDisable(request);
                        }
                        return [4 /*yield*/, promise];
                    case 3:
                        _b.sent();
                        this.enabled = false;
                        this.analytics.eventTrack.next({
                            action: 'Disabled Two-step ' + twoFactorProviderType_1.TwoFactorProviderType[this.type].toString(),
                        });
                        this.toasterService.popAsync('success', null, this.i18nService.t('twoStepDisabled'));
                        this.onUpdated.emit(false);
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], TwoFactorBaseComponent.prototype, "onUpdated", void 0);
    return TwoFactorBaseComponent;
}());
exports.TwoFactorBaseComponent = TwoFactorBaseComponent;


/***/ }),

/***/ "./src/app/settings/two-factor-duo.component.html":
/*!********************************************************!*\
  !*** ./src/app/settings/two-factor-duo.component.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'twoStepLogin' | i18n}}\n                    <small>Duo</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <app-two-factor-verify [organizationId]=\"organizationId\" [type]=\"type\" (onAuthed)=\"auth($event)\" *ngIf=\"!authed\">\n            </app-two-factor-verify>\n            <form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate *ngIf=\"authed\">\n                <div class=\"modal-body\">\n                    <ng-container *ngIf=\"enabled\">\n                        <app-callout type=\"success\" title=\"{{'enabled' | i18n}}\" icon=\"fa-check-circle\">\n                            {{'twoStepLoginProviderEnabled' | i18n}}\n                        </app-callout>\n                        <img src=\"" + __webpack_require__(/*! ../../images/two-factor/2.png */ "./src/images/two-factor/2.png") + "\" class=\"float-right ml-3\" alt=\"\">\n                        <strong>{{'twoFactorDuoIntegrationKey' | i18n}}:</strong> {{ikey}}\n                        <br>\n                        <strong>{{'twoFactorDuoSecretKey' | i18n}}:</strong> {{skey}}\n                        <br>\n                        <strong>{{'twoFactorDuoApiHostname' | i18n}}:</strong> {{host}}\n                    </ng-container>\n                    <ng-container *ngIf=\"!enabled\">\n                        <img src=\"" + __webpack_require__(/*! ../../images/two-factor/2.png */ "./src/images/two-factor/2.png") + "\" class=\"float-right ml-3\" alt=\"\">\n                        <p>{{'twoFactorDuoDesc' | i18n}}</p>\n                        <div class=\"form-group\">\n                            <label for=\"ikey\">{{'twoFactorDuoIntegrationKey' | i18n}}</label>\n                            <input id=\"ikey\" type=\"text\" name=\"IntegrationKey\" class=\"form-control\" [(ngModel)]=\"ikey\" required appInputVerbatim>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"skey\">{{'twoFactorDuoSecretKey' | i18n}}</label>\n                            <input id=\"skey\" type=\"password\" name=\"SecretKey\" class=\"form-control\" [(ngModel)]=\"skey\" required appInputVerbatim>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"host\">{{'twoFactorDuoApiHostname' | i18n}}</label>\n                            <input id=\"host\" type=\"text\" name=\"Host\" class=\"form-control\" [(ngModel)]=\"host\" placeholder=\"{{'ex' | i18n}} api-xxxxxxxx.duosecurity.com\"\n                                required appInputVerbatim>\n                        </div>\n                    </ng-container>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        <span *ngIf=\"!enabled\">{{'enable' | i18n}}</span>\n                        <span *ngIf=\"enabled\">{{'disable' | i18n}}</span>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/two-factor-duo.component.ts":
/*!******************************************************!*\
  !*** ./src/app/settings/two-factor-duo.component.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var twoFactorProviderType_1 = __webpack_require__(/*! jslib/enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var updateTwoFactorDuoRequest_1 = __webpack_require__(/*! jslib/models/request/updateTwoFactorDuoRequest */ "./jslib/src/models/request/updateTwoFactorDuoRequest.ts");
var two_factor_base_component_1 = __webpack_require__(/*! ./two-factor-base.component */ "./src/app/settings/two-factor-base.component.ts");
var TwoFactorDuoComponent = /** @class */ (function (_super) {
    __extends(TwoFactorDuoComponent, _super);
    function TwoFactorDuoComponent(apiService, i18nService, analytics, toasterService, platformUtilsService) {
        var _this = _super.call(this, apiService, i18nService, analytics, toasterService, platformUtilsService) || this;
        _this.type = twoFactorProviderType_1.TwoFactorProviderType.Duo;
        return _this;
    }
    TwoFactorDuoComponent.prototype.auth = function (authResponse) {
        _super.prototype.auth.call(this, authResponse);
        this.processResponse(authResponse.response);
    };
    TwoFactorDuoComponent.prototype.submit = function () {
        if (this.enabled) {
            return _super.prototype.disable.call(this, this.formPromise);
        }
        else {
            return this.enable();
        }
    };
    TwoFactorDuoComponent.prototype.enable = function () {
        var _this = this;
        var request = new updateTwoFactorDuoRequest_1.UpdateTwoFactorDuoRequest();
        request.masterPasswordHash = this.masterPasswordHash;
        request.integrationKey = this.ikey;
        request.secretKey = this.skey;
        request.host = this.host;
        return _super.prototype.enable.call(this, function () { return __awaiter(_this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.organizationId != null) {
                            this.formPromise = this.apiService.putTwoFactorOrganizationDuo(this.organizationId, request);
                        }
                        else {
                            this.formPromise = this.apiService.putTwoFactorDuo(request);
                        }
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, this.processResponse(response)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
    };
    TwoFactorDuoComponent.prototype.processResponse = function (response) {
        this.ikey = response.integrationKey;
        this.skey = response.secretKey;
        this.host = response.host;
        this.enabled = response.enabled;
    };
    TwoFactorDuoComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor-duo',
            template: __webpack_require__(/*! ./two-factor-duo.component.html */ "./src/app/settings/two-factor-duo.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            platformUtils_service_1.PlatformUtilsService])
    ], TwoFactorDuoComponent);
    return TwoFactorDuoComponent;
}(two_factor_base_component_1.TwoFactorBaseComponent));
exports.TwoFactorDuoComponent = TwoFactorDuoComponent;


/***/ }),

/***/ "./src/app/settings/two-factor-email.component.html":
/*!**********************************************************!*\
  !*** ./src/app/settings/two-factor-email.component.html ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'twoStepLogin' | i18n}}\n                    <small>{{'emailTitle' | i18n}}</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <app-two-factor-verify [organizationId]=\"organizationId\" [type]=\"type\" (onAuthed)=\"auth($event)\" *ngIf=\"!authed\">\n            </app-two-factor-verify>\n            <form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate *ngIf=\"authed\">\n                <div class=\"modal-body\">\n                    <ng-container *ngIf=\"enabled\">\n                        <app-callout type=\"success\" title=\"{{'enabled' | i18n}}\" icon=\"fa-check-circle\">\n                            {{'twoStepLoginProviderEnabled' | i18n}}\n                        </app-callout>\n                        <strong>{{'email' | i18n}}:</strong> {{email}}\n                    </ng-container>\n                    <ng-container *ngIf=\"!enabled\">\n                        <p class=\"d-flex\">\n                            <span class=\"mr-3\">{{'twoFactorEmailDesc' | i18n}}</span>\n                            <img src=\"" + __webpack_require__(/*! ../../images/two-factor/1.png */ "./src/images/two-factor/1.png") + "\" class=\"float-right ml-auto\" alt=\"\">\n                        </p>\n                        <div class=\"form-group\">\n                            <label for=\"email\">1. {{'twoFactorEmailEnterEmail' | i18n}}</label>\n                            <input id=\"email\" type=\"text\" name=\"Email\" class=\"form-control\" [(ngModel)]=\"email\" required inputmode=\"email\" appInputVerbatim=\"false\">\n                        </div>\n                        <div class=\"mb-3 d-flex\">\n                            <button #sendBtn type=\"button\" class=\"btn btn-outline-primary btn-sm btn-submit align-self-start\" (click)=\"sendEmail()\" [appApiAction]=\"emailPromise\"\n                                [disabled]=\"sendBtn.loading\">\n                                <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                                <span>{{'sendEmail' | i18n}}</span>\n                            </button>\n                            <span class=\"text-success ml-3\" *ngIf=\"sentEmail\">\n                                {{'verificationCodeEmailSent' | i18n : sentEmail}}\n                            </span>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"token\">2. {{'twoFactorEmailEnterCode' | i18n}}</label>\n                            <input id=\"token\" type=\"text\" name=\"Token\" class=\"form-control\" [(ngModel)]=\"token\" required appInputVerbatim>\n                        </div>\n                    </ng-container>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        <span *ngIf=\"!enabled\">{{'enable' | i18n}}</span>\n                        <span *ngIf=\"enabled\">{{'disable' | i18n}}</span>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/two-factor-email.component.ts":
/*!********************************************************!*\
  !*** ./src/app/settings/two-factor-email.component.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var twoFactorEmailRequest_1 = __webpack_require__(/*! jslib/models/request/twoFactorEmailRequest */ "./jslib/src/models/request/twoFactorEmailRequest.ts");
var twoFactorProviderType_1 = __webpack_require__(/*! jslib/enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var updateTwoFactorEmailRequest_1 = __webpack_require__(/*! jslib/models/request/updateTwoFactorEmailRequest */ "./jslib/src/models/request/updateTwoFactorEmailRequest.ts");
var two_factor_base_component_1 = __webpack_require__(/*! ./two-factor-base.component */ "./src/app/settings/two-factor-base.component.ts");
var TwoFactorEmailComponent = /** @class */ (function (_super) {
    __extends(TwoFactorEmailComponent, _super);
    function TwoFactorEmailComponent(apiService, i18nService, analytics, toasterService, platformUtilsService, userService) {
        var _this = _super.call(this, apiService, i18nService, analytics, toasterService, platformUtilsService) || this;
        _this.userService = userService;
        _this.type = twoFactorProviderType_1.TwoFactorProviderType.Email;
        return _this;
    }
    TwoFactorEmailComponent.prototype.auth = function (authResponse) {
        _super.prototype.auth.call(this, authResponse);
        return this.processResponse(authResponse.response);
    };
    TwoFactorEmailComponent.prototype.submit = function () {
        if (this.enabled) {
            return _super.prototype.disable.call(this, this.formPromise);
        }
        else {
            return this.enable();
        }
    };
    TwoFactorEmailComponent.prototype.sendEmail = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        request = new twoFactorEmailRequest_1.TwoFactorEmailRequest(this.email, this.masterPasswordHash);
                        this.emailPromise = this.apiService.postTwoFactorEmailSetup(request);
                        return [4 /*yield*/, this.emailPromise];
                    case 1:
                        _b.sent();
                        this.sentEmail = this.email;
                        return [3 /*break*/, 3];
                    case 2:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorEmailComponent.prototype.enable = function () {
        var _this = this;
        var request = new updateTwoFactorEmailRequest_1.UpdateTwoFactorEmailRequest();
        request.masterPasswordHash = this.masterPasswordHash;
        request.email = this.email;
        request.token = this.token;
        return _super.prototype.enable.call(this, function () { return __awaiter(_this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.formPromise = this.apiService.putTwoFactorEmail(request);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, this.processResponse(response)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
    };
    TwoFactorEmailComponent.prototype.processResponse = function (response) {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.token = null;
                        this.email = response.email;
                        this.enabled = response.enabled;
                        if (!(!this.enabled && (this.email == null || this.email === ''))) return [3 /*break*/, 2];
                        _a = this;
                        return [4 /*yield*/, this.userService.getEmail()];
                    case 1:
                        _a.email = _b.sent();
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorEmailComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor-email',
            template: __webpack_require__(/*! ./two-factor-email.component.html */ "./src/app/settings/two-factor-email.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            platformUtils_service_1.PlatformUtilsService, user_service_1.UserService])
    ], TwoFactorEmailComponent);
    return TwoFactorEmailComponent;
}(two_factor_base_component_1.TwoFactorBaseComponent));
exports.TwoFactorEmailComponent = TwoFactorEmailComponent;


/***/ }),

/***/ "./src/app/settings/two-factor-recovery.component.html":
/*!*************************************************************!*\
  !*** ./src/app/settings/two-factor-recovery.component.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'twoStepLogin' | i18n}}\n                    <small>{{'recoveryCodeTitle' | i18n}}</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <app-two-factor-verify [organizationId]=\"organizationId\" [type]=\"type\" (onAuthed)=\"auth($event)\" *ngIf=\"!authed\">\n            </app-two-factor-verify>\n            <ng-container *ngIf=\"authed\">\n                <div class=\"modal-body text-center\">\n                    <ng-container *ngIf=\"code\">\n                        <p>{{'twoFactorRecoveryYourCode' | i18n}}:</p>\n                        <code class=\"text-lg\">{{code}}</code>\n                    </ng-container>\n                    <ng-container *ngIf=\"!code\">\n                        {{'twoFactorRecoveryNoCode' | i18n}}\n                    </ng-container>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-primary\" (click)=\"print()\" *ngIf=\"code\">{{'printCode' | i18n}}</button>\n                    <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n                </div>\n            </ng-container>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/two-factor-recovery.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/settings/two-factor-recovery.component.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var twoFactorProviderType_1 = __webpack_require__(/*! jslib/enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var TwoFactorRecoveryComponent = /** @class */ (function () {
    function TwoFactorRecoveryComponent(i18nService) {
        this.i18nService = i18nService;
        this.type = -1;
        this.twoFactorProviderType = twoFactorProviderType_1.TwoFactorProviderType;
    }
    TwoFactorRecoveryComponent.prototype.auth = function (authResponse) {
        this.authed = true;
        this.processResponse(authResponse.response);
    };
    TwoFactorRecoveryComponent.prototype.print = function () {
        var w = window.open();
        w.document.write('<div style="font-size: 18px; text-align: center;">' +
            '<p>' + this.i18nService.t('twoFactorRecoveryYourCode') + ':</p>' +
            '<code style="font-family: Menlo, Monaco, Consolas, \'Courier New\', monospace;">' +
            this.code + '</code></div>' +
            '<p style="text-align: center;">' + new Date() + '</p>');
        w.print();
        w.close();
    };
    TwoFactorRecoveryComponent.prototype.formatString = function (s) {
        if (s == null) {
            return null;
        }
        return s.replace(/(.{4})/g, '$1 ').trim().toUpperCase();
    };
    TwoFactorRecoveryComponent.prototype.processResponse = function (response) {
        this.code = this.formatString(response.code);
    };
    TwoFactorRecoveryComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor-recovery',
            template: __webpack_require__(/*! ./two-factor-recovery.component.html */ "./src/app/settings/two-factor-recovery.component.html"),
        }),
        __metadata("design:paramtypes", [i18n_service_1.I18nService])
    ], TwoFactorRecoveryComponent);
    return TwoFactorRecoveryComponent;
}());
exports.TwoFactorRecoveryComponent = TwoFactorRecoveryComponent;


/***/ }),

/***/ "./src/app/settings/two-factor-setup.component.html":
/*!**********************************************************!*\
  !*** ./src/app/settings/two-factor-setup.component.html ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>{{'twoStepLogin' | i18n}}</h1>\n</div>\n<p *ngIf=\"!organizationId\">{{'twoStepLoginDesc' | i18n}}</p>\n<p *ngIf=\"organizationId\">{{'twoStepLoginOrganizationDesc' | i18n}}</p>\n<app-callout type=\"warning\" *ngIf=\"!organizationId\">\n    <p>{{'twoStepLoginRecoveryWarning' | i18n}}</p>\n    <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"recoveryCode()\">{{'viewRecoveryCode' | i18n}}</button>\n</app-callout>\n<h2 [ngClass]=\"{'mt-5':!organizationId}\">\n    {{'providers' | i18n}}\n    <small *ngIf=\"loading\">\n        <i class=\"fa fa-spinner fa-spin fa-fw text-muted\" title=\"{{'loading' | i18n}}\"></i>\n    </small>\n</h2>\n<ul class=\"list-group list-group-2fa\">\n    <li *ngFor=\"let p of providers\" class=\"list-group-item d-flex align-items-center\">\n        <div class=\"logo-2fa d-flex justify-content-center\">\n            <img [src]=\"'images/two-factor/' + p.type + '.png'\" alt=\"\">\n        </div>\n        <div class=\"mx-4\">\n            <h3 class=\"mb-0\">\n                {{p.name}}\n                <i class=\"fa fa-check text-success fa-fw\" *ngIf=\"p.enabled\" title=\"{{'enabled' | i18n}}\"></i>\n                <a href=\"#\" appStopClick class=\"badge badge-primary\" *ngIf=\"!premium && p.premium\" (click)=\"premiumRequired()\">\n                    {{'premium' | i18n}}\n                </a>\n            </h3>\n            {{p.description}}\n        </div>\n        <div class=\"ml-auto\">\n            <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" [disabled]=\"!premium && p.premium\" (click)=\"manage(p.type)\">\n                {{'manage' | i18n}}\n            </button>\n        </div>\n    </li>\n</ul>\n\n<ng-template #authenticatorTemplate></ng-template>\n<ng-template #recoveryTemplate></ng-template>\n<ng-template #duoTemplate></ng-template>\n<ng-template #emailTemplate></ng-template>\n<ng-template #yubikeyTemplate></ng-template>\n<ng-template #u2fTemplate></ng-template>\n";

/***/ }),

/***/ "./src/app/settings/two-factor-setup.component.ts":
/*!********************************************************!*\
  !*** ./src/app/settings/two-factor-setup.component.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var auth_service_1 = __webpack_require__(/*! jslib/services/auth.service */ "./jslib/src/services/auth.service.ts");
var twoFactorProviderType_1 = __webpack_require__(/*! jslib/enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var modal_component_1 = __webpack_require__(/*! ../modal.component */ "./src/app/modal.component.ts");
var two_factor_authenticator_component_1 = __webpack_require__(/*! ./two-factor-authenticator.component */ "./src/app/settings/two-factor-authenticator.component.ts");
var two_factor_duo_component_1 = __webpack_require__(/*! ./two-factor-duo.component */ "./src/app/settings/two-factor-duo.component.ts");
var two_factor_email_component_1 = __webpack_require__(/*! ./two-factor-email.component */ "./src/app/settings/two-factor-email.component.ts");
var two_factor_recovery_component_1 = __webpack_require__(/*! ./two-factor-recovery.component */ "./src/app/settings/two-factor-recovery.component.ts");
var two_factor_u2f_component_1 = __webpack_require__(/*! ./two-factor-u2f.component */ "./src/app/settings/two-factor-u2f.component.ts");
var two_factor_yubikey_component_1 = __webpack_require__(/*! ./two-factor-yubikey.component */ "./src/app/settings/two-factor-yubikey.component.ts");
var TwoFactorSetupComponent = /** @class */ (function () {
    function TwoFactorSetupComponent(apiService, tokenService, componentFactoryResolver, messagingService) {
        this.apiService = apiService;
        this.tokenService = tokenService;
        this.componentFactoryResolver = componentFactoryResolver;
        this.messagingService = messagingService;
        this.providers = [];
        this.loading = true;
        this.modal = null;
    }
    TwoFactorSetupComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var key, p;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.premium = this.tokenService.getPremium();
                        for (key in auth_service_1.TwoFactorProviders) {
                            if (!auth_service_1.TwoFactorProviders.hasOwnProperty(key)) {
                                continue;
                            }
                            p = auth_service_1.TwoFactorProviders[key];
                            if (this.filterProvider(p.type)) {
                                continue;
                            }
                            this.providers.push({
                                type: p.type,
                                name: p.name,
                                description: p.description,
                                enabled: false,
                                premium: p.premium,
                                sort: p.sort,
                            });
                        }
                        this.providers.sort(function (a, b) { return a.sort - b.sort; });
                        return [4 /*yield*/, this.load()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorSetupComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var providerList;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.loading = true;
                        return [4 /*yield*/, this.getTwoFactorProviders()];
                    case 1:
                        providerList = _a.sent();
                        providerList.data.forEach(function (p) {
                            _this.providers.forEach(function (p2) {
                                if (p.type === p2.type) {
                                    p2.enabled = p.enabled;
                                }
                            });
                        });
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorSetupComponent.prototype.manage = function (type) {
        var _this = this;
        switch (type) {
            case twoFactorProviderType_1.TwoFactorProviderType.Authenticator:
                var authComp = this.openModal(this.authenticatorModalRef, two_factor_authenticator_component_1.TwoFactorAuthenticatorComponent);
                authComp.onUpdated.subscribe(function (enabled) {
                    _this.updateStatus(enabled, twoFactorProviderType_1.TwoFactorProviderType.Authenticator);
                });
                break;
            case twoFactorProviderType_1.TwoFactorProviderType.Yubikey:
                var yubiComp = this.openModal(this.yubikeyModalRef, two_factor_yubikey_component_1.TwoFactorYubiKeyComponent);
                yubiComp.onUpdated.subscribe(function (enabled) {
                    _this.updateStatus(enabled, twoFactorProviderType_1.TwoFactorProviderType.Yubikey);
                });
                break;
            case twoFactorProviderType_1.TwoFactorProviderType.Duo:
                var duoComp = this.openModal(this.duoModalRef, two_factor_duo_component_1.TwoFactorDuoComponent);
                duoComp.onUpdated.subscribe(function (enabled) {
                    _this.updateStatus(enabled, twoFactorProviderType_1.TwoFactorProviderType.Duo);
                });
                break;
            case twoFactorProviderType_1.TwoFactorProviderType.Email:
                var emailComp = this.openModal(this.emailModalRef, two_factor_email_component_1.TwoFactorEmailComponent);
                emailComp.onUpdated.subscribe(function (enabled) {
                    _this.updateStatus(enabled, twoFactorProviderType_1.TwoFactorProviderType.Email);
                });
                break;
            case twoFactorProviderType_1.TwoFactorProviderType.U2f:
                var u2fComp = this.openModal(this.u2fModalRef, two_factor_u2f_component_1.TwoFactorU2fComponent);
                u2fComp.onUpdated.subscribe(function (enabled) {
                    _this.updateStatus(enabled, twoFactorProviderType_1.TwoFactorProviderType.U2f);
                });
                break;
            default:
                break;
        }
    };
    TwoFactorSetupComponent.prototype.recoveryCode = function () {
        this.openModal(this.recoveryModalRef, two_factor_recovery_component_1.TwoFactorRecoveryComponent);
    };
    TwoFactorSetupComponent.prototype.premiumRequired = function () {
        return __awaiter(this, void 0, void 0, function () {
            var premium;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.tokenService.getPremium()];
                    case 1:
                        premium = _a.sent();
                        if (!premium) {
                            this.messagingService.send('premiumRequired');
                            return [2 /*return*/];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    TwoFactorSetupComponent.prototype.getTwoFactorProviders = function () {
        return this.apiService.getTwoFactorProviders();
    };
    TwoFactorSetupComponent.prototype.filterProvider = function (type) {
        return type === twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo;
    };
    TwoFactorSetupComponent.prototype.openModal = function (ref, type) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = ref.createComponent(factory).instance;
        var childComponent = this.modal.show(type, ref);
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
        return childComponent;
    };
    TwoFactorSetupComponent.prototype.updateStatus = function (enabled, type) {
        if (!enabled && this.modal != null) {
            this.modal.close();
        }
        this.providers.forEach(function (p) {
            if (p.type === type) {
                p.enabled = enabled;
            }
        });
    };
    __decorate([
        core_1.ViewChild('recoveryTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], TwoFactorSetupComponent.prototype, "recoveryModalRef", void 0);
    __decorate([
        core_1.ViewChild('authenticatorTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], TwoFactorSetupComponent.prototype, "authenticatorModalRef", void 0);
    __decorate([
        core_1.ViewChild('yubikeyTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], TwoFactorSetupComponent.prototype, "yubikeyModalRef", void 0);
    __decorate([
        core_1.ViewChild('u2fTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], TwoFactorSetupComponent.prototype, "u2fModalRef", void 0);
    __decorate([
        core_1.ViewChild('duoTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], TwoFactorSetupComponent.prototype, "duoModalRef", void 0);
    __decorate([
        core_1.ViewChild('emailTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], TwoFactorSetupComponent.prototype, "emailModalRef", void 0);
    TwoFactorSetupComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor-setup',
            template: __webpack_require__(/*! ./two-factor-setup.component.html */ "./src/app/settings/two-factor-setup.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, token_service_1.TokenService,
            core_1.ComponentFactoryResolver, messaging_service_1.MessagingService])
    ], TwoFactorSetupComponent);
    return TwoFactorSetupComponent;
}());
exports.TwoFactorSetupComponent = TwoFactorSetupComponent;


/***/ }),

/***/ "./src/app/settings/two-factor-u2f.component.html":
/*!********************************************************!*\
  !*** ./src/app/settings/two-factor-u2f.component.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'twoStepLogin' | i18n}}\n                    <small>FIDO U2F</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <app-two-factor-verify [organizationId]=\"organizationId\" [type]=\"type\" (onAuthed)=\"auth($event)\" *ngIf=\"!authed\">\n            </app-two-factor-verify>\n            <form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate *ngIf=\"authed\">\n                <div class=\"modal-body\">\n                    <app-callout type=\"success\" title=\"{{'enabled' | i18n}}\" icon=\"fa-check-circle\" *ngIf=\"enabled\">\n                        {{'twoStepLoginProviderEnabled' | i18n}}\n                    </app-callout>\n                    <app-callout type=\"warning\">\n                        <p>{{'twoFactorU2fWarning' | i18n}}</p>\n                        <ul class=\"mb-0\">\n                            <li>{{'twoFactorU2fSupportWeb' | i18n}}</li>\n                        </ul>\n                    </app-callout>\n                    <ng-container *ngIf=\"!enabled\">\n                        <img src=\"" + __webpack_require__(/*! ../../images/two-factor/4.png */ "./src/images/two-factor/4.png") + "\" class=\"float-right ml-5\" alt=\"\">\n                        <p>{{'twoFactorU2fAdd' | i18n}}:</p>\n                        <ol>\n                            <li>{{'twoFactorU2fPlugIn' | i18n}}</li>\n                            <li>{{'twoFactorU2fTouchButton' | i18n}}</li>\n                        </ol>\n                        <hr>\n                        <div class=\"text-center\">\n                            <ng-container *ngIf=\"u2fListening\">\n                                <p>\n                                    <i class=\"fa fa-spinner fa-spin fa-2x text-muted\"></i>\n                                </p>\n                                {{'twoFactorU2fWaiting' | i18n}}...\n                            </ng-container>\n                            <ng-container *ngIf=\"u2fResponse\">\n                                <p>\n                                    <i class=\"fa fa-check-circle fa-2x text-success\"></i>\n                                </p>\n                                {{'twoFactorU2fClickEnable' | i18n}}\n                            </ng-container>\n                            <ng-container *ngIf=\"u2fError\">\n                                <p>\n                                    <i class=\"fa fa-warning fa-2x text-danger\"></i>\n                                </p>\n                                {{'twoFactorU2fProblemReading' | i18n}}\n                            </ng-container>\n                        </div>\n                    </ng-container>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"form.loading || (!enabled && !u2fResponse)\">\n                        <i class=\"fa fa-spinner fa-spin\" *ngIf=\"form.loading\" title=\"{{'loading' | i18n}}\"></i>\n                        <ng-container *ngIf=\"!form.loading\">\n                            <span *ngIf=\"!enabled\">{{'enable' | i18n}}</span>\n                            <span *ngIf=\"enabled\">{{'disable' | i18n}}</span>\n                        </ng-container>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/two-factor-u2f.component.ts":
/*!******************************************************!*\
  !*** ./src/app/settings/two-factor-u2f.component.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var twoFactorProviderType_1 = __webpack_require__(/*! jslib/enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var updateTwoFactorU2fRequest_1 = __webpack_require__(/*! jslib/models/request/updateTwoFactorU2fRequest */ "./jslib/src/models/request/updateTwoFactorU2fRequest.ts");
var two_factor_base_component_1 = __webpack_require__(/*! ./two-factor-base.component */ "./src/app/settings/two-factor-base.component.ts");
var TwoFactorU2fComponent = /** @class */ (function (_super) {
    __extends(TwoFactorU2fComponent, _super);
    function TwoFactorU2fComponent(apiService, i18nService, analytics, toasterService, platformUtilsService) {
        var _this = _super.call(this, apiService, i18nService, analytics, toasterService, platformUtilsService) || this;
        _this.type = twoFactorProviderType_1.TwoFactorProviderType.U2f;
        _this.closed = false;
        _this.u2fScript = window.document.createElement('script');
        _this.u2fScript.src = 'scripts/u2f.js';
        _this.u2fScript.async = true;
        return _this;
    }
    TwoFactorU2fComponent.prototype.ngOnInit = function () {
        window.document.body.appendChild(this.u2fScript);
    };
    TwoFactorU2fComponent.prototype.ngOnDestroy = function () {
        this.closed = true;
        window.document.body.removeChild(this.u2fScript);
    };
    TwoFactorU2fComponent.prototype.auth = function (authResponse) {
        _super.prototype.auth.call(this, authResponse);
        this.processResponse(authResponse.response);
        this.readDevice();
    };
    TwoFactorU2fComponent.prototype.submit = function () {
        if (this.enabled) {
            return _super.prototype.disable.call(this, this.formPromise);
        }
        else {
            return this.enable();
        }
    };
    TwoFactorU2fComponent.prototype.enable = function () {
        var _this = this;
        var request = new updateTwoFactorU2fRequest_1.UpdateTwoFactorU2fRequest();
        request.masterPasswordHash = this.masterPasswordHash;
        request.deviceResponse = this.u2fResponse;
        return _super.prototype.enable.call(this, function () { return __awaiter(_this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.formPromise = this.apiService.putTwoFactorU2f(request);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, this.processResponse(response)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
    };
    TwoFactorU2fComponent.prototype.readDevice = function () {
        var _this = this;
        if (this.closed || this.enabled) {
            return;
        }
        // tslint:disable-next-line
        console.log('listening for key...');
        this.u2fResponse = null;
        this.u2fError = false;
        this.u2fListening = true;
        window.u2f.register(this.u2fChallenge.appId, [{
                version: this.u2fChallenge.version,
                challenge: this.u2fChallenge.challenge,
            }], [], function (data) {
            _this.u2fListening = false;
            if (data.errorCode === 5) {
                _this.readDevice();
                return;
            }
            else if (data.errorCode) {
                _this.u2fError = true;
                // tslint:disable-next-line
                console.log('error: ' + data.errorCode);
                return;
            }
            _this.u2fResponse = JSON.stringify(data);
        }, 10);
    };
    TwoFactorU2fComponent.prototype.processResponse = function (response) {
        this.u2fChallenge = response.challenge;
        this.enabled = response.enabled;
    };
    TwoFactorU2fComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor-u2f',
            template: __webpack_require__(/*! ./two-factor-u2f.component.html */ "./src/app/settings/two-factor-u2f.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            platformUtils_service_1.PlatformUtilsService])
    ], TwoFactorU2fComponent);
    return TwoFactorU2fComponent;
}(two_factor_base_component_1.TwoFactorBaseComponent));
exports.TwoFactorU2fComponent = TwoFactorU2fComponent;


/***/ }),

/***/ "./src/app/settings/two-factor-verify.component.html":
/*!***********************************************************!*\
  !*** ./src/app/settings/two-factor-verify.component.html ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"modal-body\">\n        <p>{{'twoStepLoginAuthDesc' | i18n}}</p>\n        <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n        <input id=\"masterPassword\" type=\"password\" name=\"MasterPasswordHash\" class=\"form-control\" [(ngModel)]=\"masterPassword\" required\n            appAutoFocus appInputVerbatim>\n    </div>\n    <div class=\"modal-footer\">\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n            <span>{{'continue' | i18n}}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n    </div>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/two-factor-verify.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/settings/two-factor-verify.component.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var twoFactorProviderType_1 = __webpack_require__(/*! jslib/enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var passwordVerificationRequest_1 = __webpack_require__(/*! jslib/models/request/passwordVerificationRequest */ "./jslib/src/models/request/passwordVerificationRequest.ts");
var TwoFactorVerifyComponent = /** @class */ (function () {
    function TwoFactorVerifyComponent(apiService, i18nService, toasterService, cryptoService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.onAuthed = new core_1.EventEmitter();
    }
    TwoFactorVerifyComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var request, _a, _b, response, _c;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (this.masterPassword == null || this.masterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassRequired'));
                            return [2 /*return*/];
                        }
                        request = new passwordVerificationRequest_1.PasswordVerificationRequest();
                        _a = request;
                        _b = this;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, null)];
                    case 1:
                        _a.masterPasswordHash = _b.masterPasswordHash =
                            _d.sent();
                        _d.label = 2;
                    case 2:
                        _d.trys.push([2, 4, , 5]);
                        switch (this.type) {
                            case -1:
                                this.formPromise = this.apiService.getTwoFactorRecover(request);
                                break;
                            case twoFactorProviderType_1.TwoFactorProviderType.Duo:
                            case twoFactorProviderType_1.TwoFactorProviderType.OrganizationDuo:
                                if (this.organizationId != null) {
                                    this.formPromise = this.apiService.getTwoFactorOrganizationDuo(this.organizationId, request);
                                }
                                else {
                                    this.formPromise = this.apiService.getTwoFactorDuo(request);
                                }
                                break;
                            case twoFactorProviderType_1.TwoFactorProviderType.Email:
                                this.formPromise = this.apiService.getTwoFactorEmail(request);
                                break;
                            case twoFactorProviderType_1.TwoFactorProviderType.U2f:
                                this.formPromise = this.apiService.getTwoFactorU2f(request);
                                break;
                            case twoFactorProviderType_1.TwoFactorProviderType.Authenticator:
                                this.formPromise = this.apiService.getTwoFactorAuthenticator(request);
                                break;
                            case twoFactorProviderType_1.TwoFactorProviderType.Yubikey:
                                this.formPromise = this.apiService.getTwoFactorYubiKey(request);
                                break;
                        }
                        return [4 /*yield*/, this.formPromise];
                    case 3:
                        response = _d.sent();
                        this.onAuthed.emit({
                            response: response,
                            masterPasswordHash: this.masterPasswordHash,
                        });
                        return [3 /*break*/, 5];
                    case 4:
                        _c = _d.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Number)
    ], TwoFactorVerifyComponent.prototype, "type", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], TwoFactorVerifyComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], TwoFactorVerifyComponent.prototype, "onAuthed", void 0);
    TwoFactorVerifyComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor-verify',
            template: __webpack_require__(/*! ./two-factor-verify.component.html */ "./src/app/settings/two-factor-verify.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angular2_toaster_1.ToasterService, crypto_service_1.CryptoService])
    ], TwoFactorVerifyComponent);
    return TwoFactorVerifyComponent;
}());
exports.TwoFactorVerifyComponent = TwoFactorVerifyComponent;


/***/ }),

/***/ "./src/app/settings/two-factor-yubikey.component.html":
/*!************************************************************!*\
  !*** ./src/app/settings/two-factor-yubikey.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog modal-lg\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'twoStepLogin' | i18n}}\n                    <small>YubiKey</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <app-two-factor-verify [organizationId]=\"organizationId\" [type]=\"type\" (onAuthed)=\"auth($event)\" *ngIf=\"!authed\">\n            </app-two-factor-verify>\n            <form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate *ngIf=\"authed\">\n                <div class=\"modal-body\">\n                    <app-callout type=\"success\" title=\"{{'enabled' | i18n}}\" icon=\"fa-check-circle\" *ngIf=\"enabled\">\n                        {{'twoStepLoginProviderEnabled' | i18n}}\n                    </app-callout>\n                    <app-callout type=\"warning\">\n                        <p>{{'twoFactorYubikeyWarning' | i18n}}</p>\n                        <ul class=\"mb-0\">\n                            <li>{{'twoFactorYubikeySupportUsb' | i18n}}</li>\n                            <li>{{'twoFactorYubikeySupportMobile' | i18n}}</li>\n                        </ul>\n                    </app-callout>\n                    <img src=\"" + __webpack_require__(/*! ../../images/two-factor/3.png */ "./src/images/two-factor/3.png") + "\" class=\"float-right\" alt=\"\">\n                    <p>{{'twoFactorYubikeyAdd' | i18n}}:</p>\n                    <ol>\n                        <li>{{'twoFactorYubikeyPlugIn' | i18n}}</li>\n                        <li>{{'twoFactorYubikeySelectKey' | i18n}}</li>\n                        <li>{{'twoFactorYubikeyTouchButton' | i18n}}</li>\n                        <li>{{'twoFactorYubikeySaveForm' | i18n}}</li>\n                    </ol>\n                    <hr>\n                    <div class=\"row\">\n                        <div class=\"form-group col-6\" *ngFor=\"let k of keys; let i = index\">\n                            <label for=\"key{{i + 1}}\">{{'yubikeyX' | i18n : i + 1}}</label>\n                            <input id=\"key{{i + 1}}\" type=\"text\" name=\"Key{{i + 1}}\" class=\"form-control\" [(ngModel)]=\"k.key\" *ngIf=\"!k.existingKey\"\n                                appInputVerbatim>\n                            <div class=\"d-flex\" *ngIf=\"k.existingKey\">\n                                <span class=\"mr-2\">{{k.existingKey}}</span>\n                                <button type=\"button\" class=\"btn btn-link text-danger ml-auto\" (click)=\"remove(k)\" title=\"{{'remove' | i18n}}\">\n                                    <i class=\"fa fa-minus-circle fa-lg\"></i>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <strong class=\"d-block mb-2\">{{'nfcSupport' | i18n}}</strong>\n                    <div class=\"form-check\">\n                        <input type=\"checkbox\" class=\"form-check-input\" id=\"nfc\" name=\"Nfc\" [(ngModel)]=\"nfc\">\n                        <label class=\"form-check-label\" for=\"nfc\">{{'twoFactorYubikeySupportsNfc' | i18n}}</label>\n                    </div>\n                    <small class=\"form-text text-muted\">{{'twoFactorYubikeySupportsNfcDesc' | i18n}}</small>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        <span>{{'save' | i18n}}</span>\n                    </button>\n                    <button #disableBtn type=\"button\" class=\"btn btn-outline-secondary btn-submit\" [appApiAction]=\"disablePromise\" [disabled]=\"disableBtn.loading\"\n                        (click)=\"disable()\" *ngIf=\"enabled\">\n                        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                        <span>{{'disableAllKeys' | i18n}}</span>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/two-factor-yubikey.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/settings/two-factor-yubikey.component.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var updateTwoFactorYubioOtpRequest_1 = __webpack_require__(/*! jslib/models/request/updateTwoFactorYubioOtpRequest */ "./jslib/src/models/request/updateTwoFactorYubioOtpRequest.ts");
var twoFactorProviderType_1 = __webpack_require__(/*! jslib/enums/twoFactorProviderType */ "./jslib/src/enums/twoFactorProviderType.ts");
var two_factor_base_component_1 = __webpack_require__(/*! ./two-factor-base.component */ "./src/app/settings/two-factor-base.component.ts");
var TwoFactorYubiKeyComponent = /** @class */ (function (_super) {
    __extends(TwoFactorYubiKeyComponent, _super);
    function TwoFactorYubiKeyComponent(apiService, i18nService, analytics, toasterService, platformUtilsService) {
        var _this = _super.call(this, apiService, i18nService, analytics, toasterService, platformUtilsService) || this;
        _this.type = twoFactorProviderType_1.TwoFactorProviderType.Yubikey;
        _this.nfc = false;
        return _this;
    }
    TwoFactorYubiKeyComponent.prototype.auth = function (authResponse) {
        _super.prototype.auth.call(this, authResponse);
        this.processResponse(authResponse.response);
    };
    TwoFactorYubiKeyComponent.prototype.submit = function () {
        var _this = this;
        var request = new updateTwoFactorYubioOtpRequest_1.UpdateTwoFactorYubioOtpRequest();
        request.masterPasswordHash = this.masterPasswordHash;
        request.key1 = this.keys != null && this.keys.length > 0 ? this.keys[0].key : null;
        request.key2 = this.keys != null && this.keys.length > 1 ? this.keys[1].key : null;
        request.key3 = this.keys != null && this.keys.length > 2 ? this.keys[2].key : null;
        request.key4 = this.keys != null && this.keys.length > 3 ? this.keys[3].key : null;
        request.key5 = this.keys != null && this.keys.length > 4 ? this.keys[4].key : null;
        request.nfc = this.nfc;
        return _super.prototype.enable.call(this, function () { return __awaiter(_this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.formPromise = this.apiService.putTwoFactorYubiKey(request);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        response = _a.sent();
                        return [4 /*yield*/, this.processResponse(response)];
                    case 2:
                        _a.sent();
                        this.toasterService.popAsync('success', null, this.i18nService.t('yubikeysUpdated'));
                        return [2 /*return*/];
                }
            });
        }); });
    };
    TwoFactorYubiKeyComponent.prototype.disable = function () {
        return _super.prototype.disable.call(this, this.disablePromise);
    };
    TwoFactorYubiKeyComponent.prototype.remove = function (key) {
        key.existingKey = null;
        key.key = null;
    };
    TwoFactorYubiKeyComponent.prototype.processResponse = function (response) {
        this.enabled = response.enabled;
        this.keys = [
            { key: response.key1, existingKey: this.padRight(response.key1) },
            { key: response.key2, existingKey: this.padRight(response.key2) },
            { key: response.key3, existingKey: this.padRight(response.key3) },
            { key: response.key4, existingKey: this.padRight(response.key4) },
            { key: response.key5, existingKey: this.padRight(response.key5) },
        ];
        this.nfc = response.nfc || !response.enabled;
    };
    TwoFactorYubiKeyComponent.prototype.padRight = function (str, character, size) {
        if (character === void 0) { character = '•'; }
        if (size === void 0) { size = 44; }
        if (str == null || character == null || str.length >= size) {
            return str;
        }
        var max = (size - str.length) / character.length;
        for (var i = 0; i < max; i++) {
            str += character;
        }
        return str;
    };
    TwoFactorYubiKeyComponent = __decorate([
        core_1.Component({
            selector: 'app-two-factor-yubikey',
            template: __webpack_require__(/*! ./two-factor-yubikey.component.html */ "./src/app/settings/two-factor-yubikey.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            platformUtils_service_1.PlatformUtilsService])
    ], TwoFactorYubiKeyComponent);
    return TwoFactorYubiKeyComponent;
}(two_factor_base_component_1.TwoFactorBaseComponent));
exports.TwoFactorYubiKeyComponent = TwoFactorYubiKeyComponent;


/***/ }),

/***/ "./src/app/settings/update-key.component.html":
/*!****************************************************!*\
  !*** ./src/app/settings/update-key.component.html ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{'updateEncryptionKey' | i18n}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <p>{{'updateEncryptionKeyShortDesc' | i18n}} {{'updateEncryptionKeyDesc' | i18n}}\n                    <a href=\"https://help.bitwarden.com/article/update-encryption-key/\" target=\"_blank\" rel=\"noopener\">{{'learnMore' | i18n}}</a>\n                </p>\n                <app-callout type=\"warning\">{{'updateEncryptionKeyWarning' | i18n}}</app-callout>\n                <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n                <input id=\"masterPassword\" type=\"password\" name=\"MasterPasswordHash\" class=\"form-control\" [(ngModel)]=\"masterPassword\" required\n                    appAutofocus appInputVerbatim>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'updateEncryptionKey' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">{{'close' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/update-key.component.ts":
/*!**************************************************!*\
  !*** ./src/app/settings/update-key.component.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var folder_service_1 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var sync_service_1 = __webpack_require__(/*! jslib/abstractions/sync.service */ "./jslib/src/abstractions/sync.service.ts");
var cipherWithIdRequest_1 = __webpack_require__(/*! jslib/models/request/cipherWithIdRequest */ "./jslib/src/models/request/cipherWithIdRequest.ts");
var folderWithIdRequest_1 = __webpack_require__(/*! jslib/models/request/folderWithIdRequest */ "./jslib/src/models/request/folderWithIdRequest.ts");
var updateKeyRequest_1 = __webpack_require__(/*! jslib/models/request/updateKeyRequest */ "./jslib/src/models/request/updateKeyRequest.ts");
var UpdateKeyComponent = /** @class */ (function () {
    function UpdateKeyComponent(apiService, i18nService, analytics, toasterService, cryptoService, messagingService, syncService, folderService, cipherService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cryptoService = cryptoService;
        this.messagingService = messagingService;
        this.syncService = syncService;
        this.folderService = folderService;
        this.cipherService = cipherService;
    }
    UpdateKeyComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var hasEncKey, toast, _a;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.cryptoService.hasEncKey()];
                    case 1:
                        hasEncKey = _b.sent();
                        if (hasEncKey) {
                            return [2 /*return*/];
                        }
                        if (this.masterPassword == null || this.masterPassword === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('masterPassRequired'));
                            return [2 /*return*/];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.formPromise = this.makeRequest().then(function (request) {
                            return _this.apiService.postAccountKey(request);
                        });
                        return [4 /*yield*/, this.formPromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Key Updated' });
                        toast = {
                            type: 'success',
                            title: this.i18nService.t('keyUpdated'),
                            body: this.i18nService.t('logBackInOthersToo'),
                            timeout: 15000,
                        };
                        this.toasterService.popAsync(toast);
                        this.messagingService.send('logout');
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    UpdateKeyComponent.prototype.makeRequest = function () {
        return __awaiter(this, void 0, void 0, function () {
            var key, encKey, privateKey, encPrivateKey, request, _a, folders, i, folder, ciphers, i, cipher;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.cryptoService.getKey()];
                    case 1:
                        key = _b.sent();
                        return [4 /*yield*/, this.cryptoService.makeEncKey(key)];
                    case 2:
                        encKey = _b.sent();
                        return [4 /*yield*/, this.cryptoService.getPrivateKey()];
                    case 3:
                        privateKey = _b.sent();
                        encPrivateKey = null;
                        if (!(privateKey != null)) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.cryptoService.encrypt(privateKey, encKey[0])];
                    case 4:
                        encPrivateKey = _b.sent();
                        _b.label = 5;
                    case 5:
                        request = new updateKeyRequest_1.UpdateKeyRequest();
                        request.privateKey = encPrivateKey != null ? encPrivateKey.encryptedString : null;
                        request.key = encKey[1].encryptedString;
                        _a = request;
                        return [4 /*yield*/, this.cryptoService.hashPassword(this.masterPassword, null)];
                    case 6:
                        _a.masterPasswordHash = _b.sent();
                        return [4 /*yield*/, this.syncService.fullSync(true)];
                    case 7:
                        _b.sent();
                        return [4 /*yield*/, this.folderService.getAllDecrypted()];
                    case 8:
                        folders = _b.sent();
                        i = 0;
                        _b.label = 9;
                    case 9:
                        if (!(i < folders.length)) return [3 /*break*/, 12];
                        if (folders[i].id == null) {
                            return [3 /*break*/, 11];
                        }
                        return [4 /*yield*/, this.folderService.encrypt(folders[i], encKey[0])];
                    case 10:
                        folder = _b.sent();
                        request.folders.push(new folderWithIdRequest_1.FolderWithIdRequest(folder));
                        _b.label = 11;
                    case 11:
                        i++;
                        return [3 /*break*/, 9];
                    case 12: return [4 /*yield*/, this.cipherService.getAllDecrypted()];
                    case 13:
                        ciphers = _b.sent();
                        i = 0;
                        _b.label = 14;
                    case 14:
                        if (!(i < ciphers.length)) return [3 /*break*/, 17];
                        if (ciphers[i].organizationId != null) {
                            return [3 /*break*/, 16];
                        }
                        return [4 /*yield*/, this.cipherService.encrypt(ciphers[i], encKey[0])];
                    case 15:
                        cipher = _b.sent();
                        request.ciphers.push(new cipherWithIdRequest_1.CipherWithIdRequest(cipher));
                        _b.label = 16;
                    case 16:
                        i++;
                        return [3 /*break*/, 14];
                    case 17: return [2 /*return*/, request];
                }
            });
        });
    };
    UpdateKeyComponent = __decorate([
        core_1.Component({
            selector: 'app-update-key',
            template: __webpack_require__(/*! ./update-key.component.html */ "./src/app/settings/update-key.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            crypto_service_1.CryptoService, messaging_service_1.MessagingService,
            sync_service_1.SyncService, folder_service_1.FolderService,
            cipher_service_1.CipherService])
    ], UpdateKeyComponent);
    return UpdateKeyComponent;
}());
exports.UpdateKeyComponent = UpdateKeyComponent;


/***/ }),

/***/ "./src/app/settings/update-license.component.html":
/*!********************************************************!*\
  !*** ./src/app/settings/update-license.component.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"form-group\">\n        <label for=\"file\" class=\"sr-only\">{{'licenseFile' | i18n}}</label>\n        <input type=\"file\" id=\"file\" class=\"form-control-file\" name=\"file\" required>\n        <small class=\"form-text text-muted\">{{'licenseFileDesc' | i18n : (!organizationId ? 'bitwarden_premium_license.json' : 'bitwarden_organization_license.json')}}</small>\n    </div>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'submit' | i18n}}</span>\n    </button>\n    <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"cancel()\">\n        {{'cancel' | i18n}}\n    </button>\n</form>\n";

/***/ }),

/***/ "./src/app/settings/update-license.component.ts":
/*!******************************************************!*\
  !*** ./src/app/settings/update-license.component.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var UpdateLicenseComponent = /** @class */ (function () {
    function UpdateLicenseComponent(apiService, i18nService, analytics, toasterService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.onUpdated = new core_1.EventEmitter();
        this.onCanceled = new core_1.EventEmitter();
    }
    UpdateLicenseComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var fileEl, files, fd, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        fileEl = document.getElementById('file');
                        files = fileEl.files;
                        if (files == null || files.length === 0) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('selectFile'));
                            return [2 /*return*/];
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        fd = new FormData();
                        fd.append('license', files[0]);
                        if (this.organizationId == null) {
                            this.formPromise = this.apiService.postAccountLicense(fd);
                        }
                        else {
                            this.formPromise = this.apiService.postOrganizationLicenseUpdate(this.organizationId, fd);
                        }
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Updated License' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('updatedLicense'));
                        this.onUpdated.emit();
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    UpdateLicenseComponent.prototype.cancel = function () {
        this.onCanceled.emit();
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], UpdateLicenseComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], UpdateLicenseComponent.prototype, "onUpdated", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], UpdateLicenseComponent.prototype, "onCanceled", void 0);
    UpdateLicenseComponent = __decorate([
        core_1.Component({
            selector: 'app-update-license',
            template: __webpack_require__(/*! ./update-license.component.html */ "./src/app/settings/update-license.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService])
    ], UpdateLicenseComponent);
    return UpdateLicenseComponent;
}());
exports.UpdateLicenseComponent = UpdateLicenseComponent;


/***/ }),

/***/ "./src/app/settings/user-billing.component.html":
/*!******************************************************!*\
  !*** ./src/app/settings/user-billing.component.html ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>\n        {{'billingAndLicensing' | i18n}}\n        <small>\n            <i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"firstLoaded && loading\" title=\"{{'loading' | i18n}}\"></i>\n        </small>\n    </h1>\n</div>\n<i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"!firstLoaded && loading\" title=\"{{'loading' | i18n}}\"></i>\n<ng-container *ngIf=\"billing\">\n    <app-callout type=\"warning\" title=\"{{'canceled' | i18n}}\" *ngIf=\"subscription && subscription.cancelled\">{{'subscriptionCanceled' | i18n}}</app-callout>\n    <app-callout type=\"warning\" title=\"{{'pendingCancellation' | i18n}}\" *ngIf=\"subscriptionMarkedForCancel\">\n        <p>{{'subscriptionPendingCanceled' | i18n}}</p>\n        <button #reinstateBtn type=\"button\" class=\"btn btn-outline-secondary btn-submit\" (click)=\"reinstate()\" [appApiAction]=\"reinstatePromise\"\n            [disabled]=\"reinstateBtn.loading\">\n            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n            <span>{{'reinstateSubscription' | i18n}}</span>\n        </button>\n    </app-callout>\n    <dl>\n        <dt>{{'subscription' | i18n}}</dt>\n        <dd>{{'premiumMembership' | i18n}}</dd>\n    </dl>\n    <dl *ngIf=\"selfHosted\">\n        <dt>{{'expiration' | i18n}}</dt>\n        <dd *ngIf=\"billing.expiration\">{{billing.expiration | date:'mediumDate'}}</dd>\n        <dd *ngIf=\"!billing.expiration\">{{'neverExpires' | i18n}}</dd>\n    </dl>\n    <div class=\"row\" *ngIf=\"!selfHosted\">\n        <div class=\"col-4\">\n            <dl>\n                <dt>{{'status' | i18n}}</dt>\n                <dd>\n                    <span class=\"text-capitalize\">{{(subscription && subscription.status) || '-'}}</span>\n                    <span class=\"badge badge-warning\" *ngIf=\"subscriptionMarkedForCancel\">{{'pendingCancellation' | i18n}}</span>\n                </dd>\n                <dt>{{'nextCharge' | i18n}}</dt>\n                <dd>{{nextInvoice ? ((nextInvoice.date | date: 'mediumDate') + ', ' + (nextInvoice.amount | currency:'$')) :\n                    '-'}}\n                </dd>\n            </dl>\n        </div>\n        <div class=\"col-8\" *ngIf=\"subscription\">\n            <strong class=\"d-block mb-1\">{{'details' | i18n}}</strong>\n            <table class=\"table\">\n                <tbody>\n                    <tr *ngFor=\"let i of subscription.items\">\n                        <td>\n                            {{i.name}} {{i.quantity > 1 ? '&times;' + i.quantity : ''}} @ {{i.amount | currency:'$'}}\n                        </td>\n                        <td>\n                            {{(i.quantity * i.amount) | currency:'$'}} /{{i.interval | i18n}}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n    <ng-container *ngIf=\"selfHosted\">\n        <div>\n            <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"updateLicense()\">\n                {{'updateLicense' | i18n}}\n            </button>\n            <a href=\"https://vault.bitwarden.com/#/settings/billing\" target=\"_blank\" rel=\"noopener\" class=\"btn btn-outline-secondary\">\n                {{'manageSubscription' | i18n}}\n            </a>\n        </div>\n        <div class=\"card mt-3\" *ngIf=\"showUpdateLicense\">\n            <div class=\"card-body\">\n                <h3 class=\"card-body-header\">{{'updateLicense' | i18n}}</h3>\n                <app-update-license (onUpdated)=\"closeUpdateLicense(true)\" (onCanceled)=\"closeUpdateLicense(false)\"></app-update-license>\n            </div>\n        </div>\n    </ng-container>\n    <ng-container *ngIf=\"!selfHosted\">\n        <div class=\"d-flex\">\n            <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"downloadLicense()\" *ngIf=\"!subscription || !subscription.cancelled\">\n                {{'downloadLicense' | i18n}}\n            </button>\n            <button #cancelBtn type=\"button\" class=\"btn btn-outline-danger btn-submit ml-auto\" (click)=\"cancel()\" [appApiAction]=\"cancelPromise\"\n                [disabled]=\"cancelBtn.loading\" *ngIf=\"subscription && !subscription.cancelled && !subscriptionMarkedForCancel\">\n                <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                <span>{{'cancelSubscription' | i18n}}</span>\n            </button>\n        </div>\n        <h2 class=\"spaced-header\">{{'storage' | i18n}}</h2>\n        <p>{{'subscriptionStorage' | i18n : billing.maxStorageGb || 0 : billing.storageName || '0 MB'}}</p>\n        <div class=\"progress\">\n            <div class=\"progress-bar bg-success\" role=\"progressbar\" [ngStyle]=\"{width: storageProgressWidth + '%' }\" [attr.aria-valuenow]=\"storagePercentage\"\n                aria-valuemin=\"0\" aria-valuemax=\"100\">{{(storagePercentage / 100) | percent}}</div>\n        </div>\n        <ng-container *ngIf=\"subscription && !subscription.cancelled && !subscriptionMarkedForCancel && paymentSource\">\n            <div class=\"mt-3\">\n                <div class=\"d-flex\" *ngIf=\"!showAdjustStorage\">\n                    <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"adjustStorage(true)\">\n                        {{'addStorage' | i18n}}\n                    </button>\n                    <button type=\"button\" class=\"ml-1 btn btn-outline-secondary\" (click)=\"adjustStorage(false)\">\n                        {{'removeStorage' | i18n}}\n                    </button>\n                </div>\n                <app-adjust-storage [storageGbPrice]=\"4\" [add]=\"adjustStorageAdd\" (onAdjusted)=\"closeStorage(true)\" (onCanceled)=\"closeStorage(false)\"\n                    *ngIf=\"showAdjustStorage\"></app-adjust-storage>\n            </div>\n        </ng-container>\n        <h2 class=\"spaced-header\">{{'paymentMethod' | i18n}}</h2>\n        <p *ngIf=\"!paymentSource\">{{'noPaymentMethod' | i18n}}</p>\n        <p *ngIf=\"paymentSource\">\n            <i class=\"fa fa-fw\" [ngClass]=\"{'fa-credit-card': paymentSource.type === paymentMethodType.Card,\n                'fa-university': paymentSource.type === paymentMethodType.BankAccount, \n                'fa-paypal text-primary': paymentSource.type === paymentMethodType.PayPal}\"></i>\n            {{paymentSource.description}}\n        </p>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"changePayment()\" *ngIf=\"!showAdjustPayment\">\n            {{(paymentSource ? 'changePaymentMethod' : 'addPaymentMethod') | i18n}}\n        </button>\n        <app-adjust-payment [currentType]=\"paymentSource != null ? paymentSource.type : null\" (onAdjusted)=\"closePayment(true)\" (onCanceled)=\"closePayment(false)\"\n            *ngIf=\"showAdjustPayment\">\n        </app-adjust-payment>\n        <h2 class=\"spaced-header\">{{'charges' | i18n}}</h2>\n        <p *ngIf=\"!charges || !charges.length\">{{'noCharges' | i18n}}</p>\n        <table class=\"table mb-2\" *ngIf=\"charges && charges.length\">\n            <tbody>\n                <tr *ngFor=\"let c of charges\">\n                    <td>{{c.createdDate | date:'mediumDate'}}</td>\n                    <td>{{c.paymentSource ? c.paymentSource.description : '-'}}</td>\n                    <td class=\"text-capitalize\">{{c.status}}</td>\n                    <td [ngClass]=\"{'text-strike':c.refunded}\" title=\"{{(c.refunded ? 'refunded' : '') | i18n}}\">{{c.amount | currency:'$'}}</td>\n                </tr>\n            </tbody>\n        </table>\n        <small class=\"text-muted\">* {{'chargesStatement' | i18n : 'BITWARDEN'}}</small>\n    </ng-container>\n</ng-container>\n";

/***/ }),

/***/ "./src/app/settings/user-billing.component.ts":
/*!****************************************************!*\
  !*** ./src/app/settings/user-billing.component.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var paymentMethodType_1 = __webpack_require__(/*! jslib/enums/paymentMethodType */ "./jslib/src/enums/paymentMethodType.ts");
var UserBillingComponent = /** @class */ (function () {
    function UserBillingComponent(tokenService, apiService, platformUtilsService, i18nService, analytics, toasterService, router) {
        this.tokenService = tokenService;
        this.apiService = apiService;
        this.platformUtilsService = platformUtilsService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.router = router;
        this.loading = false;
        this.firstLoaded = false;
        this.adjustStorageAdd = true;
        this.showAdjustStorage = false;
        this.showAdjustPayment = false;
        this.showUpdateLicense = false;
        this.paymentMethodType = paymentMethodType_1.PaymentMethodType;
        this.selfHosted = false;
        this.selfHosted = platformUtilsService.isSelfHost();
    }
    UserBillingComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.load()];
                    case 1:
                        _a.sent();
                        this.firstLoaded = true;
                        return [2 /*return*/];
                }
            });
        });
    };
    UserBillingComponent.prototype.load = function () {
        return __awaiter(this, void 0, void 0, function () {
            var premium, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.loading) {
                            return [2 /*return*/];
                        }
                        premium = this.tokenService.getPremium();
                        if (!premium) return [3 /*break*/, 2];
                        this.loading = true;
                        _a = this;
                        return [4 /*yield*/, this.apiService.getUserBilling()];
                    case 1:
                        _a.billing = _b.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        this.router.navigate(['/settings/premium']);
                        return [2 /*return*/];
                    case 3:
                        this.loading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    UserBillingComponent.prototype.reinstate = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.loading) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('reinstateConfirmation'), this.i18nService.t('reinstateSubscription'), this.i18nService.t('yes'), this.i18nService.t('cancel'))];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.reinstatePromise = this.apiService.postReinstatePremium();
                        return [4 /*yield*/, this.reinstatePromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Reinstated Premium' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('reinstated'));
                        this.load();
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    UserBillingComponent.prototype.cancel = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.loading) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('cancelConfirmation'), this.i18nService.t('cancelSubscription'), this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.cancelPromise = this.apiService.postCancelPremium();
                        return [4 /*yield*/, this.cancelPromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Canceled Premium' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('canceledSubscription'));
                        this.load();
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    UserBillingComponent.prototype.downloadLicense = function () {
        if (this.loading) {
            return;
        }
        var licenseString = JSON.stringify(this.billing.license, null, 2);
        this.platformUtilsService.saveFile(window, licenseString, null, 'bitwarden_premium_license.json');
    };
    UserBillingComponent.prototype.updateLicense = function () {
        if (this.loading) {
            return;
        }
        this.showUpdateLicense = true;
    };
    UserBillingComponent.prototype.closeUpdateLicense = function (load) {
        this.showUpdateLicense = false;
        if (load) {
            this.load();
        }
    };
    UserBillingComponent.prototype.adjustStorage = function (add) {
        this.adjustStorageAdd = add;
        this.showAdjustStorage = true;
    };
    UserBillingComponent.prototype.closeStorage = function (load) {
        this.showAdjustStorage = false;
        if (load) {
            this.load();
        }
    };
    UserBillingComponent.prototype.changePayment = function () {
        this.showAdjustPayment = true;
    };
    UserBillingComponent.prototype.closePayment = function (load) {
        this.showAdjustPayment = false;
        if (load) {
            this.load();
        }
    };
    Object.defineProperty(UserBillingComponent.prototype, "subscriptionMarkedForCancel", {
        get: function () {
            return this.subscription != null && !this.subscription.cancelled && this.subscription.cancelAtEndDate;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserBillingComponent.prototype, "subscription", {
        get: function () {
            return this.billing != null ? this.billing.subscription : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserBillingComponent.prototype, "nextInvoice", {
        get: function () {
            return this.billing != null ? this.billing.upcomingInvoice : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserBillingComponent.prototype, "paymentSource", {
        get: function () {
            return this.billing != null ? this.billing.paymentSource : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserBillingComponent.prototype, "charges", {
        get: function () {
            return this.billing != null ? this.billing.charges : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserBillingComponent.prototype, "storagePercentage", {
        get: function () {
            return this.billing != null && this.billing.maxStorageGb ?
                +(100 * (this.billing.storageGb / this.billing.maxStorageGb)).toFixed(2) : 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UserBillingComponent.prototype, "storageProgressWidth", {
        get: function () {
            return this.storagePercentage < 5 ? 5 : 0;
        },
        enumerable: true,
        configurable: true
    });
    UserBillingComponent = __decorate([
        core_1.Component({
            selector: 'app-user-billing',
            template: __webpack_require__(/*! ./user-billing.component.html */ "./src/app/settings/user-billing.component.html"),
        }),
        __metadata("design:paramtypes", [token_service_1.TokenService, api_service_1.ApiService,
            platformUtils_service_1.PlatformUtilsService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            router_1.Router])
    ], UserBillingComponent);
    return UserBillingComponent;
}());
exports.UserBillingComponent = UserBillingComponent;


/***/ }),

/***/ "./src/app/settings/verify-email.component.html":
/*!******************************************************!*\
  !*** ./src/app/settings/verify-email.component.html ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"card border-warning\">\n    <div class=\"card-header bg-warning text-white\">\n        <i class=\"fa fa-envelope-o fa-fw\"></i> {{'verifyEmail' | i18n}}\n    </div>\n    <div class=\"card-body\">\n        <p>{{'verifyEmailDesc' | i18n}}</p>\n        <button type=\"button\" class=\"btn btn-block btn-outline-secondary btn-submit\" #sendBtn [appApiAction]=\"actionPromise\" [disabled]=\"sendBtn.loading\"\n            (click)=\"send()\">\n            <i class=\"fa fa-spin fa-spinner\" title=\"{{'loading' | i18n}}\"></i>\n            <span>\n                {{'sendEmail' | i18n}}\n            </span>\n        </button>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/settings/verify-email.component.ts":
/*!****************************************************!*\
  !*** ./src/app/settings/verify-email.component.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var VerifyEmailComponent = /** @class */ (function () {
    function VerifyEmailComponent(apiService, i18nService, analytics, toasterService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
    }
    VerifyEmailComponent.prototype.send = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.actionPromise != null) {
                            return [2 /*return*/];
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        this.actionPromise = this.apiService.postAccountVerifyEmail();
                        return [4 /*yield*/, this.actionPromise];
                    case 2:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Sent Verification Email' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('checkInboxForVerification'));
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 4:
                        this.actionPromise = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    VerifyEmailComponent = __decorate([
        core_1.Component({
            selector: 'app-verify-email',
            template: __webpack_require__(/*! ./verify-email.component.html */ "./src/app/settings/verify-email.component.html"),
        }),
        __metadata("design:paramtypes", [api_service_1.ApiService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService])
    ], VerifyEmailComponent);
    return VerifyEmailComponent;
}());
exports.VerifyEmailComponent = VerifyEmailComponent;


/***/ }),

/***/ "./src/app/tools/breach-report.component.html":
/*!****************************************************!*\
  !*** ./src/app/tools/breach-report.component.html ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>{{'dataBreachReport' | i18n}}</h1>\n</div>\n<p>{{'breachDesc' | i18n}}</p>\n<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"row\">\n        <div class=\"form-group col-6\">\n            <label for=\"username\">{{'username' | i18n}}</label>\n            <input id=\"username\" type=\"text\" name=\"Username\" class=\"form-control\" [(ngModel)]=\"username\" required>\n            <small class=\"form-text text-muted\">{{'breachCheckUsernameEmail' | i18n}}</small>\n        </div>\n    </div>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'checkBreaches' | i18n}}</span>\n    </button>\n</form>\n<div class=\"mt-4\" *ngIf=\"!form.loading && checkedUsername\">\n    <p *ngIf=\"error\">{{'reportError' | i18n}}...</p>\n    <ng-container *ngIf=\"!error\">\n        <app-callout type=\"success\" title=\"{{'goodNews' | i18n}}\" *ngIf=\"!breachedAccounts.length\">\n            {{'breachUsernameNotFound' | i18n : checkedUsername}}\n        </app-callout>\n        <app-callout type=\"danger\" title=\"{{'breachFound' | i18n}}\" *ngIf=\"breachedAccounts.length\">\n            {{'breachUsernameFound' | i18n : checkedUsername : breachedAccounts.length}}\n        </app-callout>\n        <ul class=\"list-group list-group-breach\" *ngIf=\"breachedAccounts.length\">\n            <li *ngFor=\"let a of breachedAccounts\" class=\"list-group-item min-height-fix\">\n                <div class=\"row\">\n                    <div class=\"col-2 text-center\">\n                        <img [src]=\"'https://haveibeenpwned.com/Content/Images/PwnedLogos/' + a.name + '.' + a.logoType\" alt=\"\" class=\"img-fluid\">\n                    </div>\n                    <div class=\"col-7\">\n                        <h3 class=\"text-lg\">{{a.title}}</h3>\n                        <p [innerHTML]=\"a.description\"></p>\n                        <p class=\"mb-1\">{{'compromisedData' | i18n}}:</p>\n                        <ul>\n                            <li *ngFor=\"let d of a.dataClasses\">{{d}}</li>\n                        </ul>\n                    </div>\n                    <div class=\"col-3\">\n                        <dl>\n                            <dt>{{'website' | i18n}}</dt>\n                            <dd>{{a.domain}}</dd>\n                            <dt>{{'affectedUsers' | i18n}}</dt>\n                            <dd>{{a.pwnCount | number}}</dd>\n                            <dt>{{'breachOccurred' | i18n}}</dt>\n                            <dd>{{a.breachDate | date: 'mediumDate'}}</dd>\n                            <dt>{{'breachReported' | i18n}}</dt>\n                            <dd>{{a.addedDate | date: 'mediumDate'}}</dd>\n                        </dl>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </ng-container>\n</div>\n";

/***/ }),

/***/ "./src/app/tools/breach-report.component.ts":
/*!**************************************************!*\
  !*** ./src/app/tools/breach-report.component.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var audit_service_1 = __webpack_require__(/*! jslib/abstractions/audit.service */ "./jslib/src/abstractions/audit.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var BreachReportComponent = /** @class */ (function () {
    function BreachReportComponent(auditService, userService) {
        this.auditService = auditService;
        this.userService = userService;
        this.error = false;
        this.breachedAccounts = [];
    }
    BreachReportComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.userService.getEmail()];
                    case 1:
                        _a.username = _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    BreachReportComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        this.error = false;
                        this.username = this.username.toLowerCase();
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 3, , 4]);
                        this.formPromise = this.auditService.breachedAccounts(this.username);
                        _a = this;
                        return [4 /*yield*/, this.formPromise];
                    case 2:
                        _a.breachedAccounts = _c.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        _b = _c.sent();
                        this.error = true;
                        return [3 /*break*/, 4];
                    case 4:
                        this.checkedUsername = this.username;
                        return [2 /*return*/];
                }
            });
        });
    };
    BreachReportComponent = __decorate([
        core_1.Component({
            selector: 'app-breach-report',
            template: __webpack_require__(/*! ./breach-report.component.html */ "./src/app/tools/breach-report.component.html"),
        }),
        __metadata("design:paramtypes", [audit_service_1.AuditService, user_service_1.UserService])
    ], BreachReportComponent);
    return BreachReportComponent;
}());
exports.BreachReportComponent = BreachReportComponent;


/***/ }),

/***/ "./src/app/tools/export.component.html":
/*!*********************************************!*\
  !*** ./src/app/tools/export.component.html ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form #form (ngSubmit)=\"submit()\" ngNativeValidate [appApiAction]=\"formPromise\">\n    <div class=\"page-header\">\n        <h1>{{'exportVault' | i18n}}</h1>\n    </div>\n    <p>{{'exportMasterPassword' | i18n}}</p>\n    <app-callout type=\"warning\">{{'exportWarning' | i18n}}</app-callout>\n    <div class=\"row\">\n        <div class=\"form-group col-6\">\n            <label for=\"masterPassword\">{{'masterPass' | i18n}}</label>\n            <input id=\"masterPassword\" type=\"password\" name=\"MasterPassword\" class=\"form-control\" [(ngModel)]=\"masterPassword\" required\n                appInputVerbatim>\n        </div>\n    </div>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'exportVault' | i18n}}</span>\n    </button>\n</form>\n";

/***/ }),

/***/ "./src/app/tools/export.component.ts":
/*!*******************************************!*\
  !*** ./src/app/tools/export.component.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var export_service_1 = __webpack_require__(/*! jslib/abstractions/export.service */ "./jslib/src/abstractions/export.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var export_component_1 = __webpack_require__(/*! jslib/angular/components/export.component */ "./jslib/src/angular/components/export.component.ts");
var ExportComponent = /** @class */ (function (_super) {
    __extends(ExportComponent, _super);
    function ExportComponent(analytics, toasterService, cryptoService, userService, i18nService, platformUtilsService, exportService) {
        return _super.call(this, analytics, toasterService, cryptoService, userService, i18nService, platformUtilsService, exportService, window) || this;
    }
    ExportComponent.prototype.saved = function () {
        _super.prototype.saved.call(this);
        this.masterPassword = null;
        this.toasterService.popAsync('success', null, this.i18nService.t('exportSuccess'));
    };
    ExportComponent = __decorate([
        core_1.Component({
            selector: 'app-export',
            template: __webpack_require__(/*! ./export.component.html */ "./src/app/tools/export.component.html"),
        }),
        __metadata("design:paramtypes", [angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            crypto_service_1.CryptoService, user_service_1.UserService,
            i18n_service_1.I18nService, platformUtils_service_1.PlatformUtilsService,
            export_service_1.ExportService])
    ], ExportComponent);
    return ExportComponent;
}(export_component_1.ExportComponent));
exports.ExportComponent = ExportComponent;


/***/ }),

/***/ "./src/app/tools/import.component.html":
/*!*********************************************!*\
  !*** ./src/app/tools/import.component.html ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>{{'importData' | i18n}}</h1>\n</div>\n<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"row\">\n        <div class=\"col-6\">\n            <div class=\"form-group\">\n                <label for=\"type\">1. {{'selectFormat' | i18n}}</label>\n                <select id=\"type\" name=\"Format\" [(ngModel)]=\"format\" class=\"form-control\" required>\n                    <option *ngFor=\"let o of featuredImportOptions\" [ngValue]=\"o.id\">{{o.name}}</option>\n                    <ng-container *ngIf=\"importOptions && importOptions.length\">\n                        <option value=\"-\" disabled></option>\n                        <option *ngFor=\"let o of importOptions\" [ngValue]=\"o.id\">{{o.name}}</option>\n                    </ng-container>\n                </select>\n            </div>\n        </div>\n    </div>\n    <app-callout type=\"info\" title=\"{{getFormatInstructionTitle()}}\" *ngIf=\"format\">\n        <ng-container *ngIf=\"format === 'bitwardencsv'\">\n            See detailed instructions on our help site at\n            <a target=\"_blank\" rel=\"noopener\" href=\"https://help.bitwarden.com/article/export-your-data/\">https://help.bitwarden.com/article/export-your-data/</a>\n        </ng-container>\n        <ng-container *ngIf=\"format === 'lastpasscsv'\">\n            See detailed instructions on our help site at\n            <a target=\"_blank\" rel=\"noopener\" href=\"https://help.bitwarden.com/article/import-from-lastpass/\">https://help.bitwarden.com/article/import-from-lastpass/</a>\n        </ng-container>\n        <ng-container *ngIf=\"format === 'keepassxcsv'\">\n            Using the KeePassX desktop application, navigate to \"Database\" &rarr; \"Export to CSV file\" and save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'aviracsv'\">\n            In the Avira web vault, go to \"Settings\" &rarr; \"My Data\" &rarr; \"Export data\" and save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'blurcsv'\">\n            In the Blur web vault, click your username at the top and go to \"Settings\" &rarr; \"Export Data\", then click \"Export CSV\"\n            for your \"Accounts\".\n        </ng-container>\n        <ng-container *ngIf=\"format === 'safeincloudxml'\">\n            Using the SaveInCloud desktop application, navigate to \"File\" &rarr; \"Export\" &rarr; \"As XML\" and save the XML file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'padlockcsv'\">\n            Using the Padlock desktop application, click the hamburger icon in the top left corner and navigate to \"Settings\" &rarr;\n            \"Export\" button and save the file \"As CSV\".\n        </ng-container>\n        <ng-container *ngIf=\"format === 'keepass2xml'\">\n            Using the KeePass 2 desktop application, navigate to \"File\" &rarr; \"Export\" and select the \"KeePass XML (2.x)\" option.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'upmcsv'\">\n            Using the Universal Password Manager desktop application, navigate to \"Database\" &rarr; \"Export\" and save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'saferpasscsv'\">\n            Using the SaferPass browser extension, click the hamburger icon in the top left corner and navigate to \"Settings\". Click\n            the \"Export accounts\" button to save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'meldiumcsv'\">\n            Using the Meldium web vault, navigate to \"Settings\". Locate the \"Export data\" function and click \"Show me my data\" to save\n            the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'keepercsv'\">\n            Log into the Keeper web vault (keepersecurity.com/vault). Navigate to \"Backup\" (top right) and find the \"Export to .csv File\"\n            option. Click \"Export Now\" to save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'chromecsv' || format === 'operacsv' || format === 'vivaldicsv'\">\n            <span *ngIf=\"format !== 'chromecsv'\">\n                The process is exactly the same as importing from Google Chrome.\n            </span>\n            See detailed instructions on our help site at\n            <a target=\"_blank\" rel=\"noopener\" href=\"https://help.bitwarden.com/article/import-from-chrome/\">https://help.bitwarden.com/article/import-from-chrome/</a>\n        </ng-container>\n        <ng-container *ngIf=\"format === 'firefoxcsv'\">\n            Use the\n            <a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/kspearrin/ff-password-exporter/blob/master/README.md#ff-password-exporter\">FF Password Exporter</a> application to export your passwords to a CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === '1password1pif' || format === '1passwordwincsv'\">\n            See detailed instructions on our help site at\n            <a target=\"_blank\" rel=\"noopener\" href=\"https://help.bitwarden.com/article/import-from-1password/\">https://help.bitwarden.com/article/import-from-1password/</a>.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'passworddragonxml'\">\n            Using the Password Dragon desktop application, navigate to \"File\" &rarr; \"Export\" &rarr; \"To XML\". In the dialog that pops\n            up select \"All Rows\" and check all fields. Click the \"Export\" button and save the XML file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'enpasscsv'\">\n            Using the Enpass desktop application, navigate to \"File\" &rarr; \"Export\" &rarr; \"As CSV\". Select \"OK\" to the warning alert\n            and save the CSV file. Note that the importer only supports files exported while Enpass is set to the English\n            language, so adjust your settings accordingly.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'pwsafexml'\">\n            Using the Password Safe desktop application, navigate to \"File\" &rarr; \"Export To\" &rarr; \"XML format...\" and save the XML\n            file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'dashlanecsv'\">\n            Using the Dashlane desktop application, navigate to \"File\" &rarr; \"Export\" &rarr; \"Unsecured archive (readable) in CSV format\"\n            and save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'msecurecsv'\">\n            Using the mSecure desktop application, navigate to \"File\" &rarr; \"Export\" &rarr; \"CSV File...\" and save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'stickypasswordxml'\">\n            Using the Sticky Password desktop application, navigate to \"Menu\" (top right) &rarr; \"Export\" &rarr; \"Export all\". Select\n            the unencrypted format XML option and save the XML file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'truekeycsv'\">\n            Using the True Key desktop application, click the gear icon (top right) and then navigate to \"App Settings\". Click the \"Export\"\n            button, enter your password and save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'clipperzhtml'\">\n            Log into the Clipperz web application (clipperz.is/app). Click the hamburger menu icon in the top right to expand the navigation\n            bar. Navigate to \"Data\" &rarr; \"Export\". Click the \"download HTML+JSON\" button to save the HTML file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'roboformcsv'\">\n            Using the RoboForm Editor desktop application, navigate to \"RoboForm\" (top left) &rarr; \"Options\" &rarr; \"Account &amp; Data\"\n            and click the \"Export\" button. Select all of your data, change the \"Format\" to \"CSV file\" and then click the\n            \"Export\" button to save the CSV file. Note: RoboForm only allows you to export Logins. Other items will not be\n            exported.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'passboltcsv'\">\n            Log into the Passbolt web vault and navigate to the \"Passwords\" listing. Select all of the passwords you would like to export\n            and click the \"Export\" button at the top of the listing. Choose the \"csv (lastpass)\" export format and click\n            the \"Export\" button.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'ascendocsv'\">\n            Using the Ascendo DataVault desktop application, navigate to \"Tools\" &rarr; \"Export\". In the dialog that pops up, select\n            the \"All Items (DVX, CSV)\" option. Click the \"Ok\" button to save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'passwordbossjson'\">\n            Using the Password Boss desktop application, navigate to \"File\" &rarr; \"Export data\" &rarr; \"Password Boss JSON - not encrypted\"\n            and save the JSON file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'zohovaultcsv'\">\n            Log into the Zoho web vault (vault.zoho.com). Navigate to \"Tools\" &rarr; \"Export Secrets\". Select \"All Secrets\" and click\n            the \"Zoho Vault Format CSV\" button. Highlight and copy the data from the textarea. Open a text editor like Notepad\n            and paste the data. Save the data from the text editor as\n            <code>zoho_export.csv</code>.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'splashidcsv'\">\n            Using the SplashID Safe desktop application, click on the SplashID blue lock logo in the top right corner. Navigate to \"Export\"\n            &rarr; \"Export as CSV\" and save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'passkeepcsv'\">\n            Using the PassKeep mobile app, navigate to \"Backup/Restore\". Locate the \"CSV Backup/Restore\" section and click \"Backup to\n            CSV\" to save the CSV file.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'gnomejson'\">\n            Make sure you have python-keyring and python-gnomekeyring installed. Save the\n            <a target=\"_blank\" rel=\"noopener\" href=\"https://bit.ly/2sMldAI\">GNOME Keyring Import/Export</a> python script to your desktop as\n            <code>pw_helper.py</code>. Open terminal and run\n            <code>chmod +rx Desktop/pw_helper.py</code> and then\n            <code>python Desktop/pw_helper.py export Desktop/my_passwords.json</code>. Then upload the resulting\n            <code>my_passwords.json</code> file here to Bitwarden.\n        </ng-container>\n        <ng-container *ngIf=\"format === 'passwordagentcsv'\">\n            Using the Password Agent desktop application navigate to \"File\" &rarr; \"Export\", select the \"Fields to export\" button and\n            check all of the fields, change the \"Output format\" to \"CSV\", and then click the \"Start\" button to save the CSV\n            file.\n        </ng-container>\n    </app-callout>\n    <div class=\"row\">\n        <div class=\"col-6\">\n            <div class=\"form-group\">\n                <label for=\"file\">2. {{'selectImportFile' | i18n}}</label>\n                <input type=\"file\" id=\"file\" class=\"form-control-file\" name=\"file\">\n            </div>\n        </div>\n    </div>\n    <div class=\"form-group\">\n        <label for=\"fileContents\">{{'orCopyPasteFileContents' | i18n}}</label>\n        <textarea id=\"fileContents\" class=\"form-control\" name=\"FileContents\" [(ngModel)]=\"fileContents\"></textarea>\n    </div>\n    <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n        <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        <span>{{'importData' | i18n}}</span>\n    </button>\n</form>\n";

/***/ }),

/***/ "./src/app/tools/import.component.ts":
/*!*******************************************!*\
  !*** ./src/app/tools/import.component.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var api_service_1 = __webpack_require__(/*! jslib/abstractions/api.service */ "./jslib/src/abstractions/api.service.ts");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var folder_service_1 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var cipherRequest_1 = __webpack_require__(/*! jslib/models/request/cipherRequest */ "./jslib/src/models/request/cipherRequest.ts");
var folderRequest_1 = __webpack_require__(/*! jslib/models/request/folderRequest */ "./jslib/src/models/request/folderRequest.ts");
var importCiphersRequest_1 = __webpack_require__(/*! jslib/models/request/importCiphersRequest */ "./jslib/src/models/request/importCiphersRequest.ts");
var kvpRequest_1 = __webpack_require__(/*! jslib/models/request/kvpRequest */ "./jslib/src/models/request/kvpRequest.ts");
var ascendoCsvImporter_1 = __webpack_require__(/*! jslib/importers/ascendoCsvImporter */ "./jslib/src/importers/ascendoCsvImporter.ts");
var aviraCsvImporter_1 = __webpack_require__(/*! jslib/importers/aviraCsvImporter */ "./jslib/src/importers/aviraCsvImporter.ts");
var bitwardenCsvImporter_1 = __webpack_require__(/*! jslib/importers/bitwardenCsvImporter */ "./jslib/src/importers/bitwardenCsvImporter.ts");
var blurCsvImporter_1 = __webpack_require__(/*! jslib/importers/blurCsvImporter */ "./jslib/src/importers/blurCsvImporter.ts");
var chromeCsvImporter_1 = __webpack_require__(/*! jslib/importers/chromeCsvImporter */ "./jslib/src/importers/chromeCsvImporter.ts");
var clipperzHtmlImporter_1 = __webpack_require__(/*! jslib/importers/clipperzHtmlImporter */ "./jslib/src/importers/clipperzHtmlImporter.ts");
var dashlaneCsvImporter_1 = __webpack_require__(/*! jslib/importers/dashlaneCsvImporter */ "./jslib/src/importers/dashlaneCsvImporter.ts");
var enpassCsvImporter_1 = __webpack_require__(/*! jslib/importers/enpassCsvImporter */ "./jslib/src/importers/enpassCsvImporter.ts");
var firefoxCsvImporter_1 = __webpack_require__(/*! jslib/importers/firefoxCsvImporter */ "./jslib/src/importers/firefoxCsvImporter.ts");
var gnomeJsonImporter_1 = __webpack_require__(/*! jslib/importers/gnomeJsonImporter */ "./jslib/src/importers/gnomeJsonImporter.ts");
var keepass2XmlImporter_1 = __webpack_require__(/*! jslib/importers/keepass2XmlImporter */ "./jslib/src/importers/keepass2XmlImporter.ts");
var keepassxCsvImporter_1 = __webpack_require__(/*! jslib/importers/keepassxCsvImporter */ "./jslib/src/importers/keepassxCsvImporter.ts");
var keeperCsvImporter_1 = __webpack_require__(/*! jslib/importers/keeperCsvImporter */ "./jslib/src/importers/keeperCsvImporter.ts");
var lastpassCsvImporter_1 = __webpack_require__(/*! jslib/importers/lastpassCsvImporter */ "./jslib/src/importers/lastpassCsvImporter.ts");
var meldiumCsvImporter_1 = __webpack_require__(/*! jslib/importers/meldiumCsvImporter */ "./jslib/src/importers/meldiumCsvImporter.ts");
var msecureCsvImporter_1 = __webpack_require__(/*! jslib/importers/msecureCsvImporter */ "./jslib/src/importers/msecureCsvImporter.ts");
var onepassword1PifImporter_1 = __webpack_require__(/*! jslib/importers/onepassword1PifImporter */ "./jslib/src/importers/onepassword1PifImporter.ts");
var onepasswordWinCsvImporter_1 = __webpack_require__(/*! jslib/importers/onepasswordWinCsvImporter */ "./jslib/src/importers/onepasswordWinCsvImporter.ts");
var padlockCsvImporter_1 = __webpack_require__(/*! jslib/importers/padlockCsvImporter */ "./jslib/src/importers/padlockCsvImporter.ts");
var passkeepCsvImporter_1 = __webpack_require__(/*! jslib/importers/passkeepCsvImporter */ "./jslib/src/importers/passkeepCsvImporter.ts");
var passwordAgentCsvImporter_1 = __webpack_require__(/*! jslib/importers/passwordAgentCsvImporter */ "./jslib/src/importers/passwordAgentCsvImporter.ts");
var passwordBossJsonImporter_1 = __webpack_require__(/*! jslib/importers/passwordBossJsonImporter */ "./jslib/src/importers/passwordBossJsonImporter.ts");
var passwordDragonXmlImporter_1 = __webpack_require__(/*! jslib/importers/passwordDragonXmlImporter */ "./jslib/src/importers/passwordDragonXmlImporter.ts");
var passwordSafeXmlImporter_1 = __webpack_require__(/*! jslib/importers/passwordSafeXmlImporter */ "./jslib/src/importers/passwordSafeXmlImporter.ts");
var roboformCsvImporter_1 = __webpack_require__(/*! jslib/importers/roboformCsvImporter */ "./jslib/src/importers/roboformCsvImporter.ts");
var safeInCloudXmlImporter_1 = __webpack_require__(/*! jslib/importers/safeInCloudXmlImporter */ "./jslib/src/importers/safeInCloudXmlImporter.ts");
var saferpassCsvImport_1 = __webpack_require__(/*! jslib/importers/saferpassCsvImport */ "./jslib/src/importers/saferpassCsvImport.ts");
var splashIdCsvImporter_1 = __webpack_require__(/*! jslib/importers/splashIdCsvImporter */ "./jslib/src/importers/splashIdCsvImporter.ts");
var stickyPasswordXmlImporter_1 = __webpack_require__(/*! jslib/importers/stickyPasswordXmlImporter */ "./jslib/src/importers/stickyPasswordXmlImporter.ts");
var truekeyCsvImporter_1 = __webpack_require__(/*! jslib/importers/truekeyCsvImporter */ "./jslib/src/importers/truekeyCsvImporter.ts");
var upmCsvImporter_1 = __webpack_require__(/*! jslib/importers/upmCsvImporter */ "./jslib/src/importers/upmCsvImporter.ts");
var zohoVaultCsvImporter_1 = __webpack_require__(/*! jslib/importers/zohoVaultCsvImporter */ "./jslib/src/importers/zohoVaultCsvImporter.ts");
var ImportComponent = /** @class */ (function () {
    function ImportComponent(i18nService, analytics, toasterService, cipherService, folderService, apiService, router) {
        this.i18nService = i18nService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.cipherService = cipherService;
        this.folderService = folderService;
        this.apiService = apiService;
        this.router = router;
        this.format = null;
        this.successNavigate = ['vault'];
    }
    ImportComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.setImportOptions();
        this.importOptions.sort(function (a, b) {
            if (a.name == null && b.name != null) {
                return -1;
            }
            if (a.name != null && b.name == null) {
                return 1;
            }
            if (a.name == null && b.name == null) {
                return 0;
            }
            return _this.i18nService.collator ? _this.i18nService.collator.compare(a.name, b.name) :
                a.name.localeCompare(b.name);
        });
    };
    ImportComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var importer, fileEl, files, fileContents, content, _a, importResult, halfway, last, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        importer = this.getImporter();
                        if (importer === null) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('selectFormat'));
                            return [2 /*return*/];
                        }
                        fileEl = document.getElementById('file');
                        files = fileEl.files;
                        if ((files == null || files.length === 0) && (this.fileContents == null || this.fileContents === '')) {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('selectFile'));
                            return [2 /*return*/];
                        }
                        fileContents = this.fileContents;
                        if (!(files != null && files.length > 0)) return [3 /*break*/, 4];
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, this.getFileContents(files[0])];
                    case 2:
                        content = _c.sent();
                        if (content != null) {
                            fileContents = content;
                        }
                        return [3 /*break*/, 4];
                    case 3:
                        _a = _c.sent();
                        return [3 /*break*/, 4];
                    case 4:
                        if (fileContents == null || fileContents === '') {
                            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('selectFile'));
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, importer.parse(fileContents)];
                    case 5:
                        importResult = _c.sent();
                        if (!importResult.success) return [3 /*break*/, 10];
                        if (importResult.folders.length === 0 && importResult.ciphers.length === 0) {
                            this.error(this.i18nService.t('importNothingError'));
                            return [2 /*return*/];
                        }
                        else if (importResult.ciphers.length > 0) {
                            halfway = Math.floor(importResult.ciphers.length / 2);
                            last = importResult.ciphers.length - 1;
                            if (this.badData(importResult.ciphers[0]) && this.badData(importResult.ciphers[halfway]) &&
                                this.badData(importResult.ciphers[last])) {
                                this.error(this.i18nService.t('importFormatError'));
                                return [2 /*return*/];
                            }
                        }
                        _c.label = 6;
                    case 6:
                        _c.trys.push([6, 8, , 9]);
                        this.formPromise = this.postImport(importResult);
                        return [4 /*yield*/, this.formPromise];
                    case 7:
                        _c.sent();
                        this.analytics.eventTrack.next({
                            action: 'Imported Data',
                            properties: { label: this.format },
                        });
                        this.toasterService.popAsync('success', null, this.i18nService.t('importSuccess'));
                        this.router.navigate(this.successNavigate);
                        return [3 /*break*/, 9];
                    case 8:
                        _b = _c.sent();
                        return [3 /*break*/, 9];
                    case 9: return [3 /*break*/, 11];
                    case 10:
                        this.error(this.i18nService.t('importFormatError'));
                        _c.label = 11;
                    case 11: return [2 /*return*/];
                }
            });
        });
    };
    ImportComponent.prototype.getFormatInstructionTitle = function () {
        var _this = this;
        if (this.format == null) {
            return null;
        }
        var results = this.featuredImportOptions.concat(this.importOptions).filter(function (o) { return o.id === _this.format; });
        if (results.length > 0) {
            return this.i18nService.t('instructionsFor', results[0].name);
        }
        return null;
    };
    ImportComponent.prototype.postImport = function (importResult) {
        return __awaiter(this, void 0, void 0, function () {
            var request, i, c, i, f;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        request = new importCiphersRequest_1.ImportCiphersRequest();
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < importResult.ciphers.length)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.cipherService.encrypt(importResult.ciphers[i])];
                    case 2:
                        c = _a.sent();
                        request.ciphers.push(new cipherRequest_1.CipherRequest(c));
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4:
                        if (!(importResult.folders != null)) return [3 /*break*/, 8];
                        i = 0;
                        _a.label = 5;
                    case 5:
                        if (!(i < importResult.folders.length)) return [3 /*break*/, 8];
                        return [4 /*yield*/, this.folderService.encrypt(importResult.folders[i])];
                    case 6:
                        f = _a.sent();
                        request.folders.push(new folderRequest_1.FolderRequest(f));
                        _a.label = 7;
                    case 7:
                        i++;
                        return [3 /*break*/, 5];
                    case 8:
                        if (importResult.folderRelationships != null) {
                            importResult.folderRelationships.forEach(function (r) {
                                return request.folderRelationships.push(new kvpRequest_1.KvpRequest(r[0], r[1]));
                            });
                        }
                        return [4 /*yield*/, this.apiService.postImportCiphers(request)];
                    case 9: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    ImportComponent.prototype.setImportOptions = function () {
        this.featuredImportOptions = [
            { id: null, name: '-- ' + this.i18nService.t('select') + ' --' },
            { id: 'bitwardencsv', name: 'Bitwarden (csv)' },
            { id: 'lastpasscsv', name: 'LastPass (csv)' },
            { id: 'chromecsv', name: 'Chrome (csv)' },
            { id: 'firefoxcsv', name: 'Firefox (csv)' },
            { id: 'keepass2xml', name: 'KeePass 2 (xml)' },
            { id: '1password1pif', name: '1Password (1pif)' },
            { id: 'dashlanecsv', name: 'Dashlane (csv)' },
        ];
        this.importOptions = [
            { id: 'keepassxcsv', name: 'KeePassX (csv)' },
            { id: '1passwordwincsv', name: '1Password 6 and 7 Windows (csv)' },
            { id: 'roboformcsv', name: 'RoboForm (csv)' },
            { id: 'keepercsv', name: 'Keeper (csv)' },
            { id: 'enpasscsv', name: 'Enpass (csv)' },
            { id: 'safeincloudxml', name: 'SafeInCloud (xml)' },
            { id: 'pwsafexml', name: 'Password Safe (xml)' },
            { id: 'stickypasswordxml', name: 'Sticky Password (xml)' },
            { id: 'msecurecsv', name: 'mSecure (csv)' },
            { id: 'truekeycsv', name: 'True Key (csv)' },
            { id: 'passwordbossjson', name: 'Password Boss (json)' },
            { id: 'zohovaultcsv', name: 'Zoho Vault (csv)' },
            { id: 'splashidcsv', name: 'SplashID (csv)' },
            { id: 'passworddragonxml', name: 'Password Dragon (xml)' },
            { id: 'padlockcsv', name: 'Padlock (csv)' },
            { id: 'passboltcsv', name: 'Passbolt (csv)' },
            { id: 'clipperzhtml', name: 'Clipperz (html)' },
            { id: 'aviracsv', name: 'Avira (csv)' },
            { id: 'saferpasscsv', name: 'SaferPass (csv)' },
            { id: 'upmcsv', name: 'Universal Password Manager (csv)' },
            { id: 'ascendocsv', name: 'Ascendo DataVault (csv)' },
            { id: 'meldiumcsv', name: 'Meldium (csv)' },
            { id: 'passkeepcsv', name: 'PassKeep (csv)' },
            { id: 'operacsv', name: 'Opera (csv)' },
            { id: 'vivaldicsv', name: 'Vivaldi (csv)' },
            { id: 'gnomejson', name: 'GNOME Passwords and Keys/Seahorse (json)' },
            { id: 'blurcsv', name: 'Blur (csv)' },
            { id: 'passwordagentcsv', name: 'Password Agent (csv)' },
        ];
    };
    ImportComponent.prototype.getImporter = function () {
        if (this.format == null || this.format === '') {
            return null;
        }
        switch (this.format) {
            case 'bitwardencsv':
                return new bitwardenCsvImporter_1.BitwardenCsvImporter();
            case 'lastpasscsv':
            case 'passboltcsv':
                return new lastpassCsvImporter_1.LastPassCsvImporter();
            case 'keepassxcsv':
                return new keepassxCsvImporter_1.KeePassXCsvImporter();
            case 'aviracsv':
                return new aviraCsvImporter_1.AviraCsvImporter();
            case 'blurcsv':
                return new blurCsvImporter_1.BlurCsvImporter();
            case 'safeincloudxml':
                return new safeInCloudXmlImporter_1.SafeInCloudXmlImporter();
            case 'padlockcsv':
                return new padlockCsvImporter_1.PadlockCsvImporter();
            case 'keepass2xml':
                return new keepass2XmlImporter_1.KeePass2XmlImporter();
            case 'chromecsv':
            case 'operacsv':
            case 'vivaldicsv':
                return new chromeCsvImporter_1.ChromeCsvImporter();
            case 'firefoxcsv':
                return new firefoxCsvImporter_1.FirefoxCsvImporter();
            case 'upmcsv':
                return new upmCsvImporter_1.UpmCsvImporter();
            case 'saferpasscsv':
                return new saferpassCsvImport_1.SaferPassCsvImporter();
            case 'meldiumcsv':
                return new meldiumCsvImporter_1.MeldiumCsvImporter();
            case '1password1pif':
                return new onepassword1PifImporter_1.OnePassword1PifImporter();
            case '1passwordwincsv':
                return new onepasswordWinCsvImporter_1.OnePasswordWinCsvImporter();
            case 'keepercsv':
                return new keeperCsvImporter_1.KeeperCsvImporter();
            case 'passworddragonxml':
                return new passwordDragonXmlImporter_1.PasswordDragonXmlImporter();
            case 'enpasscsv':
                return new enpassCsvImporter_1.EnpassCsvImporter();
            case 'pwsafexml':
                return new passwordSafeXmlImporter_1.PasswordSafeXmlImporter();
            case 'dashlanecsv':
                return new dashlaneCsvImporter_1.DashlaneCsvImporter();
            case 'msecurecsv':
                return new msecureCsvImporter_1.MSecureCsvImporter();
            case 'stickypasswordxml':
                return new stickyPasswordXmlImporter_1.StickyPasswordXmlImporter();
            case 'truekeycsv':
                return new truekeyCsvImporter_1.TrueKeyCsvImporter();
            case 'clipperzhtml':
                return new clipperzHtmlImporter_1.ClipperzHtmlImporter();
            case 'roboformcsv':
                return new roboformCsvImporter_1.RoboFormCsvImporter();
            case 'ascendocsv':
                return new ascendoCsvImporter_1.AscendoCsvImporter();
            case 'passwordbossjson':
                return new passwordBossJsonImporter_1.PasswordBossJsonImporter();
            case 'zohovaultcsv':
                return new zohoVaultCsvImporter_1.ZohoVaultCsvImporter();
            case 'splashidcsv':
                return new splashIdCsvImporter_1.SplashIdCsvImporter();
            case 'passkeepcsv':
                return new passkeepCsvImporter_1.PassKeepCsvImporter();
            case 'gnomejson':
                return new gnomeJsonImporter_1.GnomeJsonImporter();
            case 'passwordagentcsv':
                return new passwordAgentCsvImporter_1.PasswordAgentCsvImporter();
            default:
                return null;
        }
    };
    ImportComponent.prototype.error = function (errorMessage) {
        this.analytics.eventTrack.next({
            action: 'Import Data Failed',
            properties: { label: this.format },
        });
        this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), errorMessage);
    };
    ImportComponent.prototype.getFileContents = function (file) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var reader = new FileReader();
            reader.readAsText(file, 'utf-8');
            reader.onload = function (evt) {
                if (_this.format === 'lastpasscsv' && file.type === 'text/html') {
                    var parser = new DOMParser();
                    var doc = parser.parseFromString(evt.target.result, 'text/html');
                    var pre = doc.querySelector('pre');
                    if (pre != null) {
                        resolve(pre.textContent);
                        return;
                    }
                    reject();
                    return;
                }
                resolve(evt.target.result);
            };
            reader.onerror = function () {
                reject();
            };
        });
    };
    ImportComponent.prototype.badData = function (c) {
        return (c.name == null || c.name === '--') &&
            (c.login != null && (c.login.password == null || c.login.password === ''));
    };
    ImportComponent = __decorate([
        core_1.Component({
            selector: 'app-import',
            template: __webpack_require__(/*! ./import.component.html */ "./src/app/tools/import.component.html"),
        }),
        __metadata("design:paramtypes", [i18n_service_1.I18nService, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, cipher_service_1.CipherService,
            folder_service_1.FolderService, api_service_1.ApiService,
            router_1.Router])
    ], ImportComponent);
    return ImportComponent;
}());
exports.ImportComponent = ImportComponent;


/***/ }),

/***/ "./src/app/tools/password-generator-history.component.html":
/*!*****************************************************************!*\
  !*** ./src/app/tools/password-generator-history.component.html ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{'passwordHistory' | i18n}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <ul class=\"list-group list-group-flush\" *ngIf=\"history.length\">\n                <li class=\"list-group-item d-flex\" *ngFor=\"let h of history\">\n                    <div>\n                        <div class=\"password\">{{h.password}}</div>\n                        <small class=\"text-muted\">{{h.date | date:'medium'}}</small>\n                    </div>\n                    <div class=\"ml-auto\">\n                        <button class=\"btn btn-link\" title=\"{{'copyPassword' | i18n}}\" (click)=\"copy(h.password)\">\n                            <i class=\"fa fa-lg fa-clipboard\"></i>\n                        </button>\n                    </div>\n                </li>\n            </ul>\n            <div class=\"modal-body\" *ngIf=\"!history.length\">\n                {{'noPasswordsInList' | i18n}}\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\" title=\"{{'close' | i18n}}\">\n                    {{'close' | i18n}}\n                </button>\n                <div class=\"ml-auto\">\n                    <button type=\"button\" (click)=\"clear()\" class=\"btn btn-outline-danger\" title=\"{{'clear' | i18n}}\">\n                        <i class=\"fa fa-trash-o fa-lg fa-fw\"></i>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/tools/password-generator-history.component.ts":
/*!***************************************************************!*\
  !*** ./src/app/tools/password-generator-history.component.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var passwordGeneration_service_1 = __webpack_require__(/*! jslib/abstractions/passwordGeneration.service */ "./jslib/src/abstractions/passwordGeneration.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var password_generator_history_component_1 = __webpack_require__(/*! jslib/angular/components/password-generator-history.component */ "./jslib/src/angular/components/password-generator-history.component.ts");
var PasswordGeneratorHistoryComponent = /** @class */ (function (_super) {
    __extends(PasswordGeneratorHistoryComponent, _super);
    function PasswordGeneratorHistoryComponent(passwordGenerationService, analytics, platformUtilsService, i18nService, toasterService) {
        return _super.call(this, passwordGenerationService, analytics, platformUtilsService, i18nService, toasterService, window) || this;
    }
    PasswordGeneratorHistoryComponent = __decorate([
        core_1.Component({
            selector: 'app-password-generator-history',
            template: __webpack_require__(/*! ./password-generator-history.component.html */ "./src/app/tools/password-generator-history.component.html"),
        }),
        __metadata("design:paramtypes", [passwordGeneration_service_1.PasswordGenerationService, angulartics2_1.Angulartics2,
            platformUtils_service_1.PlatformUtilsService, i18n_service_1.I18nService,
            angular2_toaster_1.ToasterService])
    ], PasswordGeneratorHistoryComponent);
    return PasswordGeneratorHistoryComponent;
}(password_generator_history_component_1.PasswordGeneratorHistoryComponent));
exports.PasswordGeneratorHistoryComponent = PasswordGeneratorHistoryComponent;


/***/ }),

/***/ "./src/app/tools/password-generator.component.html":
/*!*********************************************************!*\
  !*** ./src/app/tools/password-generator.component.html ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"page-header\">\n    <h1>{{'passwordGenerator' | i18n}}</h1>\n</div>\n<div class=\"card card-password bg-light my-4\">\n    <div class=\"card-body\">\n        {{password}}\n    </div>\n</div>\n<div class=\"row\">\n    <div class=\"form-group col-4\">\n        <label for=\"length\">{{'length' | i18n}}</label>\n        <input id=\"length\" class=\"form-control\" type=\"number\" min=\"5\" max=\"128\" [(ngModel)]=\"options.length\" (input)=\"saveOptions()\">\n    </div>\n    <div class=\"form-group col-4\">\n        <label for=\"min-number\">{{'minNumbers' | i18n}}</label>\n        <input id=\"min-number\" class=\"form-control\" type=\"number\" min=\"0\" max=\"9\" (input)=\"saveOptions()\" [(ngModel)]=\"options.minNumber\">\n    </div>\n    <div class=\"form-group col-4\">\n        <label for=\"min-special\">{{'minSpecial' | i18n}}</label>\n        <input id=\"min-special\" class=\"form-control\" type=\"number\" min=\"0\" max=\"9\" (input)=\"saveOptions()\" [(ngModel)]=\"options.minSpecial\">\n    </div>\n</div>\n<div class=\"form-group\">\n    <div class=\"form-check\">\n        <input id=\"uppercase\" class=\"form-check-input\" type=\"checkbox\" (change)=\"saveOptions()\" [(ngModel)]=\"options.uppercase\">\n        <label for=\"uppercase\" class=\"form-check-label\">A-Z</label>\n    </div>\n    <div class=\"form-check\">\n        <input id=\"lowercase\" class=\"form-check-input\" type=\"checkbox\" (change)=\"saveOptions()\" [(ngModel)]=\"options.lowercase\">\n        <label for=\"lowercase\" class=\"form-check-label\">a-z</label>\n    </div>\n    <div class=\"form-check\">\n        <input id=\"numbers\" class=\"form-check-input\" type=\"checkbox\" (change)=\"saveOptions()\" [(ngModel)]=\"options.number\">\n        <label for=\"numbers\" class=\"form-check-label\">0-9</label>\n    </div>\n    <div class=\"form-check\">\n        <input id=\"special\" class=\"form-check-input\" type=\"checkbox\" (change)=\"saveOptions()\" [(ngModel)]=\"options.special\">\n        <label for=\"special\" class=\"form-check-label\">!@#$%^&amp;*</label>\n    </div>\n    <div class=\"form-check\">\n        <input id=\"ambiguous\" class=\"form-check-input\" type=\"checkbox\" (change)=\"saveOptions()\" [(ngModel)]=\"avoidAmbiguous\">\n        <label for=\"ambiguous\" class=\"form-check-label\">{{'ambiguous' | i18n}}</label>\n    </div>\n</div>\n<div class=\"d-flex\">\n    <div>\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"regenerate()\">\n            {{'regeneratePassword' | i18n}}\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"copy()\">\n            {{'copyPassword' | i18n}}\n        </button>\n    </div>\n    <div class=\"ml-auto\">\n        <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"history()\" title=\"{{'passwordHistory' | i18n}}\">\n            <i class=\"fa fa-clock-o fa-lg\"></i>\n        </button>\n    </div>\n</div>\n<ng-template #historyTemplate></ng-template>\n";

/***/ }),

/***/ "./src/app/tools/password-generator.component.ts":
/*!*******************************************************!*\
  !*** ./src/app/tools/password-generator.component.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var passwordGeneration_service_1 = __webpack_require__(/*! jslib/abstractions/passwordGeneration.service */ "./jslib/src/abstractions/passwordGeneration.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var password_generator_component_1 = __webpack_require__(/*! jslib/angular/components/password-generator.component */ "./jslib/src/angular/components/password-generator.component.ts");
var modal_component_1 = __webpack_require__(/*! ../modal.component */ "./src/app/modal.component.ts");
var password_generator_history_component_1 = __webpack_require__(/*! ./password-generator-history.component */ "./src/app/tools/password-generator-history.component.ts");
var PasswordGeneratorComponent = /** @class */ (function (_super) {
    __extends(PasswordGeneratorComponent, _super);
    function PasswordGeneratorComponent(passwordGenerationService, analytics, platformUtilsService, i18nService, toasterService, componentFactoryResolver) {
        var _this = _super.call(this, passwordGenerationService, analytics, platformUtilsService, i18nService, toasterService, window) || this;
        _this.componentFactoryResolver = componentFactoryResolver;
        _this.modal = null;
        return _this;
    }
    PasswordGeneratorComponent.prototype.history = function () {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.historyModalRef.createComponent(factory).instance;
        this.modal.show(password_generator_history_component_1.PasswordGeneratorHistoryComponent, this.historyModalRef);
        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.modal = null;
                return [2 /*return*/];
            });
        }); });
    };
    __decorate([
        core_1.ViewChild('historyTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], PasswordGeneratorComponent.prototype, "historyModalRef", void 0);
    PasswordGeneratorComponent = __decorate([
        core_1.Component({
            selector: 'app-password-generator',
            template: __webpack_require__(/*! ./password-generator.component.html */ "./src/app/tools/password-generator.component.html"),
        }),
        __metadata("design:paramtypes", [passwordGeneration_service_1.PasswordGenerationService, angulartics2_1.Angulartics2,
            platformUtils_service_1.PlatformUtilsService, i18n_service_1.I18nService,
            angular2_toaster_1.ToasterService, core_1.ComponentFactoryResolver])
    ], PasswordGeneratorComponent);
    return PasswordGeneratorComponent;
}(password_generator_component_1.PasswordGeneratorComponent));
exports.PasswordGeneratorComponent = PasswordGeneratorComponent;


/***/ }),

/***/ "./src/app/tools/tools.component.html":
/*!********************************************!*\
  !*** ./src/app/tools/tools.component.html ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"container page-content\">\n    <div class=\"row\">\n        <div class=\"col-3\">\n            <div class=\"card mb-4\">\n                <div class=\"card-header\">{{'tools' | i18n}}</div>\n                <div class=\"list-group list-group-flush\">\n                    <a routerLink=\"generator\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'passwordGenerator' | i18n}}\n                    </a>\n                    <a routerLink=\"import\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'importData' | i18n}}\n                    </a>\n                    <a routerLink=\"export\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'exportVault' | i18n}}\n                    </a>\n                </div>\n            </div>\n            <div class=\"card\">\n                <div class=\"card-header\">{{'reports' | i18n}}</div>\n                <div class=\"list-group list-group-flush\">\n                    <a routerLink=\"breach-report\" class=\"list-group-item\" routerLinkActive=\"active\">\n                        {{'dataBreachReport' | i18n}}\n                    </a>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-9\">\n            <router-outlet></router-outlet>\n        </div>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/tools/tools.component.ts":
/*!******************************************!*\
  !*** ./src/app/tools/tools.component.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var ToolsComponent = /** @class */ (function () {
    function ToolsComponent() {
    }
    ToolsComponent = __decorate([
        core_1.Component({
            selector: 'app-tools',
            template: __webpack_require__(/*! ./tools.component.html */ "./src/app/tools/tools.component.html"),
        })
    ], ToolsComponent);
    return ToolsComponent;
}());
exports.ToolsComponent = ToolsComponent;


/***/ }),

/***/ "./src/app/vault/add-edit.component.html":
/*!***********************************************!*\
  !*** ./src/app/vault/add-edit.component.html ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog modal-lg\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{title}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\" *ngIf=\"cipher\">\n                <div class=\"row\" *ngIf=\"!editMode\">\n                    <div class=\"col-6 form-group\">\n                        <label for=\"type\">{{'whatTypeOfItem' | i18n}}</label>\n                        <select id=\"type\" name=\"Type\" [(ngModel)]=\"cipher.type\" class=\"form-control\">\n                            <option *ngFor=\"let o of typeOptions\" [ngValue]=\"o.value\">{{o.name}}</option>\n                        </select>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-6 form-group\">\n                        <label for=\"name\">{{'name' | i18n}}</label>\n                        <input id=\"name\" class=\"form-control\" type=\"text\" name=\"Name\" [(ngModel)]=\"cipher.name\" required>\n                    </div>\n                    <div class=\"col-6 form-group\" *ngIf=\"!organization\">\n                        <label for=\"folder\">{{'folder' | i18n}}</label>\n                        <select id=\"folder\" name=\"FolderId\" [(ngModel)]=\"cipher.folderId\" class=\"form-control\">\n                            <option *ngFor=\"let f of folders\" [ngValue]=\"f.id\">{{f.name}}</option>\n                        </select>\n                    </div>\n                </div>\n                <!-- Login -->\n                <ng-container *ngIf=\"cipher.type === cipherType.Login\">\n                    <div class=\"row\">\n                        <div class=\"col-6 form-group\">\n                            <label for=\"loginUsername\">{{'username' | i18n}}</label>\n                            <div class=\"input-group\">\n                                <input id=\"loginUsername\" class=\"form-control\" type=\"text\" name=\"Login.Username\" [(ngModel)]=\"cipher.login.username\" appInputVerbatim>\n                                <div class=\"input-group-append\">\n                                    <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'copyUsername' | i18n}}\" (click)=\"copy(cipher.login.username, 'username', 'Username')\"\n                                        tabindex=\"-1\">\n                                        <i class=\"fa fa-lg fa-clipboard\"></i>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"col-6 form-group\">\n                            <div class=\"d-flex\">\n                                <label for=\"loginPassword\">{{'password' | i18n}}</label>\n                                <div class=\"ml-auto d-flex\">\n                                    <a href=\"#\" class=\"d-block mr-2\" appStopClick title=\"{{'generatePassword' | i18n}}\" (click)=\"generatePassword()\">\n                                        <i class=\"fa fa-lg fa-fw fa-refresh\"></i>\n                                    </a>\n                                    <a href=\"#\" class=\"d-block\" #checkPasswordBtn appStopClick title=\"{{'checkPassword' | i18n}}\" (click)=\"checkPassword()\" [appApiAction]=\"checkPasswordPromise\">\n                                        <i class=\"fa fa-lg fa-fw fa-check-circle\" [hidden]=\"checkPasswordBtn.loading\"></i>\n                                        <i class=\"fa fa-lg fa-fw fa-spinner fa-spin\" [hidden]=\"!checkPasswordBtn.loading\" title=\"{{'loading' | i18n}}\"></i>\n                                    </a>\n                                </div>\n                            </div>\n                            <div class=\"input-group\">\n                                <input id=\"loginPassword\" class=\"form-control text-monospace\" type=\"{{showPassword ? 'text' : 'password'}}\" name=\"Login.Password\"\n                                    [(ngModel)]=\"cipher.login.password\" appInputVerbatim>\n                                <div class=\"input-group-append\">\n                                    <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'toggleVisibility' | i18n}}\" (click)=\"togglePassword()\"\n                                        tabindex=\"-1\">\n                                        <i class=\"fa fa-lg\" [ngClass]=\"{'fa-eye': !showPassword, 'fa-eye-slash': showPassword}\"></i>\n                                    </button>\n                                    <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'copyPassword' | i18n}}\" (click)=\"copy(cipher.login.password, 'password', 'Password')\"\n                                        tabindex=\"-1\">\n                                        <i class=\"fa fa-lg fa-clipboard\"></i>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-6 form-group\">\n                            <label for=\"loginTotp\">{{'authenticatorKeyTotp' | i18n}}</label>\n                            <input id=\"loginTotp\" type=\"text\" name=\"Login.Totp\" class=\"form-control text-monospace\" [(ngModel)]=\"cipher.login.totp\" appInputVerbatim>\n                        </div>\n                        <div class=\"col-6 form-group totp d-flex align-items-end\" [ngClass]=\"{'low': totpLow}\">\n                            <div *ngIf=\"!cipher.login.totp || !totpCode\">\n                                <img src=\"" + __webpack_require__(/*! ../../images/totp-countdown.png */ "./src/images/totp-countdown.png") + "\" title=\"{{'verificationCodeTotp' | i18n}}\" class=\"ml-2\">\n                                <a href=\"#\" appStopClick class=\"badge badge-primary ml-3\" (click)=\"premiumRequired()\" *ngIf=\"!organization && !cipher.organizationId && !isPremium\">\n                                    {{'premium' | i18n}}\n                                </a>\n                                <a href=\"#\" appStopClick class=\"badge badge-primary ml-3\" (click)=\"upgradeOrganization()\" *ngIf=\"(organization && !organization.useTotp) || (cipher.organizationId && !cipher.organizationUseTotp)\">\n                                    {{'upgrade' | i18n}}\n                                </a>\n                            </div>\n                            <div *ngIf=\"cipher.login.totp && totpCode\" class=\"d-flex align-items-center\">\n                                <span class=\"totp-countdown mr-3 ml-2\">\n                                    <span class=\"totp-sec\">{{totpSec}}</span>\n                                    <svg>\n                                        <g>\n                                            <circle class=\"totp-circle inner\" r=\"12.6\" cy=\"16\" cx=\"16\" [ngStyle]=\"{'stroke-dashoffset.px': totpDash}\"></circle>\n                                            <circle class=\"totp-circle outer\" r=\"14\" cy=\"16\" cx=\"16\"></circle>\n                                        </g>\n                                    </svg>\n                                </span>\n                                <span class=\"totp-code mr-2\" title=\"{{'verificationCodeTotp' | i18n}}\">{{totpCodeFormatted}}</span>\n                                <button type=\"button\" class=\"btn btn-link\" title=\"{{'copyVerificationCode' | i18n}}\" (click)=\"copy(totpCode, 'verificationCodeTotp', 'TOTP')\">\n                                    <i class=\"fa fa-clipboard\"></i>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <ng-container *ngIf=\"cipher.login.hasUris\">\n                        <div class=\"row\" appBoxRow *ngFor=\"let u of cipher.login.uris; let i = index\">\n                            <div class=\"col-7 form-group\">\n                                <label for=\"loginUri{{i}}\">{{'uriPosition' | i18n : (i + 1)}}</label>\n                                <div class=\"input-group\">\n                                    <input class=\"form-control\" id=\"loginUri{{i}}\" type=\"text\" name=\"Login.Uris[{{i}}].Uri\" [(ngModel)]=\"u.uri\" placeholder=\"{{'ex' | i18n}} https://google.com\"\n                                        appInputVerbatim>\n                                    <div class=\"input-group-append\">\n                                        <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'launch' | i18n}}\" (click)=\"launch(u)\" [disabled]=\"!u.canLaunch\"\n                                            tabindex=\"-1\">\n                                            <i class=\"fa fa-lg fa-share\"></i>\n                                        </button>\n                                        <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'copyUri' | i18n}}\" (click)=\"copy(u.uri, 'uri', 'URI')\"\n                                            tabindex=\"-1\">\n                                            <i class=\"fa fa-lg fa-clipboard\"></i>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"col-5 form-group\">\n                                <div class=\"d-flex\">\n                                    <label for=\"loginUriMatch{{i}}\">\n                                        {{'matchDetection' | i18n}}\n                                    </label>\n                                    <a class=\"ml-auto\" href=\"https://help.bitwarden.com/article/uri-match-detection/\" target=\"_blank\" rel=\"noopener\" title=\"{{'learnMore' | i18n}}\">\n                                        <i class=\"fa fa-question-circle-o\"></i>\n                                    </a>\n                                </div>\n                                <div class=\"d-flex\">\n                                    <select class=\"form-control\" id=\"loginUriMatch{{i}}\" name=\"Login.Uris[{{i}}].Match\" [(ngModel)]=\"u.match\" (change)=\"loginUriMatchChanged(u)\">\n                                        <option *ngFor=\"let o of uriMatchOptions\" [ngValue]=\"o.value\">{{o.name}}</option>\n                                    </select>\n                                    <button type=\"button\" class=\"btn btn-link text-danger ml-2\" (click)=\"removeUri(u)\" title=\"{{'remove' | i18n}}\">\n                                        <i class=\"fa fa-minus-circle fa-lg\"></i>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </ng-container>\n                    <a href=\"#\" appStopClick (click)=\"addUri()\" class=\"d-inline-block mb-3\">\n                        <i class=\"fa fa-plus-circle fa-fw\"></i> {{'newUri' | i18n}}\n                    </a>\n                </ng-container>\n                <!-- Card -->\n                <ng-container *ngIf=\"cipher.type === cipherType.Card\">\n                    <div class=\"row\">\n                        <div class=\"col-6 form-group\">\n                            <label for=\"cardCardholderName\">{{'cardholderName' | i18n}}</label>\n                            <input id=\"cardCardholderName\" class=\"form-control\" type=\"text\" name=\"Card.CardCardholderName\" [(ngModel)]=\"cipher.card.cardholderName\">\n                        </div>\n                        <div class=\"col-6 form-group\">\n                            <label for=\"cardBrand\">{{'brand' | i18n}}</label>\n                            <select id=\"cardBrand\" class=\"form-control\" name=\"Card.Brand\" [(ngModel)]=\"cipher.card.brand\">\n                                <option *ngFor=\"let o of cardBrandOptions\" [ngValue]=\"o.value\">{{o.name}}</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-6 form-group\">\n                            <label for=\"cardNumber\">{{'number' | i18n}}</label>\n                            <div class=\"input-group\">\n                                <input id=\"cardNumber\" class=\"form-control\" type=\"text\" name=\"Card.Number\" [(ngModel)]=\"cipher.card.number\" appInputVerbatim>\n                                <div class=\"input-group-append\">\n                                    <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'copyNumber' | i18n}}\" (click)=\"copy(cipher.card.number, 'number', 'Number')\"\n                                        tabindex=\"-1\">\n                                        <i class=\"fa fa-lg fa-clipboard\"></i>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"col form-group\">\n                            <label for=\"cardExpMonth\">{{'expirationMonth' | i18n}}</label>\n                            <select id=\"cardExpMonth\" class=\"form-control\" name=\"Card.ExpMonth\" [(ngModel)]=\"cipher.card.expMonth\">\n                                <option *ngFor=\"let o of cardExpMonthOptions\" [ngValue]=\"o.value\">{{o.name}}</option>\n                            </select>\n                        </div>\n                        <div class=\"col form-group\">\n                            <label for=\"cardExpYear\">{{'expirationYear' | i18n}}</label>\n                            <input id=\"cardExpYear\" class=\"form-control\" type=\"text\" name=\"Card.ExpYear\" [(ngModel)]=\"cipher.card.expYear\" placeholder=\"{{'ex' | i18n}} 2019\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-6 form-group\">\n                            <label for=\"cardCode\">{{'securityCode' | i18n}}</label>\n                            <div class=\"input-group\">\n                                <input id=\"cardCode\" class=\"form-control text-monospace\" type=\"{{showCardCode ? 'text' : 'password'}}\" name=\"Card.Code\" [(ngModel)]=\"cipher.card.code\"\n                                    appInputVerbatim>\n                                <div class=\"input-group-append\">\n                                    <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'toggleVisibility' | i18n}}\" (click)=\"toggleCardCode()\"\n                                        tabindex=\"-1\">\n                                        <i class=\"fa fa-lg\" [ngClass]=\"{'fa-eye': !showCardCode, 'fa-eye-slash': showCardCode}\"></i>\n                                    </button>\n                                    <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'securityCode' | i18n}}\" (click)=\"copy(cipher.card.code, 'securityCode', 'Security Code')\"\n                                        tabindex=\"-1\">\n                                        <i class=\"fa fa-lg fa-clipboard\"></i>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </ng-container>\n                <!-- Identity -->\n                <ng-container *ngIf=\"cipher.type === cipherType.Identity\">\n                    <div class=\"row\">\n                        <div class=\"col-4 form-group\">\n                            <label for=\"idTitle\">{{'title' | i18n}}</label>\n                            <select id=\"idTitle\" class=\"form-control\" name=\"Identity.Title\" [(ngModel)]=\"cipher.identity.title\">\n                                <option *ngFor=\"let o of identityTitleOptions\" [ngValue]=\"o.value\">{{o.name}}</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-4 form-group\">\n                            <label for=\"idFirstName\">{{'firstName' | i18n}}</label>\n                            <input id=\"idFirstName\" class=\"form-control\" type=\"text\" name=\"Identity.FirstName\" [(ngModel)]=\"cipher.identity.firstName\">\n                        </div>\n                        <div class=\"col-4 form-group\">\n                            <label for=\"idMiddleName\">{{'middleName' | i18n}}</label>\n                            <input id=\"idMiddleName\" class=\"form-control\" type=\"text\" name=\"Identity.MiddleName\" [(ngModel)]=\"cipher.identity.middleName\">\n                        </div>\n                        <div class=\"col-4 form-group\">\n                            <label for=\"idLastName\">{{'lastName' | i18n}}</label>\n                            <input id=\"idLastName\" class=\"form-control\" type=\"text\" name=\"Identity.LastName\" [(ngModel)]=\"cipher.identity.lastName\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-4 form-group\">\n                            <label for=\"idUsername\">{{'username' | i18n}}</label>\n                            <input id=\"idUsername\" class=\"form-control\" type=\"text\" name=\"Identity.Username\" [(ngModel)]=\"cipher.identity.username\" appInputVerbatim>\n                        </div>\n                        <div class=\"col-4 form-group\">\n                            <label for=\"idCompany\">{{'company' | i18n}}</label>\n                            <input id=\"idCompany\" class=\"form-control\" type=\"text\" name=\"Identity.Company\" [(ngModel)]=\"cipher.identity.company\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-4 form-group\">\n                            <label for=\"idSsn\">{{'ssn' | i18n}}</label>\n                            <input id=\"idSsn\" class=\"form-control\" type=\"text\" name=\"Identity.SSN\" [(ngModel)]=\"cipher.identity.ssn\" appInputVerbatim>\n                        </div>\n                        <div class=\"col-4 form-group\">\n                            <label for=\"idPassportNumber\">{{'passportNumber' | i18n}}</label>\n                            <input id=\"idPassportNumber\" class=\"form-control\" type=\"text\" name=\"Identity.PassportNumber\" [(ngModel)]=\"cipher.identity.passportNumber\"\n                                appInputVerbatim>\n                        </div>\n                        <div class=\"col-4 form-group\">\n                            <label for=\"idLicenseNumber\">{{'licenseNumber' | i18n}}</label>\n                            <input id=\"idLicenseNumber\" class=\"form-control\" type=\"text\" name=\"Identity.LicenseNumber\" [(ngModel)]=\"cipher.identity.licenseNumber\"\n                                appInputVerbatim>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-6 form-group\">\n                            <label for=\"idEmail\">{{'email' | i18n}}</label>\n                            <input id=\"idEmail\" class=\"form-control\" type=\"text\" name=\"Identity.Email\" [(ngModel)]=\"cipher.identity.email\" appInputVerbatim>\n                        </div>\n                        <div class=\"col-6 form-group\">\n                            <label for=\"idPhone\">{{'phone' | i18n}}</label>\n                            <input id=\"idPhone\" class=\"form-control\" type=\"text\" name=\"Identity.Phone\" [(ngModel)]=\"cipher.identity.phone\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-6 form-group\">\n                            <label for=\"idAddress1\">{{'address1' | i18n}}</label>\n                            <input id=\"idAddress1\" class=\"form-control\" type=\"text\" name=\"Identity.Address1\" [(ngModel)]=\"cipher.identity.address1\">\n                        </div>\n                        <div class=\"col-6 form-group\">\n                            <label for=\"idAddress2\">{{'address2' | i18n}}</label>\n                            <input id=\"idAddress2\" class=\"form-control\" type=\"text\" name=\"Identity.Address2\" [(ngModel)]=\"cipher.identity.address2\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-6 form-group\">\n                            <label for=\"idAddress3\">{{'address3' | i18n}}</label>\n                            <input id=\"idAddress3\" class=\"form-control\" type=\"text\" name=\"Identity.Address3\" [(ngModel)]=\"cipher.identity.address3\">\n                        </div>\n                        <div class=\"col-6 form-group\">\n                            <label for=\"idCity\">{{'cityTown' | i18n}}</label>\n                            <input id=\"idCity\" class=\"form-control\" type=\"text\" name=\"Identity.City\" [(ngModel)]=\"cipher.identity.city\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-6 form-group\">\n                            <label for=\"idState\">{{'stateProvince' | i18n}}</label>\n                            <input id=\"idState\" class=\"form-control\" type=\"text\" name=\"Identity.State\" [(ngModel)]=\"cipher.identity.state\">\n                        </div>\n                        <div class=\"col-6 form-group\">\n                            <label for=\"idPostalCode\">{{'zipPostalCode' | i18n}}</label>\n                            <input id=\"idPostalCode\" class=\"form-control\" type=\"text\" name=\"Identity.PostalCode\" [(ngModel)]=\"cipher.identity.postalCode\">\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-6 form-group\">\n                            <label for=\"idCountry\">{{'country' | i18n}}</label>\n                            <input id=\"idCountry\" class=\"form-control\" type=\"text\" name=\"Identity.Country\" [(ngModel)]=\"cipher.identity.country\">\n                        </div>\n                    </div>\n                </ng-container>\n                <div class=\"form-group\">\n                    <label for=\"notes\">{{'notes' | i18n}}</label>\n                    <textarea id=\"notes\" name=\"Notes\" rows=\"6\" [(ngModel)]=\"cipher.notes\" class=\"form-control\"></textarea>\n                </div>\n                <h3 class=\"mt-4\">{{'customFields' | i18n}}</h3>\n                <ng-container *ngIf=\"cipher.hasFields\">\n                    <div class=\"row\" appBoxRow *ngFor=\"let f of cipher.fields; let i = index\">\n                        <div class=\"col-5 form-group\">\n                            <div class=\"d-flex\">\n                                <label for=\"fieldName{{i}}\">{{'name' | i18n}}</label>\n                                <a class=\"ml-auto\" href=\"https://help.bitwarden.com/article/custom-fields/\" target=\"_blank\" rel=\"noopener\" title=\"{{'learnMore' | i18n}}\">\n                                    <i class=\"fa fa-question-circle-o\"></i>\n                                </a>\n                            </div>\n                            <input id=\"fieldName{{i}}\" type=\"text\" name=\"Field.Name{{i}}\" [(ngModel)]=\"f.name\" class=\"form-control\" appInputVerbatim>\n                        </div>\n                        <div class=\"col-7 form-group\">\n                            <label for=\"fieldValue{{i}}\">{{'value' | i18n}}</label>\n                            <div class=\"d-flex align-items-center\">\n                                <div class=\"input-group\" *ngIf=\"f.type === fieldType.Text\">\n                                    <input id=\"fieldValue{{i}}\" class=\"form-control\" type=\"text\" name=\"Field.Value{{i}}\" [(ngModel)]=\"f.value\" appInputVerbatim>\n                                    <div class=\"input-group-append\">\n                                        <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'copyValue' | i18n}}\" (click)=\"copy(f.value, 'value', 'Field')\"\n                                            tabindex=\"-1\">\n                                            <i class=\"fa fa-lg fa-clipboard\"></i>\n                                        </button>\n                                    </div>\n                                </div>\n                                <div class=\"input-group\" *ngIf=\"f.type === fieldType.Hidden\">\n                                    <input id=\"fieldValue{{i}}\" type=\"{{f.showValue ? 'text' : 'password'}}\" name=\"Field.Value{{i}}\" [(ngModel)]=\"f.value\" class=\"form-control text-monospace\"\n                                        appInputVerbatim>\n                                    <div class=\"input-group-append\">\n                                        <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'toggleVisibility' | i18n}}\" (click)=\"toggleFieldValue(f)\"\n                                            tabindex=\"-1\">\n                                            <i class=\"fa fa-lg\" [ngClass]=\"{'fa-eye': !f.showValue, 'fa-eye-slash': f.showValue}\"></i>\n                                        </button>\n                                        <button type=\"button\" class=\"btn btn-outline-secondary\" title=\"{{'copyValue' | i18n}}\" (click)=\"copy(f.value, 'value', 'Field')\"\n                                            tabindex=\"-1\">\n                                            <i class=\"fa fa-lg fa-clipboard\"></i>\n                                        </button>\n                                    </div>\n                                </div>\n                                <div class=\"flex-fill\">\n                                    <input id=\"fieldValue{{i}}\" name=\"Field.Value{{i}}\" type=\"checkbox\" [(ngModel)]=\"f.value\" *ngIf=\"f.type === fieldType.Boolean\"\n                                        appTrueFalseValue trueValue=\"true\" falseValue=\"false\">\n                                </div>\n                                <button type=\"button\" class=\"btn btn-link text-danger ml-2\" (click)=\"removeField(f)\" title=\"{{'remove' | i18n}}\">\n                                    <i class=\"fa fa-minus-circle fa-lg\"></i>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </ng-container>\n                <a href=\"#\" appStopClick (click)=\"addField()\" class=\"d-inline-block mb-2\">\n                    <i class=\"fa fa-plus-circle fa-fw\"></i> {{'newCustomField' | i18n}}\n                </a>\n                <div class=\"row\">\n                    <div class=\"col-5\">\n                        <label for=\"addFieldType\" class=\"sr-only\">{{'type' | i18n}}</label>\n                        <select id=\"addFieldType\" class=\"form-control\" name=\"AddFieldType\" [(ngModel)]=\"addFieldType\">\n                            <option *ngFor=\"let o of addFieldTypeOptions\" [ngValue]=\"o.value\">{{o.name}}</option>\n                        </select>\n                    </div>\n                </div>\n                <ng-container *ngIf=\"editMode\">\n                    <h3 class=\"mt-4\">{{'other' | i18n}}</h3>\n                    <div class=\"small text-muted\">\n                        <div>\n                            <b class=\"font-weight-semibold\">{{'dateUpdated' | i18n}}:</b>\n                            {{cipher.revisionDate | date:'medium'}}\n                        </div>\n                        <div *ngIf=\"passwordRevisionDate\">\n                            <b class=\"font-weight-semibold\">{{'datePasswordUpdated' | i18n}}:</b>\n                            {{passwordRevisionDate | date:'medium'}}\n                        </div>\n                    </div>\n                </ng-container>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'save' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n                    {{'cancel' | i18n}}\n                </button>\n                <div class=\"ml-auto\" *ngIf=\"cipher\">\n                    <button *ngIf=\"!organization\" type=\"button\" (click)=\"toggleFavorite()\" class=\"btn btn-link\" title=\"{{(cipher.favorite ? 'unfavorite' : 'favorite') | i18n}}\">\n                        <i class=\"fa fa-lg\" [ngClass]=\"{'fa-star': cipher.favorite, 'fa-star-o': !cipher.favorite}\"></i>\n                    </button>\n                    <button #deleteBtn type=\"button\" (click)=\"delete()\" class=\"btn btn-outline-danger\" title=\"{{'delete' | i18n}}\" *ngIf=\"editMode\"\n                        [disabled]=\"deleteBtn.loading\" [appApiAction]=\"deletePromise\">\n                        <i class=\"fa fa-trash-o fa-lg fa-fw\" [hidden]=\"deleteBtn.loading\"></i>\n                        <i class=\"fa fa-spinner fa-spin fa-lg fa-fw\" [hidden]=\"!deleteBtn.loading\" title=\"{{'loading' | i18n}}\"></i>\n                    </button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/vault/add-edit.component.ts":
/*!*********************************************!*\
  !*** ./src/app/vault/add-edit.component.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var cipherType_1 = __webpack_require__(/*! jslib/enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var audit_service_1 = __webpack_require__(/*! jslib/abstractions/audit.service */ "./jslib/src/abstractions/audit.service.ts");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var folder_service_1 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var passwordGeneration_service_1 = __webpack_require__(/*! jslib/abstractions/passwordGeneration.service */ "./jslib/src/abstractions/passwordGeneration.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var state_service_1 = __webpack_require__(/*! jslib/abstractions/state.service */ "./jslib/src/abstractions/state.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var totp_service_1 = __webpack_require__(/*! jslib/abstractions/totp.service */ "./jslib/src/abstractions/totp.service.ts");
var add_edit_component_1 = __webpack_require__(/*! jslib/angular/components/add-edit.component */ "./jslib/src/angular/components/add-edit.component.ts");
var AddEditComponent = /** @class */ (function (_super) {
    __extends(AddEditComponent, _super);
    function AddEditComponent(cipherService, folderService, i18nService, platformUtilsService, analytics, toasterService, auditService, stateService, tokenService, totpService, passwordGenerationService, messagingService) {
        var _this = _super.call(this, cipherService, folderService, i18nService, platformUtilsService, analytics, toasterService, auditService, stateService) || this;
        _this.tokenService = tokenService;
        _this.totpService = totpService;
        _this.passwordGenerationService = passwordGenerationService;
        _this.messagingService = messagingService;
        return _this;
    }
    AddEditComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.load.call(this)];
                    case 1:
                        _a.sent();
                        this.passwordRevisionDate = this.cipher.passwordRevisionDisplayDate;
                        this.cleanUp();
                        this.isPremium = this.tokenService.getPremium();
                        if (!(this.cipher.type === cipherType_1.CipherType.Login && this.cipher.login.totp &&
                            (this.cipher.organizationUseTotp || this.isPremium))) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.totpUpdateCode()];
                    case 2:
                        _a.sent();
                        return [4 /*yield*/, this.totpTick()];
                    case 3:
                        _a.sent();
                        this.totpInterval = window.setInterval(function () { return __awaiter(_this, void 0, void 0, function () {
                            return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, this.totpTick()];
                                    case 1:
                                        _a.sent();
                                        return [2 /*return*/];
                                }
                            });
                        }); }, 1000);
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    AddEditComponent.prototype.toggleFavorite = function () {
        this.cipher.favorite = !this.cipher.favorite;
    };
    AddEditComponent.prototype.launch = function (uri) {
        if (!uri.canLaunch) {
            return;
        }
        this.analytics.eventTrack.next({ action: 'Launched Login URI' });
        this.platformUtilsService.launchUri(uri.uri);
    };
    AddEditComponent.prototype.copy = function (value, typeI18nKey, aType) {
        if (value == null) {
            return;
        }
        this.analytics.eventTrack.next({ action: 'Copied ' + aType });
        this.platformUtilsService.copyToClipboard(value, { doc: window.document });
        this.toasterService.popAsync('info', null, this.i18nService.t('valueCopied', this.i18nService.t(typeI18nKey)));
    };
    AddEditComponent.prototype.generatePassword = function () {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, options, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, _super.prototype.generatePassword.call(this)];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.passwordGenerationService.getOptions()];
                    case 2:
                        options = _b.sent();
                        _a = this.cipher.login;
                        return [4 /*yield*/, this.passwordGenerationService.generatePassword(options)];
                    case 3:
                        _a.password = _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, confirmed];
                }
            });
        });
    };
    AddEditComponent.prototype.premiumRequired = function () {
        return __awaiter(this, void 0, void 0, function () {
            var premium;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.tokenService.getPremium()];
                    case 1:
                        premium = _a.sent();
                        if (!premium) {
                            this.messagingService.send('premiumRequired');
                            return [2 /*return*/];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    AddEditComponent.prototype.upgradeOrganization = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.messagingService.send('upgradeOrganization', { organizationId: this.cipher.organizationId });
                return [2 /*return*/];
            });
        });
    };
    AddEditComponent.prototype.cleanUp = function () {
        if (this.totpInterval) {
            window.clearInterval(this.totpInterval);
        }
    };
    AddEditComponent.prototype.totpUpdateCode = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.cipher == null || this.cipher.type !== cipherType_1.CipherType.Login || this.cipher.login.totp == null) {
                            if (this.totpInterval) {
                                window.clearInterval(this.totpInterval);
                            }
                            return [2 /*return*/];
                        }
                        _a = this;
                        return [4 /*yield*/, this.totpService.getCode(this.cipher.login.totp)];
                    case 1:
                        _a.totpCode = _b.sent();
                        if (this.totpCode != null) {
                            this.totpCodeFormatted = this.totpCode.substring(0, 3) + ' ' + this.totpCode.substring(3);
                        }
                        else {
                            this.totpCodeFormatted = null;
                            if (this.totpInterval) {
                                window.clearInterval(this.totpInterval);
                            }
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    AddEditComponent.prototype.totpTick = function () {
        return __awaiter(this, void 0, void 0, function () {
            var epoch, mod;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        epoch = Math.round(new Date().getTime() / 1000.0);
                        mod = epoch % 30;
                        this.totpSec = 30 - mod;
                        this.totpDash = +(Math.round(((2.62 * mod) + 'e+2')) + 'e-2');
                        this.totpLow = this.totpSec <= 7;
                        if (!(mod === 0)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.totpUpdateCode()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    AddEditComponent = __decorate([
        core_1.Component({
            selector: 'app-vault-add-edit',
            template: __webpack_require__(/*! ./add-edit.component.html */ "./src/app/vault/add-edit.component.html"),
        }),
        __metadata("design:paramtypes", [cipher_service_1.CipherService, folder_service_1.FolderService,
            i18n_service_1.I18nService, platformUtils_service_1.PlatformUtilsService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            audit_service_1.AuditService, state_service_1.StateService,
            token_service_1.TokenService, totp_service_1.TotpService,
            passwordGeneration_service_1.PasswordGenerationService, messaging_service_1.MessagingService])
    ], AddEditComponent);
    return AddEditComponent;
}(add_edit_component_1.AddEditComponent));
exports.AddEditComponent = AddEditComponent;


/***/ }),

/***/ "./src/app/vault/attachments.component.html":
/*!**************************************************!*\
  !*** ./src/app/vault/attachments.component.html ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'attachments' | i18n}}\n                    <small *ngIf=\"cipher\">{{cipher.name}}</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <table class=\"table table-hover table-list\" *ngIf=\"cipher && cipher.hasAttachments\">\n                    <tbody>\n                        <tr *ngFor=\"let a of cipher.attachments\">\n                            <td class=\"table-list-icon\">\n                                <i class=\"fa fa-fw fa-lg fa-file-o\" *ngIf=\"!a.downloading\"></i>\n                                <i class=\"fa fa-spinner fa-lg fa-fw fa-spin\" *ngIf=\"a.downloading\"></i>\n                            </td>\n                            <td>\n                                <a href=\"#\" appStopClick (click)=\"download(a)\">{{a.fileName}}</a>\n                                <br>\n                                <small>{{a.sizeName}}</small>\n                            </td>\n                            <td class=\"table-list-options\">\n                                <button class=\"btn btn-outline-danger\" type=\"button\" appStopClick title=\"{{'delete' | i18n}}\" (click)=\"delete(a)\" #deleteBtn\n                                    [appApiAction]=\"deletePromises[a.id]\" [disabled]=\"deleteBtn.loading\">\n                                    <i class=\"fa fa-trash-o fa-lg fa-fw\" [hidden]=\"deleteBtn.loading\"></i>\n                                    <i class=\"fa fa-spinner fa-spin fa-lg fa-fw\" [hidden]=\"!deleteBtn.loading\" title=\"{{'loading' | i18n}}\"></i>\n                                </button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n                <h3>{{'newAttachment' | i18n}}</h3>\n                <label for=\"file\" class=\"sr-only\">{{'file' | i18n}}</label>\n                <input type=\"file\" id=\"file\" class=\"form-control-file\" name=\"file\" required>\n                <small class=\"form-text text-muted\">{{'maxFileSize' | i18n}}</small>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'save' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\" title=\"{{'close' | i18n}}\">{{'close' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/vault/attachments.component.ts":
/*!************************************************!*\
  !*** ./src/app/vault/attachments.component.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var attachments_component_1 = __webpack_require__(/*! jslib/angular/components/attachments.component */ "./jslib/src/angular/components/attachments.component.ts");
var AttachmentsComponent = /** @class */ (function (_super) {
    __extends(AttachmentsComponent, _super);
    function AttachmentsComponent(cipherService, analytics, toasterService, i18nService, cryptoService, tokenService, platformUtilsService) {
        return _super.call(this, cipherService, analytics, toasterService, i18nService, cryptoService, tokenService, platformUtilsService, window) || this;
    }
    AttachmentsComponent = __decorate([
        core_1.Component({
            selector: 'app-vault-attachments',
            template: __webpack_require__(/*! ./attachments.component.html */ "./src/app/vault/attachments.component.html"),
        }),
        __metadata("design:paramtypes", [cipher_service_1.CipherService, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            crypto_service_1.CryptoService, token_service_1.TokenService,
            platformUtils_service_1.PlatformUtilsService])
    ], AttachmentsComponent);
    return AttachmentsComponent;
}(attachments_component_1.AttachmentsComponent));
exports.AttachmentsComponent = AttachmentsComponent;


/***/ }),

/***/ "./src/app/vault/bulk-delete.component.html":
/*!**************************************************!*\
  !*** ./src/app/vault/bulk-delete.component.html ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog modal-sm\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'deleteSelected' | i18n}}\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                {{'deleteSelectedItemsDesc' | i18n: cipherIds.length}}\n            </div>\n            <div class=\"modal-footer\">\n                <button appAutoFocus type=\"submit\" class=\"btn btn-danger btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'delete' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\" title=\"{{'cancel' | i18n}}\">{{'cancel' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/vault/bulk-delete.component.ts":
/*!************************************************!*\
  !*** ./src/app/vault/bulk-delete.component.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var BulkDeleteComponent = /** @class */ (function () {
    function BulkDeleteComponent(analytics, cipherService, toasterService, i18nService) {
        this.analytics = analytics;
        this.cipherService = cipherService;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.cipherIds = [];
        this.onDeleted = new core_1.EventEmitter();
    }
    BulkDeleteComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.formPromise = this.cipherService.deleteManyWithServer(this.cipherIds);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _a.sent();
                        this.onDeleted.emit();
                        this.analytics.eventTrack.next({ action: 'Bulk Deleted Items' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('deletedItems'));
                        return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Array)
    ], BulkDeleteComponent.prototype, "cipherIds", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], BulkDeleteComponent.prototype, "onDeleted", void 0);
    BulkDeleteComponent = __decorate([
        core_1.Component({
            selector: 'app-vault-bulk-delete',
            template: __webpack_require__(/*! ./bulk-delete.component.html */ "./src/app/vault/bulk-delete.component.html"),
        }),
        __metadata("design:paramtypes", [angulartics2_1.Angulartics2, cipher_service_1.CipherService,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService])
    ], BulkDeleteComponent);
    return BulkDeleteComponent;
}());
exports.BulkDeleteComponent = BulkDeleteComponent;


/***/ }),

/***/ "./src/app/vault/bulk-move.component.html":
/*!************************************************!*\
  !*** ./src/app/vault/bulk-move.component.html ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog modal-sm\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'moveSelected' | i18n}}\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <p>{{'moveSelectedItemsDesc' | i18n: cipherIds.length}}</p>\n                <div class=\"form-group\">\n                    <label for=\"folder\">{{'folder' | i18n}}</label>\n                    <select id=\"folder\" name=\"FolderId\" [(ngModel)]=\"folderId\" class=\"form-control\">\n                        <option *ngFor=\"let f of folders\" [ngValue]=\"f.id\">{{f.name}}</option>\n                    </select>\n                </div>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'save' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\" title=\"{{'cancel' | i18n}}\">{{'cancel' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/vault/bulk-move.component.ts":
/*!**********************************************!*\
  !*** ./src/app/vault/bulk-move.component.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var folder_service_1 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var BulkMoveComponent = /** @class */ (function () {
    function BulkMoveComponent(analytics, cipherService, toasterService, i18nService, folderService) {
        this.analytics = analytics;
        this.cipherService = cipherService;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.folderService = folderService;
        this.cipherIds = [];
        this.onMoved = new core_1.EventEmitter();
        this.folderId = null;
        this.folders = [];
    }
    BulkMoveComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.folderService.getAllDecrypted()];
                    case 1:
                        _a.folders = _b.sent();
                        this.folderId = this.folders[0].id;
                        return [2 /*return*/];
                }
            });
        });
    };
    BulkMoveComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.formPromise = this.cipherService.moveManyWithServer(this.cipherIds, this.folderId);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _a.sent();
                        this.onMoved.emit();
                        this.analytics.eventTrack.next({ action: 'Bulk Moved Items' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('movedItems'));
                        return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Array)
    ], BulkMoveComponent.prototype, "cipherIds", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], BulkMoveComponent.prototype, "onMoved", void 0);
    BulkMoveComponent = __decorate([
        core_1.Component({
            selector: 'app-vault-bulk-move',
            template: __webpack_require__(/*! ./bulk-move.component.html */ "./src/app/vault/bulk-move.component.html"),
        }),
        __metadata("design:paramtypes", [angulartics2_1.Angulartics2, cipher_service_1.CipherService,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            folder_service_1.FolderService])
    ], BulkMoveComponent);
    return BulkMoveComponent;
}());
exports.BulkMoveComponent = BulkMoveComponent;


/***/ }),

/***/ "./src/app/vault/bulk-share.component.html":
/*!*************************************************!*\
  !*** ./src/app/vault/bulk-share.component.html ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'shareSelected' | i18n}}\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <p>{{'shareManyDesc' | i18n}}</p>\n                <p>{{'shareSelectedItemsDesc' | i18n: this.ciphers.length : shareableCiphers.length : nonShareableCount}}</p>\n                <div class=\"form-group\">\n                    <label for=\"organization\">{{'organization' | i18n}}</label>\n                    <select id=\"organization\" name=\"OrganizationId\" [(ngModel)]=\"organizationId\" class=\"form-control\" (change)=\"filterCollections()\">\n                        <option *ngFor=\"let o of organizations\" [ngValue]=\"o.id\">{{o.name}}</option>\n                    </select>\n                </div>\n                <div class=\"d-flex\">\n                    <h3>{{'collections' | i18n}}</h3>\n                    <div class=\"ml-auto d-flex\" *ngIf=\"collections && collections.length\">\n                        <button type=\"button\" (click)=\"selectAll(true)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'selectAll' | i18n}}\n                        </button>\n                        <button type=\"button\" (click)=\"selectAll(false)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'unselectAll' | i18n}}\n                        </button>\n                    </div>\n                </div>\n                <div *ngIf=\"!collections || !collections.length\">\n                    {{'noCollectionsInList' | i18n}}\n                </div>\n                <table class=\"table table-hover table-list mb-0\" *ngIf=\"collections && collections.length\">\n                    <tbody>\n                        <tr *ngFor=\"let c of collections; let i = index\" (click)=\"check(c)\">\n                            <td class=\"table-list-checkbox\">\n                                <input type=\"checkbox\" [(ngModel)]=\"c.checked\" name=\"Collection[{{i}}].Checked\">\n                            </td>\n                            <td>\n                                <span appStopProp>{{c.name}}</span>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'save' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\" title=\"{{'cancel' | i18n}}\">{{'cancel' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/vault/bulk-share.component.ts":
/*!***********************************************!*\
  !*** ./src/app/vault/bulk-share.component.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var BulkShareComponent = /** @class */ (function () {
    function BulkShareComponent(analytics, cipherService, toasterService, i18nService, collectionService, userService) {
        this.analytics = analytics;
        this.cipherService = cipherService;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.collectionService = collectionService;
        this.userService = userService;
        this.ciphers = [];
        this.onShared = new core_1.EventEmitter();
        this.nonShareableCount = 0;
        this.collections = [];
        this.organizations = [];
        this.shareableCiphers = [];
        this.writeableCollections = [];
    }
    BulkShareComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var allCollections, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.shareableCiphers = this.ciphers.filter(function (c) { return !c.hasAttachments && c.organizationId == null; });
                        this.nonShareableCount = this.ciphers.length - this.shareableCiphers.length;
                        return [4 /*yield*/, this.collectionService.getAllDecrypted()];
                    case 1:
                        allCollections = _b.sent();
                        this.writeableCollections = allCollections.filter(function (c) { return !c.readOnly; });
                        _a = this;
                        return [4 /*yield*/, this.userService.getAllOrganizations()];
                    case 2:
                        _a.organizations = _b.sent();
                        if (this.organizationId == null && this.organizations.length > 0) {
                            this.organizationId = this.organizations[0].id;
                        }
                        this.filterCollections();
                        return [2 /*return*/];
                }
            });
        });
    };
    BulkShareComponent.prototype.ngOnDestroy = function () {
        this.selectAll(false);
    };
    BulkShareComponent.prototype.filterCollections = function () {
        var _this = this;
        this.selectAll(false);
        if (this.organizationId == null || this.writeableCollections.length === 0) {
            this.collections = [];
        }
        else {
            this.collections = this.writeableCollections.filter(function (c) { return c.organizationId === _this.organizationId; });
        }
    };
    BulkShareComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var checkedCollectionIds;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        checkedCollectionIds = this.collections.filter(function (c) { return c.checked; }).map(function (c) { return c.id; });
                        this.formPromise = this.cipherService.shareManyWithServer(this.shareableCiphers, this.organizationId, checkedCollectionIds);
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _a.sent();
                        this.onShared.emit();
                        this.analytics.eventTrack.next({ action: 'Bulk Shared Items' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('sharedItems'));
                        return [2 /*return*/];
                }
            });
        });
    };
    BulkShareComponent.prototype.check = function (c, select) {
        c.checked = select == null ? !c.checked : select;
    };
    BulkShareComponent.prototype.selectAll = function (select) {
        var _this = this;
        var collections = select ? this.collections : this.writeableCollections;
        collections.forEach(function (c) { return _this.check(c, select); });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Array)
    ], BulkShareComponent.prototype, "ciphers", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], BulkShareComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], BulkShareComponent.prototype, "onShared", void 0);
    BulkShareComponent = __decorate([
        core_1.Component({
            selector: 'app-vault-bulk-share',
            template: __webpack_require__(/*! ./bulk-share.component.html */ "./src/app/vault/bulk-share.component.html"),
        }),
        __metadata("design:paramtypes", [angulartics2_1.Angulartics2, cipher_service_1.CipherService,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            collection_service_1.CollectionService, user_service_1.UserService])
    ], BulkShareComponent);
    return BulkShareComponent;
}());
exports.BulkShareComponent = BulkShareComponent;


/***/ }),

/***/ "./src/app/vault/ciphers.component.html":
/*!**********************************************!*\
  !*** ./src/app/vault/ciphers.component.html ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ng-container *ngIf=\"(ciphers | searchCiphers: searchText) as searchedCiphers\">\n    <table class=\"table table-hover table-list table-ciphers\" *ngIf=\"searchedCiphers.length > 0\">\n        <tbody>\n            <tr *ngFor=\"let c of searchedCiphers\">\n                <td (click)=\"checkCipher(c)\" class=\"table-list-checkbox\" *ngIf=\"!organization\">\n                    <input type=\"checkbox\" [(ngModel)]=\"c.checked\">\n                </td>\n                <td (click)=\"checkCipher(c)\" class=\"table-list-icon\">\n                    <app-vault-icon [cipher]=\"c\"></app-vault-icon>\n                </td>\n                <td (click)=\"checkCipher(c)\" class=\"reduced-lh\">\n                    <a href=\"#\" appStopClick appStopProp (click)=\"selectCipher(c)\" title=\"{{'editItem' | i18n}}\">{{c.name}}</a>\n                    <i class=\"fa fa-share-alt\" appStopProp *ngIf=\"!organization && c.organizationId\" title=\"{{'shared' | i18n}}\"></i>\n                    <i class=\"fa fa-paperclip\" appStopProp *ngIf=\"c.hasAttachments\" title=\"{{'attachments' | i18n}}\"></i>\n                    <br>\n                    <small appStopProp>{{c.subTitle}}</small>\n                </td>\n                <td class=\"table-list-options\">\n                    <div class=\"dropdown\" appListDropdown>\n                        <button class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n                            aria-expanded=\"false\">\n                            <i class=\"fa fa-cog fa-lg\"></i>\n                        </button>\n                        <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownMenuButton\">\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick *ngIf=\"c.type === cipherType.Login\" (click)=\"copy(c.login.password, 'password', 'password')\">\n                                <i class=\"fa fa-fw fa-clipboard\"></i>\n                                {{'copyPassword' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"attachments(c)\">\n                                <i class=\"fa fa-fw fa-paperclip\"></i>\n                                {{'attachments' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick *ngIf=\"!organization && !c.organizationId\" (click)=\"share(c)\">\n                                <i class=\"fa fa-fw fa-share-alt\"></i>\n                                {{'share' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick *ngIf=\"c.organizationId\" (click)=\"collections(c)\">\n                                <i class=\"fa fa-fw fa-cubes\"></i>\n                                {{'collections' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick *ngIf=\"c.organizationId && accessEvents\" (click)=\"events(c)\">\n                                <i class=\"fa fa-fw fa-file-text-o\"></i>\n                                {{'eventLogs' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item text-danger\" href=\"#\" appStopClick (click)=\"delete(c)\">\n                                <i class=\"fa fa-fw fa-trash-o\"></i>\n                                {{'delete' | i18n}}\n                            </a>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    <div class=\"no-items\" *ngIf=\"searchedCiphers.length === 0\">\n        <i class=\"fa fa-spinner fa-spin text-muted\" *ngIf=\"!loaded\" title=\"{{'loading' | i18n}}\"></i>\n        <ng-container *ngIf=\"loaded\">\n            <p>{{'noItemsInList' | i18n}}</p>\n            <button (click)=\"addCipher()\" class=\"btn btn-outline-primary\" *ngIf=\"showAddNew\">\n                <i class=\"fa fa-plus fa-fw\"></i>{{'addItem' | i18n}}</button>\n        </ng-container>\n    </div>\n</ng-container>\n";

/***/ }),

/***/ "./src/app/vault/ciphers.component.ts":
/*!********************************************!*\
  !*** ./src/app/vault/ciphers.component.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var ciphers_component_1 = __webpack_require__(/*! jslib/angular/components/ciphers.component */ "./jslib/src/angular/components/ciphers.component.ts");
var cipherType_1 = __webpack_require__(/*! jslib/enums/cipherType */ "./jslib/src/enums/cipherType.ts");
var search_ciphers_pipe_1 = __webpack_require__(/*! jslib/angular/pipes/search-ciphers.pipe */ "./jslib/src/angular/pipes/search-ciphers.pipe.ts");
var MaxCheckedCount = 500;
var CiphersComponent = /** @class */ (function (_super) {
    __extends(CiphersComponent, _super);
    function CiphersComponent(cipherService, analytics, toasterService, i18nService, platformUtilsService) {
        var _this = _super.call(this, cipherService) || this;
        _this.analytics = analytics;
        _this.toasterService = toasterService;
        _this.i18nService = i18nService;
        _this.platformUtilsService = platformUtilsService;
        _this.showAddNew = true;
        _this.onAttachmentsClicked = new core_1.EventEmitter();
        _this.onShareClicked = new core_1.EventEmitter();
        _this.onCollectionsClicked = new core_1.EventEmitter();
        _this.cipherType = cipherType_1.CipherType;
        _this.searchPipe = new search_ciphers_pipe_1.SearchCiphersPipe(platformUtilsService);
        return _this;
    }
    CiphersComponent.prototype.ngOnDestroy = function () {
        this.selectAll(false);
    };
    CiphersComponent.prototype.checkCipher = function (c, select) {
        c.checked = select == null ? !c.checked : select;
    };
    CiphersComponent.prototype.selectAll = function (select) {
        if (select) {
            this.selectAll(false);
        }
        var filteredCiphers = this.ciphers;
        if (select) {
            filteredCiphers = this.searchPipe.transform(this.ciphers, this.searchText);
        }
        var selectCount = select && filteredCiphers.length > MaxCheckedCount ?
            MaxCheckedCount : filteredCiphers.length;
        for (var i = 0; i < selectCount; i++) {
            this.checkCipher(filteredCiphers[i], select);
        }
    };
    CiphersComponent.prototype.getSelected = function () {
        if (this.ciphers == null) {
            return [];
        }
        return this.ciphers.filter(function (c) { return !!c.checked; });
    };
    CiphersComponent.prototype.getSelectedIds = function () {
        return this.getSelected().map(function (c) { return c.id; });
    };
    CiphersComponent.prototype.attachments = function (c) {
        this.onAttachmentsClicked.emit(c);
    };
    CiphersComponent.prototype.share = function (c) {
        this.onShareClicked.emit(c);
    };
    CiphersComponent.prototype.collections = function (c) {
        this.onCollectionsClicked.emit(c);
    };
    CiphersComponent.prototype.delete = function (c) {
        return __awaiter(this, void 0, void 0, function () {
            var confirmed, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (this.actionPromise != null) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.platformUtilsService.showDialog(this.i18nService.t('deleteItemConfirmation'), this.i18nService.t('deleteItem'), this.i18nService.t('yes'), this.i18nService.t('no'), 'warning')];
                    case 1:
                        confirmed = _b.sent();
                        if (!confirmed) {
                            return [2 /*return*/, false];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 4, , 5]);
                        this.actionPromise = this.deleteCipher(c.id);
                        return [4 /*yield*/, this.actionPromise];
                    case 3:
                        _b.sent();
                        this.analytics.eventTrack.next({ action: 'Deleted Cipher' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('deletedItem'));
                        this.refresh();
                        return [3 /*break*/, 5];
                    case 4:
                        _a = _b.sent();
                        return [3 /*break*/, 5];
                    case 5:
                        this.actionPromise = null;
                        return [2 /*return*/];
                }
            });
        });
    };
    CiphersComponent.prototype.copy = function (value, typeI18nKey, aType) {
        if (value == null) {
            return;
        }
        this.analytics.eventTrack.next({ action: 'Copied ' + aType.toLowerCase() + ' from listing.' });
        this.platformUtilsService.copyToClipboard(value, { doc: window.document });
        this.toasterService.popAsync('info', null, this.i18nService.t('valueCopied', this.i18nService.t(typeI18nKey)));
    };
    CiphersComponent.prototype.deleteCipher = function (id) {
        return this.cipherService.deleteWithServer(id);
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], CiphersComponent.prototype, "showAddNew", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CiphersComponent.prototype, "onAttachmentsClicked", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CiphersComponent.prototype, "onShareClicked", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CiphersComponent.prototype, "onCollectionsClicked", void 0);
    CiphersComponent = __decorate([
        core_1.Component({
            selector: 'app-vault-ciphers',
            template: __webpack_require__(/*! ./ciphers.component.html */ "./src/app/vault/ciphers.component.html"),
        }),
        __metadata("design:paramtypes", [cipher_service_1.CipherService, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            platformUtils_service_1.PlatformUtilsService])
    ], CiphersComponent);
    return CiphersComponent;
}(ciphers_component_1.CiphersComponent));
exports.CiphersComponent = CiphersComponent;


/***/ }),

/***/ "./src/app/vault/collections.component.html":
/*!**************************************************!*\
  !*** ./src/app/vault/collections.component.html ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'collections' | i18n}}\n                    <small *ngIf=\"cipher\">{{cipher.name}}</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <p>{{'collectionsDesc' | i18n}}</p>\n                <div class=\"d-flex\">\n                    <h3>{{'collections' | i18n}}</h3>\n                    <div class=\"ml-auto d-flex\" *ngIf=\"collections && collections.length\">\n                        <button type=\"button\" (click)=\"selectAll(true)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'selectAll' | i18n}}\n                        </button>\n                        <button type=\"button\" (click)=\"selectAll(false)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'unselectAll' | i18n}}\n                        </button>\n                    </div>\n                </div>\n                <div *ngIf=\"!collections || !collections.length\">\n                    {{'noCollectionsInList' | i18n}}\n                </div>\n                <table class=\"table table-hover table-list mb-0\" *ngIf=\"collections && collections.length\">\n                    <tbody>\n                        <tr *ngFor=\"let c of collections; let i = index\" (click)=\"check(c)\">\n                            <td class=\"table-list-checkbox\">\n                                <input type=\"checkbox\" [(ngModel)]=\"c.checked\" name=\"Collection[{{i}}].Checked\">\n                            </td>\n                            <td>\n                                <span appStopProp>{{c.name}}</span>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary\" title=\"{{'save' | i18n}}\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-save fa-lg fa-fw\" [hidden]=\"form.loading\"></i>\n                    <i class=\"fa fa-spinner fa-spin fa-lg fa-fw\" [hidden]=\"!form.loading\" title=\"{{'loading' | i18n}}\"></i>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\" title=\"{{'cancel' | i18n}}\">{{'cancel' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/vault/collections.component.ts":
/*!************************************************!*\
  !*** ./src/app/vault/collections.component.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var CollectionsComponent = /** @class */ (function () {
    function CollectionsComponent(collectionService, analytics, toasterService, i18nService, cipherService) {
        this.collectionService = collectionService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.cipherService = cipherService;
        this.onSavedCollections = new core_1.EventEmitter();
        this.collections = [];
    }
    CollectionsComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, _b, _c;
            var _this = this;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.loadCipher()];
                    case 1:
                        _a.cipherDomain = _d.sent();
                        this.collectionIds = this.loadCipherCollections();
                        _b = this;
                        return [4 /*yield*/, this.cipherDomain.decrypt()];
                    case 2:
                        _b.cipher = _d.sent();
                        _c = this;
                        return [4 /*yield*/, this.loadCollections()];
                    case 3:
                        _c.collections = _d.sent();
                        this.selectAll(false);
                        if (this.collectionIds != null) {
                            this.collections.forEach(function (c) {
                                c.checked = _this.collectionIds.indexOf(c.id) > -1;
                            });
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    CollectionsComponent.prototype.ngOnDestroy = function () {
        this.selectAll(false);
    };
    CollectionsComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.cipherDomain.collectionIds = this.collections
                            .filter(function (c) { return !!c.checked; })
                            .map(function (c) { return c.id; });
                        this.formPromise = this.saveCollections();
                        return [4 /*yield*/, this.formPromise];
                    case 1:
                        _a.sent();
                        this.onSavedCollections.emit();
                        this.analytics.eventTrack.next({ action: 'Edited Cipher Collections' });
                        this.toasterService.popAsync('success', null, this.i18nService.t('editedItem'));
                        return [2 /*return*/];
                }
            });
        });
    };
    CollectionsComponent.prototype.check = function (c, select) {
        c.checked = select == null ? !c.checked : select;
    };
    CollectionsComponent.prototype.selectAll = function (select) {
        var _this = this;
        this.collections.forEach(function (c) { return _this.check(c, select); });
    };
    CollectionsComponent.prototype.loadCipher = function () {
        return this.cipherService.get(this.cipherId);
    };
    CollectionsComponent.prototype.loadCipherCollections = function () {
        return this.cipherDomain.collectionIds;
    };
    CollectionsComponent.prototype.loadCollections = function () {
        return __awaiter(this, void 0, void 0, function () {
            var allCollections;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.collectionService.getAllDecrypted()];
                    case 1:
                        allCollections = _a.sent();
                        return [2 /*return*/, allCollections.filter(function (c) { return !c.readOnly && c.organizationId === _this.cipher.organizationId; })];
                }
            });
        });
    };
    CollectionsComponent.prototype.saveCollections = function () {
        return this.cipherService.saveCollectionsWithServer(this.cipherDomain);
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], CollectionsComponent.prototype, "cipherId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], CollectionsComponent.prototype, "onSavedCollections", void 0);
    CollectionsComponent = __decorate([
        core_1.Component({
            selector: 'app-vault-collections',
            template: __webpack_require__(/*! ./collections.component.html */ "./src/app/vault/collections.component.html"),
        }),
        __metadata("design:paramtypes", [collection_service_1.CollectionService, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            cipher_service_1.CipherService])
    ], CollectionsComponent);
    return CollectionsComponent;
}());
exports.CollectionsComponent = CollectionsComponent;


/***/ }),

/***/ "./src/app/vault/folder-add-edit.component.html":
/*!******************************************************!*\
  !*** ./src/app/vault/folder-add-edit.component.html ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog modal-sm\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">{{title}}</h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <label for=\"name\">{{'name' | i18n}}</label>\n                <input id=\"name\" class=\"form-control\" type=\"text\" name=\"Name\" [(ngModel)]=\"folder.name\" required>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'save' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\" title=\"{{'cancel' | i18n}}\">{{'cancel' | i18n}}</button>\n                <div class=\"ml-auto\">\n                    <button #deleteBtn type=\"button\" (click)=\"delete()\" class=\"btn btn-outline-danger\" title=\"{{'delete' | i18n}}\" *ngIf=\"editMode\"\n                        [disabled]=\"deleteBtn.loading\" [appApiAction]=\"deletePromise\">\n                        <i class=\"fa fa-trash-o fa-lg fa-fw\" [hidden]=\"deleteBtn.loading\"></i>\n                        <i class=\"fa fa-spinner fa-spin fa-lg fa-fw\" [hidden]=\"!deleteBtn.loading\" title=\"{{'loading' | i18n}}\"></i>\n                    </button>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/vault/folder-add-edit.component.ts":
/*!****************************************************!*\
  !*** ./src/app/vault/folder-add-edit.component.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var folder_service_1 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var folder_add_edit_component_1 = __webpack_require__(/*! jslib/angular/components/folder-add-edit.component */ "./jslib/src/angular/components/folder-add-edit.component.ts");
var FolderAddEditComponent = /** @class */ (function (_super) {
    __extends(FolderAddEditComponent, _super);
    function FolderAddEditComponent(folderService, i18nService, analytics, toasterService, platformUtilsService) {
        return _super.call(this, folderService, i18nService, analytics, toasterService, platformUtilsService) || this;
    }
    FolderAddEditComponent = __decorate([
        core_1.Component({
            selector: 'app-folder-add-edit',
            template: __webpack_require__(/*! ./folder-add-edit.component.html */ "./src/app/vault/folder-add-edit.component.html"),
        }),
        __metadata("design:paramtypes", [folder_service_1.FolderService, i18n_service_1.I18nService,
            angulartics2_1.Angulartics2, angular2_toaster_1.ToasterService,
            platformUtils_service_1.PlatformUtilsService])
    ], FolderAddEditComponent);
    return FolderAddEditComponent;
}(folder_add_edit_component_1.FolderAddEditComponent));
exports.FolderAddEditComponent = FolderAddEditComponent;


/***/ }),

/***/ "./src/app/vault/groupings.component.html":
/*!************************************************!*\
  !*** ./src/app/vault/groupings.component.html ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"card vault-filters\">\n    <div class=\"card-header\">\n        {{'filters' | i18n}}\n    </div>\n    <div class=\"card-body\">\n        <input type=\"search\" placeholder=\"{{searchPlaceholder || ('searchVault' | i18n)}}\" id=\"search\" class=\"form-control\" [(ngModel)]=\"searchText\"\n            (input)=\"searchTextChanged()\" appAutofocus>\n        <ul class=\"fa-ul card-ul\">\n            <li [ngClass]=\"{active: selectedAll}\">\n                <a href=\"#\" appStopClick (click)=\"selectAll()\">\n                    <i class=\"fa-li fa fa-fw fa-th\"></i>{{'allItems' | i18n}}\n                </a>\n            </li>\n            <li [ngClass]=\"{active: selectedFavorites}\" *ngIf=\"showFavorites\">\n                <a href=\"#\" appStopClick (click)=\"selectFavorites()\">\n                    <i class=\"fa-li fa fa-fw fa-star\"></i>{{'favorites' | i18n}}\n                </a>\n            </li>\n        </ul>\n        <h3>{{'types' | i18n}}</h3>\n        <ul class=\"fa-ul card-ul\">\n            <li [ngClass]=\"{active: selectedType === cipherType.Login}\">\n                <a href=\"#\" appStopClick (click)=\"selectType(cipherType.Login)\">\n                    <i class=\"fa-li fa fa-fw fa-globe\"></i>{{'typeLogin' | i18n}}\n                </a>\n            </li>\n            <li [ngClass]=\"{active: selectedType === cipherType.Card}\">\n                <a href=\"#\" appStopClick (click)=\"selectType(cipherType.Card)\">\n                    <i class=\"fa-li fa fa-fw fa-credit-card\"></i>{{'typeCard' | i18n}}\n                </a>\n            </li>\n            <li [ngClass]=\"{active: selectedType === cipherType.Identity}\">\n                <a href=\"#\" appStopClick (click)=\"selectType(cipherType.Identity)\">\n                    <i class=\"fa-li fa fa-fw fa-id-card-o\"></i>{{'typeIdentity' | i18n}}\n                </a>\n            </li>\n            <li [ngClass]=\"{active: selectedType === cipherType.SecureNote}\">\n                <a href=\"#\" appStopClick (click)=\"selectType(cipherType.SecureNote)\">\n                    <i class=\"fa-li fa fa-fw fa-sticky-note-o\"></i>{{'typeSecureNote' | i18n}}\n                </a>\n            </li>\n        </ul>\n        <p *ngIf=\"!loaded\" class=\"text-muted\">\n            <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n        </p>\n        <ng-container *ngIf=\"loaded\">\n            <ng-container *ngIf=\"showFolders\">\n                <h3 class=\"d-flex\">\n                    {{'folders' | i18n}}\n                    <a href=\"#\" class=\"text-muted ml-auto\" appStopClick (click)=\"addFolder()\" title=\"{{'addFolder' | i18n}}\">\n                        <i class=\"fa fa-plus fa-fw\"></i>\n                    </a>\n                </h3>\n                <ul class=\"fa-ul card-ul carets\">\n                    <li *ngFor=\"let f of folders\" class=\"d-flex\" [ngClass]=\"{active: selectedFolder && f.id === selectedFolderId}\">\n                        <a href=\"#\" appStopClick (click)=\"selectFolder(f)\">\n                            <i class=\"fa-li fa fa-caret-right\"></i> {{f.name}}</a>\n                        <a href=\"#\" class=\"text-muted ml-auto show-active\" appStopClick (click)=\"editFolder(f)\" title=\"{{'editFolder' | i18n}}\" *ngIf=\"f.id\">\n                            <i class=\"fa fa-pencil fa-fw\"></i>\n                        </a>\n                    </li>\n                </ul>\n            </ng-container>\n            <ng-container *ngIf=\"showCollections && collections && collections.length\">\n                <h3>{{'collections' | i18n}}</h3>\n                <ul class=\"fa-ul card-ul carets\">\n                    <li *ngFor=\"let c of collections\" [ngClass]=\"{active: c.id === selectedCollectionId}\">\n                        <a href=\"#\" appStopClick (click)=\"selectCollection(c)\">\n                            <i class=\"fa-li fa fa-caret-right\"></i> {{c.name}}</a>\n                    </li>\n                </ul>\n            </ng-container>\n        </ng-container>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/vault/groupings.component.ts":
/*!**********************************************!*\
  !*** ./src/app/vault/groupings.component.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var folder_service_1 = __webpack_require__(/*! jslib/abstractions/folder.service */ "./jslib/src/abstractions/folder.service.ts");
var groupings_component_1 = __webpack_require__(/*! jslib/angular/components/groupings.component */ "./jslib/src/angular/components/groupings.component.ts");
var GroupingsComponent = /** @class */ (function (_super) {
    __extends(GroupingsComponent, _super);
    function GroupingsComponent(collectionService, folderService) {
        var _this = _super.call(this, collectionService, folderService) || this;
        _this.onSearchTextChanged = new core_1.EventEmitter();
        _this.searchText = '';
        _this.searchPlaceholder = null;
        return _this;
    }
    GroupingsComponent.prototype.searchTextChanged = function () {
        this.onSearchTextChanged.emit(this.searchText);
    };
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], GroupingsComponent.prototype, "onSearchTextChanged", void 0);
    GroupingsComponent = __decorate([
        core_1.Component({
            selector: 'app-vault-groupings',
            template: __webpack_require__(/*! ./groupings.component.html */ "./src/app/vault/groupings.component.html"),
        }),
        __metadata("design:paramtypes", [collection_service_1.CollectionService, folder_service_1.FolderService])
    ], GroupingsComponent);
    return GroupingsComponent;
}(groupings_component_1.GroupingsComponent));
exports.GroupingsComponent = GroupingsComponent;


/***/ }),

/***/ "./src/app/vault/share.component.html":
/*!********************************************!*\
  !*** ./src/app/vault/share.component.html ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal fade\">\n    <div class=\"modal-dialog\">\n        <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n            <div class=\"modal-header\">\n                <h2 class=\"modal-title\">\n                    {{'share' | i18n}}\n                    <small *ngIf=\"cipher\">{{cipher.name}}</small>\n                </h2>\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" attr.aria-label=\"{{'close' | i18n}}\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <p>{{'shareDesc' | i18n}}</p>\n                <div class=\"form-group\">\n                    <label for=\"organization\">{{'organization' | i18n}}</label>\n                    <select id=\"organization\" name=\"OrganizationId\" [(ngModel)]=\"organizationId\" class=\"form-control\" (change)=\"filterCollections()\">\n                        <option *ngFor=\"let o of organizations\" [ngValue]=\"o.id\">{{o.name}}</option>\n                    </select>\n                </div>\n                <div class=\"d-flex\">\n                    <h3>{{'collections' | i18n}}</h3>\n                    <div class=\"ml-auto d-flex\" *ngIf=\"collections && collections.length\">\n                        <button type=\"button\" (click)=\"selectAll(true)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'selectAll' | i18n}}\n                        </button>\n                        <button type=\"button\" (click)=\"selectAll(false)\" class=\"btn btn-link btn-sm py-0\">\n                            {{'unselectAll' | i18n}}\n                        </button>\n                    </div>\n                </div>\n                <div *ngIf=\"!collections || !collections.length\">\n                    {{'noCollectionsInList' | i18n}}\n                </div>\n                <table class=\"table table-hover table-list mb-0\" *ngIf=\"collections && collections.length\">\n                    <tbody>\n                        <tr *ngFor=\"let c of collections; let i = index\" (click)=\"check(c)\">\n                            <td class=\"table-list-checkbox\">\n                                <input type=\"checkbox\" [(ngModel)]=\"c.checked\" name=\"Collection[{{i}}].Checked\">\n                            </td>\n                            <td>\n                                <span appStopProp>{{c.name}}</span>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class=\"modal-footer\">\n                <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n                    <i class=\"fa fa-spinner fa-spin\" title=\"{{'loading' | i18n}}\"></i>\n                    <span>{{'save' | i18n}}</span>\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\" title=\"{{'cancel' | i18n}}\">{{'cancel' | i18n}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n";

/***/ }),

/***/ "./src/app/vault/share.component.ts":
/*!******************************************!*\
  !*** ./src/app/vault/share.component.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var angulartics2_1 = __webpack_require__(/*! angulartics2 */ "./node_modules/angulartics2/bundles/core.umd.js");
var cipher_service_1 = __webpack_require__(/*! jslib/abstractions/cipher.service */ "./jslib/src/abstractions/cipher.service.ts");
var collection_service_1 = __webpack_require__(/*! jslib/abstractions/collection.service */ "./jslib/src/abstractions/collection.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var ShareComponent = /** @class */ (function () {
    function ShareComponent(collectionService, analytics, toasterService, i18nService, userService, cipherService) {
        this.collectionService = collectionService;
        this.analytics = analytics;
        this.toasterService = toasterService;
        this.i18nService = i18nService;
        this.userService = userService;
        this.cipherService = cipherService;
        this.onSharedCipher = new core_1.EventEmitter();
        this.collections = [];
        this.organizations = [];
        this.writeableCollections = [];
    }
    ShareComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var cipherDomain, _a, allCollections, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.cipherService.get(this.cipherId)];
                    case 1:
                        cipherDomain = _c.sent();
                        _a = this;
                        return [4 /*yield*/, cipherDomain.decrypt()];
                    case 2:
                        _a.cipher = _c.sent();
                        return [4 /*yield*/, this.collectionService.getAllDecrypted()];
                    case 3:
                        allCollections = _c.sent();
                        this.writeableCollections = allCollections.filter(function (c) { return !c.readOnly; });
                        _b = this;
                        return [4 /*yield*/, this.userService.getAllOrganizations()];
                    case 4:
                        _b.organizations = _c.sent();
                        if (this.organizationId == null && this.organizations.length > 0) {
                            this.organizationId = this.organizations[0].id;
                        }
                        this.filterCollections();
                        return [2 /*return*/];
                }
            });
        });
    };
    ShareComponent.prototype.ngOnDestroy = function () {
        this.selectAll(false);
    };
    ShareComponent.prototype.filterCollections = function () {
        var _this = this;
        this.selectAll(false);
        if (this.organizationId == null || this.writeableCollections.length === 0) {
            this.collections = [];
        }
        else {
            this.collections = this.writeableCollections.filter(function (c) { return c.organizationId === _this.organizationId; });
        }
    };
    ShareComponent.prototype.submit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var cipherDomain, cipherView, attachmentPromises, _i, _a, attachment, promise, checkedCollectionIds, _b;
            var _this = this;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.cipherService.get(this.cipherId)];
                    case 1:
                        cipherDomain = _c.sent();
                        return [4 /*yield*/, cipherDomain.decrypt()];
                    case 2:
                        cipherView = _c.sent();
                        attachmentPromises = [];
                        if (cipherView.attachments != null) {
                            for (_i = 0, _a = cipherView.attachments; _i < _a.length; _i++) {
                                attachment = _a[_i];
                                promise = this.cipherService.shareAttachmentWithServer(attachment, cipherView.id, this.organizationId);
                                attachmentPromises.push(promise);
                            }
                        }
                        checkedCollectionIds = this.collections.filter(function (c) { return c.checked; }).map(function (c) { return c.id; });
                        _c.label = 3;
                    case 3:
                        _c.trys.push([3, 5, , 6]);
                        this.formPromise = Promise.all(attachmentPromises).then(function () { return __awaiter(_this, void 0, void 0, function () {
                            return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, this.cipherService.shareWithServer(cipherView, this.organizationId, checkedCollectionIds)];
                                    case 1:
                                        _a.sent();
                                        this.onSharedCipher.emit();
                                        this.analytics.eventTrack.next({ action: 'Shared Cipher' });
                                        this.toasterService.popAsync('success', null, this.i18nService.t('sharedItem'));
                                        return [2 /*return*/];
                                }
                            });
                        }); });
                        return [4 /*yield*/, this.formPromise];
                    case 4:
                        _c.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        _b = _c.sent();
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    ShareComponent.prototype.check = function (c, select) {
        c.checked = select == null ? !c.checked : select;
    };
    ShareComponent.prototype.selectAll = function (select) {
        var _this = this;
        var collections = select ? this.collections : this.writeableCollections;
        collections.forEach(function (c) { return _this.check(c, select); });
    };
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], ShareComponent.prototype, "cipherId", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", String)
    ], ShareComponent.prototype, "organizationId", void 0);
    __decorate([
        core_1.Output(),
        __metadata("design:type", Object)
    ], ShareComponent.prototype, "onSharedCipher", void 0);
    ShareComponent = __decorate([
        core_1.Component({
            selector: 'app-vault-share',
            template: __webpack_require__(/*! ./share.component.html */ "./src/app/vault/share.component.html"),
        }),
        __metadata("design:paramtypes", [collection_service_1.CollectionService, angulartics2_1.Angulartics2,
            angular2_toaster_1.ToasterService, i18n_service_1.I18nService,
            user_service_1.UserService, cipher_service_1.CipherService])
    ], ShareComponent);
    return ShareComponent;
}());
exports.ShareComponent = ShareComponent;


/***/ }),

/***/ "./src/app/vault/vault.component.html":
/*!********************************************!*\
  !*** ./src/app/vault/vault.component.html ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"container page-content\">\n    <div class=\"row\">\n        <div class=\"col-3\">\n            <app-vault-groupings (onAllClicked)=\"clearGroupingFilters()\" (onFavoritesClicked)=\"filterFavorites()\" (onCipherTypeClicked)=\"filterCipherType($event)\"\n                (onFolderClicked)=\"filterFolder($event.id)\" (onAddFolder)=\"addFolder()\" (onEditFolder)=\"editFolder($event.id)\"\n                (onCollectionClicked)=\"filterCollection($event.id)\" (onSearchTextChanged)=\"filterSearchText($event)\">\n            </app-vault-groupings>\n        </div>\n        <div class=\"col-6\">\n            <div class=\"page-header d-flex\">\n                <h1>\n                    {{'myVault' | i18n}}\n                    <small #actionSpinner [appApiAction]=\"ciphersComponent.actionPromise\">\n                        <i *ngIf=\"actionSpinner.loading\" class=\"fa fa-spinner fa-spin text-muted\" title=\"{{'loading' | i18n}}\"></i>\n                    </small>\n                </h1>\n                <div class=\"ml-auto d-flex\">\n                    <div class=\"dropdown mr-2\" appListDropdown>\n                        <button class=\"btn btn-sm btn-outline-secondary dropdown-toggle\" type=\"button\" id=\"bulkActionsButton\" data-toggle=\"dropdown\"\n                            aria-haspopup=\"true\" aria-expanded=\"false\">\n                            <i class=\"fa fa-cog\"></i>\n                        </button>\n                        <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"bulkActionsButton\">\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"bulkMove()\">\n                                <i class=\"fa fa-fw fa-share\"></i>\n                                {{'moveSelected' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"bulkShare()\">\n                                <i class=\"fa fa-fw fa-share-alt\"></i>\n                                {{'shareSelected' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item text-danger\" href=\"#\" (click)=\"bulkDelete()\">\n                                <i class=\"fa fa-fw fa-trash-o\"></i>\n                                {{'deleteSelected' | i18n}}\n                            </a>\n                            <div class=\"dropdown-divider\"></div>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"selectAll(true)\">\n                                <i class=\"fa fa-fw fa-check-square-o\"></i>\n                                {{'selectAll' | i18n}}\n                            </a>\n                            <a class=\"dropdown-item\" href=\"#\" appStopClick (click)=\"selectAll(false)\">\n                                <i class=\"fa fa-fw fa-minus-square-o\"></i>\n                                {{'unselectAll' | i18n}}\n                            </a>\n                        </div>\n                    </div>\n                    <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" (click)=\"addCipher()\">\n                        <i class=\"fa fa-plus fa-fw\"></i>{{'addItem' | i18n}}\n                    </button>\n                </div>\n            </div>\n            <app-vault-ciphers (onCipherClicked)=\"editCipher($event)\" (onAttachmentsClicked)=\"editCipherAttachments($event)\" (onAddCipher)=\"addCipher()\"\n                (onShareClicked)=\"shareCipher($event)\" (onCollectionsClicked)=\"editCipherCollections($event)\">\n            </app-vault-ciphers>\n        </div>\n        <div class=\"col-3\">\n            <div class=\"card border-warning mb-4\" *ngIf=\"showUpdateKey\">\n                <div class=\"card-header bg-warning text-white\">\n                    <i class=\"fa fa-warning fa-fw\"></i> {{'updateKeyTitle' | i18n}}\n                </div>\n                <div class=\"card-body\">\n                    <p>{{'updateEncryptionKeyShortDesc' | i18n}}</p>\n                    <button class=\"btn btn-block btn-outline-secondary\" type=\"button\" (click)=\"updateKey()\">\n                        {{'updateEncryptionKey' | i18n}}\n                    </button>\n                </div>\n            </div>\n            <app-verify-email *ngIf=\"showVerifyEmail\" class=\"d-block mb-4\"></app-verify-email>\n            <div class=\"card border-warning mb-4\" *ngIf=\"showBrowserOutdated\">\n                <div class=\"card-header bg-warning text-white\">\n                    <i class=\"fa fa-warning fa-fw\"></i> {{'updateBrowser' | i18n}}\n                </div>\n                <div class=\"card-body\">\n                    <p>{{'updateBrowserDesc' | i18n}}</p>\n                    <a class=\"btn btn-block btn-outline-secondary\" target=\"_blank\" href=\"https://browser-update.org/update-browser.html\" rel=\"noopener\">\n                        {{'updateBrowser' | i18n}}\n                    </a>\n                </div>\n            </div>\n            <div class=\"card border-success mb-4\" *ngIf=\"showPremiumCallout\">\n                <div class=\"card-header bg-success text-white\">\n                    <i class=\"fa fa-star fa-fw\"></i> {{'goPremium' | i18n}}\n                </div>\n                <div class=\"card-body\">\n                    <p>{{'premiumUpgradeUnlockFeatures' | i18n}}</p>\n                    <a class=\"btn btn-block btn-outline-secondary\" routerLink=\"/settings/premium\">\n                        {{'goPremium' | i18n}}\n                    </a>\n                </div>\n            </div>\n            <div class=\"card\">\n                <div class=\"card-header d-flex\">\n                    {{'organizations' | i18n}}\n                    <a class=\"ml-auto\" href=\"https://help.bitwarden.com/article/what-is-an-organization/\" target=\"_blank\" rel=\"noopener\" title=\"{{'learnMore' | i18n}}\">\n                        <i class=\"fa fa-question-circle-o\"></i>\n                    </a>\n                </div>\n                <div class=\"card-body\">\n                    <app-organizations [vault]=\"true\"></app-organizations>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<ng-template #attachments></ng-template>\n<ng-template #folderAddEdit></ng-template>\n<ng-template #cipherAddEdit></ng-template>\n<ng-template #share></ng-template>\n<ng-template #collections></ng-template>\n<ng-template #bulkDeleteTemplate></ng-template>\n<ng-template #bulkMoveTemplate></ng-template>\n<ng-template #bulkShareTemplate></ng-template>\n<ng-template #updateKeyTemplate></ng-template>\n";

/***/ }),

/***/ "./src/app/vault/vault.component.ts":
/*!******************************************!*\
  !*** ./src/app/vault/vault.component.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/esm5/common.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/esm5/core.js");
var router_1 = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/esm5/router.js");
var angular2_toaster_1 = __webpack_require__(/*! angular2-toaster */ "./node_modules/angular2-toaster/angular2-toaster.js");
var modal_component_1 = __webpack_require__(/*! ../modal.component */ "./src/app/modal.component.ts");
var organizations_component_1 = __webpack_require__(/*! ../settings/organizations.component */ "./src/app/settings/organizations.component.ts");
var update_key_component_1 = __webpack_require__(/*! ../settings/update-key.component */ "./src/app/settings/update-key.component.ts");
var add_edit_component_1 = __webpack_require__(/*! ./add-edit.component */ "./src/app/vault/add-edit.component.ts");
var attachments_component_1 = __webpack_require__(/*! ./attachments.component */ "./src/app/vault/attachments.component.ts");
var bulk_delete_component_1 = __webpack_require__(/*! ./bulk-delete.component */ "./src/app/vault/bulk-delete.component.ts");
var bulk_move_component_1 = __webpack_require__(/*! ./bulk-move.component */ "./src/app/vault/bulk-move.component.ts");
var bulk_share_component_1 = __webpack_require__(/*! ./bulk-share.component */ "./src/app/vault/bulk-share.component.ts");
var ciphers_component_1 = __webpack_require__(/*! ./ciphers.component */ "./src/app/vault/ciphers.component.ts");
var collections_component_1 = __webpack_require__(/*! ./collections.component */ "./src/app/vault/collections.component.ts");
var folder_add_edit_component_1 = __webpack_require__(/*! ./folder-add-edit.component */ "./src/app/vault/folder-add-edit.component.ts");
var groupings_component_1 = __webpack_require__(/*! ./groupings.component */ "./src/app/vault/groupings.component.ts");
var share_component_1 = __webpack_require__(/*! ./share.component */ "./src/app/vault/share.component.ts");
var crypto_service_1 = __webpack_require__(/*! jslib/abstractions/crypto.service */ "./jslib/src/abstractions/crypto.service.ts");
var i18n_service_1 = __webpack_require__(/*! jslib/abstractions/i18n.service */ "./jslib/src/abstractions/i18n.service.ts");
var messaging_service_1 = __webpack_require__(/*! jslib/abstractions/messaging.service */ "./jslib/src/abstractions/messaging.service.ts");
var platformUtils_service_1 = __webpack_require__(/*! jslib/abstractions/platformUtils.service */ "./jslib/src/abstractions/platformUtils.service.ts");
var sync_service_1 = __webpack_require__(/*! jslib/abstractions/sync.service */ "./jslib/src/abstractions/sync.service.ts");
var token_service_1 = __webpack_require__(/*! jslib/abstractions/token.service */ "./jslib/src/abstractions/token.service.ts");
var user_service_1 = __webpack_require__(/*! jslib/abstractions/user.service */ "./jslib/src/abstractions/user.service.ts");
var VaultComponent = /** @class */ (function () {
    function VaultComponent(syncService, route, router, location, i18nService, componentFactoryResolver, tokenService, cryptoService, messagingService, userService, platformUtilsService, toasterService) {
        this.syncService = syncService;
        this.route = route;
        this.router = router;
        this.location = location;
        this.i18nService = i18nService;
        this.componentFactoryResolver = componentFactoryResolver;
        this.tokenService = tokenService;
        this.cryptoService = cryptoService;
        this.messagingService = messagingService;
        this.userService = userService;
        this.platformUtilsService = platformUtilsService;
        this.toasterService = toasterService;
        this.favorites = false;
        this.type = null;
        this.folderId = null;
        this.collectionId = null;
        this.showVerifyEmail = false;
        this.showBrowserOutdated = false;
        this.showUpdateKey = false;
        this.showPremiumCallout = false;
        this.modal = null;
    }
    VaultComponent.prototype.ngOnInit = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _a, hasEncKey, isPremium;
            var _this = this;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.tokenService.getEmailVerified()];
                    case 1:
                        _a.showVerifyEmail = !(_b.sent());
                        this.showBrowserOutdated = window.navigator.userAgent.indexOf('MSIE') !== -1;
                        return [4 /*yield*/, this.cryptoService.hasEncKey()];
                    case 2:
                        hasEncKey = _b.sent();
                        this.showUpdateKey = !hasEncKey;
                        return [4 /*yield*/, this.tokenService.getPremium()];
                    case 3:
                        isPremium = _b.sent();
                        this.route.queryParams.subscribe(function (params) { return __awaiter(_this, void 0, void 0, function () {
                            var _a, _b, t;
                            return __generator(this, function (_c) {
                                switch (_c.label) {
                                    case 0: return [4 /*yield*/, this.syncService.fullSync(false)];
                                    case 1:
                                        _c.sent();
                                        return [4 /*yield*/, Promise.all([
                                                this.groupingsComponent.load(),
                                                this.organizationsComponent.load(),
                                            ])];
                                    case 2:
                                        _c.sent();
                                        _a = this;
                                        _b = !this.showVerifyEmail && !isPremium &&
                                            !this.platformUtilsService.isSelfHost();
                                        if (!_b) return [3 /*break*/, 4];
                                        return [4 /*yield*/, this.inOrgWithPremium()];
                                    case 3:
                                        _b = !(_c.sent());
                                        _c.label = 4;
                                    case 4:
                                        _a.showPremiumCallout = _b;
                                        if (!(params == null)) return [3 /*break*/, 6];
                                        this.groupingsComponent.selectedAll = true;
                                        return [4 /*yield*/, this.ciphersComponent.load()];
                                    case 5:
                                        _c.sent();
                                        return [2 /*return*/];
                                    case 6:
                                        if (!params.favorites) return [3 /*break*/, 8];
                                        this.groupingsComponent.selectedFavorites = true;
                                        return [4 /*yield*/, this.filterFavorites()];
                                    case 7:
                                        _c.sent();
                                        return [3 /*break*/, 16];
                                    case 8:
                                        if (!params.type) return [3 /*break*/, 10];
                                        t = parseInt(params.type, null);
                                        this.groupingsComponent.selectedType = t;
                                        return [4 /*yield*/, this.filterCipherType(t)];
                                    case 9:
                                        _c.sent();
                                        return [3 /*break*/, 16];
                                    case 10:
                                        if (!params.folderId) return [3 /*break*/, 12];
                                        this.groupingsComponent.selectedFolder = true;
                                        this.groupingsComponent.selectedFolderId = params.folderId;
                                        return [4 /*yield*/, this.filterFolder(params.folderId)];
                                    case 11:
                                        _c.sent();
                                        return [3 /*break*/, 16];
                                    case 12:
                                        if (!params.collectionId) return [3 /*break*/, 14];
                                        this.groupingsComponent.selectedCollectionId = params.collectionId;
                                        return [4 /*yield*/, this.filterCollection(params.collectionId)];
                                    case 13:
                                        _c.sent();
                                        return [3 /*break*/, 16];
                                    case 14:
                                        this.groupingsComponent.selectedAll = true;
                                        return [4 /*yield*/, this.ciphersComponent.load()];
                                    case 15:
                                        _c.sent();
                                        _c.label = 16;
                                    case 16: return [2 /*return*/];
                                }
                            });
                        }); });
                        return [2 /*return*/];
                }
            });
        });
    };
    VaultComponent.prototype.clearGroupingFilters = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.ciphersComponent.showAddNew = true;
                        this.groupingsComponent.searchPlaceholder = this.i18nService.t('searchVault');
                        return [4 /*yield*/, this.ciphersComponent.load()];
                    case 1:
                        _a.sent();
                        this.clearFilters();
                        this.go();
                        return [2 /*return*/];
                }
            });
        });
    };
    VaultComponent.prototype.filterFavorites = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.ciphersComponent.showAddNew = true;
                        this.groupingsComponent.searchPlaceholder = this.i18nService.t('searchFavorites');
                        return [4 /*yield*/, this.ciphersComponent.load(function (c) { return c.favorite; })];
                    case 1:
                        _a.sent();
                        this.clearFilters();
                        this.favorites = true;
                        this.go();
                        return [2 /*return*/];
                }
            });
        });
    };
    VaultComponent.prototype.filterCipherType = function (type) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.ciphersComponent.showAddNew = true;
                        this.groupingsComponent.searchPlaceholder = this.i18nService.t('searchType');
                        return [4 /*yield*/, this.ciphersComponent.load(function (c) { return c.type === type; })];
                    case 1:
                        _a.sent();
                        this.clearFilters();
                        this.type = type;
                        this.go();
                        return [2 /*return*/];
                }
            });
        });
    };
    VaultComponent.prototype.filterFolder = function (folderId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.ciphersComponent.showAddNew = true;
                        folderId = folderId === 'none' ? null : folderId;
                        this.groupingsComponent.searchPlaceholder = this.i18nService.t('searchFolder');
                        return [4 /*yield*/, this.ciphersComponent.load(function (c) { return c.folderId === folderId; })];
                    case 1:
                        _a.sent();
                        this.clearFilters();
                        this.folderId = folderId == null ? 'none' : folderId;
                        this.go();
                        return [2 /*return*/];
                }
            });
        });
    };
    VaultComponent.prototype.filterCollection = function (collectionId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.ciphersComponent.showAddNew = false;
                        this.groupingsComponent.searchPlaceholder = this.i18nService.t('searchCollection');
                        return [4 /*yield*/, this.ciphersComponent.load(function (c) { return c.collectionIds.indexOf(collectionId) > -1; })];
                    case 1:
                        _a.sent();
                        this.clearFilters();
                        this.collectionId = collectionId;
                        this.go();
                        return [2 /*return*/];
                }
            });
        });
    };
    VaultComponent.prototype.filterSearchText = function (searchText) {
        this.ciphersComponent.searchText = searchText;
    };
    VaultComponent.prototype.editCipherAttachments = function (cipher) {
        return __awaiter(this, void 0, void 0, function () {
            var premium, org, factory, childComponent, madeAttachmentChanges;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.tokenService.getPremium()];
                    case 1:
                        premium = _a.sent();
                        if (!(cipher.organizationId == null && !premium)) return [3 /*break*/, 2];
                        this.messagingService.send('premiumRequired');
                        return [2 /*return*/];
                    case 2:
                        if (!(cipher.organizationId != null)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.userService.getOrganization(cipher.organizationId)];
                    case 3:
                        org = _a.sent();
                        if (org != null && (org.maxStorageGb == null || org.maxStorageGb === 0)) {
                            this.messagingService.send('upgradeOrganization', { organizationId: cipher.organizationId });
                            return [2 /*return*/];
                        }
                        _a.label = 4;
                    case 4:
                        if (this.modal != null) {
                            this.modal.close();
                        }
                        factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
                        this.modal = this.attachmentsModalRef.createComponent(factory).instance;
                        childComponent = this.modal.show(attachments_component_1.AttachmentsComponent, this.attachmentsModalRef);
                        childComponent.cipherId = cipher.id;
                        madeAttachmentChanges = false;
                        childComponent.onUploadedAttachment.subscribe(function () { return madeAttachmentChanges = true; });
                        childComponent.onDeletedAttachment.subscribe(function () { return madeAttachmentChanges = true; });
                        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
                            return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        this.modal = null;
                                        if (!madeAttachmentChanges) return [3 /*break*/, 2];
                                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                                    case 1:
                                        _a.sent();
                                        _a.label = 2;
                                    case 2:
                                        madeAttachmentChanges = false;
                                        return [2 /*return*/];
                                }
                            });
                        }); });
                        return [2 /*return*/];
                }
            });
        });
    };
    VaultComponent.prototype.shareCipher = function (cipher) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.shareModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(share_component_1.ShareComponent, this.shareModalRef);
        childComponent.cipherId = cipher.id;
        childComponent.onSharedCipher.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal.close();
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.modal = null;
                return [2 /*return*/];
            });
        }); });
    };
    VaultComponent.prototype.editCipherCollections = function (cipher) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.collectionsModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(collections_component_1.CollectionsComponent, this.collectionsModalRef);
        childComponent.cipherId = cipher.id;
        childComponent.onSavedCollections.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal.close();
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.modal = null;
                return [2 /*return*/];
            });
        }); });
    };
    VaultComponent.prototype.addFolder = function () {
        return __awaiter(this, void 0, void 0, function () {
            var factory, childComponent;
            var _this = this;
            return __generator(this, function (_a) {
                if (this.modal != null) {
                    this.modal.close();
                }
                factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
                this.modal = this.folderAddEditModalRef.createComponent(factory).instance;
                childComponent = this.modal.show(folder_add_edit_component_1.FolderAddEditComponent, this.folderAddEditModalRef);
                childComponent.folderId = null;
                childComponent.onSavedFolder.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this.modal.close();
                                return [4 /*yield*/, this.groupingsComponent.loadFolders()];
                            case 1:
                                _a.sent();
                                return [2 /*return*/];
                        }
                    });
                }); });
                this.modal.onClosed.subscribe(function () {
                    _this.modal = null;
                });
                return [2 /*return*/];
            });
        });
    };
    VaultComponent.prototype.editFolder = function (folderId) {
        return __awaiter(this, void 0, void 0, function () {
            var factory, childComponent;
            var _this = this;
            return __generator(this, function (_a) {
                if (this.modal != null) {
                    this.modal.close();
                }
                factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
                this.modal = this.folderAddEditModalRef.createComponent(factory).instance;
                childComponent = this.modal.show(folder_add_edit_component_1.FolderAddEditComponent, this.folderAddEditModalRef);
                childComponent.folderId = folderId;
                childComponent.onSavedFolder.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this.modal.close();
                                return [4 /*yield*/, this.groupingsComponent.loadFolders()];
                            case 1:
                                _a.sent();
                                return [2 /*return*/];
                        }
                    });
                }); });
                childComponent.onDeletedFolder.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this.modal.close();
                                return [4 /*yield*/, this.groupingsComponent.loadFolders()];
                            case 1:
                                _a.sent();
                                return [4 /*yield*/, this.filterFolder('none')];
                            case 2:
                                _a.sent();
                                this.groupingsComponent.selectedFolderId = null;
                                return [2 /*return*/];
                        }
                    });
                }); });
                this.modal.onClosed.subscribe(function () {
                    _this.modal = null;
                });
                return [2 /*return*/];
            });
        });
    };
    VaultComponent.prototype.addCipher = function () {
        var component = this.editCipher(null);
        component.type = this.type;
        component.folderId = this.folderId === 'none' ? null : this.folderId;
    };
    VaultComponent.prototype.editCipher = function (cipher) {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.cipherAddEditModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(add_edit_component_1.AddEditComponent, this.cipherAddEditModalRef);
        childComponent.cipherId = cipher == null ? null : cipher.id;
        childComponent.onSavedCipher.subscribe(function (c) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal.close();
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        childComponent.onDeletedCipher.subscribe(function (c) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal.close();
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
        return childComponent;
    };
    VaultComponent.prototype.bulkDelete = function () {
        var _this = this;
        var selectedIds = this.ciphersComponent.getSelectedIds();
        if (selectedIds.length === 0) {
            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('nothingSelected'));
            return;
        }
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.bulkDeleteModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(bulk_delete_component_1.BulkDeleteComponent, this.bulkDeleteModalRef);
        childComponent.cipherIds = selectedIds;
        childComponent.onDeleted.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal.close();
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
    };
    VaultComponent.prototype.bulkShare = function () {
        var _this = this;
        var selectedCiphers = this.ciphersComponent.getSelected();
        if (selectedCiphers.length === 0) {
            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('nothingSelected'));
            return;
        }
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.bulkShareModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(bulk_share_component_1.BulkShareComponent, this.bulkShareModalRef);
        childComponent.ciphers = selectedCiphers;
        childComponent.onShared.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal.close();
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        this.modal.onClosed.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                this.modal = null;
                return [2 /*return*/];
            });
        }); });
    };
    VaultComponent.prototype.bulkMove = function () {
        var _this = this;
        var selectedIds = this.ciphersComponent.getSelectedIds();
        if (selectedIds.length === 0) {
            this.toasterService.popAsync('error', this.i18nService.t('errorOccurred'), this.i18nService.t('nothingSelected'));
            return;
        }
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.bulkMoveModalRef.createComponent(factory).instance;
        var childComponent = this.modal.show(bulk_move_component_1.BulkMoveComponent, this.bulkMoveModalRef);
        childComponent.cipherIds = selectedIds;
        childComponent.onMoved.subscribe(function () { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.modal.close();
                        return [4 /*yield*/, this.ciphersComponent.refresh()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        }); });
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
    };
    VaultComponent.prototype.selectAll = function (select) {
        this.ciphersComponent.selectAll(select);
    };
    VaultComponent.prototype.updateKey = function () {
        var _this = this;
        if (this.modal != null) {
            this.modal.close();
        }
        var factory = this.componentFactoryResolver.resolveComponentFactory(modal_component_1.ModalComponent);
        this.modal = this.updateKeyModalRef.createComponent(factory).instance;
        this.modal.show(update_key_component_1.UpdateKeyComponent, this.updateKeyModalRef);
        this.modal.onClosed.subscribe(function () {
            _this.modal = null;
        });
    };
    VaultComponent.prototype.clearFilters = function () {
        this.folderId = null;
        this.collectionId = null;
        this.favorites = false;
        this.type = null;
    };
    VaultComponent.prototype.go = function (queryParams) {
        if (queryParams === void 0) { queryParams = null; }
        if (queryParams == null) {
            queryParams = {
                favorites: this.favorites ? true : null,
                type: this.type,
                folderId: this.folderId,
                collectionId: this.collectionId,
            };
        }
        var url = this.router.createUrlTree(['vault'], { queryParams: queryParams }).toString();
        this.location.go(url);
    };
    VaultComponent.prototype.inOrgWithPremium = function () {
        return __awaiter(this, void 0, void 0, function () {
            var orgs, i;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.userService.getAllOrganizations()];
                    case 1:
                        orgs = _a.sent();
                        for (i = 0; i < orgs.length; i++) {
                            if (orgs[i].usersGetPremium) {
                                return [2 /*return*/, true];
                            }
                        }
                        return [2 /*return*/, false];
                }
            });
        });
    };
    __decorate([
        core_1.ViewChild(groupings_component_1.GroupingsComponent),
        __metadata("design:type", groupings_component_1.GroupingsComponent)
    ], VaultComponent.prototype, "groupingsComponent", void 0);
    __decorate([
        core_1.ViewChild(ciphers_component_1.CiphersComponent),
        __metadata("design:type", ciphers_component_1.CiphersComponent)
    ], VaultComponent.prototype, "ciphersComponent", void 0);
    __decorate([
        core_1.ViewChild(organizations_component_1.OrganizationsComponent),
        __metadata("design:type", organizations_component_1.OrganizationsComponent)
    ], VaultComponent.prototype, "organizationsComponent", void 0);
    __decorate([
        core_1.ViewChild('attachments', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "attachmentsModalRef", void 0);
    __decorate([
        core_1.ViewChild('folderAddEdit', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "folderAddEditModalRef", void 0);
    __decorate([
        core_1.ViewChild('cipherAddEdit', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "cipherAddEditModalRef", void 0);
    __decorate([
        core_1.ViewChild('share', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "shareModalRef", void 0);
    __decorate([
        core_1.ViewChild('collections', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "collectionsModalRef", void 0);
    __decorate([
        core_1.ViewChild('bulkDeleteTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "bulkDeleteModalRef", void 0);
    __decorate([
        core_1.ViewChild('bulkMoveTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "bulkMoveModalRef", void 0);
    __decorate([
        core_1.ViewChild('bulkShareTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "bulkShareModalRef", void 0);
    __decorate([
        core_1.ViewChild('updateKeyTemplate', { read: core_1.ViewContainerRef }),
        __metadata("design:type", core_1.ViewContainerRef)
    ], VaultComponent.prototype, "updateKeyModalRef", void 0);
    VaultComponent = __decorate([
        core_1.Component({
            selector: 'app-vault',
            template: __webpack_require__(/*! ./vault.component.html */ "./src/app/vault/vault.component.html"),
        }),
        __metadata("design:paramtypes", [sync_service_1.SyncService, router_1.ActivatedRoute,
            router_1.Router, common_1.Location,
            i18n_service_1.I18nService, core_1.ComponentFactoryResolver,
            token_service_1.TokenService, crypto_service_1.CryptoService,
            messaging_service_1.MessagingService, user_service_1.UserService,
            platformUtils_service_1.PlatformUtilsService, angular2_toaster_1.ToasterService])
    ], VaultComponent);
    return VaultComponent;
}());
exports.VaultComponent = VaultComponent;


/***/ }),

/***/ "./src/images/cards.png":
/*!******************************!*\
  !*** ./src/images/cards.png ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/cards.png";

/***/ }),

/***/ "./src/images/logo-dark@2x.png":
/*!*************************************!*\
  !*** ./src/images/logo-dark@2x.png ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/logo-dark@2x.png";

/***/ }),

/***/ "./src/images/totp-countdown.png":
/*!***************************************!*\
  !*** ./src/images/totp-countdown.png ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/totp-countdown.png";

/***/ }),

/***/ "./src/images/two-factor/0.png":
/*!*************************************!*\
  !*** ./src/images/two-factor/0.png ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/0.png";

/***/ }),

/***/ "./src/images/two-factor/1.png":
/*!*************************************!*\
  !*** ./src/images/two-factor/1.png ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/1.png";

/***/ }),

/***/ "./src/images/two-factor/2.png":
/*!*************************************!*\
  !*** ./src/images/two-factor/2.png ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/2.png";

/***/ }),

/***/ "./src/images/two-factor/3.png":
/*!*************************************!*\
  !*** ./src/images/two-factor/3.png ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/3.png";

/***/ }),

/***/ "./src/images/two-factor/4.png":
/*!*************************************!*\
  !*** ./src/images/two-factor/4.png ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/4.png";

/***/ }),

/***/ "./src/images/u2fkey.jpg":
/*!*******************************!*\
  !*** ./src/images/u2fkey.jpg ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/u2fkey.jpg";

/***/ }),

/***/ "./src/images/yubikey.jpg":
/*!********************************!*\
  !*** ./src/images/yubikey.jpg ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/yubikey.jpg";

/***/ }),

/***/ "./src/scss/styles.scss":
/*!******************************!*\
  !*** ./src/scss/styles.scss ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./src/services/broadcasterMessaging.service.ts":
/*!******************************************************!*\
  !*** ./src/services/broadcasterMessaging.service.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var BroadcasterMessagingService = /** @class */ (function () {
    function BroadcasterMessagingService(broadcasterService) {
        this.broadcasterService = broadcasterService;
    }
    BroadcasterMessagingService.prototype.send = function (subscriber, arg) {
        if (arg === void 0) { arg = {}; }
        var message = Object.assign({}, { command: subscriber }, arg);
        this.broadcasterService.send(message);
    };
    return BroadcasterMessagingService;
}());
exports.BroadcasterMessagingService = BroadcasterMessagingService;


/***/ }),

/***/ "./src/services/htmlStorage.service.ts":
/*!*********************************************!*\
  !*** ./src/services/htmlStorage.service.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var services_1 = __webpack_require__(/*! jslib/services */ "./jslib/src/services/index.ts");
var HtmlStorageService = /** @class */ (function () {
    function HtmlStorageService(platformUtilsService) {
        this.platformUtilsService = platformUtilsService;
        this.localStorageKeys = new Set(['appId', 'anonymousAppId', 'rememberedEmail', 'passwordGenerationOptions',
            services_1.ConstantsService.disableFaviconKey, services_1.ConstantsService.lockOptionKey, 'rememberEmail',
            services_1.ConstantsService.localeKey, services_1.ConstantsService.lockOptionKey]);
        this.localStorageStartsWithKeys = ['twoFactorToken_'];
    }
    HtmlStorageService.prototype.init = function () {
        return __awaiter(this, void 0, void 0, function () {
            var lockOption;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.get(services_1.ConstantsService.lockOptionKey)];
                    case 1:
                        lockOption = _a.sent();
                        if (!(lockOption == null && !this.platformUtilsService.isDev())) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.save(services_1.ConstantsService.lockOptionKey, 15)];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    HtmlStorageService.prototype.get = function (key) {
        var json = null;
        if (this.isLocalStorage(key)) {
            json = window.localStorage.getItem(key);
        }
        else {
            json = window.sessionStorage.getItem(key);
        }
        if (json != null) {
            var obj = JSON.parse(json);
            return Promise.resolve(obj);
        }
        return Promise.resolve(null);
    };
    HtmlStorageService.prototype.save = function (key, obj) {
        if (obj == null) {
            return this.remove(key);
        }
        var json = JSON.stringify(obj);
        if (this.isLocalStorage(key)) {
            window.localStorage.setItem(key, json);
        }
        else {
            window.sessionStorage.setItem(key, json);
        }
        return Promise.resolve();
    };
    HtmlStorageService.prototype.remove = function (key) {
        if (this.isLocalStorage(key)) {
            window.localStorage.removeItem(key);
        }
        else {
            window.sessionStorage.removeItem(key);
        }
        return Promise.resolve();
    };
    HtmlStorageService.prototype.isLocalStorage = function (key) {
        if (this.localStorageKeys.has(key)) {
            return true;
        }
        for (var _i = 0, _a = this.localStorageStartsWithKeys; _i < _a.length; _i++) {
            var swKey = _a[_i];
            if (key.startsWith(swKey)) {
                return true;
            }
        }
        return false;
    };
    return HtmlStorageService;
}());
exports.HtmlStorageService = HtmlStorageService;


/***/ }),

/***/ "./src/services/i18n.service.ts":
/*!**************************************!*\
  !*** ./src/services/i18n.service.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var i18n_service_1 = __webpack_require__(/*! jslib/services/i18n.service */ "./jslib/src/services/i18n.service.ts");
var I18nService = /** @class */ (function (_super) {
    __extends(I18nService, _super);
    function I18nService(systemLanguage, localesDirectory) {
        var _this = _super.call(this, systemLanguage || 'en-US', localesDirectory, function (formattedLocale) { return __awaiter(_this, void 0, void 0, function () {
            var filePath, localesResult, locales;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        filePath = this.localesDirectory + '/' + formattedLocale + '/messages.json?cache=' +
                            "sbigc";
                        return [4 /*yield*/, fetch(filePath)];
                    case 1:
                        localesResult = _a.sent();
                        return [4 /*yield*/, localesResult.json()];
                    case 2:
                        locales = _a.sent();
                        return [2 /*return*/, locales];
                }
            });
        }); }) || this;
        _this.supportedTranslationLocales = [
            'en', 'da', 'sk',
        ];
        return _this;
    }
    return I18nService;
}(i18n_service_1.I18nService));
exports.I18nService = I18nService;


/***/ }),

/***/ "./src/services/memoryStorage.service.ts":
/*!***********************************************!*\
  !*** ./src/services/memoryStorage.service.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var MemoryStorageService = /** @class */ (function () {
    function MemoryStorageService() {
        this.store = new Map();
    }
    MemoryStorageService.prototype.get = function (key) {
        if (this.store.has(key)) {
            var obj = this.store.get(key);
            return Promise.resolve(obj);
        }
        return Promise.resolve(null);
    };
    MemoryStorageService.prototype.save = function (key, obj) {
        if (obj == null) {
            return this.remove(key);
        }
        this.store.set(key, obj);
        return Promise.resolve();
    };
    MemoryStorageService.prototype.remove = function (key) {
        this.store.delete(key);
        return Promise.resolve();
    };
    return MemoryStorageService;
}());
exports.MemoryStorageService = MemoryStorageService;


/***/ }),

/***/ "./src/services/webPlatformUtils.service.ts":
/*!**************************************************!*\
  !*** ./src/services/webPlatformUtils.service.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var _swal = __webpack_require__(/*! sweetalert */ "./node_modules/sweetalert/dist/sweetalert.min.js");
var deviceType_1 = __webpack_require__(/*! jslib/enums/deviceType */ "./jslib/src/enums/deviceType.ts");
var utils_1 = __webpack_require__(/*! jslib/misc/utils */ "./jslib/src/misc/utils.ts");
// Hack due to Angular 5.2 bug
var swal = _swal;
var WebPlatformUtilsService = /** @class */ (function () {
    function WebPlatformUtilsService(i18nService) {
        this.i18nService = i18nService;
        this.identityClientId = 'web';
        this.browserCache = null;
    }
    WebPlatformUtilsService.prototype.getDevice = function () {
        if (this.browserCache != null) {
            return this.browserCache;
        }
        if (navigator.userAgent.indexOf(' Firefox/') !== -1 || navigator.userAgent.indexOf(' Gecko/') !== -1) {
            this.browserCache = deviceType_1.DeviceType.FirefoxBrowser;
        }
        else if (navigator.userAgent.indexOf(' OPR/') >= 0) {
            this.browserCache = deviceType_1.DeviceType.OperaBrowser;
        }
        else if (navigator.userAgent.indexOf(' Edge/') !== -1) {
            this.browserCache = deviceType_1.DeviceType.EdgeBrowser;
        }
        else if (navigator.userAgent.indexOf(' Vivaldi/') !== -1) {
            this.browserCache = deviceType_1.DeviceType.VivaldiBrowser;
        }
        else if (navigator.userAgent.indexOf(' Safari/') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {
            this.browserCache = deviceType_1.DeviceType.SafariBrowser;
        }
        else if (window.chrome && navigator.userAgent.indexOf(' Chrome/') !== -1) {
            this.browserCache = deviceType_1.DeviceType.ChromeBrowser;
        }
        else if (navigator.userAgent.indexOf(' Trident/') !== -1) {
            this.browserCache = deviceType_1.DeviceType.IEBrowser;
        }
        else {
            this.browserCache = deviceType_1.DeviceType.UnknownBrowser;
        }
        return this.browserCache;
    };
    WebPlatformUtilsService.prototype.getDeviceString = function () {
        var device = deviceType_1.DeviceType[this.getDevice()].toLowerCase();
        return device.replace('browser', '');
    };
    WebPlatformUtilsService.prototype.isFirefox = function () {
        return this.getDevice() === deviceType_1.DeviceType.FirefoxBrowser;
    };
    WebPlatformUtilsService.prototype.isChrome = function () {
        return this.getDevice() === deviceType_1.DeviceType.ChromeBrowser;
    };
    WebPlatformUtilsService.prototype.isEdge = function () {
        return this.getDevice() === deviceType_1.DeviceType.EdgeBrowser;
    };
    WebPlatformUtilsService.prototype.isOpera = function () {
        return this.getDevice() === deviceType_1.DeviceType.OperaBrowser;
    };
    WebPlatformUtilsService.prototype.isVivaldi = function () {
        return this.getDevice() === deviceType_1.DeviceType.VivaldiBrowser;
    };
    WebPlatformUtilsService.prototype.isSafari = function () {
        return this.getDevice() === deviceType_1.DeviceType.SafariBrowser;
    };
    WebPlatformUtilsService.prototype.isIE = function () {
        return this.getDevice() === deviceType_1.DeviceType.IEBrowser;
    };
    WebPlatformUtilsService.prototype.isMacAppStore = function () {
        return false;
    };
    WebPlatformUtilsService.prototype.analyticsId = function () {
        return 'UA-81915606-3';
    };
    WebPlatformUtilsService.prototype.getDomain = function (uriString) {
        return utils_1.Utils.getHostname(uriString);
    };
    WebPlatformUtilsService.prototype.isViewOpen = function () {
        return false;
    };
    WebPlatformUtilsService.prototype.lockTimeout = function () {
        return null;
    };
    WebPlatformUtilsService.prototype.launchUri = function (uri, options) {
        var a = document.createElement('a');
        a.href = uri;
        a.target = '_blank';
        a.rel = 'noreferrer noopener';
        a.classList.add('d-none');
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    };
    WebPlatformUtilsService.prototype.saveFile = function (win, blobData, blobOptions, fileName) {
        var blob = null;
        if (blobOptions != null && !this.isIE()) {
            blob = new Blob([blobData], blobOptions);
        }
        else {
            blob = new Blob([blobData]);
        }
        if (navigator.msSaveOrOpenBlob) {
            navigator.msSaveBlob(blob, fileName);
        }
        else {
            var a = win.document.createElement('a');
            a.href = win.URL.createObjectURL(blob);
            a.download = fileName;
            a.style.position = 'fixed';
            win.document.body.appendChild(a);
            a.click();
            win.document.body.removeChild(a);
        }
    };
    WebPlatformUtilsService.prototype.getApplicationVersion = function () {
        return "2.0.0" || '-';
    };
    WebPlatformUtilsService.prototype.supportsU2f = function (win) {
        if (win != null && win.u2f != null) {
            return true;
        }
        return (this.isChrome() || this.isOpera() || this.isVivaldi()) && !this.isMobile(win);
    };
    WebPlatformUtilsService.prototype.supportsDuo = function () {
        return true;
    };
    WebPlatformUtilsService.prototype.showToast = function (type, title, text, global) {
        throw new Error('showToast not implemented');
    };
    WebPlatformUtilsService.prototype.showDialog = function (text, title, confirmText, cancelText, type) {
        return __awaiter(this, void 0, void 0, function () {
            var buttons, contentDiv, icon, titleDiv, textDiv, confirmed;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        buttons = [confirmText == null ? this.i18nService.t('ok') : confirmText];
                        if (cancelText != null) {
                            buttons.unshift(cancelText);
                        }
                        contentDiv = document.createElement('div');
                        if (type != null) {
                            icon = document.createElement('i');
                            icon.classList.add('swal-custom-icon');
                            switch (type) {
                                case 'success':
                                    icon.classList.add('fa', 'fa-check', 'text-success');
                                    break;
                                case 'warning':
                                    icon.classList.add('fa', 'fa-warning', 'text-warning');
                                    break;
                                case 'error':
                                    icon.classList.add('fa', 'fa-bolt', 'text-danger');
                                    break;
                                case 'info':
                                    icon.classList.add('fa', 'fa-info-circle', 'text-info');
                                    break;
                                default:
                                    break;
                            }
                            if (icon.classList.contains('fa')) {
                                contentDiv.appendChild(icon);
                            }
                        }
                        if (title != null) {
                            titleDiv = document.createElement('div');
                            titleDiv.classList.add('swal-title');
                            titleDiv.appendChild(document.createTextNode(title));
                            contentDiv.appendChild(titleDiv);
                        }
                        if (text != null) {
                            textDiv = document.createElement('div');
                            textDiv.classList.add('swal-text');
                            textDiv.appendChild(document.createTextNode(text));
                            contentDiv.appendChild(textDiv);
                        }
                        return [4 /*yield*/, swal({
                                content: { element: contentDiv },
                                buttons: buttons,
                            })];
                    case 1:
                        confirmed = _a.sent();
                        return [2 /*return*/, confirmed];
                }
            });
        });
    };
    WebPlatformUtilsService.prototype.isDev = function () {
        return "development" === 'development';
    };
    WebPlatformUtilsService.prototype.isSelfHost = function () {
        return false.toString() === 'true';
    };
    WebPlatformUtilsService.prototype.copyToClipboard = function (text, options) {
        var doc = options ? options.doc : window.document;
        if (window.clipboardData && window.clipboardData.setData) {
            // IE specific code path to prevent textarea being shown while dialog is visible.
            window.clipboardData.setData('Text', text);
        }
        else if (doc.queryCommandSupported && doc.queryCommandSupported('copy')) {
            var textarea = doc.createElement('textarea');
            textarea.textContent = text;
            // Prevent scrolling to bottom of page in MS Edge.
            textarea.style.position = 'fixed';
            var copyEl = doc.body;
            // For some reason copy command won't work in Firefox when modal is open if appending to body
            if (this.isFirefox() && doc.body.classList.contains('modal-open')) {
                copyEl = doc.body.querySelector('.modal');
            }
            copyEl.appendChild(textarea);
            textarea.select();
            try {
                // Security exception may be thrown by some browsers.
                doc.execCommand('copy');
            }
            catch (e) {
                // tslint:disable-next-line
                console.warn('Copy to clipboard failed.', e);
            }
            finally {
                copyEl.removeChild(textarea);
            }
        }
    };
    WebPlatformUtilsService.prototype.isMobile = function (win) {
        var mobile = false;
        (function (a) {
            // tslint:disable-next-line
            if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) {
                mobile = true;
            }
        })(win.navigator.userAgent || win.navigator.vendor || win.opera);
        return mobile || win.navigator.userAgent.match(/iPad/i) != null;
    };
    return WebPlatformUtilsService;
}());
exports.WebPlatformUtilsService = WebPlatformUtilsService;


/***/ }),

/***/ 0:
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ })

/******/ });
//# sourceMappingURL=main.def5d609e86996c2a09b.js.map